(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-91c64e2a"],{b5c7:function(t,e,a){"use strict";a("d09b")},d09b:function(t,e,a){},f486:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n     飞书或钉钉内免登录认证：\n    "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[e("p",[t._v("认证地址必须在飞书应用中添加到安全设置")]),t._v("\n      应用内打开的链接 + 认证地址/编码 + 参数\n      "),e("p",[t._v("https://applink.feishu.cn/client/web_url/open?url=http://10.241.0.40:8888/api/acc/m/F7mwALszvsTYiBPCqYRKqT?order_id=666")])])],2),e("div",{staticClass:"search-con search-con-top"},[e("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"请输入关键字进行搜素"},model:{value:t.initPara.searchVal,callback:function(e){t.$set(t.initPara,"searchVal",e)},expression:"initPara.searchVal"}}),e("Button",{staticClass:"search-btn",on:{click:t.handleAdd}},[t._v("添加链接")])],1),e("Table",{ref:"selection",attrs:{size:"small",columns:t.columns,data:t.tableData,loading:t.i.tableLoading},on:{"on-sort-change":t.handleSort}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"left"}},[e("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),e("link-edit",{attrs:{modalData:t.modalData,formValidate:t.theData},on:{"save-data":t.saveData,close:t.handleClose}})],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),l=(a("7f7f"),a("96cf"),a("3b8d")),o=a("2f62"),s=a("66df"),c=function(t){return s["a"].request({url:"/api/p/v4/login/link/",method:"get",params:t})},d=function(t,e){return s["a"].request({url:"/api/p/v4/login/link/",method:e,data:t})},u=function(){var t=this,e=t._self._c;return e("Drawer",{attrs:{title:t.modalData.title,width:"750px;",draggable:"","mask-closable":!1,"footer-hide":!0},model:{value:t.modalData.show,callback:function(e){t.$set(t.modalData,"show",e)},expression:"modalData.show"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"名称",prop:"name"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入..."},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),e("FormItem",{attrs:{label:"认证地址",prop:"login_url"}},[e("Input",{attrs:{maxlength:"250",type:"text",placeholder:"请输入..."},model:{value:t.formValidate.login_url,callback:function(e){t.$set(t.formValidate,"login_url",e)},expression:"formValidate.login_url"}})],1),e("FormItem",{attrs:{label:"真实地址",prop:"real_url"}},[e("Input",{attrs:{maxlength:"250",type:"text",placeholder:"请输入..."},model:{value:t.formValidate.real_url,callback:function(e){t.$set(t.formValidate,"real_url",e)},expression:"formValidate.real_url"}})],1),e("FormItem",{attrs:{label:"client_id",prop:"client_id"}},[e("Input",{attrs:{maxlength:"200",type:"text",placeholder:"请输入...."},model:{value:t.formValidate.client_id,callback:function(e){t.$set(t.formValidate,"client_id",e)},expression:"formValidate.client_id"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},h=[],m={name:"linkEdit",props:{modalData:{type:Object,default:{}},formValidate:{type:Object,default:{}}},data:function(){return{btnLoading:!1,ruleValidate:{name:[{required:!0,type:"string",message:"名称不能为空",trigger:"blur"}],login_url:[{required:!0,type:"string",message:"不能为空",trigger:"blur"}],real_url:[{required:!0,type:"string",message:"不能为空",trigger:"blur"}],client_id:[{required:!0,type:"string",message:"不能为空",trigger:"blur"}]}}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.btnLoading=!0,setTimeout((function(){e.$emit("save-data",e.formValidate,e.modalData.action),e.btnLoading=!1}),500)):e.$Message.error("表单校验不通过!")}))},handlerReset:function(t){this.$refs[t].resetFields()}}},p=m,f=a("2877"),g=Object(f["a"])(p,u,h,!1,null,null,null),b=g.exports;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={components:{linkEdit:b},data:function(){var t=this;return{theData:{},btn_loading:!1,modalData:{},initForm:{},initPara:{page_number:1,page_size:15,searchVal:null,order_by:"name",order:"ascend"},i:{pageTotal:0,tableLoading:!0},tableData:[],columns:[{title:"编码",key:"code",minWidth:150,maxWidth:200,sortable:!0},{title:"名称",key:"name",minWidth:100,maxWidth:200,sortable:!0},{title:"认证地址",key:"login_url",minWidth:150,sortable:!0},{title:"真实地址",key:"real_url",minWidth:150,sortable:!0},{title:"链接",key:"show_url",minWidth:150,sortable:!0},{title:"client_id",key:"client_id",minWidth:100,sortable:!0},{title:"#",key:"handle",minWidth:130,maxWidth:150,render:function(e,a){return e("div",[e("a",{style:{marginRight:"10px"},on:{click:function(){t.handleEdit(a.row)}}},"编辑"),e("a",{style:{color:"red",marginRight:"1px"},on:{click:function(){t.handleDelete(a)}}},"删除")])}}]}},methods:{handleGetData:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,c(this.initPara);case 1:e=t.sent,0==e.data.code?(this.tableData=e.data.data,this.i.pageTotal=e.data.count):this.$Message.error(e.data.msg),this.i.tableLoading=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleClose:function(){this.modalData.show=!1,this.theData=this.$options.data().theData,this.handleGetData(),this.selectList=[]},handleAdd:function(){this.modalData={show:!0,title:"添加记录",action:"post"},this.theData=this.$options.data().initForm},handleEdit:function(t){this.modalData={show:!0,title:"编辑记录",action:"put"},this.theData=t},saveData:function(t,e){var a=this;d(t,e).then((function(t){0==t.data.code?(a.$Message.success("".concat(t.data.msg)),a.handleClose()):a.$Message.error("".concat(t.data.msg))}))},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提醒",content:"<p>删除：《".concat(t.row.name,"》之后无法找回，请谨慎操作！</p>"),onOk:function(){setTimeout((function(){d({id_list:[t.row.id]},"delete").then((function(t){0==t.data.code?(e.$Message.success(t.data.msg),e.handleClose()):e.$Message.error(t.data.msg)}))}),500)},onCancel:function(){e.$Message.info("回头是岸~")}})},handleSearch:function(){this.initPara.page_number=1,this.handleGetData()},handleSort:function(t,e,a){this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.handleGetData()},handlerChangePage:function(t){this.initPara.page_number=t,this.handleGetData()},handlePageSize:function(t){this.initPara.page_number=1,this.initPara.page_size=t,this.handleGetData()}},watch:{},computed:v({},Object(o["e"])({rules:function(t){return t.user.rules}})),mounted:function(){this.handleGetData()}},D=y,w=(a("b5c7"),Object(f["a"])(D,n,i,!1,null,"03b3c3b3",null));e["default"]=w.exports}}]);