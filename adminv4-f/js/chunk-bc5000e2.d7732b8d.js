(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-bc5000e2"],{"026a":function(t,e,a){"use strict";a("b472")},b472:function(t,e,a){},d07e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n    使用说明：\n    "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[t._v("\n      全球项目定制服务管理用于配置和维护系统中的各项服务。您可以在这里添加、编辑或删除服务。每个服务需要包含服务名称、描述、分类和访问链接等信息。\n    ")])],2),e("div",{staticClass:"search-con search-con-top"},[e("Button",{staticClass:"search-btn",on:{click:t.handleAdd}},[t._v("添加")])],1),e("Table",{ref:"selection",attrs:{size:"small",columns:t.columns,data:t.paginatedData},on:{"on-sort-change":t.handleSort}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"left","margin-bottom":"20px"}},[e("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),e("global-service-edit",{attrs:{modalData:t.modalData,formValidate:t.theData},on:{"submit-app":t.saveData,close:t.handleClose}})],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),o=a("7618"),s=a("2f62"),l=a("e371"),c=function(){var t=this,e=t._self._c;return e("Drawer",{attrs:{title:t.modalData.title,"mask-closable":!1,width:"750px;",draggable:"","footer-hide":!0},model:{value:t.modalData.show,callback:function(e){t.$set(t.modalData,"show",e)},expression:"modalData.show"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"服务名",prop:"name"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入服务名..."},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),e("FormItem",{attrs:{label:"服务描述",prop:"description"}},[e("Input",{attrs:{maxlength:"100",type:"text",placeholder:"请输入服务描述..."},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1),e("FormItem",{attrs:{label:"分类",prop:"category"}},[e("Select",{attrs:{placeholder:"请选择分类..."},model:{value:t.formValidate.category,callback:function(e){t.$set(t.formValidate,"category",e)},expression:"formValidate.category"}},t._l(t.categoryList,(function(a){return e("Option",{key:a.id,attrs:{value:a.name}},[t._v("\n          "+t._s(a.name)+"\n        ")])})),1)],1),e("FormItem",{attrs:{label:"链接",prop:"href"}},[e("Input",{attrs:{maxlength:"100",type:"text",placeholder:"请输入链接..."},model:{value:t.formValidate.href,callback:function(e){t.$set(t.formValidate,"href",e)},expression:"formValidate.href"}})],1),e("FormItem",{attrs:{label:"regions详情",prop:"regions","label-width":110}},[e("code-editor",{attrs:{lang:"json",read:!1,eHeight:65},model:{value:t.formValidate.regions,callback:function(e){t.$set(t.formValidate,"regions",e)},expression:"formValidate.regions"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},d=[],u=(a("96cf"),a("3b8d")),h=a("d4f7");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"stepsEdit",components:{codeEditor:h["a"]},props:{modalData:{type:Object,default:function(){return{}}},formValidate:{type:Object,default:function(){return{}}}},data:function(){return{btnLoading:!1,categoryList:[],ruleValidate:{name:[{required:!0,type:"string",message:"服务名不能为空",trigger:"blur"}],description:[{required:!0,type:"string",message:"服务描述不能为空",trigger:"blur"}]}}},watch:{"modalData.show":{handler:function(t){t&&"add"===this.modalData.type&&this.$set(this.formValidate,"regions","{}")},immediate:!0}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){e.btnLoading=!0;var a=f(f({},e.formValidate),{},{regions:JSON.parse(e.formValidate.regions||"{}")});setTimeout((function(){e.$emit("submit-app",a,e.modalData.action),e.btnLoading=!1}),500)}else e.$Message.error("表单校验不通过!")}))},handlerReset:function(t){this.$refs[t].resetFields()},getCategoryList:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,Object(l["a"])();case 1:e=t.sent,0===e.data.code&&(this.categoryList=e.data.data),t.next=3;break;case 2:t.prev=2,t["catch"](0),this.$Message.error("获取分类列表失败");case 3:case"end":return t.stop()}}),t,this,[[0,2]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getCategoryList()}},g=m,b=a("2877"),y=Object(b["a"])(g,c,d,!1,null,null,null),O=y.exports;function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={components:{globalServiceEdit:O},data:function(){var t=this;return{theData:{},initPara:{page_number:1,page_size:15,searchVal:null,order_by:"create_time",order:"descend"},i:{pageTotal:0,tableLoading:!0},btn_loading:!1,modalData:{},tableData:[],columns:[{title:"服务名",key:"name"},{title:"服务描述",key:"description"},{title:"分类",maxWidth:200,key:"category"},{title:"链接",key:"href"},{title:"Regions详情",key:"regions",render:function(t,e){return t("Tooltip",{props:{placement:"top",maxWidth:500,transfer:!0,content:"object"===Object(o["a"])(e.row.regions)?JSON.stringify(e.row.regions,null,2):e.row.regions||"{}"}},[t("Icon",{props:{type:"ios-eye-outline"},style:{cursor:"pointer"}})])}},{title:"#",key:"handle",width:120,render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.handleEdit(a.row)}}},"编辑"),e("a",{style:{marginLeft:"5px",color:"red"},on:{click:function(){t.handleDel(a.row)}}},"删除")])}}]}},methods:{handleGetData:function(){var t=this;Object(l["b"])().then((function(e){0===e.data.code?(t.tableData=e.data.data,t.i.pageTotal=e.data.data.length):(t.tableData=[],t.i.pageTotal=0,t.$Message.error("".concat(e.data.msg)))}))},handleAdd:function(){this.modalData={show:!0,title:"添加全球项目定制",action:"post",type:"add"},this.theData=D(D({},this.$options.data().theData),{},{regions:"{}"})},handleEdit:function(t){this.modalData={show:!0,title:"编辑全球项目定制",action:"put",type:"edit"},this.theData=D(D({},t),{},{regions:"object"===Object(o["a"])(t.regions)?JSON.stringify(t.regions,null,2):"{}"})},saveData:function(t,e){var a=this;Object(l["e"])(t,e).then((function(t){0==t.data.code?(a.$Message.success("".concat(t.data.msg)),a.modalData.show=!1,a.handleGetData()):a.$Message.error("".concat(t.data.msg))}))},handleClose:function(){this.modalData.show=!1,this.handleGetData()},handleSwitch:function(t){this.$Message.info("暂不支持")},handleDel:function(t){var e=this;this.$Modal.confirm({title:"提醒",content:"<p>删除服务名：".concat(t.name," 之后无法找回，请谨慎操作！</p>"),onOk:function(){setTimeout((function(){Object(l["e"])({id:t.id},"delete").then((function(t){0==t.data.code?(e.$Message.success(t.data.msg),e.handleGetData()):e.$Message.error(t.data.msg)}))}),500)},onCancel:function(){e.$Message.info("回头是岸~")}})},handleSearch:function(){this.initPara.page_number=1,this.handleGetData()},handleSort:function(t,e,a){this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.handleGetData()},handlerChangePage:function(t){this.initPara.page_number=t,this.handleGetData()},handlePageSize:function(t){this.initPara.page_number=1,this.initPara.page_size=t,this.handleGetData()}},watch:{searchValue:function(t){this.pageNum=1,this.handleGetData()}},computed:D(D({},Object(s["e"])({rules:function(t){return t.user.rules}})),{},{paginatedData:function(){var t=(this.initPara.page_number-1)*this.initPara.page_size,e=t+this.initPara.page_size;return this.tableData.slice(t,e)}}),mounted:function(){this.handleGetData()}},j=w,P=(a("026a"),Object(b["a"])(j,n,r,!1,null,"b25f9526",null));e["default"]=P.exports}}]);