(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-6614be86"],{"0566":function(t,e,a){"use strict";a("b0b47")},"07dc":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n    使用说明：\n    "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[t._v("这里用来记录应用信息，请勿重名，一个应用可以有多个服务编码，后端需要自行添加路由，注册服务。")])],2),e("div",{staticClass:"search-con search-con-top"},[e("Input",{staticClass:"search-input",attrs:{search:"",maxlength:100,placeholder:"输入关键字全局搜索"},on:{"on-search":t.handleSearch},model:{value:t.initPara.searchVal,callback:function(e){t.$set(t.initPara,"searchVal",e)},expression:"initPara.searchVal"}}),e("Button",{staticClass:"search-btn",on:{click:t.handleAdd}},[t._v("添加应用")])],1),e("Table",{ref:"selection",attrs:{size:"small",columns:t.columns,data:t.tableData},on:{"on-sort-change":t.handleSort}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"left"}},[e("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),e("app-edit",{attrs:{modalData:t.modalData,formValidate:t.theData},on:{"submit-app":t.saveApp,close:t.handleClose}})],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("7f7f"),a("2f62")),l=a("eba4"),s=function(){var t=this,e=t._self._c;return e("Drawer",{attrs:{title:t.modalData.title,"mask-closable":!1,width:"750px;",draggable:"","footer-hide":!0},model:{value:t.modalData.show,callback:function(e){t.$set(t.modalData,"show",e)},expression:"modalData.show"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"应用名称",prop:"name"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入应用名称..."},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),e("FormItem",{attrs:{label:"服务编码",prop:"app_code"}},[e("Input",{attrs:{maxlength:"10",type:"text",placeholder:"请输入服务编码..."},model:{value:t.formValidate.app_code,callback:function(e){t.$set(t.formValidate,"app_code",e)},expression:"formValidate.app_code"}})],1),e("FormItem",{attrs:{label:"跳转链接",prop:"href"}},[e("Input",{attrs:{maxlength:"250",type:"text",placeholder:"前端直接跳转地址..."},model:{value:t.formValidate.href,callback:function(e){t.$set(t.formValidate,"href",e)},expression:"formValidate.href"}})],1),e("FormItem",{attrs:{label:"背景图片",prop:"img"}},[e("Input",{attrs:{maxlength:"200",type:"text",placeholder:"请输入应用背景图片地址..."},model:{value:t.formValidate.img,callback:function(e){t.$set(t.formValidate,"img",e)},expression:"formValidate.img"}})],1),e("FormItem",{attrs:{label:"应用图标",prop:"icon"}},[e("Input",{attrs:{maxlength:"200",type:"text",placeholder:"请输入图标编码..."},model:{value:t.formValidate.icon,callback:function(e){t.$set(t.formValidate,"icon",e)},expression:"formValidate.icon"}})],1),e("FormItem",{attrs:{label:"备注信息",prop:"description"}},[e("Input",{attrs:{maxlength:"200",type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注信息..."},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},c=[],d={name:"appEdit",props:{modalData:{type:Object,default:{}},formValidate:{type:Object,default:{}}},data:function(){return{btnLoading:!1,ruleValidate:{name:[{required:!0,type:"string",message:"应用名称不能为空",trigger:"blur"}],app_code:[{required:!0,type:"string",message:"服务编码不能为空",trigger:"blur"}],description:[{required:!0,type:"string",message:"备注信息不能为空",trigger:"blur"}]}}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.btnLoading=!0,setTimeout((function(){e.$emit("submit-app",e.formValidate,e.modalData.action),e.btnLoading=!1}),500)):e.$Message.error("表单校验不通过!")}))},handlerReset:function(t){this.$refs[t].resetFields()}}},p=d,u=a("2877"),h=Object(u["a"])(p,s,c,!1,null,null,null),m=h.exports;function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={components:{appEdit:m},data:function(){var t=this;this.$createElement;return{theData:{},initPara:{page_number:1,page_size:15,searchVal:null,order_by:"create_time",order:"descend"},i:{pageTotal:0,tableLoading:!0},btn_loading:!1,modalData:{},tableData:[],columns:[{title:"应用编码",key:"app_code",minWidth:100,maxWidth:150,sortable:!0},{title:"名称",key:"name",minWidth:180,maxWidth:400,sortable:!0},{title:"外链",key:"href",minWidth:180},{title:"备注",key:"description",minWidth:80,render:function(t,e){return t("Tooltip",{props:{placement:"top"}},[t("Icon",{attrs:{type:"ios-help-circle"}}),t("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},e.row.description)])}},{title:"#",key:"handle",width:120,render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.handleEdit(a.row)}}},"编辑"),e("a",{style:{marginLeft:"5px",color:"red"},on:{click:function(){t.handleDel(a.row)}}},"删除")])}}]}},methods:{handleGetData:function(){var t=this;Object(l["a"])(this.initPara).then((function(e){0===e.data.code?(t.i.pageTotal=e.data.count,t.tableData=e.data.data):(t.i.pageTotal=0,t.$Message.error("".concat(e.data.msg)))}))},handleAdd:function(){this.modalData={show:!0,title:"添加应用记录",action:"post"},this.theData=this.$options.data().theData},handleEdit:function(t){this.modalData={show:!0,title:"编辑应用记录",action:"put"},this.theData=t},saveApp:function(t,e){var a=this;Object(l["b"])(t,e).then((function(t){0==t.data.code?(a.$Message.success("".concat(t.data.msg)),a.modalData.show=!1,a.handleGetData()):a.$Message.error("".concat(t.data.msg))}))},handleClose:function(){this.modalData.show=!1,this.handleGetData()},handleSwitch:function(t){this.$Message.info("暂不支持")},handleDel:function(t){var e=this;this.$Modal.confirm({title:"提醒",content:"<p>删除应用：《".concat(t.name,"》之后无法找回，请谨慎操作！</p>"),onOk:function(){setTimeout((function(){Object(l["b"])({id_list:[t.id]},"delete").then((function(t){0==t.data.code?(e.$Message.success(t.data.msg),e.handleGetData()):e.$Message.error(t.data.msg)}))}),500)},onCancel:function(){e.$Message.info("回头是岸~")}})},handleSearch:function(){this.initPara.page_number=1,this.handleGetData()},handleSort:function(t,e,a){this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.handleGetData()},handlerChangePage:function(t){this.initPara.page_number=t,this.handleGetData()},handlePageSize:function(t){this.initPara.page_number=1,this.initPara.page_size=t,this.handleGetData()}},watch:{searchValue:function(t){this.pageNum=1,this.handleGetData()}},computed:g({},Object(r["e"])({rules:function(t){return t.user.rules}})),mounted:function(){this.handleGetData()}},y=b,v=(a("0566"),Object(u["a"])(y,n,i,!1,null,"4751d8dd",null));e["default"]=v.exports},b0b47:function(t,e,a){},eba4:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o}));var n=a("66df"),i=function(t){return n["a"].request({url:"/api/p/v4/apps/",method:"get",params:t})},o=function(t,e){return n["a"].request({url:"/api/p/v4/apps/",method:e,data:t})}}}]);