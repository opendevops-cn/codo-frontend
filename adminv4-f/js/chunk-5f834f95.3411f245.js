(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-5f834f95"],{"6a4e":function(t,e,a){},"6cc3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n    使用说明：\n    "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[t._v('\n      1. 点击"添加"按钮可以新增 step 记录'),e("br"),t._v("\n      2. 可以对已有记录进行编辑和删除操作"),e("br")])],2),e("div",{staticClass:"search-con search-con-top"},[e("Button",{staticClass:"search-btn",on:{click:t.handleAdd}},[t._v("添加")])],1),e("Table",{ref:"selection",attrs:{size:"small",columns:t.columns,data:t.tableData},on:{"on-sort-change":t.handleSort}}),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"left"}},[e("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),e("steps-edit",{attrs:{modalData:t.modalData,formValidate:t.theData},on:{"submit-app":t.saveData,close:t.handleClose}})],1)},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("55dd"),a("2f62")),s=a("e371"),l=function(){var t=this,e=t._self._c;return e("Drawer",{attrs:{title:t.modalData.title,"mask-closable":!1,width:"750px;",draggable:"","footer-hide":!0},model:{value:t.modalData.show,callback:function(e){t.$set(t.modalData,"show",e)},expression:"modalData.show"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"步骤名称",prop:"title"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入步骤名称..."},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1),e("FormItem",{attrs:{label:"步骤描述",prop:"description"}},[e("Input",{attrs:{maxlength:"100",type:"text",placeholder:"请输入步骤描述..."},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1),e("FormItem",{attrs:{label:"cards详情",prop:"cards","label-width":110}},[e("code-editor",{attrs:{lang:"json",read:!1,eHeight:65},model:{value:t.formValidate.cards,callback:function(e){t.$set(t.formValidate,"cards",e)},expression:"formValidate.cards"}})],1),e("FormItem",{attrs:{label:"faqs详情",prop:"faqs","label-width":110}},[e("code-editor",{attrs:{lang:"json",read:!1,eHeight:65},model:{value:t.formValidate.faqs,callback:function(e){t.$set(t.formValidate,"faqs",e)},expression:"formValidate.faqs"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},c=[],d=(a("7f7f"),a("d4f7")),u={name:"stepsEdit",components:{codeEditor:d["a"]},props:{modalData:{type:Object,default:function(){return{}}},formValidate:{type:Object,default:function(){return{}}}},data:function(){return{btnLoading:!1,ruleValidate:{title:[{required:!0,type:"string",message:"步骤名称不能为空",trigger:"blur"}],description:[{required:!0,type:"string",message:"步骤名称不能为空",trigger:"blur"}]}}},watch:{"modalData.show":{handler:function(t){t&&"add"===this.modalData.type&&(this.$set(this.formValidate,"cards","{}"),this.$set(this.formValidate,"faqs","{}"))},immediate:!0}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.btnLoading=!0,setTimeout((function(){e.$emit("submit-app",e.formValidate,e.modalData.action),e.btnLoading=!1}),500)):e.$Message.error("表单校验不通过!")}))},handlerReset:function(t){this.$refs[t].resetFields()}}},h=u,p=a("2877"),f=Object(p["a"])(h,l,c,!1,null,null,null),m=f.exports;function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={components:{stepsEdit:m,codeEditor:d["a"]},data:function(){var t=this;return{theData:{},initPara:{page_number:1,page_size:15,searchVal:null,order_by:"create_time",order:"descend"},i:{pageTotal:0,tableLoading:!0},btn_loading:!1,modalData:{},allTableData:[],columns:[{title:"步骤名称",key:"title"},{title:"步骤描述",key:"description"},{title:"Cards详情",key:"cards",render:function(t,e){return t("Tooltip",{props:{placement:"top",maxWidth:500,transfer:!0,content:e.row.cards||"{}"}},[t("Icon",{props:{type:"ios-eye-outline"},style:{cursor:"pointer"}})])}},{title:"Faqs详情",key:"faqs",render:function(t,e){return t("Tooltip",{props:{placement:"top",maxWidth:500,transfer:!0,content:e.row.faqs||"{}"}},[t("Icon",{props:{type:"ios-eye-outline"},style:{cursor:"pointer"}})])}},{title:"#",key:"handle",width:120,render:function(e,a){return e("div",[e("a",{style:{marginRight:"5px"},on:{click:function(){t.handleEdit(a.row)}}},"编辑"),e("a",{style:{marginLeft:"5px",color:"red"},on:{click:function(){t.handleDel(a.row)}}},"删除")])}}]}},methods:{handleGetData:function(){var t=this;Object(s["c"])().then((function(e){0===e.data.code?(t.allTableData=e.data.data,t.i.pageTotal=t.allTableData.length):(t.i.pageTotal=0,t.$Message.error("".concat(e.data.msg)))}))},handleAdd:function(){this.modalData={show:!0,title:"添加步骤记录",action:"post",type:"add"},this.theData=this.$options.data().theData},handleEdit:function(t){this.modalData={show:!0,title:"编辑步骤记录",action:"put",type:"edit"},this.theData=t},saveData:function(t,e){var a=this;Object(s["f"])(t,e).then((function(t){0==t.data.code?(a.$Message.success("".concat(t.data.msg)),a.modalData.show=!1,a.handleGetData()):a.$Message.error("".concat(t.data.msg))}))},handleClose:function(){this.modalData.show=!1,this.handleGetData()},handleSwitch:function(t){this.$Message.info("暂不支持")},handleDel:function(t){var e=this;this.$Modal.confirm({title:"提醒",content:"<p>删除step：".concat(t.title," 之后无法找回，请谨慎操作！</p>"),onOk:function(){setTimeout((function(){Object(s["f"])({id:t.id},"delete").then((function(t){0==t.data.code?(e.$Message.success(t.data.msg),e.handleGetData()):e.$Message.error(t.data.msg)}))}),500)},onCancel:function(){e.$Message.info("回头是岸~")}})},handleSearch:function(){this.initPara.page_number=1,this.handleGetData()},handleSort:function(t,e,a){var n=this;this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.allTableData.sort((function(e,a){var i="ascend"===n.initPara.order;return e[t.key]<a[t.key]?i?-1:1:e[t.key]>a[t.key]?i?1:-1:0}))},handlerChangePage:function(t){this.initPara.page_number=t},handlePageSize:function(t){this.initPara.page_number=1,this.initPara.page_size=t}},watch:{searchValue:function(t){this.pageNum=1,this.handleGetData()}},computed:b(b({},Object(r["e"])({rules:function(t){return t.user.rules}})),{},{tableData:function(){var t=(this.initPara.page_number-1)*this.initPara.page_size,e=t+this.initPara.page_size;return this.allTableData.slice(t,e)}}),mounted:function(){this.handleGetData()}},D=y,w=(a("88a4"),Object(p["a"])(D,n,i,!1,null,"f3a70ad6",null));e["default"]=w.exports},"88a4":function(t,e,a){"use strict";a("6a4e")}}]);