(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-55068a4e"],{"830a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("Card",{attrs:{"dis-hover":""}},[e("Row",[e("Col",{staticStyle:{padding:"15px 5px"},attrs:{span:"18",offset:"3"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"主题 前缀",prop:"EMAIL_SUBJECT_PREFIX"}},[e("Input",{attrs:{maxlength:"30",type:"text",placeholder:"请输入邮件主题..."},model:{value:t.formValidate.EMAIL_SUBJECT_PREFIX,callback:function(e){t.$set(t.formValidate,"EMAIL_SUBJECT_PREFIX",e)},expression:"formValidate.EMAIL_SUBJECT_PREFIX"}})],1),e("FormItem",{attrs:{label:"SMTP主机",prop:"EMAIL_HOST"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入SMTP主机..."},model:{value:t.formValidate.EMAIL_HOST,callback:function(e){t.$set(t.formValidate,"EMAIL_HOST",e)},expression:"formValidate.EMAIL_HOST"}})],1),e("FormItem",{attrs:{label:"SMTP端口",prop:"EMAIL_PORT"}},[e("Input",{attrs:{maxlength:"10",type:"text",placeholder:"请输入SMTP端口..."},model:{value:t.formValidate.EMAIL_PORT,callback:function(e){t.$set(t.formValidate,"EMAIL_PORT",e)},expression:"formValidate.EMAIL_PORT"}})],1),e("FormItem",{attrs:{label:"SMTP账户",prop:"EMAIL_HOST_USER"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"SMTP账户..."},model:{value:t.formValidate.EMAIL_HOST_USER,callback:function(e){t.$set(t.formValidate,"EMAIL_HOST_USER",e)},expression:"formValidate.EMAIL_HOST_USER"}})],1),e("FormItem",{attrs:{label:"SMTP密码",prop:"EMAIL_HOST_PASSWORD"}},[e("Input",{attrs:{maxlength:"80",type:"password",password:"",placeholder:"请输入SMTP密码..."},model:{value:t.formValidate.EMAIL_HOST_PASSWORD,callback:function(e){t.$set(t.formValidate,"EMAIL_HOST_PASSWORD",e)},expression:"formValidate.EMAIL_HOST_PASSWORD"}})],1),e("FormItem",{attrs:{label:"测试收件人",prop:"EMAIL_TEST_USER"}},[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:""},model:{value:t.formValidate.EMAIL_TEST_USER,callback:function(e){t.$set(t.formValidate,"EMAIL_TEST_USER",e)},expression:"formValidate.EMAIL_TEST_USER"}})],1),e("FormItem",{attrs:{label:"启用SSL"}},[e("p",{staticStyle:{color:"#9ea7b4","font-size":"12px"}},[t._v("如果SMTP端口是465，通常需要启用 SSL")]),e("i-switch",{attrs:{size:"large","true-color":"#19be6b","true-value":"yes","false-value":"no"},model:{value:t.formValidate.EMAIL_USE_SSL,callback:function(e){t.$set(t.formValidate,"EMAIL_USE_SSL",e)},expression:"formValidate.EMAIL_USE_SSL"}},[e("span",{attrs:{slot:"yes"},slot:"yes"},[t._v("启用")]),e("span",{attrs:{slot:"no"},slot:"no"},[t._v("不启用")])])],1),e("FormItem",{attrs:{label:"启用TLS"}},[e("p",{staticStyle:{color:"#9ea7b4","font-size":"12px"}},[t._v("如果SMTP端口是587，通常需要启用 TLS")]),e("i-switch",{attrs:{size:"large","true-color":"#19be6b","true-value":"yes","false-value":"no"},model:{value:t.formValidate.EMAIL_USE_TLS,callback:function(e){t.$set(t.formValidate,"EMAIL_USE_TLS",e)},expression:"formValidate.EMAIL_USE_TLS"}},[e("span",{attrs:{slot:"yes"},slot:"yes"},[t._v("启用")]),e("span",{attrs:{slot:"no"},slot:"no"},[t._v("不启用")])])],1),e("FormItem",[e("p",{staticStyle:{color:"#9ea7b4","font-size":"12px"}},[t._v("测试使用当前表单数据。")]),e("Button",{attrs:{type:"success",loading:t.btnLoading},on:{click:function(e){return t.handlerTest("formValidate")}}},[t._v("测试邮件")]),e("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"15px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)],1)},o=[],n=(a("7f7f"),a("96cf"),a("3b8d")),s=a("c8ea"),l={props:{},data:function(){return{formValidate:{EMAIL_PORT:465,EMAIL_USE_SSL:"yes",EMAIL_USE_TLS:"no"},btnLoading:!1,ruleValidate:{EMAIL_SUBJECT_PREFIX:[{required:!0,type:"string",message:"主题不能为空",trigger:"blur"}],EMAIL_HOST:[{required:!0,type:"string",message:"SMTP主机不能为空",trigger:"blur"}],EMAIL_PORT:[{required:!0,type:"string",message:"不能为空",trigger:"blur"}],EMAIL_HOST_USER:[{required:!0,type:"string",message:"不能为空",trigger:"blur"}]}}},methods:{handleGetData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["b"])({category:"email"});case 2:e=t.sent,0===e.data.code?e.data.data.EMAIL_HOST&&(this.formValidate=e.data.data):this.$Message.error("".concat(e.data.msg));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.btnLoading=!0,setTimeout((function(){Object(s["c"])(e.formValidate,"post").then((function(t){0===t.data.code?(e.$Message.info("".concat(t.data.msg)),e.handleGetData()):e.$Message.error("".concat(t.data.msg))})),e.btnLoading=!1}),500)):e.$Message.error("表单校验不通过!")}))},handlerTest:function(){var t=this;this.btnLoading=!0,setTimeout((function(){var e=JSON.parse(JSON.stringify(t.formValidate));e["check_key"]="EMAIL",Object(s["a"])(e).then((function(e){0===e.data.code?t.$Message.info("".concat(e.data.msg)):t.$Message.error("".concat(e.data.msg))})),t.btnLoading=!1}),3e3)},handlerReset:function(t){this.$refs[t].resetFields()}},mounted:function(){this.handleGetData()}},i=l,c=a("2877"),d=Object(c["a"])(i,r,o,!1,null,null,null);e["default"]=d.exports},c8ea:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return s}));var r=a("66df"),o=function(t){return r["a"].request({url:"/api/p/v4/sysconfig/settings/",method:"get",params:t})},n=function(t,e){return r["a"].request({url:"/api/p/v4/sysconfig/settings/",method:"post",data:t})},s=function(t){return r["a"].request({url:"/api/p/v4/sysconfig/check/",method:"post",data:t})}}}]);