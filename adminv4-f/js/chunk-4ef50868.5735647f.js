(window["webpackJsonp_mg"]=window["webpackJsonp_mg"]||[]).push([["chunk-4ef50868"],{"162f":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return l}));var r=a("66df"),n=function(e){return r["a"].request({url:"/api/p/v4/user/",method:"get",params:e})},i=function(e,t){return r["a"].request({url:"/api/p/v4/user/",method:t,data:e})},s=function(e){return r["a"].request({url:"/api/p/v4/reset_mfa/",method:"put",data:e})},o=function(e){return r["a"].request({url:"/api/p/v4/reset_pw/",method:"put",data:e})},l=function(e){return r["a"].request({url:"/api/p/v4/token/",method:"post",data:e})}},"432b":function(e,t,a){},6153:function(e,t,a){"use strict";a("432b")},9357:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o}));var r=a("66df"),n=function(e){return r["a"].request({url:"/api/p/v4/func/",method:"get",params:e})},i=function(e,t){return r["a"].request({url:"/api/p/v4/func/",method:t,data:e})},s=function(e){return r["a"].request({url:"/api/p/v4/role_func/",method:"get",params:e})},o=function(e,t){return r["a"].request({url:"/api/p/v4/role_func/",method:t,data:e})}},a308:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return o}));var r=a("66df"),n=function(e){return r["a"].request({url:"/api/p/v4/menus/",method:"get",params:e})},i=function(e,t){return r["a"].request({url:"/api/p/v4/menus/",method:t,data:e})},s=function(e){return r["a"].request({url:"/api/p/v4/role_menu/",method:"get",params:e})},o=function(e,t){return r["a"].request({url:"/api/p/v4/role_menu/",method:t,data:e})}},b0b4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"search-con search-con-top"},[t("Input",{staticClass:"search-input",attrs:{search:"",maxlength:100,placeholder:"输入关键字全局搜索"},on:{"on-search":e.handleSearch},model:{value:e.initPara.searchVal,callback:function(t){e.$set(e.initPara,"searchVal",t)},expression:"initPara.searchVal"}}),t("Select",{staticClass:"search-select",attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{"on-change":e.handleSearch},model:{value:e.initPara.role_type,callback:function(t){e.$set(e.initPara,"role_type",t)},expression:"initPara.role_type"}},e._l(e.roleTypeList,(function(e){return t("Option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1),t("Button",{staticClass:"search-btn",attrs:{type:"info"},on:{click:e.handleAdd}},[e._v("添加角色")]),t("Button",{staticClass:"search-btn",on:{click:e.handleSync}},[e._v("刷新缓存")])],1),t("Table",{ref:"selection",attrs:{size:"small",columns:e.columns,data:e.tableData,loading:e.i.tableLoading},on:{"on-sort-change":e.handleSort,"on-selection-change":e.handleSelect}}),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"left"}},[t("Page",{attrs:{total:e.i.pageTotal,current:e.initPara.page_number,"page-size":e.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":e.handlerChangePage,"on-page-size-change":e.handlePageSize}})],1)]),e.spinShow?t("Spin",{attrs:{size:"large",fix:""}},[t("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),t("div",[e._v("同步中，请稍等一会...")])],1):e._e(),t("role-edit",{ref:"roleEdit",attrs:{modalData:e.modalData},on:{"save-data":e.handleSave,close:e.handleClose}}),t("role-ref",{ref:"roleRef",attrs:{modalData:e.modalRef},on:{"save-data":e.handleSave,close:e.handleClose}}),t("pre-view-user",{ref:"preViewUser",attrs:{modalData:e.modalShowUser},on:{close:e.handleClose}}),t("role-user-edit",{ref:"roleUserEdit",attrs:{modalData:e.modalUData,formValidate:e.theData},on:{"save-data":e.handleSaveUser,close:e.handleClose}})],1)},n=[],i=(a("8e6e"),a("456d"),a("ade3")),s=(a("ac6a"),a("96cf"),a("1da1")),o=a("2f62"),l=a("f7ab"),c=a("162f"),u=function(){var e=this,t=e._self._c;return t("Drawer",{attrs:{title:e.modalData.title,"mask-closable":!1,width:"850px;","footer-hide":!0},on:{"on-close":e.handleCancel},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100,"label-colon":!0}},[t("FormItem",{attrs:{label:"角色名称",prop:"role_name"}},[t("Input",{attrs:{maxlength:"25",type:"text",placeholder:"请输入角色名称..."},model:{value:e.formValidate.role_name,callback:function(t){e.$set(e.formValidate,"role_name",t)},expression:"formValidate.role_name"}})],1),"post"==e.modalData.action?t("FormItem",{attrs:{label:"角色类型",prop:"role_type"}},[t("RadioGroup",{model:{value:e.formValidate.role_type,callback:function(t){e.$set(e.formValidate,"role_type",t)},expression:"formValidate.role_type"}},[t("Radio",{attrs:{label:"normal"}},[e._v("普通")]),t("Radio",{attrs:{label:"base"}},[e._v("基础")])],1)],1):t("FormItem",{attrs:{label:"角色类型",prop:"role_type"}},[t("RadioGroup",{model:{value:e.formValidate.role_type,callback:function(t){e.$set(e.formValidate,"role_type",t)},expression:"formValidate.role_type"}},[t("Radio",{attrs:{label:"normal",disabled:""}},[e._v("普通")]),t("Radio",{attrs:{label:"base",disabled:""}},[e._v("基础")])],1)],1),t("FormItem",{attrs:{label:"备注信息",prop:"details"}},[t("Input",{attrs:{maxlength:"200",type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注信息..."},model:{value:e.formValidate.details,callback:function(t){e.$set(e.formValidate,"details",t)},expression:"formValidate.details"}})],1),t("FormItem",[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交")]),t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handlerReset("formValidate")}}},[e._v("重置")])],1)],1)],1)},d=[],h=(a("7f7f"),{name:"roleEdit",props:{modalData:{type:Object,default:{}}},data:function(){return{allUserList:[],formValidate:{},btnLoading:!1,ruleValidate:{role_name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],details:[{required:!0,message:"备注信息不能为空",trigger:"blur"}]}}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.btnLoading=!0,setTimeout((function(){t.$emit("save-data",t.formValidate,t.modalData.action),t.btnLoading=!1}),500)):t.$Message.error("表单校验不通过!")}))},handlerReset:function(e){this.$refs[e].resetFields()}}}),f=h,m=a("2877"),p=Object(m["a"])(f,u,d,!1,null,null,null),g=p.exports,b=function(){var e=this,t=e._self._c;return t("Drawer",{attrs:{title:e.modalData.title,"mask-closable":!1,width:"930px;","footer-hide":!0},on:{"on-close":e.handleCancel},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("RadioGroup",{staticStyle:{padding:"3px"},on:{"on-change":e.handleChange1},model:{value:e.editTransfer,callback:function(t){e.editTransfer=t},expression:"editTransfer"}},[t("Radio",{attrs:{label:"func"}},[e._v("后端权限")]),t("Radio",{attrs:{label:"menu"}},[e._v("前端菜单")])],1),t("div",{staticStyle:{"padding-top":"4px"}},[t("Transfer",{attrs:{"list-style":e.listStyle,titles:e.tranferTitles,data:e.source,"target-keys":e.targetKeys,filterable:"","filter-method":e.filterMethod},on:{"on-change":e.handleChange}})],1)],1)},v=[],_=a("9357"),w=a("a308"),y={name:"roleRef",props:{modalData:{type:Object,default:{}}},data:function(){return{appList:[],funcList:[],menuList:[],compList:[],source:[],targetKeys:[],listStyle:{height:"750px",width:"410px"},tranferTitles:["所有列表","已有列表"],role_id:"",editTransfer:"func",allUserList:[],formValidate:{},btnLoading:!1,ruleValidate:{role_name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],details:[{required:!0,message:"备注信息不能为空",trigger:"blur"}]}}},methods:{handleCancel:function(){this.$emit("close")},handleChange1:function(e){"func"==e?this.handleGetFuncByRole():"menu"==e?this.handleGetMenusByRole():"app"==e?this.handleGetAppsByRole():this.$Message.error("暂不支持类型")},filterMethod:function(e,t){return e.label.indexOf(t)>-1},handleGetFuncByRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tranferTitles=["所有权限","已有权限"],this.source=this.funcList,this.targetKeys=[],e.next=5,Object(_["a"])({role_id:this.modalData.role_id});case 5:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.targetKeys.push(e.id)})):this.$Message.error("".concat(t.data.msg));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleGetAppsByRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tranferTitles=["所有应用","已有应用"],this.editTransfer="app",this.targetKeys=[],this.source=this.appList,e.next=6,getAppByRole({role_id:this.modalData.role_id});case 6:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.targetKeys.push(e.id)})):this.$Message.error("".concat(t.data.msg));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleGetMenusByRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tranferTitles=["所有菜单","已有菜单"],this.editTransfer="menu",this.targetKeys=[],this.source=this.menuList,e.next=6,Object(w["a"])({role_id:this.modalData.role_id});case 6:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.targetKeys.push(e.id)})):this.$Message.error("".concat(t.data.msg));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleChange:function(e,t,a){var r=this;this.targetKeys=e;var n="left"===t?"delete":"post",i=this.modalData.role_id;"app"===this.editTransfer?optRoleApp({role_id:i,app_list:a},n).then((function(e){0===e.data.code?r.$Message.success("".concat(e.data.msg)):r.$Message.error("".concat(e.data.msg))})):"menu"===this.editTransfer?Object(w["d"])({role_id:i,menu_list:a},n).then((function(e){0===e.data.code?r.$Message.success("".concat(e.data.msg)):r.$Message.error("".concat(e.data.msg))})):"func"===this.editTransfer?Object(_["d"])({role_id:i,func_list:a},n).then((function(e){0===e.data.code?r.$Message.success("".concat(e.data.msg)):r.$Message.error("".concat(e.data.msg))})):this.$Message.error("你在修改个锤子呀")},handleGetFuncList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["b"])();case 2:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.funcList.push({key:e.id,label:"【".concat(e.app_code,"】 ").concat(e.func_name)})})):this.$Message.error("".concat(t.data.msg));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleGetAppList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,getApplist();case 2:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.appList.push({key:e.id,label:"【".concat(e.app_code,"】 ").concat(e.name)})})):this.$Message.error("".concat(t.data.msg));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleGetMenuList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(w["b"])();case 2:t=e.sent,0===t.data.code?t.data.data.forEach((function(e){a.menuList.push({key:e.id,label:"【".concat(e.app_code,"】 ").concat(e.details)})})):this.$Message.error("".concat(t.data.msg));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.handleGetFuncList(),this.handleGetMenuList()}},x=y,D=Object(m["a"])(x,b,v,!1,null,null,null),k=D.exports,$=function(){var e=this,t=e._self._c;return t("Drawer",{staticStyle:{"background-color":"#f8f8f9"},attrs:{title:e.modalData.title,width:"750px;",draggable:"","footer-hide":!0},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100,"label-colon":!0}},[t("FormItem",{attrs:{label:"角色名称",prop:"role_name"}},[t("Input",{attrs:{maxlength:"20",type:"text",readonly:"",placeholder:"请输入角色名称..."},model:{value:e.formValidate.role_name,callback:function(t){e.$set(e.formValidate,"role_name",t)},expression:"formValidate.role_name"}})],1),t("FormItem",{attrs:{label:"关联用户",prop:"user_list"}},[t("Select",{staticClass:"search-input-long",attrs:{maxlength:"30000",filterable:"",multiple:"","max-tag-count":500,placeholder:"请选择关联的用户"},model:{value:e.formValidate.user_list,callback:function(t){e.$set(e.formValidate,"user_list",t)},expression:"formValidate.user_list"}},e._l(e.allUserList,(function(e){return t("Option",{key:e.id,attrs:{value:e.id,label:e.username+"("+e.nickname+")"}})})),1)],1),t("FormItem",{attrs:{label:"关联角色"}},[t("Select",{staticClass:"search-input-long",attrs:{maxlength:"500",filterable:"",multiple:"","max-tag-count":5,placeholder:"请选择关联"},model:{value:e.formValidate.role_list,callback:function(t){e.$set(e.formValidate,"role_list",t)},expression:"formValidate.role_list"}},e._l(e.baseRoleList,(function(e){return t("Option",{key:e.id,attrs:{value:e.id,label:e.role_name}})})),1)],1),t("FormItem",[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交")]),t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handlerReset("formValidate")}}},[e._v("重置")])],1)],1)],1)},R=[],O={name:"roleUserEdit",props:{modalData:{type:Object,default:{}},formValidate:{type:Object,default:{}}},data:function(){return{allUserList:[],baseRoleList:[],btnLoading:!1,ruleValidate:{role_name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]}}},methods:{handleCancel:function(){this.$emit("close")},handleSubmit:function(e){var t=this;this.formValidate.role_list&&this.formValidate.role_list.length>10?this.$Message.error("不能关联超过10个角色"):this.$refs[e].validate((function(e){e?(t.btnLoading=!0,setTimeout((function(){t.$emit("save-data",t.formValidate,t.modalData.action),t.btnLoading=!1}),500)):t.$Message.error("表单校验不通过!")}))},handlerReset:function(e){this.$refs[e].resetFields()}}},L=O,V=Object(m["a"])(L,$,R,!1,null,null,null),S=V.exports,j=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{title:e.modalData.title,width:"900","mask-closable":!1,"footer-hide":!0},on:{"on-close":e.handleCancel},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("div",{staticClass:"search-con search-con-top"},[t("Input",{staticClass:"search-input",attrs:{search:"",maxlength:100,placeholder:"输入关键字全局搜索"},on:{"on-search":e.handleSearch},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),t("Table",{ref:"selection",attrs:{size:"small",columns:e.columns,data:e.tableData,loading:e.tableLoading}}),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("Page",{attrs:{total:e.totalCount,current:e.pageNum,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.handlerChangePage}})],1)],1)],1)},C=[],M={name:"preViewUser",props:{modalData:{type:Object,default:{}}},data:function(){return{columns:[{title:"ID",key:"user_id",sortable:!0,minWidth:100,maxWidth:130},{title:"用户名",key:"username",sortable:!0,minWidth:100,maxWidth:200},{title:"昵称",key:"nickname",sortable:!0,minWidth:100,maxWidth:200},{title:"邮箱",key:"email",minWidth:110},{title:"来源",key:"source",minWidth:100}],tableData:[],serverList:[],pageTotal:0,pageSize:12,pageNum:1,searchVal:null,tableLoading:!0}},watch:{},computed:{totalCount:function(){return this.serverList.length}},methods:{handleGetData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])({role_id:t});case 2:a=e.sent,0===a.data.code?(this.serverList=a.data.data,this.setCurrentPageData()):this.$Message.error(a.data.msg),this.tableLoading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.$emit("close"),this.modalData.show=!1},handlerChangePage:function(e){this.pageNum=e,this.setCurrentPageData()},setCurrentPageData:function(){var e=(this.pageNum-1)*this.pageSize,t=this.pageNum*this.pageSize;this.tableData=this.serverList.slice(e,t)},checkExecList:function(e){return e.username.indexOf(this.searchVal)>=0||e.nickname.indexOf(this.searchVal)>=0||e.email.indexOf(this.searchVal)>=0},handleSearch:function(){this.searchVal?(this.pageNum=1,this.tableData=this.serverList.filter(this.checkExecList)):(this.pageNum=1,this.setCurrentPageData())}}},P=M,U=(a("f376"),Object(m["a"])(P,j,C,!1,null,"73a9cdbc",null)),T=U.exports;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={components:{roleEdit:g,roleUserEdit:S,roleRef:k,preViewUser:T},data:function(){var e=this;return{theData:{},spinShow:!1,modalData:{},modalUData:{},modalRef:{title:"授权",show:!1},modalShowUser:{title:"查看用户",show:!1},allUser:[],baseRoleList:[],initPara:{page_number:1,page_size:15,searchVal:null,role_type:"normal",order_by:"role_name",order:"descend"},roleTypeList:[{label:"通用",value:"normal"},{label:"基础",value:"base"}],i:{pageTotal:0,tableLoading:!0},initForm:{role_type:"normal"},tableData:[],columns:[{title:"ID",key:"id",width:120,sortable:!0},{title:"角色",key:"role_name",minWidth:120,sortable:!0},{title:"类型",key:"role_type",align:"center",sortable:!0,minWidth:130,render:function(e,t){var a=t.row.role_type;return e("div","normal"==a?[e("Tag",{props:{color:"cyan"}},"通用")]:"base"==a?[e("Tag",{props:{color:"blue"}},"基础")]:[e("Tag",{props:{color:"error"}},"未知")])}},{title:"继承",key:"",minWidth:180,render:function(e,t){var a=t.row.role_type;return e("div","normal"==a?[e("a",{on:{click:function(){}}},"查看")]:[e("p",{props:{color:"blue"}},"不支持")])}},{title:"#",key:"handle",width:220,render:function(t,a){return t("div",[t("a",{style:{marginLeft:"5px"},on:{click:function(){e.handleShow(a.row)}}},"用户"),t("a",{style:{marginLeft:"5px"},on:{click:function(){e.handleEdit(a.row)}}},"编辑"),t("a",{style:{marginLeft:"5px"},on:{click:function(){e.handleEmpower(a.row)}}},"授权"),"normal"===a.row.role_type&&t("a",{style:{marginLeft:"5px"},on:{click:function(){e.handleRefRole(a.row)}}},"关联"),t("a",{style:{marginLeft:"15px",color:"red"},on:{click:function(){e.handleDel(a)}}},"删除")])}}]}},methods:{handleGetData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["b"])(this.initPara);case 2:return t=e.sent,e.next=5,Object(l["a"])();case 5:a=e.sent,this.baseRoleList=a.data.data,0===t.data.code?(this.tableData=t.data.data,this.i.pageTotal=t.data.count):this.$Message.error(t.data.msg),this.i.tableLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleGetUserList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])();case 2:t=e.sent,0===t.data.code?this.allUser=t.data.data:this.$Message.error("".concat(t.data.msg));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSync:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.spinShow=!0,e.prev=1,e.next=4,Object(l["f"])();case 4:t=e.sent,this.$Message.success("".concat(t.data.msg));case 6:return e.prev=6,this.spinShow=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(){return e.apply(this,arguments)}return t}(),handleClose:function(){this.handleGetData(),this.modalData={},this.modalUData={},this.theData=this.$options.data().theData,this.modalShowUser=this.$options.data().modalShowUser},handleAdd:function(){this.modalData={show:!0,title:"添加角色",action:"post"},this.$refs.roleEdit.formValidate=this.$options.data().initForm,this.$refs.roleEdit.allUserList=this.allUser},handleEdit:function(e){this.modalData={show:!0,title:"编辑角色",action:"put"},this.$refs.roleEdit.allUserList=this.allUser,this.$refs.roleEdit.formValidate=e},handleSave:function(e,t){var a=this;Object(l["d"])(e,t).then((function(e){0==e.data.code?(a.$Message.success("".concat(e.data.msg)),a.handleClose()):a.$Message.error("".concat(e.data.msg))}))},handleRefRole:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],e.next=3,Object(l["c"])({role_id:t.id});case 3:r=e.sent,0===r.data.code?r.data.data.forEach((function(e){a.push(e.user_id)})):this.$Message.error("".concat(r.data.msg)),this.modalUData={show:!0,title:"角色关联",action:"post"},this.$refs.roleUserEdit.allUserList=this.allUser,this.$refs.roleUserEdit.baseRoleList=this.baseRoleList,this.theData={user_list:a,role_id:t.id,role_name:t.role_name,role_list:t.role_subs};case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSaveUser:function(e,t){var a=this;Object(l["e"])(e,t).then((function(e){0==e.data.code?(a.$Message.success("".concat(e.data.msg)),a.handleClose()):a.$Message.error("".concat(e.data.msg))}))},handleDel:function(e){var t=this;this.$Modal.confirm({title:"提醒",content:"<p>删除角色：《".concat(e.row.role_name,"》之后无法找回，请谨慎操作！</p>"),onOk:function(){setTimeout((function(){Object(l["d"])({role_id:e.row.id},"delete").then((function(a){0==a.data.code?(t.$Message.success(a.data.msg),t.tableData.splice(e.index,1)):t.$Message.error(a.data.msg)}))}),500)},onCancel:function(){t.$Message.info("回头是岸~")}})},handleShow:function(e){this.modalShowUser.show=!0,this.$refs.preViewUser.handleGetData(e.id)},handleEmpower:function(e){this.modalRef.show=!0,this.modalRef.role_id=e.id,this.$refs.roleRef.editTransfer="func",this.$refs.roleRef.handleChange1("func")},handleSelect:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.selectList=t},handleSearch:function(){this.initPara.page_number=1,this.handleGetData()},handleSort:function(e,t,a){this.initPara.order="asc"===e.order?"ascend":"descend",this.initPara.order_by=e.key,this.handleGetData()},handlerChangePage:function(e){this.initPara.page_number=e,this.handleGetData()},handlePageSize:function(e){this.initPara.page_number=1,this.initPara.page_size=e,this.handleGetData()}},watch:{},computed:G({},Object(o["e"])({rules:function(e){return e.user.rules}})),mounted:function(){this.handleGetUserList()},created:function(){this.handleGetData()}},z=q,F=(a("6153"),Object(m["a"])(z,r,n,!1,null,"d4b4ee08",null));t["default"]=F.exports},d285:function(e,t,a){},f376:function(e,t,a){"use strict";a("d285")},f7ab:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c}));var r=a("66df"),n=function(e){return r["a"].request({url:"/api/p/v4/role/",method:"get",params:e})},i=function(){return r["a"].request({url:"/api/p/v4/role/base_list/",method:"get"})},s=function(e,t){return r["a"].request({url:"/api/p/v4/role/",method:t,data:e})},o=function(e){return r["a"].request({url:"/api/p/v4/role_user/",method:"get",params:e})},l=function(e,t){return r["a"].request({url:"/api/p/v4/role_user/",method:t,data:e})},c=function(e){return r["a"].request({url:"/api/p/v4/role/sync/",method:"post",data:e})}}}]);