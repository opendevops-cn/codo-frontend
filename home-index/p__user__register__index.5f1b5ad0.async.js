"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[907],{12980:function(G,E,r){r.r(E),r.d(E,{default:function(){return Y}});var M=r(48305),f=r.n(M),m=r(57103),w=r(60483),$=r(54306),A=r(56507),O=r(51794),n=r(22192),t=r(57364),o=r(92635),d=r(34419),h=r(11556),i=r(66792),u=r(50959),a=r(90228),l=r.n(a),S=r(87999),x=r.n(S);function W(P){return Z.apply(this,arguments)}function Z(){return Z=x()(l()().mark(function P(g){return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,m.request)("/api/register",{method:"POST",data:g}));case 1:case"end":return y.stop()}},P)})),Z.apply(this,arguments)}var X=r(97999),H=(0,X.kc)(function(P){var g=P.token;return{main:{width:"368px",margin:"0 auto",h3:{marginBottom:"20px",fontSize:"16px"}},password:{marginBottom:"24px",".ant-form-item-explain":{display:"none"}},getCaptcha:{display:"block",width:"100%"},footer:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},submit:{width:"50%"},success:{transition:"color 0.3s",color:g.colorSuccess},warning:{transition:"color 0.3s",color:g.colorWarning},error:{transition:"color 0.3s",color:g.colorError},"progress-pass > .progress":{".ant-progress-bg":{backgroundColor:g.colorWarning}}}}),K=H,e=r(11527),F=w.Z.Item,N=$.Z.Option,Q={ok:"success",pass:"normal",poor:"exception"},J=function(){var g=K(),p=g.styles,y=(0,u.useState)(0),T=f()(y,2),R=T[0],b=T[1],q=(0,u.useState)(!1),z=f()(q,2),D=z[0],I=z[1],_=(0,u.useState)("86"),U=f()(_,2),ee=U[0],se=U[1],re=(0,u.useState)(!1),L=f()(re,2),te=L[0],ne=L[1],ae=!1,B,ie={ok:(0,e.jsx)("div",{className:p.success,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u5F3A"})}),pass:(0,e.jsx)("div",{className:p.warning,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u4E2D"})}),poor:(0,e.jsx)("div",{className:p.error,children:(0,e.jsx)("span",{children:"\u5F3A\u5EA6\uFF1A\u592A\u77ED"})})},oe=w.Z.useForm(),ue=f()(oe,1),j=ue[0];(0,u.useEffect)(function(){return function(){clearInterval(B)}},[B]);var le=function(){var s=59;b(s),B=window.setInterval(function(){s-=1,b(s),s===0&&clearInterval(B)},1e3)},V=function(){var s=j.getFieldValue("password");return s&&s.length>9?"ok":s&&s.length>5?"pass":"poor"},k=(0,m.useRequest)(W,{manual:!0,onSuccess:function(s,c){s.status==="ok"&&(A.ZP.success("\u6CE8\u518C\u6210\u529F\uFF01"),m.history.push({pathname:"/user/register-result?account=".concat(c[0].email)}))}}),ce=k.loading,de=k.run,he=function(s){de(s)},pe=function(s,c){var C=Promise;return c&&c!==j.getFieldValue("password")?C.reject("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u5339\u914D!"):C.resolve()},me=function(s,c){var C=Promise;return c?(D||I(!!c),ne(!te),c.length<6?C.reject(""):(c&&ae&&j.validateFields(["confirm"]),C.resolve())):(I(!!c),C.reject("\u8BF7\u8F93\u5165\u5BC6\u7801!"))},ge=function(s){se(s)},ve=function(){var s=j.getFieldValue("password"),c=V();return s&&s.length?(0,e.jsx)("div",{className:p["progress-".concat(c)],children:(0,e.jsx)(O.Z,{status:Q[c],strokeWidth:6,percent:s.length*10>100?100:s.length*10,showInfo:!1})}):null};return(0,e.jsxs)("div",{className:p.main,children:[(0,e.jsx)("h3",{children:"\u6CE8\u518C"}),(0,e.jsxs)(w.Z,{form:j,name:"UserRegister",onFinish:he,children:[(0,e.jsx)(F,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\u5730\u5740!"},{type:"email",message:"\u90AE\u7BB1\u5730\u5740\u683C\u5F0F\u9519\u8BEF!"}],children:(0,e.jsx)(n.Z,{size:"large",placeholder:"\u90AE\u7BB1"})}),(0,e.jsx)(t.Z,{getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},content:D&&(0,e.jsxs)("div",{style:{padding:"4px 0"},children:[ie[V()],ve(),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)("span",{children:"\u8BF7\u81F3\u5C11\u8F93\u5165 6 \u4E2A\u5B57\u7B26\u3002\u8BF7\u4E0D\u8981\u4F7F\u7528\u5BB9\u6613\u88AB\u731C\u5230\u7684\u5BC6\u7801\u3002"})})]}),overlayStyle:{width:240},placement:"right",open:D,children:(0,e.jsx)(F,{name:"password",className:j.getFieldValue("password")&&j.getFieldValue("password").length>0&&p.password,rules:[{validator:me}],children:(0,e.jsx)(n.Z,{size:"large",type:"password",placeholder:"\u81F3\u5C116\u4F4D\u5BC6\u7801\uFF0C\u533A\u5206\u5927\u5C0F\u5199"})})}),(0,e.jsx)(F,{name:"confirm",rules:[{required:!0,message:"\u786E\u8BA4\u5BC6\u7801"},{validator:pe}],children:(0,e.jsx)(n.Z,{size:"large",type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801"})}),(0,e.jsx)(F,{name:"mobile",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7!"},{pattern:/^\d{11}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF!"}],children:(0,e.jsxs)(o.Z.Compact,{style:{width:"100%"},children:[(0,e.jsxs)($.Z,{size:"large",value:ee,onChange:ge,style:{width:"30%"},children:[(0,e.jsx)(N,{value:"86",children:"+86"}),(0,e.jsx)(N,{value:"87",children:"+87"})]}),(0,e.jsx)(n.Z,{size:"large",placeholder:"\u624B\u673A\u53F7"})]})}),(0,e.jsxs)(d.Z,{gutter:8,children:[(0,e.jsx)(h.Z,{span:16,children:(0,e.jsx)(F,{name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"}],children:(0,e.jsx)(n.Z,{size:"large",placeholder:"\u9A8C\u8BC1\u7801"})})}),(0,e.jsx)(h.Z,{span:8,children:(0,e.jsx)(i.ZP,{size:"large",disabled:!!R,className:p.getCaptcha,onClick:le,children:R?"".concat(R," s"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})})]}),(0,e.jsx)(F,{children:(0,e.jsxs)("div",{className:p.footer,children:[(0,e.jsx)(i.ZP,{size:"large",loading:ce,className:p.submit,type:"primary",htmlType:"submit",children:(0,e.jsx)("span",{children:"\u6CE8\u518C"})}),(0,e.jsx)(m.Link,{to:"/user/login",children:(0,e.jsx)("span",{children:"\u4F7F\u7528\u5DF2\u6709\u8D26\u6237\u767B\u5F55"})})]})})]})]})},Y=J},88240:function(G,E,r){r.d(E,{ZP:function(){return A},c4:function(){return m}});var M=r(50959),f=r(2496);const m=["xxl","xl","lg","md","sm","xs"],w=n=>({xs:`(max-width: ${n.screenXSMax}px)`,sm:`(min-width: ${n.screenSM}px)`,md:`(min-width: ${n.screenMD}px)`,lg:`(min-width: ${n.screenLG}px)`,xl:`(min-width: ${n.screenXL}px)`,xxl:`(min-width: ${n.screenXXL}px)`}),$=n=>{const t=n,o=[].concat(m).reverse();return o.forEach((d,h)=>{const i=d.toUpperCase(),u=`screen${i}Min`,a=`screen${i}`;if(!(t[u]<=t[a]))throw new Error(`${u}<=${a} fails : !(${t[u]}<=${t[a]})`);if(h<o.length-1){const l=`screen${i}Max`;if(!(t[a]<=t[l]))throw new Error(`${a}<=${l} fails : !(${t[a]}<=${t[l]})`);const x=`screen${o[h+1].toUpperCase()}Min`;if(!(t[l]<=t[x]))throw new Error(`${l}<=${x} fails : !(${t[l]}<=${t[x]})`)}}),n};function A(){const[,n]=(0,f.ZP)(),t=w($(n));return M.useMemo(()=>{const o=new Map;let d=-1,h={};return{matchHandlers:{},dispatch(i){return h=i,o.forEach(u=>u(h)),o.size>=1},subscribe(i){return o.size||this.register(),d+=1,o.set(d,i),i(h),d},unsubscribe(i){o.delete(i),o.size||this.unregister()},unregister(){Object.keys(t).forEach(i=>{const u=t[i],a=this.matchHandlers[u];a==null||a.mql.removeListener(a==null?void 0:a.listener)}),o.clear()},register(){Object.keys(t).forEach(i=>{const u=t[i],a=S=>{let{matches:x}=S;this.dispatch(Object.assign(Object.assign({},h),{[i]:x}))},l=window.matchMedia(u);l.addListener(a),this.matchHandlers[u]={mql:l,listener:a},a(l)})},responsiveMap:t}},[n])}const O=(n,t)=>{if(t&&typeof t=="object")for(let o=0;o<m.length;o++){const d=m[o];if(n[d]&&t[d]!==void 0)return t[d]}}}}]);
