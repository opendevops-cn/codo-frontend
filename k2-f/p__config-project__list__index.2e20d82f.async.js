"use strict";(self.webpackChunkk2=self.webpackChunkk2||[]).push([[8332],{73008:function(e,n,r){r.r(n),r.d(n,{default:function(){return q}});var t=r(90228),a=r.n(t),c=r(87999),s=r.n(c),i=r(48305),l=r.n(i),u=r(16975),o=r(38218),d=r(39048),f=r(10534),m=r(97607),h=r(63176),v=r(47852),p=r(70334),x=r(82187),_=r.n(x),j=r(50959),Z="container___mRsq1",g="grid___VpagI",k="card___fSznp",w="title-0___Tia3n",N="title-1___dNvBu",C="new___oAQRJ",b=r(11527),q=function(){var e=(0,d.Z)((function(e){return(0,u.Z)({url:"/api/k2/v1/project/?searchVal=".concat(e||"",'&filter_map={"status":"active"}')}).then((function(e){return e.items}))})),n=e.data,r=e.refresh,t=e.run,c=(0,j.useState)(""),i=l()(c,2),x=i[0],q=i[1],y=m.Z.useForm(),F=l()(y,1)[0],I=(0,f.Z)((function(e){t(e)}),{wait:500}),R=I.run;return(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Z,{value:x,onChange:function(e){q(e.target.value),R(e.target.value)},placeholder:"输入名称或代号进行搜索",style:{width:"100%",marginBottom:10}}),(0,b.jsx)("div",{className:Z,children:(0,b.jsxs)("div",{className:g,children:[(0,b.jsxs)("div",{className:_()(k,C),onClick:function(){var e;v.Z.confirm({title:"新建项目",width:600,onCancel:function(){F.resetFields()},onOk:(e=s()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.validateFields();case 2:return n=e.sent,e.next=5,(0,u.Z)({url:"/api/k2/v1/project/",method:"POST",data:n});case 5:p.ZP.success("创建成功"),F.resetFields(),r();case 8:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),content:(0,b.jsxs)(m.Z,{form:F,style:{marginTop:20},children:[(0,b.jsx)(m.Z.Item,{name:"code",label:"项目代号",required:!0,rules:[{required:!0,message:"请输入项目代号"},{pattern:/^[a-zA-Z0-9_]+$/,message:"项目代号仅允许英文大小写、数字和下划线"}],children:(0,b.jsx)(h.Z,{placeholder:"请输入项目英文名，仅允许英文大小写、数字和下划线"})}),(0,b.jsx)(m.Z.Item,{name:"name",label:"项目名称",required:!0,rules:[{required:!0,message:"请输入项目名称"}],children:(0,b.jsx)(h.Z,{placeholder:"请输入项目中文名"})})]})})},children:[(0,b.jsx)("div",{className:w,children:"+"}),(0,b.jsx)("div",{className:N,children:"新增项目"})]}),null==n?void 0:n.map((function(e){return(0,b.jsx)(o.Link,{to:"/config-project/".concat(e.id),children:(0,b.jsxs)("div",{className:k,children:[(0,b.jsx)("div",{className:w,children:e.code}),(0,b.jsx)("div",{className:N,children:e.name})]})},e.id)}))]})})]})}},10534:function(e,n,r){var t=r(99938),a=r(66292),c=r.n(a),s=r(50959),i=r(53270),l=r(77924),u=r(25492),o=r(80785);n.Z=function(e,n){var r;o.Z&&((0,u.mf)(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var a=(0,i.Z)(e),d=null!==(r=null==n?void 0:n.wait)&&void 0!==r?r:1e3,f=(0,s.useMemo)((function(){return c()((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a.current.apply(a,(0,t.ev)([],(0,t.CR)(e),!1))}),d,n)}),[]);return(0,l.Z)((function(){f.cancel()})),{run:f,cancel:f.cancel,flush:f.flush}}}}]);