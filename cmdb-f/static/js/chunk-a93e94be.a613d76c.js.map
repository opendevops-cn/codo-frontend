{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/components/set-server.vue","webpack://cmdb-[name]/src/views/cmdb/components/set-server.vue","webpack://cmdb-[name]/./src/views/cmdb/components/set-server.vue?35a2","webpack://cmdb-[name]/./src/views/cmdb/components/set-server.vue?86fc","webpack://cmdb-[name]/./src/api/cloud/agent.js","webpack://cmdb-[name]/./src/views/cmdb/components/bind-host.vue","webpack://cmdb-[name]/src/views/cmdb/components/bind-host.vue","webpack://cmdb-[name]/./src/views/cmdb/components/bind-host.vue?a0c5","webpack://cmdb-[name]/./src/views/cmdb/components/bind-host.vue?5bab","webpack://cmdb-[name]/./src/views/cmdb/basic/asset-agent.vue?15b9","webpack://cmdb-[name]/./src/api/cloud/server.js","webpack://cmdb-[name]/./src/views/cmdb/basic/asset-agent.vue","webpack://cmdb-[name]/src/views/cmdb/basic/asset-agent.vue","webpack://cmdb-[name]/./src/views/cmdb/basic/asset-agent.vue?0802","webpack://cmdb-[name]/./src/views/cmdb/basic/asset-agent.vue?f65c"],"names":["render","_vm","this","_c","_self","attrs","modalData","title","model","value","show","callback","$$v","$set","expression","asset_server_id","_l","serverList","item","key","id","name","staticStyle","btnLoading","on","handleChangeSave","_v","staticRenderFns","props","type","Object","default","data","initPara","page_number","page_size","methods","res","getServerList","code","$Message","error","msg","setTimeout","$emit","info","watch","created","mounted","handleGetData","component","getAgentlist","params","request","url","method","optAgent","batchAddServerByAgent","dialog","_s","totalCount","handleFilter","nativeOn","$event","indexOf","_k","keyCode","apply","arguments","searchVal","ref","columnsData","tableData","pageNum","pageSize","handlerChangePage","serverFilteredList","boundServerIds","agentInstanceId","pageTotal","align","minWidth","sortable","width","h","status","row","has_main_agent","color","isBound","is_bound_to_this_agent","agent_id","includes","size","style","marginRight","click","setMainAgent","computed","length","newVal","initData","setCurrentPageData","handleConfirm","currentRow","processServerData","servers","agentId","Array","isArray","sortedServers","boundServers","filter","server","map","allServersWithBindFlag","sort","a","b","loadServerData","agent_instance_id","showConfirmDialog","Promise","resolve","reject","$Modal","confirm","marginTop","display","alignItems","onOk","set_main_agent","updateMainAgent","success","onCancel","showSetMainConfirm","setAsMain","server_id","main_agent","optServerMainAgent","Error","bind_agnet_status","message","begin","end","slice","checkRegion","region","checkExecList","cloud_name","inner_ip","trim","optServer","optBatchServer","getUserField","optrationUserField","staticClass","handleSearch","search_filter","handlefilter","instance_id","_e","selectList","handleBatchAddServer","handleDel","tableColumns","i","tableLoading","handleSort","handleSelect","handlePageSize","spinShow","components","serverModal","BindServer","String","sg_ids","selectAgentId","tooltip","ellipsis","agent_bind_status","handleViewServer","handlePreview","handleAddServer","modalDataServer","action","order_by","order","searchParams","count","allServersRes","$refs","BindHost","e","toString","$once","content","id_list","then","$Notice","val","handleShowServer","paramsRow","handleUpData","upData","handleClose","handleDetail","natData","selectIdList","forEach","push","column","searchValue","securityInfoList","JSON","stringify"],"mappings":"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","file":"static/js/chunk-a93e94be.a613d76c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"title\":_vm.modalData.title,\"footer-hide\":true},model:{value:(_vm.modalData.show),callback:function ($$v) {_vm.$set(_vm.modalData, \"show\", $$v)},expression:\"modalData.show\"}},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择主机\"},model:{value:(_vm.asset_server_id),callback:function ($$v) {_vm.asset_server_id=$$v},expression:\"asset_server_id\"}},_vm._l((_vm.serverList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.name}})}),1),_c('Button',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"success\",\"loading\":_vm.btnLoading,\"long\":\"\"},on:{\"click\":_vm.handleChangeSave}},[_vm._v(\"确定更换\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal v-model=\"modalData.show\" :title=\"modalData.title\" :footer-hide=true>\n    <Select v-model=\"asset_server_id\" filterable clearable placeholder=\"请选择主机\">\n      <Option v-for=\"item in serverList\" :value=\"item.id\" :key=\"item.id\" :label=\"item.name\"></Option>\n    </Select>\n    <Button type=\"success\" style=\"margin-top: 10px;\" :loading=\"btnLoading\" @click=\"handleChangeSave\" long>确定更换</Button>\n  </Modal>\n</template>\n\n<script>\nimport { getServerList } from \"@/api/cloud/server\";\nexport default {\n  name: 'serverModal',\n  props: {\n    modalData: {\n      type: Object,\n      default: {}\n    },\n  },\n  data () {\n    return {\n      asset_server_id: null,\n      btnLoading: false,\n      serverList: [],\n      initPara:{\n        page_number: 1,\n        page_size: 300,\n      },\n    }\n  },\n  methods: {\n    async handleGetData() {\n      const res = await getServerList(this.initPara);\n      if (res.code == 0) {\n        this.serverList = res.data;\n      } else {\n        this.$Message.error(res.msg)\n      }\n    },\n    handleChangeSave () {\n      if (!this.asset_server_id) {\n        this.$Message.info('请选择主机')\n        return\n      }\n      this.btnLoading = true\n      setTimeout(() => {\n        this.$emit('save-data', { id: this.modalData.id, asset_server_id: this.asset_server_id } )\n        this.btnLoading = false\n      }, 1000)\n    },\n\n  },\n  watch: {\n\n  },\n  created () { },\n  mounted () {\n    this.handleGetData()\n  },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./set-server.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./set-server.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./set-server.vue?vue&type=template&id=ea9c8934&\"\nimport script from \"./set-server.vue?vue&type=script&lang=js&\"\nexport * from \"./set-server.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n// 获取Agent列表信息\nexport const getAgentlist = (params) => request({\n  url: '/api/v2/cmdb/agent/',\n  method: 'get',\n  params,\n})\n\n// 操作Agent\nexport const optAgent= (data, method) => request({\n  url: '/api/v2/cmdb/agent/',\n  method,\n  data,\n})\n\n// 批量生成主机\nexport const batchAddServerByAgent=(data, method) => request({\n  url: '/api/v2/cmdb/agent/batch_add_server/',\n  method,\n  data,\n})","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Modal',{attrs:{\"title\":\"选择主机\",\"width\":\"950\",\"mask-closable\":false,\"footer-hide\":true},model:{value:(_vm.dialog.show),callback:function ($$v) {_vm.$set(_vm.dialog, \"show\", $$v)},expression:\"dialog.show\"}},[_c('alert',[_vm._v(\"一共查询到:\"+_vm._s(_vm.totalCount)+\"条数据\")]),_c('Input',{staticStyle:{\"width\":\"330px\",\"margin\":\"0px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"输入实例ID、主机名、内网IP搜索\",\"search\":\"\"},on:{\"on-change\":_vm.handleFilter},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleFilter.apply(null, arguments)}},model:{value:(_vm.searchVal),callback:function ($$v) {_vm.searchVal=$$v},expression:\"searchVal\"}}),_c('div',{staticStyle:{\"margin-top\":\"5px\"}},[_c('Table',{ref:\"table\",attrs:{\"highlight-row\":\"\",\"stripe\":\"\",\"size\":\"small\",\"columns\":_vm.columnsData,\"data\":_vm.tableData}})],1),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('Page',{attrs:{\"total\":_vm.totalCount,\"current\":_vm.pageNum,\"page-size\":_vm.pageSize,\"show-total\":\"\"},on:{\"on-change\":_vm.handlerChangePage}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable vue/no-mutating-props -->\n<template>\n  <div>\n    <Modal v-model=\"dialog.show\" title=\"选择主机\" width=\"950\" :mask-closable=\"false\" :footer-hide=\"true\">\n      <alert>一共查询到:{{ totalCount }}条数据</alert>\n      <Input v-model=\"searchVal\" style=\"width: 330px; margin: 0px\" clearable placeholder=\"输入实例ID、主机名、内网IP搜索\"\n        @keydown.enter.native=\"handleFilter\" @on-change=\"handleFilter\" search />\n\n      <div style=\"margin-top: 5px\">\n        <Table highlight-row stripe size=\"small\" :columns=\"columnsData\" :data=\"tableData\" ref=\"table\"/>\n      </div>\n\n      <div style=\"margin: 10px; overflow: hidden\">\n        <Page :total=\"totalCount\" :current=\"pageNum\" :page-size=\"pageSize\" show-total @on-change=\"handlerChangePage\" />\n      </div>\n    </Modal>\n  </div>\n</template>\n<script>\nimport { optServerMainAgent } from '@/api/cloud/server.js'\nimport { on } from 'codemirror';\nimport { color } from 'echarts/lib/export';\nexport default {\n  name: \"BindHost\",\n  props: {\n    dialog: {\n      type: Object,\n      default: {},\n    },\n  },\n  data() {\n    return {\n      serverList: [], // 初始总数\n      serverFilteredList: [],\n      boundServerIds: [], \n      tableData: [],\n      searchVal: \"\",\n      agentInstanceId: 0,\n      pageTotal: 0,\n      pageSize: 10,\n      pageNum: 1,\n      columnsData: [\n        {\n          title: \"实例名称\",\n          key: \"name\",\n          align: \"center\",\n          minWidth: 100,\n          sortable: true,\n        },\n        {\n          title: \"内网IP\",\n          key: \"inner_ip\",\n          align: \"center\",\n          width: 140,\n\n          sortable: true,\n        },\n        {\n          title: \"可用区\",\n          key: \"region\",\n          align: \"center\",\n          width: 140,\n          sortable: true,\n        },\n        {\n          title: \"厂商\",\n          key: \"cloud_name\",\n          align: \"center\",\n          width: 140,\n          sortable: true,\n        },\n        {\n          title: \"是否有主agent\",\n          key: \"has_main_agent\",\n          align: \"center\",\n          width: 140,\n          sortable: true,\n          render: (h, params) => {\n            const status = params.row.has_main_agent;\n            if (status === true) {\n              return h('div', [\n                h(\n                  'Tag',\n                  {\n                    props: { color: '#19be6b' },\n                  },\n                  '是',\n                ),\n              ])\n            } else {\n              return h('div', [\n                h(\n                  'Tag',\n                  {\n                    props: { color: '#ed3f14' },\n                  },\n                  '否',\n                ),\n              ])\n            }\n          },\n        },\n        {\n          title: '操作',\n          key: 'action',\n          width: 150,\n          align: 'center',\n          render: (h, params) => {\n            // 检查当前行是否已绑定\n            const isBound = params.row.is_bound_to_this_agent ||\n              (params.row.agent_id &&\n                this.boundServerIds.includes(params.row.id));\n\n            return h('div', [\n              isBound ?\n                // 已绑定 - 显示禁用的\"已绑定\"按钮\n                h('Button', {\n                  props: {\n                    type: 'success',\n                    size: 'small',\n                    // disabled: true\n                  },\n                  style: {\n                    marginRight: '5px'\n                  },\n                  on: {\n                    click: () => {\n                      this.setMainAgent(params.row);\n                    }\n                  }\n                }, '已绑定')\n                :\n                // 未绑定 - 显示\"绑定\"按钮\n                h('Button', {\n                  props: {\n                    type: 'primary',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px'\n                  },\n                  on: {\n                    click: () => {\n                      this.setMainAgent(params.row);\n                    }\n                  }\n                }, '绑定')\n            ]);\n          }\n        }\n      ],\n    }\n  },\n  computed: {\n    totalCount() {\n      return this.serverFilteredList.length\n    },\n  },\n  watch: {\n    \"dialog.show\": function (newVal) {\n      if (newVal) {\n        this.initData()\n        this.setCurrentPageData()\n      }\n    },\n  },\n  methods: {\n    handleConfirm() {\n      if (this.currentRow) {\n        this.$emit('on-select', this.currentRow);\n        this.dialog.show = false;\n      }\n    },\n    /**\n * 处理服务器数据，标记绑定状态并排序\n * @param {Array} servers 服务器数据列表\n * @param {string} agentId 当前Agent ID\n * @returns {Object} 包含处理后的数据和绑定ID列表\n */\n    processServerData(servers, agentId) {\n      if (!servers || !Array.isArray(servers)) {\n        return {\n          sortedServers: [],\n          boundServerIds: []\n        };\n      }\n\n      // 获取绑定主机的ID列表\n      const boundServers = servers.filter(server => server.agent_id === agentId);\n      const boundServerIds = boundServers.map(server => server.id);\n\n      // 对所有主机标记绑定状态\n      const allServersWithBindFlag = servers.map(server => ({\n        ...server,\n        // 标记是否已绑定到当前Agent\n        is_bound_to_this_agent: server.agent_id === agentId,\n      }));\n\n      // 排序：已绑定的主机放在前面\n      const sortedServers = allServersWithBindFlag.sort((a, b) => {\n        // 已绑定的排在前面\n        if (a.is_bound_to_this_agent && !b.is_bound_to_this_agent) return -1;\n        if (!a.is_bound_to_this_agent && b.is_bound_to_this_agent) return 1;\n        // 如果绑定状态相同，按ID排序\n        return a.id - b.id;\n      });\n\n      return {\n        sortedServers,\n        boundServerIds\n      };\n    },\n\n    /**\n     * 加载并处理服务器数据\n     * @param {Array} servers 服务器数据列表\n     * @param {string} agentId 当前Agent ID\n     */\n    loadServerData(servers, agentId, agent_instance_id) {\n      if (!servers || !agentId) {\n        this.$Message.error('无效的数据参数');\n        return;\n      }\n\n      // 处理服务器数据\n      const { sortedServers, boundServerIds } = this.processServerData(servers, agentId);\n\n      // 更新组件数据\n      this.serverList = sortedServers;\n      this.boundServerIds = boundServerIds;\n      this.agentInstanceId = agent_instance_id;\n\n      // 重新过滤和分页\n      this.initData();\n      this.setCurrentPageData();\n    },                                                                                                                    \n    /**\n     * 显示确认对话框\n     * @param {Object} row 行数据\n     * @returns {Promise<void>}\n     */\n    showConfirmDialog(row) {\n      let setMainAgent = false;\n      return new Promise((resolve, reject) => {\n        this.$Modal.confirm({\n          title: '确认修改',\n          render: (h) => {\n            return h('div', [\n              // 主要提示内容\n              h('p', '当前该主机已绑定主agent，请确认是否将本agent设为主agent？'),\n\n              // 添加复选框\n              h('div', {\n                style: {\n                  marginTop: '16px',\n                  display: 'flex',\n                  alignItems: 'center'\n                }\n              }, [\n                h('Checkbox', {\n                  props: {\n                    value: setMainAgent\n                  },\n                  on: {\n                    'on-change': (value) => {\n                      setMainAgent = value;\n                    }\n                  },\n                  style: {\n                    marginRight: '8px'\n                  }\n                }),\n                h('span', '设为主agent')\n              ])\n            ]);\n          },\n          onOk: async () => {\n            try {\n              row.set_main_agent = setMainAgent;\n              await this.updateMainAgent(row, setMainAgent);\n              resolve({ success: true, setMainAgent: setMainAgent });\n            } catch (error) {\n              reject(error);\n            }\n          },\n          onCancel: () => {\n            resolve();\n          }\n        });\n      });\n    },\n    /**\n * 显示设置主 Agent 确认对话框\n * @param {Object} row 行数据\n * @returns {Promise<void>}\n */\n    showSetMainConfirm(row) {\n      return new Promise((resolve, reject) => {\n        // 默认不设为主 agent\n        let setAsMain = false;\n\n        this.$Modal.confirm({\n          title: '确认修改',\n          // 使用 render 函数自定义内容\n          render: (h) => {\n            return h('div', [\n              // 主要提示内容\n              h('p', '请确认是否将本agent绑定到该主机，并设置为主agent？'),\n\n              // 添加复选框\n              h('div', {\n                style: {\n                  marginTop: '16px',\n                  display: 'flex',\n                  alignItems: 'center'\n                }\n              }, [\n                h('Checkbox', {\n                  props: {\n                    value: setAsMain\n                  },\n                  on: {\n                    'on-change': (value) => {\n                      setAsMain = value;\n                    }\n                  },\n                  style: {\n                    marginRight: '8px'\n                  }\n                }),\n                h('span', '设为主agent')\n              ])\n            ]);\n          },\n          onOk: async () => {\n            try {\n              // 传递勾选状态\n              await this.updateMainAgent(row, setAsMain);\n              resolve({ success: true, setAsMain });\n            } catch (error) {\n              reject(error);\n            }\n          },\n          onCancel: () => {\n            resolve({ success: false, setAsMain: false });\n          }\n        });\n      });\n    },\n    /**\n     * 更新主 Agent\n     * @param {Object} row 行数据\n     * @returns {Promise<void>}\n     */\n    async updateMainAgent(row, setAsMain) {\n      try {\n        const data = {\n          server_id: row.id,\n          agent_instance_id: this.agentInstanceId,\n          main_agent: setAsMain\n        };\n\n        const res = await optServerMainAgent(data, 'post');\n\n        if (res.code === 0) {\n          this.$Message.success('设置成功');\n          this.dialog.show = false;\n          // 触发刷新\n          this.$emit(\"refresh\")\n          this.$emit('bind-complete'); \n        } else {\n          throw new Error(res.msg || '操作失败');\n        }\n      } catch (error) {\n        throw error;\n      }\n    },\n    /**\n     * 设置主 Agent\n     * @param {Object} row 行数据\n     * @returns {Promise<void>}\n     */\n    async setMainAgent(row) {\n      try {\n        if (row.has_main_agent && row.bind_agnet_status !== 0) {\n          // 如果已有主 agent，则弹出确认气泡\n          await this.showConfirmDialog(row);\n        } else {\n          // 如果没有主 agent，直接设为主 agent\n          await this.showSetMainConfirm(row);\n        }\n      } catch (error) {\n        this.$Message.error(`设置主Agent失败: ${error.message}`);\n      }\n    },\n    handlerChangePage(value) {\n      this.pageNum = value\n      this.setCurrentPageData()\n    },\n    // 分页处理\n    setCurrentPageData() {\n      const begin = (this.pageNum - 1) * this.pageSize\n      const end = this.pageNum * this.pageSize\n      this.tableData = this.serverFilteredList.slice(begin, end)\n    },\n    checkRegion(item) {\n      return item.region.indexOf(this.region) >= 0\n    },\n    checkExecList(item) {\n      return (item.name.indexOf(this.searchVal) >= 0) || (item.cloud_name.indexOf(this.searchVal) >= 0 || (item.inner_ip && item.inner_ip.indexOf(this.searchVal) >= 0) || (item.region && item.region.indexOf(this.searchVal) >= 0))\n    },\n    // 前端搜索和筛选\n    handleFilter() {\n      this.pageNum = 1\n      if (this.searchVal) {\n        this.searchVal = this.searchVal.trim()\n        this.serverFilteredList = this.serverList.filter(this.checkExecList)\n      } else {\n        this.serverFilteredList = this.serverList\n      }\n\n      this.setCurrentPageData()\n    },\n    initData() {\n      this.serverFilteredList = this.serverList\n      this.pageNum = 1\n      this.pageSize = 10\n      this.searchVal = \"\"\n    },\n  },\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bind-host.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bind-host.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bind-host.vue?vue&type=template&id=27b61bb2&\"\nimport script from \"./bind-host.vue?vue&type=script&lang=js&\"\nexport * from \"./bind-host.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset-agent.vue?vue&type=style&index=0&id=35962c0c&prod&lang=less&scoped=true&\"","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\n// 主机\nexport const getServerList = (params) => request({\n  url: '/api/v2/cmdb/server/',\n  method: 'get',\n  params,\n})\n\nexport const optServer = (data, method) => request({\n  url: '/api/v2/cmdb/server/',\n  method,\n  data,\n})\n\nexport const optBatchServer = (data, method) => request({\n  url: '/api/v2/cmdb/server/batch/',\n  method,\n  data,\n})\n\n// 用戶收藏字段\nexport const getUserField = (params) => request({\n  url: '/api/v2/cmdb/user_field/',\n  method: 'get',\n  params,\n})\n\nexport const optrationUserField = (data) => request({\n  url: '/api/v2/cmdb/user_field/',\n  method: 'put',\n  data,\n})\n\nexport const optServerMainAgent = (data, method) => request({\n  url: '/api/v2/cmdb/server/main_agent/',\n  method,\n  data,\n})","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"search-con search-con-top\"},[_c('div',{staticClass:\"search-left\"},[_c('Input',{staticClass:\"search-input\",attrs:{\"search\":\"\",\"maxlength\":50,\"placeholder\":\"输入关键字搜索\"},on:{\"on-search\":_vm.handleSearch},model:{value:(_vm.initPara.searchVal),callback:function ($$v) {_vm.$set(_vm.initPara, \"searchVal\", $$v)},expression:\"initPara.searchVal\"}}),_c('span',{staticStyle:{\"margin-left\":\"20px\"}},[_vm._v(\"一键筛选：\")]),_c('ButtonGroup',[(_vm.initPara.search_filter === 'no')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlefilter('no')}}},[_vm._v(\"未绑定\")]):_c('Button',{on:{\"click\":function($event){return _vm.handlefilter('no')}}},[_vm._v(\"未绑定\")]),(_vm.initPara.search_filter === 'yes')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlefilter('yes')}}},[_vm._v(\"已绑定\")]):_c('Button',{on:{\"click\":function($event){return _vm.handlefilter('yes')}}},[_vm._v(\"已绑定\")]),(_vm.initPara.search_filter === '')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlefilter('')}}},[_vm._v(\"全部\")]):_c('Button',{on:{\"click\":function($event){return _vm.handlefilter('')}}},[_vm._v(\"全部\")])],1),(_vm.instance_id)?_c('h4',{staticClass:\"search-col\"},[_vm._v(\"实例：\"+_vm._s(_vm.instance_id))]):_vm._e()],1),_c('div',{staticClass:\"search-right\"},[(!_vm.instance_id)?_c('Button',{staticClass:\"search-add-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.selectList.length !== 0 ? false : true},on:{\"click\":_vm.handleBatchAddServer}},[_vm._v(\"生成主机 \")]):_vm._e(),(!_vm.instance_id)?_c('Button',{staticClass:\"search-add-btn\",attrs:{\"type\":\"error\",\"disabled\":_vm.selectList.length !== 0 ? false : true},on:{\"click\":_vm.handleDel}},[_vm._v(\"批量删除 \")]):_vm._e()],1)]),_c('Table',{ref:\"selection\",attrs:{\"size\":\"small\",\"columns\":_vm.tableColumns,\"data\":_vm.tableData,\"loading\":_vm.i.tableLoading},on:{\"on-sort-change\":_vm.handleSort,\"on-selection-change\":_vm.handleSelect}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('Page',{attrs:{\"total\":_vm.i.pageTotal,\"current\":_vm.initPara.page_number,\"page-size\":_vm.initPara.page_size,\"show-total\":\"\",\"show-sizer\":\"\",\"page-size-opts\":[15, 50, 100, 1000]},on:{\"on-change\":_vm.handlerChangePage,\"on-page-size-change\":_vm.handlePageSize}})],1)]),(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}},[_c('Icon',{staticClass:\"demo-spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"18\"}}),_c('div',[_vm._v(\"加载中，请稍等一会...\")])],1):_vm._e(),_c('BindServer',{ref:\"BindHost\",attrs:{\"dialog\":_vm.dialog}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"search-con search-con-top\">\n      <!-- 左侧：搜索框 + 筛选按钮 -->\n      <div class=\"search-left\">\n        <Input class=\"search-input\" v-model=\"initPara.searchVal\" search :maxlength='50' @on-search=\"handleSearch\"\n          placeholder=\"输入关键字搜索\" />\n        <span style=\"margin-left: 20px\">一键筛选：</span>\n        <ButtonGroup>\n          <Button v-if=\"initPara.search_filter === 'no'\" type=\"primary\" @click=\"handlefilter('no')\">未绑定</Button>\n          <Button v-else @click=\"handlefilter('no')\">未绑定</Button>\n          <Button v-if=\"initPara.search_filter === 'yes'\" type=\"primary\" @click=\"handlefilter('yes')\">已绑定</Button>\n          <Button v-else @click=\"handlefilter('yes')\">已绑定</Button>\n          <Button v-if=\"initPara.search_filter === ''\" type=\"primary\" @click=\"handlefilter('')\">全部</Button>\n          <Button v-else @click=\"handlefilter('')\">全部</Button>\n        </ButtonGroup>\n        <h4 v-if=\"instance_id\" class=\"search-col\">实例：{{ instance_id }}</h4>\n      </div>\n      <!-- 右侧按钮 -->\n      <div class=\"search-right\">\n        <Button v-if=\"!instance_id\" type=\"primary\" class=\"search-add-btn\" @click=\"handleBatchAddServer\"\n          :disabled=\"selectList.length !== 0 ? false : true\">生成主机\n        </Button>\n        <Button v-if=\"!instance_id\" type=\"error\" class=\"search-add-btn\" @click=\"handleDel\"\n          :disabled=\"selectList.length !== 0 ? false : true\">批量删除\n        </Button>\n      </div>\n    </div>\n\n    <Table ref=\"selection\" size=\"small\" :columns=\"tableColumns\" :data=\"tableData\" :loading=\"i.tableLoading\"\n      @on-sort-change=\"handleSort\" @on-selection-change=\"handleSelect\"></Table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px; overflow: hidden\">\n      <div style=\"float: left;\">\n        <Page :total=\"i.pageTotal\" :current=\"initPara.page_number\" :page-size=\"initPara.page_size\" show-total show-sizer\n          :page-size-opts=\"[15, 50, 100, 1000]\" @on-change=\"handlerChangePage\" @on-page-size-change=\"handlePageSize\" />\n      </div>\n    </div>\n    <!-- 预览 -->\n    <Spin size=\"large\" fix v-if=\"spinShow\">\n      <Icon type=\"ios-loading\" size=\"18\" class=\"demo-spin-icon-load\"></Icon>\n      <div>加载中，请稍等一会...</div>\n    </Spin>\n    <BindServer ref=\"BindHost\" :dialog=\"dialog\"></BindServer>\n    <!-- <server-modal ref=\"serverModal\" :modal-data=\"modalDataServer\" @save-data=\"handleUpData\"></server-modal> -->\n  </div>\n</template>\n\n<script>\nimport { getAgentlist, optAgent, batchAddServerByAgent } from '@/api/cloud/agent.js'\nimport { getServerList, optServer } from '@/api/cloud/server.js'\nimport serverModal from '../components/set-server.vue'\nimport BindServer from '../components/bind-host.vue'\nexport default {\n  name: 'Agent',\n  components: {serverModal, BindServer},\n  props: {\n    instance_id: {\n      type: String,\n      default: null\n    },\n    sg_ids: {\n      type: Object | Array,\n      default: null\n    }\n  },\n  data () {\n    return {\n      // Detail\n      modalData: {\n        show: false,\n        title: 'Nat详情',\n      },\n      dialog: {\n        show: false,\n        title: \"预览主机\",\n      },\n      spinShow: false,\n      selectAgentId: null,\n      tableColumns: [\n        {\n          type: \"selection\",\n          key: \"selection\",\n          width: 60,\n          align: \"center\",\n        },\n        {\n          title: '主机名',\n          key: 'hostname',\n          tooltip: true,\n          sortable: true,\n          minWidth: 100\n        },\n        {\n          title: '内网IP',\n          key: 'ip',\n          ellipsis: true,\n          tooltip: true,\n          minWidth: 100,\n        },\n        {\n          title: 'proxy_id',\n          key: 'proxy_id',\n          align: 'center',\n          minWidth: 60\n        },\n        {\n          title: 'AgentID',\n          key: 'agent_id',\n          minWidth: 120\n        },\n        {\n          title: '版本',\n          key: 'version',\n          minWidth: 20\n        },\n        {\n          title: '状态',\n          key: 'agent_bind_status',\n          align: 'center',\n          width: 150,\n          sortable: true,\n          render: (h, params) => {\n            const status = params.row.agent_bind_status\n            if (status === 0) {\n              return h('div', [\n                h(\n                  'Tag',\n                  {\n                    props: { color: '#ed3f14'},\n                  },\n                  '暂未绑定',\n                ),\n              ])\n            } else if (status === 1) {\n              return h('div', [\n                h(\n                  'Tag',\n                  {\n                    props: { color: '#2d8cf0' },\n                  },\n                  '自动绑定',\n                ),\n              ])\n            } else if (status === 2) {\n              return h('div', [\n                h(\n                  'Tag',\n                  {\n                    props: { color: '#19be6b' },\n                  },\n                  '手动绑定',\n                ),\n              ])\n            }\n          },\n        },\n        {\n          title: 'workspace',\n          key: 'workspace',\n          minWidth: 90\n        },\n        {\n          title: '备注',\n          key: 'description',\n          ellipsis: true,\n          tooltip: true,\n          minWidth: 100\n        },\n        {\n          title: '更新时间',\n          key: 'update_time',\n          sortable: true,\n          width: 170\n        },\n        {\n          title: \"操作\",\n          key: \"handle\",\n          align: \"center\",\n          width: 200,\n          render: (h, params) => {\n            // 获取绑定状态\n            const isBound = params.row.agent_bind_status === 1 || params.row.agent_bind_status === 2;\n\n            return h(\"div\", [\n              h(\n                \"a\",\n                {\n                  props: {\n                    type: \"primary\", // 根据状态使用不同类型\n                    size: \"small\",\n                  },\n                  style: {\n                    marginRight: \"10px\",\n                  },\n                  on: {\n                    click: () => {\n                      // 根据状态调用不同方法\n                      if (isBound) {\n                        this.handleViewServer(params.row);\n                      } else {\n                        this.handlePreview(params.row);\n                      }\n                    },\n                  },\n                },\n                isBound ? \"查看主机\" : \"绑定主机\"\n              ),\n              h(\n                \"a\",\n                {\n                  style: {\n                    marginRight: \"10px\",\n                  },\n                  props: {\n                    size: \"small\",\n                  },\n                  on: {\n                    click: () => {\n                      this.handleAddServer([params.row.id]);\n                    },\n                  },\n                },\n                \"生成主机\"\n              ),\n            ]);\n          },\n        },\n\n      ],\n      modalDataServer: {\n        show: false,\n        title: '选择主机',\n        action: 'put'\n      },\n      tableData: [],\n      i:{\n        pageTotal: 0, //总数\n        tableLoading: true\n      },\n      initPara:{\n        page_number: 1,\n        page_size: 15,\n        searchVal: null,\n        sg_ids: [],\n        order_by: \"\",      //排序字段\n        order: \"ascend\", //排序 ascend descend\n        search_filter: 'no'\n      },\n      searchParams: {\n        page_number: 1,\n        page_size: 12,\n        search_filter: 'no',\n        order_by: \"\",      //排序字段\n        order: \"ascend\", //排序 ascend descend\n      },\n      selectList: [],\n    }\n  },\n  methods: {\n    // 获取\n    async handleGetData() {\n      const res = await getAgentlist(this.initPara);\n      if (res.code == 0) {\n        this.tableData = res.data;\n        this.i.pageTotal = res.count\n      } else {\n        this.$Message.error(res.msg)\n      }\n      this.i.tableLoading = false\n    },\n    /**\n * 查看已绑定的主机\n * @param {Object} row Agent行数据\n * @returns {Promise<void>}\n */\n    // 在 asset-agent.vue 中\n    async handleViewServer(row) {\n      this.spinShow = true;\n      try {\n        // 获取所有主机列表\n        let searchParams = {\n          page_number: 1,\n          page_size: 300,\n          search_filter: 'is_normal',\n          order_by: 'id',\n          order: 'ascend'\n        };\n\n        const allServersRes = await getServerList(searchParams);\n        if (allServersRes.code !== 0) {\n          this.$Message.error(`获取主机列表失败: ${allServersRes.msg}`);\n          this.spinShow = false;\n          return;\n        }\n\n        // 调用 BindHost 组件的方法处理数据\n        this.$refs.BindHost.loadServerData(allServersRes.data, row.agent_id, row.id);\n\n        // 设置标题\n        this.dialog.title = `查看已绑定主机 (${row.agent_id})`;\n\n        // 显示弹窗\n        this.dialog.show = true;\n      } catch (e) {\n        this.$Message.error(e.toString());\n      } finally {\n        this.spinShow = false;\n      }\n    },\n    async handlePreview(data) {\n      this.spinShow = true;\n\n      try {\n        let res = await getServerList();\n\n        if (res.code !== 0) {\n          this.$Message.error(`${res.msg}`);\n          return;\n        }\n        this.$refs.BindHost.serverList = res.data\n        this.$refs.BindHost.agentInstanceId = data.id;\n        this.dialog.show = true;\n        // 监听绑定完成事件\n        this.$refs.BindHost.$once('bind-complete', () => {\n          this.handleGetData(); // 刷新当前页面数据\n          this.dialog.show = false; // 关闭对话框\n        });\n      } catch (e) {\n        this.$Message.error(e.toString());\n      } finally {\n        this.spinShow = false;\n      }\n    },\n    //生成主机\n    handleAddServer(data) {\n      this.$Modal.confirm({\n        title: '二次确认',\n        content: '确定生成主机？',\n        onOk: () => {\n          let id_list = []\n          if (data) {\n            id_list = data;\n          } else {\n            id_list = this.selectList;\n          }\n          batchAddServerByAgent({ id_list: data }, 'post').then(res => {\n            if (res.code === 0) {\n              this.$Message.success(res.msg)\n              this.selectList = []\n              this.handleGetData()\n            } else {\n              this.$Notice.error({ title: `${res.msg}` })\n            }\n          })\n        },\n        onCancel: () => {\n          // this.$Message.info('回头是岸~')\n        },\n      })\n    },\n    handleBatchAddServer() {\n      this.$Modal.confirm({\n        title: '二次确认',\n        content: '确定生成主机？',\n        onOk: () => {\n          batchAddServerByAgent({ id_list: this.selectList }, 'post').then(res => {\n            if (res.code === 0) {\n              this.$Message.success(res.msg)\n              this.selectList = []\n              this.handleGetData()\n            } else {\n              this.$Notice.error({ title: `${res.msg}` })\n            }\n          })\n        },\n        onCancel: () => {\n          this.$Message.info('回头是岸~')\n        },\n      })\n    },\n    handlefilter(val) {\n      this.initPara.search_filter = val\n      this.handleGetData()\n    },\n    // 删除\n    handleDel() {\n      this.$Modal.confirm({\n        title: '二次确认',\n        content: '确定删除已选中的数据？',\n        onOk: () => {\n          optAgent({ id_list: this.selectList }, 'delete').then(res => {\n            if (res.code === 0) {\n              this.$Message.success(res.msg)\n              this.selectList = []\n              this.handleGetData()\n            } else {\n             this.$Notice.error({ title: `${res.msg}` })\n            }\n          })\n        },\n        onCancel: () => {\n          this.$Message.info('回头是岸~')\n        },\n      })\n    },\n    handleShowServer (paramsRow) {\n      this.modalDataServer.show = true;\n      this.$refs.serverModal.asset_server_id = paramsRow.asset_server_id;\n      this.modalDataServer.title = `选择主机 【${paramsRow.agent_id}】`\n      this.modalDataServer.id = paramsRow.id;\n    },\n\n    handleUpData (upData) {\n      optAgent(upData, 'patch').then(res => {\n      if (res.code == 0) {\n      this.$Message.success('成功')\n      this.handleClose()\n      } else {\n        this.$Message.error(res.msg)\n        }\n      })\n    },\n    // 详细信息\n    handleDetail(paramsRow) {\n      this.natData = paramsRow\n      this.modalData.show = true\n    },\n    handleClose() {\n      // this.modalAdd.show = false\n      // this.modalData.show = false\n      this.modalDataServer.show = false\n      this.handleGetData()\n    },\n    handleSelect (val) {\n      let selectIdList = []\n      val.forEach(item => {\n        selectIdList.push(item.id)\n      })\n      this.selectList = selectIdList\n    },\n    handleSearch(){\n      this.initPara.page_number = 1\n      this.handleGetData()\n    },\n    handleSort (column, key, order) {\n      this.initPara.order = column.order === \"asc\" ? 'ascend' : 'descend'\n      this.initPara.order_by = column.key\n      this.handleGetData()\n    },\n    // 分页\n    handlerChangePage (value) {\n      this.initPara.page_number = value\n      this.handleGetData()\n    },\n    handlePageSize (value) {\n      this.initPara.page_number = 1\n      this.initPara.page_size = value\n      this.handleGetData()\n    },\n  },\n  watch: {\n    searchValue (val) {\n      this.pageNum = 1\n      this.handleGetData()\n    },\n    instance_id (val) {\n      this.pageNum = 1\n      this.securityInfoList = []\n      this.handleGetData()\n    },\n    sg_ids (val) {\n      this.initPara['sg_ids'] = JSON.stringify(this.sg_ids)\n      this.pageNum = 1\n      this.securityInfoList = []\n      this.handleGetData()\n    },\n  },\n  computed: {\n  },\n  mounted () {\n    this.handleGetData()\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.search-con {\n  padding: 5px 0;\n  display: flex;\n  justify-content: space-between;\n  /* 左右对齐 */\n  align-items: center;\n  /* 垂直居中 */\n  flex-wrap: wrap;\n\n  /* 如果宽度不够，换行 */\n  .search {\n    &-col {\n      display: inline-block;\n      margin-left: 10px;\n      width: 400px;\n    }\n\n    &-input {\n      display: inline-block;\n      width: 350px;\n      margin-left: 2px;\n    }\n\n    &-add-btn {\n      margin-left: 2px;\n      margin-right: 3px;\n    }\n  }\n}\n\n.search-left {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  /* 控制间距 */\n}\n\n.search-right {\n  display: flex;\n  gap: 10px;\n  /* 按钮间距 */\n  margin-right: 20px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset-agent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./asset-agent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./asset-agent.vue?vue&type=template&id=35962c0c&scoped=true&\"\nimport script from \"./asset-agent.vue?vue&type=script&lang=js&\"\nexport * from \"./asset-agent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./asset-agent.vue?vue&type=style&index=0&id=35962c0c&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35962c0c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}