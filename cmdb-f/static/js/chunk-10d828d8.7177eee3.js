(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-10d828d8","chunk-2d0d5c03"],{"702f":function(e,t,a){"use strict";a.r(t),a.d(t,"getAwsEventslist",(function(){return s})),a.d(t,"getAliyunEventslist",(function(){return i})),a.d(t,"getQcloudEventslist",(function(){return l}));var n=a("be3b");const s=e=>Object(n["default"])({url:"/api/v2/cmdb/events/aws/",method:"get",params:e}),i=e=>Object(n["default"])({url:"/api/v2/cmdb/events/aliyun/",method:"get",params:e}),l=e=>Object(n["default"])({url:"/api/v2/cmdb/events/qcloud/",method:"get",params:e})},d65a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("Card",[t("Input",{staticStyle:{width:"300px",margin:"2px"},attrs:{clearable:"",placeholder:"输入关键字模糊搜索"},on:{"on-change":e.handleClear},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}},model:{value:e.searchParams.searchVal,callback:function(t){e.$set(e.searchParams,"searchVal",t)},expression:"searchParams.searchVal"}}),t("Button",{attrs:{type:"default",icon:"ios-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),t("span",{staticStyle:{"margin-left":"20px"}},[e._v("一键筛选：")]),t("Button",{staticStyle:{margin:"3px"},on:{click:function(t){return e.handlefilter("upcoming")}}},[e._v("未处理事件")]),t("Table",{attrs:{size:"small",columns:e.columns,data:e.tableData}}),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"left"}},[t("Page",{attrs:{total:e.pageTotal,current:e.searchParams.page_number,"page-size":e.searchParams.page_size,"page-size-opts":[12,35,50,100],"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.handlePageSize}})],1)])],1)},s=[],i=a("702f"),l={components:{},data(){return{tableData:[],pageTotal:10,searchParams:{page_number:1,page_size:12},columns:[{title:"ID",key:"id",align:"center",width:80,sortable:!0},{title:"账号ID",width:160,key:"event_account_id",align:"center",sortable:!0},{title:"类型",width:380,key:"event_type",tooltip:!0,align:"left",sortable:!0},{title:"实例ID",key:"event_instnace_id",align:"left",sortable:!0,ellipsis:!0,tooltip:!0,render:(e,t)=>e("a",{on:{click:()=>{this.handleDetail(t.index)}}},t.row.event_instnace_id)},{title:"主机名",key:"event_name",align:"left",minWidth:150,sortable:!0},{title:"区域",maxWidth:150,key:"event_region",align:"center",sortable:!0},{title:"服务",width:150,key:"event_service",align:"center",sortable:!0},{title:"开始时间(UTC)",width:180,key:"event_start_time",align:"center",sortable:!0},{title:"状态",key:"event_status",width:100,align:"center",sortable:!0,render:(e,t)=>{let a=t.row.event_status;return e("div","upcoming"==a?[e("tag",{props:{color:"error"},style:{marginRight:"4px"}},"未处理")]:[e("tag",{props:{color:"success"},style:{marginRight:"4px"}},"已处理")])}}]}},methods:{async getTableData(){const e=await Object(i["getAwsEventslist"])(this.searchParams);0===e.code?(this.tableData=e.data,this.pageTotal=e.count):this.$Message.error(""+e.msg)},handleDetail(e){this.$Modal.info({width:"950px",title:"AWS Events 事件信息",content:`账号：${this.tableData[e].event_account_id}<br>\n            区域：${this.tableData[e].event_region}<br>\n            实例ID：${this.tableData[e].event_instnace_id}<br>\n            实例名称：${this.tableData[e].event_name}<br>\n            事件状态：${this.tableData[e].event_status}<br>\n            事件类型：${this.tableData[e].event_type}<br>\n            事件开始时间：${this.tableData[e].event_start_time}<br>\n            事件ID：${this.tableData[e].event_arn}<br>\n`})},handleClear(e){""===e.target.value&&(this.tableData=this.value)},handlePageSize(e){this.searchParams.page_size=e,this.getTableData()},changePage(e){this.searchParams.page_number=e,this.getTableData()},handleSearch(){this.searchParams.filter_status="",this.searchParams.page_number=1,this.getTableData()},handlefilter(e){this.searchParams.filter_status=e,this.searchParams.page_number=1,this.getTableData()}},mounted(){this.getTableData()}},r=l,c=a("2877"),o=Object(c["a"])(r,n,s,!1,null,null,null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-10d828d8.7177eee3.js.map