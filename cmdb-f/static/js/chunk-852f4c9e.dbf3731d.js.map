{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/components/region-asset-preview.vue","webpack://cmdb-[name]/src/views/cmdb/components/region-asset-preview.vue","webpack://cmdb-[name]/./src/views/cmdb/components/region-asset-preview.vue?d576","webpack://cmdb-[name]/./src/views/cmdb/components/region-asset-preview.vue?f267","webpack://cmdb-[name]/./src/views/cmdb/components/region-asset-preview.vue?44a0","webpack://cmdb-[name]/./src/api/cloud-region.js"],"names":["render","_vm","this","_c","_self","attrs","modalData","title","on","handleCancel","model","value","show","callback","$$v","$set","expression","staticClass","handleSearch","nativeOn","$event","type","indexOf","_k","keyCode","key","apply","arguments","initPara","searchVal","ref","columns","tableData","handleSelect","staticStyle","i","pageTotal","page_number","page_size","handlerChangePage","handlePageSize","staticRenderFns","components","name","props","Object","default","data","tableLoading","selectList","width","align","minWidth","maxWidth","methods","$emit","assign","region_id","res","previewCloudRegion","code","count","$Notice","error","msg","handleDel","id_list","val","selectIdList","forEach","item","push","id","handleGetData","watch","computed","mounted","component","params","request","url","method","optCloudRegionPro","getCloudRegion","optCloudRegion"],"mappings":"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","file":"static/js/chunk-852f4c9e.dbf3731d.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Drawer',{attrs:{\"title\":_vm.modalData.title,\"width\":\"70%\",\"draggable\":\"\"},on:{\"on-close\":_vm.handleCancel},model:{value:(_vm.modalData.show),callback:function ($$v) {_vm.$set(_vm.modalData, \"show\", $$v)},expression:\"modalData.show\"}},[_c('div',{staticClass:\"search-con search-con-top\"},[_c('Input',{staticClass:\"search-input\",attrs:{\"search\":\"\",\"placeholder\":\"输入关键字全局搜索\"},on:{\"on-search\":_vm.handleSearch},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearch.apply(null, arguments)}},model:{value:(_vm.initPara.searchVal),callback:function ($$v) {_vm.$set(_vm.initPara, \"searchVal\", $$v)},expression:\"initPara.searchVal\"}})],1),_c('Table',{ref:\"selection\",attrs:{\"size\":\"small\",\"columns\":_vm.columns,\"data\":_vm.tableData},on:{\"on-selection-change\":_vm.handleSelect}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('Page',{attrs:{\"total\":_vm.i.pageTotal,\"current\":_vm.initPara.page_number,\"page-size\":_vm.initPara.page_size,\"show-total\":\"\",\"show-sizer\":\"\",\"page-size-opts\":[15, 50, 100]},on:{\"on-change\":_vm.handlerChangePage,\"on-page-size-change\":_vm.handlePageSize}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <Drawer v-model=\"modalData.show\" @on-close='handleCancel'  :title=\"modalData.title\" width=\"70%\" draggable  >\n      <div class=\"search-con search-con-top\">\n          <Input class=\"search-input\"  v-model=\"initPara.searchVal\" search @on-search=\"handleSearch\"  @keydown.enter.native=\"handleSearch\" placeholder=\"输入关键字全局搜索\" />\n<!--           <Button type=\"error\" class=\"search-btn\" :disabled=\"selectList.length !== 0 ? false : true\"   @click=\"handleDel\">解除关联</Button>-->\n      </div>\n\n      <Table size=\"small\" ref=\"selection\"  :columns=\"columns\" :data=\"tableData\" @on-selection-change=\"handleSelect\"></Table>\n\n      <!-- 分页 -->\n      <div style=\"margin: 10px; overflow: hidden\">\n        <div style=\"float: left;\">\n          <Page :total=\"i.pageTotal\" :current=\"initPara.page_number\" :page-size=\"initPara.page_size\" show-total show-sizer\n            :page-size-opts=\"[15, 50, 100]\" @on-change=\"handlerChangePage\" @on-page-size-change=\"handlePageSize\" />\n        </div>\n      </div>\n\n    </Drawer>\n</template>\n<script>\nimport { previewCloudRegion } from '@/api/cloud-region'\nexport default {\n  components: {},\n  name: 'regionAssetPreview',\n  props: {\n    modalData: {\n      type: Object,\n      default: {}\n    },\n  },\n  data () {\n    return {\n      initPara:{\n        page_number: 1,\n        page_size: 15,\n        searchVal: null,\n      },\n      i: {\n        pageTotal: 0, //总数\n        tableLoading: false\n      },\n      selectList: [],\n      tableData: [],\n      columns: [\n         {\n            type: \"selection\",\n            key: \"selection\",\n            width: 60,\n            align: \"center\",\n        },\n        {\n          title: \"ID\",\n          key: \"id\",\n          minWidth: 100,\n          align: \"center\",\n        },\n         {\n          title: \"资源名\",\n          key: \"name\",\n          minWidth: 150,\n          align: \"center\",\n        },\n        {\n         title: \"云厂商\",\n          key: \"cloud_name\",\n          minWidth: 150,\n          align: \"center\",\n        },\n          {\n         title: \"地域\",\n          key: \"region\",\n          minWidth: 150,\n          align: \"center\",\n        },\n        {\n          title: \"内网IP\",\n          key: \"inner_ip\",\n          minWidth: 120,\n          maxWidth: 170,\n          align: \"center\",\n        },\n        {\n          title: \"状态\",\n          key: \"state\",\n          minWidth: 110,\n          maxWidth: 140,\n          align: \"center\",\n        },\n      ],\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('close')\n    },\n    async handleGetData () {\n      this.initPara = Object.assign(this.initPara, { region_id: this.modalData.region_id })\n      const res = await previewCloudRegion( this.initPara);\n      if (res.code == 0) {\n        this.tableData = res.data\n        this.i.pageTotal = res.count\n      } else {\n       this.$Notice.error({ title: `${res.msg}` });\n      }\n    },\n    handleDel () {\n      this.$emit('del', { id_list: this.selectList, region_id: this.modalData.region_id })\n    },\n \n    handleSelect (val) {\n      let selectIdList = []\n      val.forEach(item => {\n        selectIdList.push(item.id)\n      })\n      this.selectList = selectIdList\n    },\n    handleSearch () {\n      this.initPara.page_number = 1\n      this.handleGetData()\n    },\n    // 分页\n    handlerChangePage (value) {\n      this.initPara.page_number = value\n      this.handleGetData()\n    },\n    handlePageSize (value) {\n      this.initPara.page_number = 1\n      this.initPara.page_size = value\n      this.handleGetData()\n    },\n  },\n  watch: {\n  },\n  computed: {\n  },\n  //\n  mounted () {\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.search-con {\n  padding: 10px 0;\n\n  .search {\n    &-col {\n      display: inline-block;\n      width: 80px;\n      margin-left: 2px;\n    }\n    &-input {\n      display: inline-block;\n      width: 450px;\n      margin-left: 2px;\n    }\n\n    &-btn {\n      margin-left: 10px;\n    }\n\n    &-add-btn {\n      margin-right: 10px;\n    }\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region-asset-preview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region-asset-preview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./region-asset-preview.vue?vue&type=template&id=16f6d2f2&scoped=true&\"\nimport script from \"./region-asset-preview.vue?vue&type=script&lang=js&\"\nexport * from \"./region-asset-preview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./region-asset-preview.vue?vue&type=style&index=0&id=16f6d2f2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16f6d2f2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region-asset-preview.vue?vue&type=style&index=0&id=16f6d2f2&prod&lang=less&scoped=true&\"","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n// 动态规则管理\n\n// 预览\nexport const previewCloudRegion = (params) => request({\n  url: '/api/v2/cmdb/cloud_region/preview/',\n  method: 'get',\n  params\n})\n\n// 操作\nexport const optCloudRegionPro = (data, method) => request({\n  url: '/api/v2/cmdb/cloud_region/pro/',\n  data,\n  method\n})\n\n// 查看\nexport const getCloudRegion = (params) => request({\n  url: '/api/v2/cmdb/cloud_region/',\n  method: 'get',\n  params\n})\n\n// 操作\nexport const optCloudRegion= (data, method) => request({\n  url: '/api/v2/cmdb/cloud_region/',\n  data,\n  method\n})"],"sourceRoot":""}