(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-6d8ca50b"],{"3c7f":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"orders__header"},[a("Input",{staticClass:"orders__header__input",attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchParams.searchVal,callback:function(a){e.$set(e.searchParams,"searchVal",a)},expression:"searchParams.searchVal"}}),a("Button",{staticClass:"orders__header__button",on:{click:e.getTableData}},[e._v("搜索")])],1),a("Table",{ref:"selection",attrs:{stripe:"",size:"small",columns:e.columns,data:e.tableData}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px",overflow:"hidden"}},[a("Page",{attrs:{total:e.pageTotal,current:e.searchParams.page_number,"page-size":e.searchParams.page_size,"page-size-opts":[12,35,50,100],"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.handlePageSize}})],1),a("Modal",{attrs:{title:"删除采购记录",width:520,loading:e.deleteModalLoading},on:{"on-ok":e.deleteModalOk,"on-cancel":e.deleteModalCancel},model:{value:e.showDeleteModal,callback:function(a){e.showDeleteModal=a},expression:"showDeleteModal"}},[a("div",[e._v(" 确认删除采购记录吗？ ")])]),a("AddTemplateModal",{attrs:{show:e.showModal,buyRow:e.buyRow},on:{closeAddModal:e.closeAddModal,addSuccessCallback:e.addSuccessCallback}})],1)},l=[],o=(t("d9e2"),t("30b3")),i=t("5e65");const d=e=>{switch(e){case"0":return"#FF9900";case"1":return"#19BE6B";default:return"#ED4014"}},r=5e3;var c={components:{AddTemplateModal:i["default"]},data(){return{buyRow:null,showModal:!1,timer:null,curRow:{},showDeleteModal:!1,deleteModalLoading:!0,pageTotal:0,tableLoading:!1,columns:[{title:"ID",key:"id",width:100},{title:"任务ID",key:"flow_id",width:120,render:(e,a)=>e("div",[e("div",{style:{color:"#2d8cf0",cursor:"pointer"},on:{click:()=>{window.open("https://flow.huanle.com/#/orderCenter/order-list?order_id="+a.row.flow_id)}}},a.row.flow_id)])},{title:"名称",key:"instance_name",width:220},{title:"模板",key:"name",minWidth:200},{title:"资源",key:"res_type_alias",minWidth:120},{title:"厂商",key:"vendor_alias",width:160},{title:"状态",key:"status_alias",width:160,render:(e,a)=>e("div",[e("Tag",{props:{color:d(a.row.status)},style:{}},a.row.status_alias)])},{title:"开始时间",key:"create_time",width:240},{title:"结束时间",key:"update_time",width:240},{title:"操作",render:(e,a)=>e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:()=>{this.buyRow=a.row.data,this.showModal=!0}}},"复购")]),width:120}],tableData:[],searchParams:{page_number:1,page_size:12,order_by:"id",order:"descend",searchVal:""}}},mounted(){this.getTableData()},beforeDestroy(){clearTimeout(this.timer)},methods:{addSuccessCallback(){this.showModal=!1,this.getTableData()},closeAddModal(){this.showModal=!1},async deleteModalOk(){try{const{id:e}=this.curRow,a=await Object(o["deleteOrderInfo"])({id_list:[e]});if(!a)throw new Error("请求错误，请重试");this.showDeleteModal=!1,this.$Message.success(a.msg),this.getTableData()}catch(e){this.$Message.error(e.message),this.deleteModalLoading=!1}finally{this.$nextTick(()=>{this.deleteModalLoading=!0})}},deleteModalCancel(){this.showDeleteModal=!1},async getTableData(){try{this.tableLoading=!0;const{data:e,count:a}=await Object(o["getOrderInfoList"])(this.searchParams);this.pageTotal=a,this.tableData=e}catch(e){this.$Message.error(e.message)}finally{this.tableLoading=!1,clearTimeout(this.timer),this.timer=setTimeout(()=>{this.getTableData()},r)}},handlePageSize(e){this.searchParams.page_size=e,this.getTableData()},changePage(e){this.searchParams.page_number=e,this.getTableData()}}},n=c,h=(t("dbf5"),t("2877")),u=Object(h["a"])(n,s,l,!1,null,"bbea0208",null);a["default"]=u.exports},"61c6":function(e,a,t){},dbf5:function(e,a,t){"use strict";t("61c6")}}]);
//# sourceMappingURL=chunk-6d8ca50b.9f1a1468.js.map