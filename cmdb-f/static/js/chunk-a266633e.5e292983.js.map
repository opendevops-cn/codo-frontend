{"version":3,"sources":["webpack://cmdb-[name]/./src/api/domain/domain.js","webpack://cmdb-[name]/./src/views/domain-name/components/domain-edit.vue","webpack://cmdb-[name]/src/views/domain-name/components/domain-edit.vue","webpack://cmdb-[name]/./src/views/domain-name/components/domain-edit.vue?66ee","webpack://cmdb-[name]/./src/views/domain-name/components/domain-edit.vue?bd5a"],"names":["getDomain","params","request","url","method","optDomain","data","syncDomain","getDomainRecords","optDomainRecords","recordsChangeRemark","getDomainLog","render","_vm","this","_c","_self","attrs","modalEditData","title","model","value","show","callback","$$v","$set","expression","ref","formValidate","ruleValidate","action","_v","_s","domain_name","minRows","maxRows","remark","staticStyle","optionsDate","record_end_time","btnLoading","on","$event","handleSubmit","handlerReset","staticRenderFns","name","props","type","Object","default","domainData","shortcuts","text","Date","id","required","message","trigger","is_used","methods","handleCancel","$emit","$refs","validate","valid","setTimeout","formData","state","then","res","code","$Message","error","content","JSON","stringify","msg","duration","catch","response","resetFields","watch","mounted","component"],"mappings":"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","file":"static/js/chunk-a266633e.5e292983.js","sourcesContent":["// import axios from '@/libs/api.request'\nimport request from '@/plugins/axios'\n\nexport const getDomain = (params) => {\n    return request({\n        url: '/api/v2/cmdb/dns/domain/',\n        method: 'get',\n        params: params\n    })\n}\n\nexport const optDomain = (data, method) => {\n    return request({\n        url: '/api/v2/cmdb/dns/domain/',\n        method: method,\n        data\n    })\n}\n\nexport const syncDomain = () => {\n    return request({\n        url: '/api/v2/cmdb/dns/sync/',\n        method: 'post'\n    })\n}\n\nexport const getDomainRecords = (params) => {\n    return request({\n        url: '/api/v2/cmdb/dns/record/',\n        method: 'get',\n        params\n    })\n}\n\nexport const optDomainRecords = (data, method) => {\n    return request({\n        url: '/api/v2/cmdb/dns/record/',\n        method: method,\n        data\n    })\n}\n\nexport const recordsChangeRemark = (data) => {\n    return request({\n        url: '/api/v2/cmdb/dns/remark/',\n        method: 'post',\n        data\n    })\n}\n\nexport const getDomainLog = (params) => {\n    return request({\n        url: '/api/v2/cmdb/dns/logs/',\n        method: 'get',\n        params\n    })\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"width\":\"700px;\",\"title\":_vm.modalEditData.title,\"footer-hide\":true},model:{value:(_vm.modalEditData.show),callback:function ($$v) {_vm.$set(_vm.modalEditData, \"show\", $$v)},expression:\"modalEditData.show\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":100,\"label-colon\":true}},[_c('FormItem',{attrs:{\"label\":\"域名名称\",\"prop\":\"domain_name\"}},[(_vm.modalEditData.action == 'put')?[_c('p',[_vm._v(\" \"+_vm._s(_vm.formValidate.domain_name))])]:[_c('Input',{attrs:{\"maxlength\":\"80\",\"type\":\"text\",\"placeholder\":\"请输入域名名称...\"},model:{value:(_vm.formValidate.domain_name),callback:function ($$v) {_vm.$set(_vm.formValidate, \"domain_name\", $$v)},expression:\"formValidate.domain_name\"}})]],2),_c('FormItem',{attrs:{\"label\":\"备注信息\",\"prop\":\"remark\"}},[_c('Input',{attrs:{\"maxlength\":\"250\",\"type\":\"textarea\",\"autosize\":{minRows: 3,maxRows: 5},\"placeholder\":\"备注信息...\"},model:{value:(_vm.formValidate.remark),callback:function ($$v) {_vm.$set(_vm.formValidate, \"remark\", $$v)},expression:\"formValidate.remark\"}})],1),_c('FormItem',{attrs:{\"label\":\"过期时间\",\"prop\":\"record_end_time\"}},[_c('DatePicker',{staticStyle:{\"width\":\"280px\"},attrs:{\"type\":\"date\",\"options\":_vm.optionsDate,\"placeholder\":\"备注域名到期时间\"},model:{value:(_vm.formValidate.record_end_time),callback:function ($$v) {_vm.$set(_vm.formValidate, \"record_end_time\", $$v)},expression:\"formValidate.record_end_time\"}})],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"提交\")]),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":function($event){return _vm.handlerReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal width=\"700px;\" v-model=\"modalEditData.show\" :title=\"modalEditData.title\" :footer-hide=true>\n      <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"100\" :label-colon=true >\n\n        <FormItem label=\"域名名称\" prop=\"domain_name\">\n          <template v-if=\"modalEditData.action == 'put'\">\n            <p> {{formValidate.domain_name}}</p>\n          </template>\n          <template v-else>\n            <Input v-model=\"formValidate.domain_name\" maxlength=\"80\" type=\"text\"  placeholder=\"请输入域名名称...\"></Input>\n          </template>\n        </FormItem>\n\n\n         <FormItem label=\"备注信息\" prop=\"remark\">\n          <Input v-model=\"formValidate.remark\" maxlength=\"250\" type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 5}\" placeholder=\"备注信息...\"></Input>\n        </FormItem>\n\n        <FormItem label=\"过期时间\" prop=\"record_end_time\">\n          <DatePicker type=\"date\" :options=\"optionsDate\" placeholder=\"备注域名到期时间\" v-model=\"formValidate.record_end_time\"  style=\"width: 280px\"></DatePicker>\n        </FormItem>\n\n        <FormItem>\n          <Button type=\"primary\" :loading=\"btnLoading\"  @click=\"handleSubmit('formValidate')\">提交</Button>\n          <Button @click=\"handlerReset('formValidate')\" style=\"margin-left: 8px\">重置</Button>\n        </FormItem>\n    </Form>\n  </Modal>\n</template>\n<script>\nimport { optDomain }  from '@/api/domain/domain.js'\nexport default {\n  name: 'domainEdit',\n  props: {\n    modalEditData: {\n        type :Object,\n        default: {}\n    },\n    domainData: {\n        type :Object,\n        default: {}\n    }\n  },\n  data () {\n    return {\n      optionsDate: {\n        shortcuts: [\n            {\n                text: '今天',\n                value () {\n                    return new Date();\n                }\n            } ]\n        },\n        btnLoading: false,\n        formValidate: {\n            id:'',\n            domain_name: '',\n            remark: '',\n            record_end_time: ''\n        },\n        ruleValidate: {\n          domain_name: [{ required: true, message: 'The domain name cannot be empty', trigger: 'blur' }],\n          is_used: [{ required: true, message: 'Cannot be empty', trigger: 'change' }],\n          remark: [{ required: true, message: '备注信息不能为空', trigger: 'blur' }]\n        }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('modal-close')\n    },\n\n    handleSubmit (name) {\n      this.$refs[name].validate((valid) => {\n          if (valid) {\n            this.btnLoading = true\n            setTimeout(() => {\n                let formData\n                if ( this.modalEditData.action === 'put') {\n                  formData = {\n                    id: this.formValidate.id,\n                    remark: this.formValidate.remark,\n                    record_end_time: this.formValidate.record_end_time,\n                  }\n                } else {\n                  formData = {\n                    domain_name: this.formValidate.domain_name,\n                    remark: this.formValidate.remark,\n                    record_end_time: this.formValidate.record_end_time,\n                    state: '手动'\n                  }\n                  \n                }\n                optDomain(formData, this.modalEditData.action).then(res => {\n                  if (res.code == 0) {\n                      this.modalEditData.show = false\n                      this.btnLoading = false\n                      this.handleCancel()\n                  } else {\n                      this.$Message.error({\n                          content: JSON.stringify(res.data.msg),\n                          duration: 3\n                      })\n                  }}).catch(error => {\n                      this.$Message.error({\n                          content: JSON.stringify(error.response.data),\n                          duration: 10\n                      })\n                  })\n                  this.btnLoading = false\n              }, 1000)\n          } else {\n              this.$Message.error('表单校验不通过!');\n          }\n      })\n    },\n    handlerReset (name) {\n        this.$refs[name].resetFields();\n    }\n  },\n  //\n  watch: {\n    domainData (value) {\n      this.formValidate = value\n    }\n  },\n  //\n  mounted() {\n  }\n  //\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./domain-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./domain-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./domain-edit.vue?vue&type=template&id=142da326&\"\nimport script from \"./domain-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./domain-edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}