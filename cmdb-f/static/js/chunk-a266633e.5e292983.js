(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-a266633e","chunk-2d0aba0d"],{"15a4":function(t,e,a){"use strict";a.r(e),a.d(e,"getDomain",(function(){return d})),a.d(e,"optDomain",(function(){return o})),a.d(e,"syncDomain",(function(){return i})),a.d(e,"getDomainRecords",(function(){return n})),a.d(e,"optDomainRecords",(function(){return m})),a.d(e,"recordsChangeRemark",(function(){return l})),a.d(e,"getDomainLog",(function(){return s}));var r=a("be3b");const d=t=>Object(r["default"])({url:"/api/v2/cmdb/dns/domain/",method:"get",params:t}),o=(t,e)=>Object(r["default"])({url:"/api/v2/cmdb/dns/domain/",method:e,data:t}),i=()=>Object(r["default"])({url:"/api/v2/cmdb/dns/sync/",method:"post"}),n=t=>Object(r["default"])({url:"/api/v2/cmdb/dns/record/",method:"get",params:t}),m=(t,e)=>Object(r["default"])({url:"/api/v2/cmdb/dns/record/",method:e,data:t}),l=t=>Object(r["default"])({url:"/api/v2/cmdb/dns/remark/",method:"post",data:t}),s=t=>Object(r["default"])({url:"/api/v2/cmdb/dns/logs/",method:"get",params:t})},"6cb4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("Modal",{attrs:{width:"700px;",title:t.modalEditData.title,"footer-hide":!0},model:{value:t.modalEditData.show,callback:function(e){t.$set(t.modalEditData,"show",e)},expression:"modalEditData.show"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100,"label-colon":!0}},[e("FormItem",{attrs:{label:"域名名称",prop:"domain_name"}},["put"==t.modalEditData.action?[e("p",[t._v(" "+t._s(t.formValidate.domain_name))])]:[e("Input",{attrs:{maxlength:"80",type:"text",placeholder:"请输入域名名称..."},model:{value:t.formValidate.domain_name,callback:function(e){t.$set(t.formValidate,"domain_name",e)},expression:"formValidate.domain_name"}})]],2),e("FormItem",{attrs:{label:"备注信息",prop:"remark"}},[e("Input",{attrs:{maxlength:"250",type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"备注信息..."},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1),e("FormItem",{attrs:{label:"过期时间",prop:"record_end_time"}},[e("DatePicker",{staticStyle:{width:"280px"},attrs:{type:"date",options:t.optionsDate,placeholder:"备注域名到期时间"},model:{value:t.formValidate.record_end_time,callback:function(e){t.$set(t.formValidate,"record_end_time",e)},expression:"formValidate.record_end_time"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handlerReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},d=[],o=a("15a4"),i={name:"domainEdit",props:{modalEditData:{type:Object,default:{}},domainData:{type:Object,default:{}}},data(){return{optionsDate:{shortcuts:[{text:"今天",value(){return new Date}}]},btnLoading:!1,formValidate:{id:"",domain_name:"",remark:"",record_end_time:""},ruleValidate:{domain_name:[{required:!0,message:"The domain name cannot be empty",trigger:"blur"}],is_used:[{required:!0,message:"Cannot be empty",trigger:"change"}],remark:[{required:!0,message:"备注信息不能为空",trigger:"blur"}]}}},methods:{handleCancel(){this.$emit("modal-close")},handleSubmit(t){this.$refs[t].validate(t=>{t?(this.btnLoading=!0,setTimeout(()=>{let t;t="put"===this.modalEditData.action?{id:this.formValidate.id,remark:this.formValidate.remark,record_end_time:this.formValidate.record_end_time}:{domain_name:this.formValidate.domain_name,remark:this.formValidate.remark,record_end_time:this.formValidate.record_end_time,state:"手动"},Object(o["optDomain"])(t,this.modalEditData.action).then(t=>{0==t.code?(this.modalEditData.show=!1,this.btnLoading=!1,this.handleCancel()):this.$Message.error({content:JSON.stringify(t.data.msg),duration:3})}).catch(t=>{this.$Message.error({content:JSON.stringify(t.response.data),duration:10})}),this.btnLoading=!1},1e3)):this.$Message.error("表单校验不通过!")})},handlerReset(t){this.$refs[t].resetFields()}},watch:{domainData(t){this.formValidate=t}},mounted(){}},n=i,m=a("2877"),l=Object(m["a"])(n,r,d,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-a266633e.5e292983.js.map