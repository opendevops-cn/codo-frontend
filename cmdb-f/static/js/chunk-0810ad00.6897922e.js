(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-0810ad00"],{a39c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("Card",[t("Row",{directives:[{name:"show",rawName:"v-show",value:e.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch.apply(null,arguments)}}},[t("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:"","label-width":70}},[t("FormItem",{attrs:{label:"名称",prop:"name"}},[t("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入名称",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),t("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[t("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),t("Row",{staticClass:"operation",attrs:{align:"middle",justify:"space-between"}},[t("div",[t("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加")]),t("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")])],1),t("div",{staticClass:"icons"},[t("Tooltip",{attrs:{content:"刷新",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-refresh",size:"18"},on:{click:e.getDataList}})],1),t("Tooltip",{attrs:{content:e.openSearch?"关闭搜索":"开启搜索",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"ios-search",size:"18"},on:{click:function(t){e.openSearch=!e.openSearch}}})],1),t("Tooltip",{attrs:{content:e.openTip?"关闭提示":"开启提示",placement:"top",transfer:""}},[t("Icon",{staticClass:"item tip",attrs:{type:"md-bulb",size:"18"},on:{click:function(t){e.openTip=!e.openTip}}})],1),t("Tooltip",{attrs:{content:"表格密度",placement:"top",transfer:""}},[t("Dropdown",{attrs:{trigger:"click"},on:{"on-click":e.changeTableSize}},[t("Icon",{staticClass:"item",attrs:{type:"md-list",size:"18"}}),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t("DropdownItem",{attrs:{selected:"default"==e.tableSize,name:"default"}},[e._v("默认")]),t("DropdownItem",{attrs:{selected:"large"==e.tableSize,name:"large"}},[e._v("宽松")]),t("DropdownItem",{attrs:{selected:"small"==e.tableSize,name:"small"}},[e._v("紧密")])],1)],1)],1),t("Tooltip",{attrs:{content:"导出数据",placement:"top",transfer:""}},[t("Icon",{staticClass:"item",attrs:{type:"md-download",size:"18"},on:{click:e.exportData}})],1)],1)]),t("Alert",{directives:[{name:"show",rawName:"v-show",value:e.openTip,expression:"openTip"}],attrs:{"show-icon":""}},[e._v(" 已选择 "),t("span",{staticClass:"select-count"},[e._v(e._s(e.selectList.length))]),e._v(" 项 "),t("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])]),t("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,size:e.tableSize,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.changeSelect}}),t("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[t("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),t("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[t("Form",{ref:"form",attrs:{model:e.form,rules:e.formValidate,"label-width":100,"label-position":"left"}},[t("FormItem",{attrs:{label:"名称",prop:"name"}},[t("Input",{attrs:{clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("FormItem",{attrs:{label:"开关",prop:"is_enable"}},[t("i-switch",{model:{value:e.form.is_enable,callback:function(t){e.$set(e.form,"is_enable",t)},expression:"form.is_enable"}})],1),t("FormItem",{attrs:{label:"创建时间",prop:"create_time"}},[t("TimePicker",{staticStyle:{width:"100%"},attrs:{type:"time",clearable:""},model:{value:e.form.create_time,callback:function(t){e.$set(e.form,"create_time",t)},expression:"form.create_time"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),t("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)],1)},i=[],l={name:"LbTest",components:{},data(){return{tableSize:"default",openSearch:!0,openTip:!0,loading:!0,modalType:0,modalVisible:!1,modalTitle:"",searchForm:{pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},form:{name:"",is_enable:!0,create_time:""},formValidate:{name:[{type:"string",required:!0,message:"请输入",trigger:"blur"}],is_enable:[{type:"boolean",required:!0,message:"请选择",trigger:"change"}],create_time:[{required:!0,message:"请输入",trigger:"change"}]},submitLoading:!1,selectList:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"名称",key:"name",minWidth:120,sortable:!0},{title:"开关",key:"is_enable",minWidth:120,sortable:!1},{title:"创建时间",key:"create_time",minWidth:120,sortable:!1},{title:"操作",key:"action",align:"center",width:150,render:(e,t)=>e("div",[e("a",{on:{click:()=>{this.edit(t.row)}}},"编辑"),e("Divider",{props:{type:"vertical"}}),e("a",{on:{click:()=>{this.remove(t.row)}}},"删除")])}],data:[],total:0}},mounted(){this.init()},methods:{init(){this.getDataList()},changePage(e){this.searchForm.pageNumber=e,this.getDataList(),this.clearSelectAll()},changePageSize(e){this.searchForm.pageSize=e,this.getDataList()},handleSearch(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,"normal"===e.order&&(this.searchForm.order=""),this.getDataList()},clearSelectAll(){this.$refs.table.selectAll(!1)},changeSelect(e){this.selectList=e},changeTableSize(e){this.tableSize=e},exportData(){this.$refs.table.exportCsv({filename:"数据"})},getDataList(){this.loading=!0,this.total=this.data.length,this.loading=!1},handleSubmit(){this.$refs.form.validate(e=>{e&&(this.submitLoading=!0,0===this.modalType?(delete this.form.id,this.submitLoading=!1,this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1):(this.submitLoading=!1,this.$Message.success("操作成功"),this.getDataList(),this.modalVisible=!1))})},add(){this.modalType=0,this.modalTitle="添加",this.$refs.form.resetFields(),delete this.form.id,this.modalVisible=!0},edit(e){this.modalType=1,this.modalTitle="编辑",this.$refs.form.resetFields();for(const s in e)null===e[s]&&(e[s]="");const t=JSON.stringify(e),a=JSON.parse(t);this.form=a,this.modalVisible=!0},remove(e){this.$Modal.confirm({title:"确认删除",content:"您确认要删除该条数据?",loading:!0,onOk:()=>{this.$Message.success("操作成功"),this.clearSelectAll(),this.$Modal.remove(),this.getDataList()}})},delAll(){this.selectList.length<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:`您确认要删除所选的 ${this.selectList.length} 条数据?`,loading:!0,onOk:()=>{let e="";this.selectList.forEach(t=>{e+=t.id+","}),e=e.substring(0,e.length-1),this.$Message.success("操作成功"),this.$Modal.remove(),this.clearSelectAll(),this.getDataList()}})}}},o=l,r=(a("d9ea"),a("2877")),n=Object(r["a"])(o,s,i,!1,null,null,null);t["default"]=n.exports},d5a4:function(e,t,a){},d9ea:function(e,t,a){"use strict";a("d5a4")}}]);
//# sourceMappingURL=chunk-0810ad00.6897922e.js.map