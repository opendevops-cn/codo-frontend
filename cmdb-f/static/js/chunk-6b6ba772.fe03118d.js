(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-6b6ba772","chunk-681c2afa","chunk-a0c71f3c","chunk-2d0aba0d"],{"15a4":function(e,t,a){"use strict";a.r(t),a.d(t,"getDomain",(function(){return i})),a.d(t,"optDomain",(function(){return o})),a.d(t,"syncDomain",(function(){return l})),a.d(t,"getDomainRecords",(function(){return s})),a.d(t,"optDomainRecords",(function(){return r})),a.d(t,"recordsChangeRemark",(function(){return d})),a.d(t,"getDomainLog",(function(){return c}));var n=a("be3b");const i=e=>Object(n["default"])({url:"/api/v2/cmdb/dns/domain/",method:"get",params:e}),o=(e,t)=>Object(n["default"])({url:"/api/v2/cmdb/dns/domain/",method:t,data:e}),l=()=>Object(n["default"])({url:"/api/v2/cmdb/dns/sync/",method:"post"}),s=e=>Object(n["default"])({url:"/api/v2/cmdb/dns/record/",method:"get",params:e}),r=(e,t)=>Object(n["default"])({url:"/api/v2/cmdb/dns/record/",method:t,data:e}),d=e=>Object(n["default"])({url:"/api/v2/cmdb/dns/remark/",method:"post",data:e}),c=e=>Object(n["default"])({url:"/api/v2/cmdb/dns/logs/",method:"get",params:e})},4199:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("Drawer",{staticStyle:{"background-color":"#f8f8f9"},attrs:{closable:!1,width:"950"},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("div",{staticClass:"search-con search-con-top"},[t("Input",{staticClass:"search-input",attrs:{search:"",maxlength:250,placeholder:"输入关键字搜索"},on:{"on-search":e.handleSearch},model:{value:e.initPara.searchVal,callback:function(t){e.$set(e.initPara,"searchVal",t)},expression:"initPara.searchVal"}})],1),t("Table",{ref:"selection",attrs:{size:"small",columns:e.tableColumns,data:e.tableData,loading:e.i.tableLoading},on:{"on-sort-change":e.handleSort}}),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"left"}},[t("Page",{attrs:{total:e.i.pageTotal,current:e.initPara.page_number,"page-size":e.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":e.handlerChangePage,"on-page-size-change":e.handlePageSize}})],1)])],1)],1)},i=[],o=a("15a4"),l={name:"optLog",props:{modalData:{type:Object,default:{}}},data(){return{tableData:[],tableColumns:[{title:"操作时间",width:150,key:"update_time",sortable:!0},{title:"用户",key:"username",align:"center",sortable:!0,width:100},{title:"行为",key:"action",align:"center",width:100},{title:"记录",key:"record",sortable:!0,minWidth:150}],i:{pageTotal:0,tableLoading:!0},initPara:{page_number:1,page_size:15,searchVal:null,domain_name:"",order_by:"",order:"ascend"}}},methods:{handleCancel(){this.$emit("drawer-close")},handleGetData(){Object(o["getDomainLog"])(this.initPara).then(e=>{0==e.code?(this.tableData=e.data,this.i.pageTotal=e.count):(this.i.pageTotal=0,this.tableData=[]),this.i.tableLoading=!1})},handleSort(e,t,a){this.initPara.order="asc"===e.order?"ascend":"descend",this.initPara.order_by=e.key,this.handleGetData()},handleSearch(){this.initPara.page_number=1,this.handleGetData()},handlerChangePage(e){this.initPara.page_number=e,this.handleGetData()},handlePageSize(e){this.initPara.page_number=1,this.initPara.page_size=e,this.handleGetData()}},watch:{},computed:{},mounted(){}},s=l,r=a("2877"),d=Object(r["a"])(s,n,i,!1,null,null,null);t["default"]=d.exports},"9df9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{width:"680px;",title:e.modalData.title,"footer-hide":!0},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.formRule,"label-width":100,"label-colon":!0}},[t("FormItem",{attrs:{label:"记录类型",prop:"domain_type"}},[t("Row",[t("Col",{attrs:{span:"22"}},[t("Select",{attrs:{placeholder:"记录类型"},model:{value:e.formInline.domain_type,callback:function(t){e.$set(e.formInline,"domain_type",t)},expression:"formInline.domain_type"}},e._l(e.typeList,(function(e,a){return t("Option",{key:e.value,attrs:{value:e.value,label:e.lable}})})),1)],1)],1)],1),t("FormItem",{attrs:{label:"主机记录",prop:"domain_rr"}},[t("Row",[t("Col",{attrs:{span:"16"}},[t("Input",{attrs:{type:"text",maxlength:80,placeholder:"目前不支持二级泛域名证书，请勿使用三级域名"},model:{value:e.formInline.domain_rr,callback:function(t){e.$set(e.formInline,"domain_rr",t)},expression:"formInline.domain_rr"}})],1),t("Col",{attrs:{span:"6"}},[e._v(" ."+e._s(e.selectedDomain))]),t("Col",{attrs:{span:"1",offset:"1"}},[t("Poptip",{attrs:{trigger:"hover",width:"330",placement:"left"}},[t("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[t("b",[e._v("主机记录就是域名前缀，常见用法有：")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("www：")]),e._v("解析后的域名为www.a.com。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("@： ")]),e._v("直接解析主域名 a.com。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("*： ")]),e._v("泛解析，匹配其他所有域名 *.a.com。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("二级域名：")]),e._v("如：abc.a.com，填写abc。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("手机网站：")]),e._v("如：m.a.com，填写m。 ")])]),t("Icon",{attrs:{type:"ios-help-circle"}})],1)],1)],1)],1),t("FormItem",{attrs:{label:"解析线路",prop:"line"}},[t("Row",["qcloud"==e.cloud_name||"dnspod"==e.cloud_name?t("Col",{attrs:{span:"22"}},[t("Select",{model:{value:e.formInline.line,callback:function(t){e.$set(e.formInline,"line",t)},expression:"formInline.line"}},e._l(e.qlineList,(function(e,a){return t("Option",{key:e,attrs:{value:e,label:a}})})),1)],1):t("Col",{attrs:{span:"22"}},[t("Select",{model:{value:e.formInline.line,callback:function(t){e.$set(e.formInline,"line",t)},expression:"formInline.line"}},e._l(e.lineList,(function(a,n){return t("Option",{key:a,attrs:{value:a}},[e._v(e._s(n))])})),1)],1),t("Col",{attrs:{span:"1",offset:"1"}},[t("Poptip",{attrs:{trigger:"hover",width:"450",placement:"left"}},[t("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[t("b",[e._v("如果只有一个IP地址或CNAME域名，请务必选择【默认】")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("默认：")]),e._v("必填！未匹配到智能解析线路时，返回【默认】线路设置。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("境外：")]),e._v("向除中国大陆以外的其他国家和地区，返回设置的记录值。 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("搜索引擎：")]),e._v("向搜索引擎爬虫的DNS，返回设置的记录值 ")]),t("p",{staticStyle:{"font-size":"2px"}},[t("b",[e._v("其他线路：")]),e._v("一般用来做智能解析 ")])]),t("Icon",{attrs:{type:"ios-help-circle"}})],1)],1)],1)],1),t("FormItem",{attrs:{label:"记录值",prop:"domain_value"}},[t("Row",[t("Col",{attrs:{span:"22"}},[t("Input",{attrs:{type:"text",maxlength:255,placeholder:"记录值"},model:{value:e.formInline.domain_value,callback:function(t){e.$set(e.formInline,"domain_value",t)},expression:"formInline.domain_value"}})],1)],1)],1),t("FormItem",{attrs:{label:"权重",prop:"weight"}},[t("Row",[t("Col",{attrs:{span:"22"}},[t("Input",{attrs:{type:"text",maxlength:125,placeholder:"权重设置范围为 0 - 100 ，数值越大表示权重越高，腾讯企业版功能"},model:{value:e.formInline.weight,callback:function(t){e.$set(e.formInline,"weight",t)},expression:"formInline.weight"}})],1),t("Col",{attrs:{span:"1",offset:"1"}},[t("Poptip",{attrs:{trigger:"hover",width:"450",placement:"left"}},[t("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[t("b",[e._v("同一条线路下的多条记录，可按照指定权重比例返回，支持 A 与 CNAME 记录")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 1、权重设置范围为 0 - 100 ，数值越大表示权重越高 ")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 2、解析到某条记录的比例为：该条记录权重 ÷ 该线路所有记录权重之和 ")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 3、当某个线路下的某条记录的权重设为 0 时，表示关闭该线路下所有记录的权重 ")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 4、当某条线路已经包含一条或多条已设权重的记录，修改或新增一条未设权重的记录时，则该条记录的权重为该线路下其他已有记录的权重平均值 ")])]),t("Icon",{attrs:{type:"ios-help-circle"}})],1)],1)],1)],1),"MX"===e.formInline.domain_type?t("FormItem",{attrs:{label:"MX优先级",prop:"domain_mx"}},[t("Row",[t("Col",{attrs:{span:"22"}},[t("Input",{attrs:{type:"text",maxlength:2,placeholder:"MX"},model:{value:e.formInline.domain_mx,callback:function(t){e.$set(e.formInline,"domain_mx",t)},expression:"formInline.domain_mx"}})],1)],1)],1):e._e(),t("FormItem",{attrs:{label:"TTL",prop:"domain_ttl"}},[t("Row",[t("Col",{attrs:{span:"22"}},[t("Select",{attrs:{placeholder:"记录类型"},model:{value:e.formInline.domain_ttl,callback:function(t){e.$set(e.formInline,"domain_ttl",t)},expression:"formInline.domain_ttl"}},e._l(e.TTLList,(function(e,a){return t("Option",{key:e.value,attrs:{value:e.value,label:e.lable}})})),1)],1),t("Col",{attrs:{span:"1",offset:"1"}},[t("Poptip",{attrs:{trigger:"hover",width:"450",placement:"left"}},[t("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[t("b",[e._v("TTL 指解析记录在 DNS 服务器缓存的生存时间，数值越小则生效越快")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 一般默认值，如不了解请保留 600 秒即可 ")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 当记录值较少变动时，建议选择 3600 秒，有利于提升解析速度 ")]),t("p",{staticStyle:{"font-size":"2px"}},[e._v(" 当记录值频繁变动，可选择 60 秒，但解析速度可能略受影响 ")])]),t("Icon",{attrs:{type:"ios-help-circle"}})],1)],1)],1)],1),t("FormItem",["put"===e.modalData.action?[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handlerSubmitRecordEdit("formInline")}}},[e._v("提交")])]:[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handlerSubmitRecord("formInline")}}},[e._v("提交")])],t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handlerReset("formInline")}}},[e._v("重置")])],2)],1)],1)],1)},i=[],o=a("15a4"),l={name:"recordEdit",props:{modalData:{type:Object,default:{}},cloud_name:{type:String,default:"aliyun"}},data(){return{selectedDomain:"",logModal:!1,btnLoading:!1,formInline:{domain_rr:"",line:"default",domain_type:"A",domain_ttl:600,domain_mx:1,domain_value:"",weight:10,the_business:null,remark:""},formRule:{domain_type:[{required:!0,message:"记录类型不能为空",trigger:"change"}],domain_rr:[{required:!0,message:"主机记录不能为空",trigger:"blur"}],line:[{required:!0,message:"线路不能为空",trigger:"change"}],domain_mx:[{required:!0,message:"不能为空",trigger:"blur"}],domain_value:[{required:!0,message:"记录值不能为空",trigger:"blur"}]},typeList:[{lable:"A- 将域名指向一个IPv4地址（如：8.8.8.8）",value:"A"},{lable:"CNAME- 将域名指向另外一个域名",value:"CNAME"},{lable:"AAAA- 将域名指向一个IPv6地址",value:"AAAA"},{lable:"NS- 将子域名指向其他DNS服务器解析",value:"NS"},{lable:"MX- 将域名指向邮件服务器地址",value:"MX"},{lable:"TXT- 通常做SPF记录（反垃圾邮件）",value:"TXT"},{lable:"SRV- 记录特定的服务的服务器",value:"SRV"},{lable:"CAA- CA证书机构颁发授权校验",value:"CAA"},{lable:"显性URL- 将域名重定向到另外一个地址",value:"REDIRECT_URL"},{lable:"隐性URL- 与显性URL相似，但会隐藏真实目标地址",value:"FORWARD_URL"}],TTLList:[{lable:"10分钟（600）",value:600},{lable:"30分钟（1800）",value:1800},{lable:"1秒（1），企业版支持",value:1},{lable:"10秒（10），企业版支持",value:10},{lable:"1分钟（60），企业版支持",value:60},{lable:"2分钟（120），企业版支持",value:120},{lable:"1小时（3600）",value:3600},{lable:"12小时（43200）",value:43200},{lable:"1天（86400）",value:86400}],lineList:{"默认":"default","境外":"oversea"},qlineList:{"默认":"默认","境外":"境外","中国香港":"中国香港","中国澳门":"中国澳门","中国台湾":"中国台湾"},btnDisabled:!0}},methods:{handleCancel(){this.$emit("drawer-close")},SubmitRecord(){setTimeout(()=>{Object(o["optDomainRecords"])(this.formInline,"post").then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleCancel()):this.$Notice.error({title:"添加出错",desc:e.msg,duration:5}),this.btnLoading=!1}).catch(e=>{this.btnLoading=!1,this.$Message.error("请求数据出错")})},2e3)},handlerSubmitRecord(e){this.btnLoading=!0,this.$refs[e].validate(e=>{e?(this.formInline["domain_name"]=this.selectedDomain,-1!==this.formInline.domain_rr.indexOf(".")?this.$Modal.confirm({title:"提醒",content:"<p>请注意你使用了三级以上的域名，证书可能不支持</p>",onOk:()=>{this.SubmitRecord()},onCancel:()=>{this.btnLoading=!1,this.$Message.info("回头是岸~")}}):this.SubmitRecord()):(this.btnLoading=!1,this.$Message.error("表单校验不通过!"))})},recordEdit(){setTimeout(()=>{this.formInline["domain_name"]=this.selectedDomain,Object(o["optDomainRecords"])(this.formInline,"put").then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleCancel()):this.$Notice.error({title:"修改出错",desc:e.msg,duration:5}),this.btnLoading=!1})},2e3)},handlerSubmitRecordEdit(e){this.btnLoading=!0,this.$refs[e].validate(e=>{e?(this.formInline["domain_name"]=this.selectedDomain,-1!==this.formInline.domain_rr.indexOf(".")?this.$Modal.confirm({title:"提醒",content:"<p>请注意你使用了三级以上的域名，证书可能不支持</p>",onOk:()=>{this.recordEdit()},onCancel:()=>{this.btnLoading=!1,this.$Message.info("回头是岸~")}}):this.recordEdit()):(this.btnLoading=!1,this.$Message.error("表单校验不通过!"))})},handlerReset(){this.btnLoading=!1,this.formInline=this.$options.data().formInline}},watch:{cloud_name(e){"qcloud"!=e&&"dnspod"!=e||"default"==this.formInline.line&&this.formInline.line}},computed:{},mounted(){}},s=l,r=a("2877"),d=Object(r["a"])(s,n,i,!1,null,null,null);t["default"]=d.exports},b6bb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{padding:"10px 0 15px 0"}},[t("h2",[t("b",[t("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-undo"},on:{click:e.handlerGoDomain}}),e._v(" "+e._s(e.selectedDomain)+" ")],1)])]),t("Alert",{attrs:{type:"success","show-icon":""}},[e._v("修改域名解析属于高危操作，一定要谨慎行事！")]),t("div",{staticClass:"search-con search-con-top"},[t("Input",{staticClass:"search-input",attrs:{search:"",maxlength:50,placeholder:"输入关键字搜索"},on:{"on-search":e.handleSearch},model:{value:e.initPara.searchVal,callback:function(t){e.$set(e.initPara,"searchVal",t)},expression:"initPara.searchVal"}}),t("ButtonGroup",{staticClass:"search-btn-right"},[t("Button",{attrs:{type:"success",loading:e.btnLoading},on:{click:e.handleAdd}},[e._v("添加记录")]),"true"==e.needPriority?t("Button",{on:{click:function(e){}}},[e._v("同步权重")]):e._e(),"true"==e.needPriority?t("Button",{on:{click:function(e){}}},[e._v("权重配置")]):e._e(),t("Button",{attrs:{loading:e.btnLoading},on:{click:e.handleShowLog}},[e._v("日志")]),t("Button",{attrs:{loading:e.btnLoading},on:{click:function(t){return e.handlerExportData()}}},[e._v("批量导出")])],1)],1),t("Table",{ref:"selection",attrs:{size:"small",width:"700px",columns:e.columnsRecord,data:e.tableData},on:{"on-sort-change":e.handleSort,"on-selection-change":e.handleSelect}}),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticStyle:{float:"left"}},[t("ButtonGroup",{staticClass:"search-btn"},[t("Button",{attrs:{loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handlerDomainPause}},[e._v("禁用")]),t("Button",{attrs:{loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handlerDomainEnable}},[e._v("启用")]),t("Button",{attrs:{loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handleDel}},[e._v("删除")]),t("Button",{attrs:{loading:e.btnLoading,disabled:e.btnDisabled},on:{click:e.handlerShowChangeBiz}},[e._v("更换业务")])],1)],1),t("div",{staticStyle:{float:"right"}},[t("Page",{attrs:{total:e.i.pageTotal,current:e.initPara.page_number,"page-size":e.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":e.handlerChangePage,"on-page-size-change":e.handlePageSize}})],1)])],1),t("Modal",{attrs:{width:"650px;",title:e.modalRemark.title,"footer-hide":!0},model:{value:e.modalRemark.show,callback:function(t){e.$set(e.modalRemark,"show",t)},expression:"modalRemark.show"}},[t("Input",{attrs:{type:"text",maxlength:50,placeholder:"请输入需要记录的备注信息"},model:{value:e.modalRemark.remark,callback:function(t){e.$set(e.modalRemark,"remark",t)},expression:"modalRemark.remark"}}),t("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success",loading:e.btnLoading,long:""},on:{click:e.handlerChangeRemark}},[e._v("确定修改")])],1),t("Modal",{attrs:{width:"400"},on:{"on-cancel":e.handlerDelCancel},model:{value:e.modalDel,callback:function(t){e.modalDel=t},expression:"modalDel"}},[t("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[t("Icon",{attrs:{type:"ios-information-circle"}}),t("span",[e._v("删除选中的域名解析记录")])],1),t("div",{staticStyle:{"text-align":"center"}},[t("p",[e._v("此删除会导致选中无法解析，请谨慎操作！")]),t("p",[e._v("当真要删除吗！")])]),t("div",{staticStyle:{padding:"10px 0 0 0"}},[t("Input",{staticClass:"search-input",attrs:{clearable:"",maxlength:250,placeholder:"输入当前的根域名校验一下"},model:{value:e.delRecordCheckValue,callback:function(t){e.delRecordCheckValue=t},expression:"delRecordCheckValue"}})],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"error",size:"large",long:"",loading:e.btnLoading},on:{click:e.handlerDelRecord}},[e._v("删除")])],1)]),t("record-edit",{ref:"recordEdit",attrs:{modalData:e.modalData,cloud_name:e.cloud_name},on:{"drawer-close":e.handleClose}}),t("opt-log",{ref:"optLog",attrs:{modalData:e.logModal}})],1)},i=[],o=(a("14d9"),a("2f62")),l=a("15a4"),s=a("9df9"),r=a("4199"),d={name:"domainRecords",components:{recordEdit:s["default"],optLog:r["default"]},props:{selectedDomain:{type:String,default:""},needPriority:{type:String,default:"false"},cloud_name:{type:String,default:"aliyun"}},data(){return{delRecordCheckValue:"",modalDel:!1,modalRemark:{show:!1,title:"修改备注",remark:"",select_id:null},modalbiz:{show:!1,title:"更换业务"},modalData:{show:!1,action:"post",title:"添加解析记录"},logModal:{show:!1,title:"操作日志"},btnLoading:!1,formInline:{domain_rr:"",line:"default",domain_type:"A",domain_ttl:600,domain_mx:1,domain_value:"",weight:10,the_business:null,remark:""},selectBusinessId:null,btnDisabled:!0,selectList:[],i:{pageTotal:0,tableLoading:!0},initPara:{page_number:1,page_size:15,searchVal:null,order_by:"",order:"ascend"},tableData:[],columnsRecord:[{type:"selection",key:"",width:65,align:"center"},{title:"主机记录",key:"domain_rr",sortable:!0,minWidth:110},{title:"记录类型",key:"domain_type",align:"center",sortable:!0,width:110},{title:"线路",width:100,key:"line",sortable:!0,align:"center",render:(e,t)=>{let a=t.row.line;return e("span",{},"default"===a?"默认":"oversea"===a?"海外":a)}},{title:"记录值",key:"domain_value",sortable:!0,minWidth:150,render:(e,t)=>{let a=t.row.domain_mx;return"MX"===t.row.domain_type?e("span",{},t.row.domain_value+" | "+a):e("span",{},t.row.domain_value)}},{title:"TTL",key:"domain_ttl",align:"center",sortable:!0,width:100},{title:"权重",key:"weight",align:"center",sortable:!0,width:100},{title:"状态",key:"state",width:100,sortable:!0,align:"center",render:(e,t)=>{let a=t.row.state;return e("div","ENABLE"==a||"enable"==a||"enabled"==a?[e("Tag",{props:{color:"green"}},"正常")]:"default"==a?[e("Tag",{props:{color:"blue"}},"默认")]:"DISABLE"==a||"disable"==a?[e("Tag",{props:{color:"blue"}},"暂停")]:[e("Tag",{props:{color:"error"}},a)])}},{title:"备注",key:"remark",width:60,render:(e,t)=>e("Tooltip",{props:{placement:"top"}},[e("icon",{props:{type:"ios-help-circle"},style:{marginRight:"1px"}}),e("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.remark)])},{title:"",key:"",align:"center",width:110,render:(e,t)=>e("div",[e("a",{style:{marginRight:"5px"},on:{click:()=>{this.handleEdit(t.row)}}},"修改"),e("a",{on:{click:()=>{this.handlerShowChangeRemark(t.row)}}},"备注")])}]}},methods:{handleGetData(){this.initPara["domain_name"]=this.selectedDomain,Object(l["getDomainRecords"])(this.initPara).then(e=>{0==e.code?(this.tableData=e.data,this.i.pageTotal=e.count):(this.$Message.error(e.msg),this.tableData=[])})},handleClose(){this.handleGetData(),this.selectList=[],this.modalData.show=!1,this.btnLoading=!1,this.modalDel=!1},handlerGoDomain(){this.$emit("domain-show")},handleSelect(e){let t=[];e.forEach(e=>{t.push(e.id.toString())}),this.selectList=t},handleAdd(){this.$refs.recordEdit.formInline=this.$options.data().formInline,this.$refs.recordEdit.selectedDomain=this.selectedDomain,this.modalData={show:!0,action:"post",title:`添加 ${this.selectedDomain} 解析记录，有API的域名会生效，请谨慎操作！`}},handleEdit(e){this.$refs.recordEdit.formInline=e,this.$refs.recordEdit.selectedDomain=this.selectedDomain,this.modalData={show:!0,action:"put",title:`修改 ${this.selectedDomain} 解析记录，有API的域名会生效，请谨慎操作！`}},handlerDomainPause(){this.selectList.length>10?this.$Message.error("一次禁用不能超过十个"):this.$Modal.confirm({title:"提醒",content:"<p>禁用相关的域名解析记录，禁用会导致选中无法解析，请谨慎操作！</p>",onOk:()=>{setTimeout(()=>{Object(l["optDomainRecords"])({id_list:this.selectList,action:"disable",domain_name:this.selectedDomain},"patch").then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleClose()):this.$Message.error(e.msg)}).catch(e=>{this.$Message.error({content:JSON.stringify(e.response),duration:10})})},1e3)},onCancel:()=>{this.$Message.info("回头是岸~")}})},handlerDomainEnable(){this.selectList.length>10?this.$Message.error("一次启用不能超过十个"):this.$Modal.confirm({title:"提醒",content:"<p>启用相关的域名解析记录，会导致禁用的域名可以解析，请谨慎操作！</p>",onOk:()=>{setTimeout(()=>{Object(l["optDomainRecords"])({id_list:this.selectList,action:"enable",domain_name:this.selectedDomain},"patch").then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleClose()):this.$Message.error({content:JSON.stringify(e.msg),duration:5})})},1e3)},onCancel:()=>{this.$Message.info("回头是岸~")}})},handlerDelCancel(){this.$Message.info("回头是岸~")},handlerDelRecord(){this.delRecordCheckValue===this.selectedDomain?(this.btnLoading=!0,setTimeout(()=>{Object(l["optDomainRecords"])({id_list:this.selectList,domain_name:this.selectedDomain},"delete").then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleClose()):(this.btnLoading=!1,this.$Message.error({content:e.msg,duration:5}))}).catch(e=>{this.btnLoading=!1,this.$Message.error({content:JSON.stringify(e.response),duration:10})}),this.btnLoading=!1,this.modalDel=!1},1e3)):this.$Message.error("请输入正确的根域名，谢谢！")},handleDel(){this.selectList.length>5?this.$Message.error("一次删除不能超过五个"):this.modalDel=!0},handlerShowChangeBiz(){this.$Message.error("暂未实现")},handlerChangeBiz(){if(!this.selectBusinessId)return void this.$Message.info("请选择一个业务吧");let e={id_list:this.selectList,business_id:this.selectBusinessId,domain_name:this.selectedDomain};this.btnLoading=!0,setTimeout(()=>{Object(l["optDomainRecords"])(e).then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleGetData(),this.selectList=[],this.modalbiz.show=!1,this.btnLoading=!1):this.$Message.error(e.msg)}),this.btnLoading=!1},1e3)},handlerShowChangeRemark(e){this.modalRemark={show:!0,title:"修改备注",select_id:e.id,remark:e.remark}},handlerChangeRemark(){this.btnLoading=!0,setTimeout(()=>{let e={id:this.modalRemark.select_id,remark:this.modalRemark.remark};Object(l["recordsChangeRemark"])(e).then(e=>{0==e.code?(this.$Message.success(e.msg),this.handleGetData(),this.modalRemark=this.$options.data().modalRemark,this.btnLoading=!1):this.$Message.error(e.msg)}),this.btnLoading=!1},1e3)},handleShowLog(){this.$refs.optLog.initPara.domain_name=this.selectedDomain,this.logModal.show=!0,this.$refs.optLog.handleGetData()},handlerExportData(){let e=Date.parse(new Date);this.$refs.selection.exportCsv({filename:"DNS信息-"+e,column:this.columnsRecord}),this.handleGetData()},handleSearch(){this.initPara.page_number=1,this.handleGetData()},handleSort(e,t,a){this.initPara.order="asc"===e.order?"ascend":"descend",this.initPara.order_by=e.key,this.handleGetData()},handlerChangePage(e){this.initPara.page_number=e,this.handleGetData()},handlePageSize(e){this.initPara.page_number=1,this.initPara.page_size=e,this.handleGetData()}},watch:{selectList(e){this.selectList.length>0?this.btnDisabled=!1:this.btnDisabled=!0},cloud_name(e){"qcloud"!=e&&"dnspod"!=e||"default"==this.formInline.line&&this.formInline.line}},computed:{...Object(o["e"])({rules:e=>e.user.rules})},mounted(){this.handleGetData()}},c=d,h=(a("ce30"),a("2877")),m=Object(h["a"])(c,n,i,!1,null,"05da7fc4",null);t["default"]=m.exports},b77a:function(e,t,a){},ce30:function(e,t,a){"use strict";a("b77a")}}]);
//# sourceMappingURL=chunk-6b6ba772.fe03118d.js.map