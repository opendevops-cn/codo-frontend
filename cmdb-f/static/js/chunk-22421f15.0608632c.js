(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-22421f15","chunk-2d0aba0d"],{"15a4":function(e,t,a){"use strict";a.r(t),a.d(t,"getDomain",(function(){return i})),a.d(t,"optDomain",(function(){return o})),a.d(t,"syncDomain",(function(){return l})),a.d(t,"getDomainRecords",(function(){return d})),a.d(t,"optDomainRecords",(function(){return r})),a.d(t,"recordsChangeRemark",(function(){return n})),a.d(t,"getDomainLog",(function(){return c}));var s=a("be3b");const i=e=>Object(s["default"])({url:"/api/v2/cmdb/dns/domain/",method:"get",params:e}),o=(e,t)=>Object(s["default"])({url:"/api/v2/cmdb/dns/domain/",method:t,data:e}),l=()=>Object(s["default"])({url:"/api/v2/cmdb/dns/sync/",method:"post"}),d=e=>Object(s["default"])({url:"/api/v2/cmdb/dns/record/",method:"get",params:e}),r=(e,t)=>Object(s["default"])({url:"/api/v2/cmdb/dns/record/",method:t,data:e}),n=e=>Object(s["default"])({url:"/api/v2/cmdb/dns/remark/",method:"post",data:e}),c=e=>Object(s["default"])({url:"/api/v2/cmdb/dns/logs/",method:"get",params:e})},3643:function(e,t,a){},"552b":function(e,t,a){"use strict";a("3643")},b84b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Card",[t("div",{staticClass:"search-con search-con-top"},[t("ButtonGroup",{staticClass:"search-btn"},[t("Button",{staticClass:"search-btn",on:{click:function(t){return e.editModal("post","新增配置","")}}},[e._v("新增配置")])],1)],1),t("Table",{ref:"selection",attrs:{size:"small",columns:e.tableColumns,data:e.tableData}}),t("Modal",{attrs:{title:e.modalMap.modalTitle,loading:!0,"footer-hide":!0},model:{value:e.modalMap.modalVisible,callback:function(t){e.$set(e.modalMap,"modalVisible",t)},expression:"modalMap.modalVisible"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[t("FormItem",{attrs:{label:"名称简介",prop:"name"}},[e.formValidate.id?[t("Input",{attrs:{maxlength:20,disabled:"",placeholder:"请输入名称，不可重复"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})]:[t("Input",{attrs:{maxlength:20,placeholder:"请输入名称，不可重复"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})]],2),t("FormItem",{attrs:{label:"云厂商",prop:"cloud_name"}},[t("Select",{attrs:{placeholder:"选择云厂商"},model:{value:e.formValidate.cloud_name,callback:function(t){e.$set(e.formValidate,"cloud_name",t)},expression:"formValidate.cloud_name"}},[e._l(e.cloudDict,(function(e,a){return[t("Option",{attrs:{value:a,label:a}})]}))],2)],1),t("FormItem",{attrs:{label:"AccessID",prop:"access_id"}},[t("Input",{attrs:{maxlength:80,placeholder:"IAM SecretID/AccessID"},model:{value:e.formValidate.access_id,callback:function(t){e.$set(e.formValidate,"access_id",t)},expression:"formValidate.access_id"}})],1),t("FormItem",{attrs:{label:"AccessKey",prop:"access_key"}},[t("Input",{attrs:{maxlength:100,placeholder:"IAM SecretKey/AccessKey"},model:{value:e.formValidate.access_key,callback:function(t){e.$set(e.formValidate,"access_key",t)},expression:"formValidate.access_key"}},[e._v("*****************")])],1),t("FormItem",[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("提交")]),t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)],1)],1)],1)},i=[],o=a("2f62"),l=a("15a4"),d={data(){return{tableColumns:[{title:"名称简介",key:"alias_name",minWidth:100},{title:"云厂商",key:"cloud_name",align:"center",minWidth:100},{title:"密钥ID",key:"access_id",minWidth:200},{title:"状态",key:"state",minWidth:100,render:(e,t,a)=>e("div",[e("i-switch",{props:{"true-color":"#19be6b",value:!0===t.row.state},style:{marginRight:"5px"},on:{"on-change":()=>{this.onSwitch(t.row)}}})])},{title:"#",key:"handle",minWidth:180,render:(e,t)=>e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:()=>{this.editModal("put","编辑配置",t.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:()=>{this.delData(t)}}},"删除")])}],ruleValidate:{alias_name:[{required:!0,message:"名称简介不能为空",trigger:"blur"}],cloud_name:[{required:!0,message:"选择云厂商",trigger:"blur"}],access_id:[{required:!0,message:"IAM角色 AccessID，需要有权限访问云解析",trigger:"blur"}],access_key:[{required:!0,message:"IAM角色 AccessKey，需要有权限访问云解析",trigger:"blur"}]},formValidate:{id:"",alias_name:"",cloud_name:"",access_id:"",access_key:""},tableData:[],loading:!1,loading2:!1,modalMap:{modalVisible:!1,modalTitle:"新增配置"},btnLoading:!1,modalMethod:"",cloudDict:{"阿里云":"aliyun","腾讯云":"qcloud",DNSPod:"dnspod",GoDaddy:"godaddy"}}},methods:{handleGetData(){Object(l["getAccountlist"])().then(e=>{0==e.code?this.tableData=e.data:this.$Message.error(""+e.msg)})},editModal(e,t,a){this.modalMap.modalVisible=!0,this.modalMap.modalTitle=t,this.modalMethod=e,"put"==e&&a&&a.id?this.formValidate=a:this.formValidate=this.$options.data().formValidate},handleSubmit(e){this.$refs[e].validate(e=>{e?(this.btnLoading=!0,setTimeout(()=>{this.formValidate["cloud_code"]=this.cloudDict[this.formValidate["cloud_name"]],Object(l["operationAccount"])(this.formValidate,this.modalMethod).then(e=>{0==e.data.code?(this.$Message.success(""+e.data.msg),this.getAccountList(),this.modalMap.modalVisible=!1,this.btnLoading=!1):this.$Message.error(e.data.msg)}),this.btnLoading=!1},2e3)):this.$Message.error("缺少必要参数")})},delData(e){confirm("确定要删除 "+e.row.alias_name)&&Object(l["operationAccount"])({del_id:e.row.id},"delete").then(t=>{0==t.data.code?(this.$Message.success(""+t.data.msg),this.tableData.splice(e.index,1)):this.$Message.error(t.data.msg)})},onSwitch(e){let t=e.state;Object(l["operationAccount"])({id:e.id,state:!t},"patch").then(e=>{0==e.data.code?this.$Message.success(""+e.data.msg):this.$Message.error(e.data.msg)})},handleReset(e){this.$refs[e].resetFields()}},computed:{...Object(o["e"])({rules:e=>e.user.rules})},mounted(){this.handleGetData()}},r=d,n=(a("552b"),a("2877")),c=Object(n["a"])(r,s,i,!1,null,"30747572",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-22421f15.0608632c.js.map