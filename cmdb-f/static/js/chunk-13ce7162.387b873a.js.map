{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/tag/tag-list.vue","webpack://cmdb-[name]/src/views/cmdb/tag/tag-list.vue","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-list.vue?fc9d","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-list.vue?a05c","webpack://cmdb-[name]/./src/api/cloud/redis.js","webpack://cmdb-[name]/./src/api/cloud/mysql.js","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-add.vue","webpack://cmdb-[name]/src/views/cmdb/tag/tag-add.vue","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-add.vue?be34","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-add.vue?d64e","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-add.vue?1353","webpack://cmdb-[name]/./src/api/cloud/server.js","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-edit.vue?de2c","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-edit.vue","webpack://cmdb-[name]/src/views/cmdb/tag/tag-edit.vue","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-edit.vue?0a80","webpack://cmdb-[name]/./src/views/cmdb/tag/tag-edit.vue?ac18"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","on","handleClear","nativeOn","$event","type","indexOf","_k","keyCode","key","getTableData","apply","arguments","model","value","searchParams","search_val","callback","$$v","$set","expression","_v","handleAdd","columns","tableData","pageTotal","page_number","page_size","changePage","handlePageSize","modalMapAdd","formValidateAdd","modalVisible","modalMapEdit","formValidateEdit","staticRenderFns","components","TagAdd","TagEdit","data","modalTitle","tags","index","status","tag_key","tag_value","tag_detail","tag_id","title","align","width","sortable","minWidth","h","params","style","row","count","server","mysql","redis","lb","marginRight","click","handleEdit","color","handleDelete","mounted","methods","handleViewData","paramsRow","url","window","location","origin","open","id","$Modal","confirm","content","onOk","deleteTag","then","res","code","$Notice","success","msg","error","onCancel","$Message","info","getTag","e","target","val","component","getRedisList","request","method","optrationRedis","getMySQLList","optrationMysQL","modalMap","ref","formValidate","_l","item","idx","handleRemove","_e","minRows","maxRows","staticClass","handleSubmit","name","props","form","default","Object","dialog","warning","push","addTag","$emit","getServerList","optServer","optBatchServer","getUserField","optrationUserField","currentStep","getAssetList","asset_type","assetTypeList","_s","label","asset_ids","assetList","computed","handleNext","assetType","getTagAssetID","getMysqlList","console","log","patchTag"],"mappings":"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","file":"static/js/chunk-13ce7162.387b873a.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Card',[_c('Input',{staticStyle:{\"width\":\"300px\",\"margin\":\"2px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"输入关键字模糊搜索\"},on:{\"on-change\":_vm.handleClear},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.getTableData.apply(null, arguments)}},model:{value:(_vm.searchParams.search_val),callback:function ($$v) {_vm.$set(_vm.searchParams, \"search_val\", $$v)},expression:\"searchParams.search_val\"}}),_c('Button',{attrs:{\"type\":\"default\",\"icon\":\"ios-search\"},on:{\"click\":_vm.getTableData}},[_vm._v(\"搜索\")]),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"default\",\"icon\":\"ios-add\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"添加标签\")]),_c('Table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.tableData}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('Page',{attrs:{\"total\":_vm.pageTotal,\"current\":_vm.searchParams.page_number,\"page-size\":_vm.searchParams.page_size,\"page-size-opts\":[12, 35, 50, 100],\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.handlePageSize}})],1)]),_c('TagAdd',{attrs:{\"dialog\":_vm.modalMapAdd,\"form\":_vm.formValidateAdd},on:{\"e-close\":function($event){_vm.modalMapAdd.modalVisible = false},\"e-update\":_vm.getTableData}}),_c('TagEdit',{attrs:{\"dialog\":_vm.modalMapEdit,\"form\":_vm.formValidateEdit},on:{\"e-close\":function($event){_vm.modalMapEdit.modalVisible = false},\"e-update\":_vm.getTableData}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable max-len -->\n<template>\n  <Card>\n    <Input v-model=\"searchParams.search_val\" style=\"width: 300px; margin: 2px\" clearable placeholder=\"输入关键字模糊搜索\" @on-change=\"handleClear\" @keydown.enter.native=\"getTableData\" />\n    <Button type=\"default\" icon=\"ios-search\" @click=\"getTableData\">搜索</Button>\n    <Button type=\"default\" icon=\"ios-add\" style=\"margin-left: 8px\" @click=\"handleAdd\">添加标签</Button>\n    <Table :columns=\"columns\" :data=\"tableData\" />\n    <!-- 分页 -->\n    <div style=\"margin: 10px; overflow: hidden\">\n      <div style=\"float: left\">\n        <Page :total=\"pageTotal\" :current=\"searchParams.page_number\" :page-size=\"searchParams.page_size\" :page-size-opts=\"[12, 35, 50, 100]\" show-sizer show-total @on-change=\"changePage\" @on-page-size-change=\"handlePageSize\" />\n      </div>\n    </div>\n    <!-- 添加标签 -->\n    <TagAdd :dialog=\"modalMapAdd\" :form=\"formValidateAdd\" @e-close=\"modalMapAdd.modalVisible = false\" @e-update=\"getTableData\" />\n    <!-- 编辑标签 / 绑定资源 -->\n    <TagEdit :dialog=\"modalMapEdit\" :form=\"formValidateEdit\" @e-close=\"modalMapEdit.modalVisible = false\" @e-update=\"getTableData\" />\n  </Card>\n</template>\n\n<script>\n// @ts-ignore\nimport { getTag, deleteTag } from '@/api/cmdb'\nimport TagAdd from './tag-add.vue'\nimport TagEdit from './tag-edit.vue'\n\nexport default {\n  components: {\n    TagAdd,\n    TagEdit,\n  },\n  data() {\n    return {\n      tableData: [],\n      //  添加标签，传给子组件\n      modalMapAdd: {\n        modalVisible: false,\n        modalTitle: '创建标签',\n      },\n      formValidateAdd: {\n        tags: [\n          {\n            index: 1,\n            status: 1, // 0 表示删除\n            tag_key: '',\n            tag_value: '',\n          },\n        ],\n        tag_detail: '', // 备注\n      },\n      // 编辑\n      modalMapEdit: {\n        modalVisible: false,\n        modalTitle: '编辑/绑定资源',\n      },\n      formValidateEdit: {\n        tag_id: '',\n        tag_key: '',\n        tag_value: '',\n      },\n      pageTotal: 10,\n      searchParams: {\n        page_number: 1,\n        page_size: 12,\n      },\n      columns: [\n        {\n          title: 'ID',\n          key: 'id',\n          align: 'center',\n          width: 80,\n          sortable: true,\n        },\n        {\n          title: '标签键',\n          width: 200,\n          key: 'tag_key',\n          align: 'left',\n          sortable: true,\n        },\n        {\n          title: '标签值',\n          minWidth: 200,\n          key: 'tag_value',\n          align: 'left',\n          sortable: true,\n        },\n        {\n          title: '主机',\n          width: 100,\n          align: 'center',\n          key: 'count',\n          render: (h, params) => h('div', [\n            h(\n              'Tag',\n              {\n                style: {\n                  // color: '',\n                },\n              },\n              params.row.count.server,\n            ),\n          ]),\n        },\n        {\n          title: '数据库',\n          width: 100,\n          align: 'center',\n          key: 'count',\n          render: (h, params) => h('div', [\n            h(\n              'Tag',\n              {\n                style: {\n                  // color: '',\n                },\n              },\n              params.row.count.mysql,\n            ),\n          ]),\n        },\n        {\n          title: '缓存',\n          width: 100,\n          align: 'center',\n          key: 'count',\n          render: (h, params) => h('div', [\n            h(\n              'Tag',\n              {\n                style: {\n                  // color: '',\n                },\n              },\n              params.row.count.redis,\n            ),\n          ]),\n        },\n        {\n          title: '负载均衡',\n          width: 100,\n          align: 'center',\n          key: 'count',\n          render: (h, params) => h('div', [\n            h(\n              'Tag',\n              {\n                // nativeOn: {\n                // click: () => {\n                // console.log('Dev')\n                // },\n                // },\n              },\n              params.row.count.lb,\n            ),\n          ]),\n        },\n        {\n          title: '操作',\n          key: 'handle',\n          width: 200,\n          align: 'center',\n          render: (h, params) => h('div', [\n            // h(\n            //   'a',\n            //   {\n            //     style: {\n            //       marginRight: '20px',\n            //     },\n            //     on: {\n            //       click: () => {\n            //         this.handleViewData(params.row)\n            //       },\n            //     },\n            //   },\n            //   'API',\n            // ),\n            h(\n              'a',\n              {\n                style: {\n                  marginRight: '20px',\n                },\n                on: {\n                  click: () => {\n                    this.handleEdit(params.row)\n                  },\n                },\n              },\n              '编辑',\n            ),\n            h(\n              'a',\n              {\n                style: {\n                  color: 'red',\n                },\n                on: {\n                  click: () => {\n                    this.handleDelete(params.row)\n                  },\n                },\n              },\n              '删除',\n            ),\n          ]),\n        },\n      ],\n    }\n  },\n  mounted() {\n    this.getTableData()\n  },\n  methods: {\n    handleViewData(paramsRow) {\n      const url = `${window.location.origin}/api/v2/cmdb/tag/asset_detail/?tag_key=${paramsRow.tag_key}&tag_value=${paramsRow.tag_value}`\n      window.open(url, '_blank')\n    },\n    handleAdd() {\n      this.modalMapAdd.modalVisible = true\n    },\n    handleEdit(paramsRow) {\n      this.formValidateEdit = {\n        tag_id: paramsRow.id,\n        tag_key: paramsRow.tag_key,\n        tag_value: paramsRow.tag_value,\n      }\n      this.modalMapEdit.modalVisible = true\n    },\n    handleDelete(paramsRow) {\n      this.$Modal.confirm({\n        title: '二次确认',\n        content: `确定删除(${paramsRow.tag_key}:${paramsRow.tag_value})？有关联则不能删除。`,\n        onOk: () => {\n          deleteTag({ tag_id: paramsRow.id }).then((res) => {\n            if (res.code === 0) {\n              this.$Notice.success({ title: `${res.msg}` })\n              this.getTableData()\n            } else {\n              this.$Notice.error({ title: `${res.msg}` })\n            }\n          })\n        },\n        onCancel: () => {\n          this.$Message.info('回头是岸~')\n        },\n      })\n    },\n    // tableData\n    async getTableData() {\n      const { data, count } = await getTag(this.searchParams)\n      this.tableData = data\n      this.pageTotal = count\n    },\n    handleClear(e) {\n      // @ts-ignore\n      if (e.target.value === '') this.tableData = this.value\n    },\n    // 每页条数\n    handlePageSize(val) {\n      this.searchParams.page_size = val\n      this.getTableData()\n    },\n    // 切换分页\n    changePage(val) {\n      this.searchParams.page_number = val\n      this.getTableData()\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tag-list.vue?vue&type=template&id=65e79f4e&\"\nimport script from \"./tag-list.vue?vue&type=script&lang=js&\"\nexport * from \"./tag-list.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\n// redis\nexport const getRedisList = (params) => request({\n  url: '/api/v2/cmdb/redis/',\n  method: 'get',\n  params,\n})\n\nexport const optrationRedis = (data, method) => request({\n  url: '/api/v2/cmdb/redis/',\n  method,\n  data,\n})","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\n// 数据库\nexport const getMySQLList = (params) => request({\n  url: '/api/v2/cmdb/mysql/',\n  method: 'get',\n  params,\n})\n\nexport const optrationMysQL = (data, method) => request({\n  url: '/api/v2/cmdb/mysql/',\n  method,\n  data,\n})","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Modal',{attrs:{\"title\":_vm.modalMap.modalTitle,\"footer-hide\":true,\"width\":\"750\"},model:{value:(_vm.modalMap.modalVisible),callback:function ($$v) {_vm.$set(_vm.modalMap, \"modalVisible\", $$v)},expression:\"modalMap.modalVisible\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"label-width\":10,\"mask-closable\":false}},[_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_vm._v(\"标签键\")]),_c('Col',{attrs:{\"span\":\"12\"}},[_vm._v(\"标签值\")])],1)],1),_vm._l((_vm.formValidate.tags),function(item,idx){return [(item.status)?_c('FormItem',{key:idx},[_c('Row',[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter key ...\"},model:{value:(item.tag_key),callback:function ($$v) {_vm.$set(item, \"tag_key\", $$v)},expression:\"item.tag_key\"}})],1),_c('Col',{attrs:{\"span\":\"1\",\"offset\":\"1\"}},[_c('span',[_vm._v(\" : \")])]),_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter value ...\"},model:{value:(item.tag_value),callback:function ($$v) {_vm.$set(item, \"tag_value\", $$v)},expression:\"item.tag_value\"}})],1),_c('Col',{attrs:{\"span\":\"1\",\"offset\":\"1\"}},[_c('Icon',{attrs:{\"type\":\"md-trash\"},on:{\"click\":function($event){return _vm.handleRemove(idx)}}})],1)],1)],1):_vm._e()]}),_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"18\"}},[_c('Tooltip',{attrs:{\"trigger\":\"hover\",\"placement\":\"right\",\"content\":\"批量添加标签,key+vlaue唯一\"}},[_c('Button',{attrs:{\"type\":\"dashed\",\"long\":\"\",\"icon\":\"md-add\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"继续添加\")])],1)],1)],1)],1),_c('FormItem',[_c('span',[_vm._v(\"备注信息\")]),_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 3,maxRows: 5},\"placeholder\":\"Enter something...\"},model:{value:(_vm.formValidate.tag_detail),callback:function ($$v) {_vm.$set(_vm.formValidate, \"tag_detail\", $$v)},expression:\"formValidate.tag_detail\"}})],1),_c('div',{staticClass:\"demo-footer\"},[_c('Button',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"提交\")]),_c('Button',{on:{\"click\":function($event){_vm.modalMap.modalVisible = false}}},[_vm._v(\"取消\")])],1)],2)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Modal v-model=\"modalMap.modalVisible\" :title=\"modalMap.modalTitle\" :footer-hide=\"true\" width=\"750\">\n      <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"10\" :mask-closable=\"false\">\n        <FormItem>\n          <Row>\n            <Col span=\"12\">标签键</Col>\n            <Col span=\"12\">标签值</Col>\n          </Row>\n        </FormItem>\n        <template v-for=\"(item, idx) in formValidate.tags\">\n          <FormItem v-if=\"item.status\" :key=\"idx\">\n            <Row>\n              <Col span=\"10\"><Input v-model=\"item.tag_key\" placeholder=\"Enter key ...\" /></Col>\n              <Col span=\"1\" offset=\"1\"><span> : </span></Col>\n              <Col span=\"10\"><Input v-model=\"item.tag_value\" placeholder=\"Enter value ...\" /> </Col>\n              <Col span=\"1\" offset=\"1\"><Icon type=\"md-trash\" @click=\"handleRemove(idx)\" /></Col>\n            </Row>\n          </FormItem>\n        </template>\n        <FormItem>\n          <Row>\n            <Col span=\"18\">\n              <Tooltip trigger=\"hover\" placement=\"right\" content=\"批量添加标签,key+vlaue唯一\">\n                <Button type=\"dashed\" long icon=\"md-add\" @click=\"handleAdd\">继续添加</Button>\n              </Tooltip>\n            </Col>\n          </Row>\n        </FormItem>\n        <FormItem>\n          <span>备注信息</span>\n          <Input v-model=\"formValidate.tag_detail\" type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 5}\" placeholder=\"Enter something...\" />\n        </FormItem>\n        <div class=\"demo-footer\">\n          <Button style=\"margin-right: 8px\" type=\"primary\" @click=\"handleSubmit('formValidate')\">提交</Button>\n          <Button @click=\"modalMap.modalVisible = false\">取消</Button>\n        </div>\n      </Form>\n    </Modal>\n  </div>\n</template>\n\n<script>\n\nimport { addTag } from '@/api/cmdb'\n\nexport default {\n  name: 'TagAdd',\n  components: {},\n  props: {\n    form: {\n      default() {\n        return null\n      },\n      type: Object,\n    },\n    dialog: {\n      default() {\n        return null\n      },\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      modalMap: this.dialog,\n      formValidate: this.form,\n      index: 1,\n    }\n  },\n  mounted() {},\n  methods: {\n    // 添加条件\n    handleAdd() {\n      this.index += 1\n      if (this.index > 6) {\n        this.$Notice.warning({\n          title: '条件超出最大限制',\n        })\n        return\n      }\n      // 默认配置\n      this.formValidate.tags.push({\n        tag_key: '',\n        tag_value: '',\n        index: this.index,\n        status: 1,\n      })\n    },\n    // 移除条件\n    handleRemove(index) {\n      this.index -= 1\n      this.formValidate.tags[index].status = 0\n    },\n    // 提交给后端\n    async handleSubmit() {\n      const { msg } = await addTag(this.formValidate)\n      this.$Message.info(msg)\n      this.$emit('e-close')\n      this.$emit('e-update')\n    },\n  },\n}\n</script>\n\n<style>\n.demo-footer {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 5px 16px;\n  text-align: right;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tag-add.vue?vue&type=template&id=5f1349cc&\"\nimport script from \"./tag-add.vue?vue&type=script&lang=js&\"\nexport * from \"./tag-add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tag-add.vue?vue&type=style&index=0&id=5f1349cc&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-add.vue?vue&type=style&index=0&id=5f1349cc&prod&lang=css&\"","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\n// 主机\nexport const getServerList = (params) => request({\n  url: '/api/v2/cmdb/server/',\n  method: 'get',\n  params,\n})\n\nexport const optServer = (data, method) => request({\n  url: '/api/v2/cmdb/server/',\n  method,\n  data,\n})\n\nexport const optBatchServer = (data, method) => request({\n  url: '/api/v2/cmdb/server/batch/',\n  method,\n  data,\n})\n\n// 用戶收藏字段\nexport const getUserField = (params) => request({\n  url: '/api/v2/cmdb/user_field/',\n  method: 'get',\n  params,\n})\n\nexport const optrationUserField = (data) => request({\n  url: '/api/v2/cmdb/user_field/',\n  method: 'put',\n  data,\n})\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-edit.vue?vue&type=style&index=0&id=07023b6a&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Modal',{attrs:{\"title\":_vm.modalMap.modalTitle,\"footer-hide\":true,\"width\":\"750\"},model:{value:(_vm.modalMap.modalVisible),callback:function ($$v) {_vm.$set(_vm.modalMap, \"modalVisible\", $$v)},expression:\"modalMap.modalVisible\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"label-width\":10,\"mask-closable\":false}},[_c('FormItem',[_c('Steps',{attrs:{\"current\":_vm.currentStep}},[_c('Step',{attrs:{\"title\":\"标签信息\",\"icon\":\"md-pricetags\"}}),_c('Step',{attrs:{\"title\":\"绑定资源\",\"icon\":\"md-albums\"}})],1)],1),(_vm.currentStep === 0)?[_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_vm._v(\"标签键\")]),_c('Col',{attrs:{\"span\":\"12\"}},[_vm._v(\"标签值\")])],1)],1),_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter key ...\"},model:{value:(_vm.formValidate.tag_key),callback:function ($$v) {_vm.$set(_vm.formValidate, \"tag_key\", $$v)},expression:\"formValidate.tag_key\"}})],1),_c('Col',{attrs:{\"span\":\"1\",\"offset\":\"1\"}},[_c('span',[_vm._v(\" : \")])]),_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter value ...\"},model:{value:(_vm.formValidate.tag_value),callback:function ($$v) {_vm.$set(_vm.formValidate, \"tag_value\", $$v)},expression:\"formValidate.tag_value\"}})],1)],1)],1)]:_vm._e(),(_vm.currentStep === 1)?[_c('FormItem',{attrs:{\"prop\":\"asset_type\"}},[_c('span',[_vm._v(\"选择类型:\")]),_c('Select',{attrs:{\"clearable\":\"\"},on:{\"on-change\":_vm.getAssetList},model:{value:(_vm.formValidate.asset_type),callback:function ($$v) {_vm.$set(_vm.formValidate, \"asset_type\", $$v)},expression:\"formValidate.asset_type\"}},_vm._l((_vm.assetTypeList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1),_c('FormItem',{attrs:{\"prop\":\"asset_ids\"}},[_c('span',[_vm._v(\"选择资源:\")]),_c('Select',{attrs:{\"clearable\":\"\",\"filterable\":\"\",\"multiple\":\"\"},model:{value:(_vm.formValidate.asset_ids),callback:function ($$v) {_vm.$set(_vm.formValidate, \"asset_ids\", $$v)},expression:\"formValidate.asset_ids\"}},_vm._l((_vm.assetList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_c('FormItem',{attrs:{\"prop\":\"tag_detail\"}},[_c('span',[_vm._v(\"备注信息\")]),_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 3,maxRows: 5},\"placeholder\":\"Enter something...\"},model:{value:(_vm.formValidate.tag_detail),callback:function ($$v) {_vm.$set(_vm.formValidate, \"tag_detail\", $$v)},expression:\"formValidate.tag_detail\"}})],1)]:_vm._e(),_c('div',{staticClass:\"codo-footer\"},[(_vm.currentStep === 0)?_c('Button',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.currentStep += 1}}},[_vm._v(\"下一步\")]):_vm._e(),(_vm.currentStep === 1)?_c('Button',{staticStyle:{\"margin-right\":\"8px\"},on:{\"click\":function($event){_vm.currentStep -= 1}}},[_vm._v(\"上一步\")]):_vm._e(),(_vm.currentStep === 1)?_c('Button',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"提交\")]):_vm._e(),_c('Button',{on:{\"click\":function($event){_vm.modalMap.modalVisible = false}}},[_vm._v(\"取消\")])],1)],2)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Modal v-model=\"modalMap.modalVisible\" :title=\"modalMap.modalTitle\" :footer-hide=\"true\" width=\"750\">\n      <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"10\" :mask-closable=\"false\">\n        <FormItem>\n          <Steps :current=\"currentStep\">\n            <Step title=\"标签信息\" icon=\"md-pricetags\" />\n            <Step title=\"绑定资源\" icon=\"md-albums\" />\n          </Steps>\n        </FormItem>\n        <template v-if=\"currentStep === 0\">\n          <FormItem>\n            <Row>\n              <Col span=\"12\">标签键</Col>\n              <Col span=\"12\">标签值</Col>\n            </Row>\n          </FormItem>\n          <FormItem>\n            <Row>\n              <!-- 这里的input在考虑加不加disabled 反正后端已经不更新这2个值了 -->\n              <Col span=\"10\"><Input v-model=\"formValidate.tag_key\" placeholder=\"Enter key ...\" /></Col>\n              <Col span=\"1\" offset=\"1\"><span> : </span></Col>\n              <Col span=\"10\"><Input v-model=\"formValidate.tag_value\" placeholder=\"Enter value ...\" /> </Col>\n              <!-- <Col span=\"1\" offset=\"1\"><Icon type=\"md-trash\" @click=\"handleEdit(idx)\" /></Col> -->\n            </Row>\n          </FormItem>\n        </template>\n        <template v-if=\"currentStep === 1\">\n          <FormItem prop=\"asset_type\">\n            <span>选择类型:</span>\n            <Select v-model=\"formValidate.asset_type\" clearable @on-change=\"getAssetList\">\n              <Option v-for=\"item in assetTypeList\" :key=\"item.value\" :value=\"item.value\">{{ item.label }}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"asset_ids\">\n            <span>选择资源:</span>\n            <Select v-model=\"formValidate.asset_ids\" clearable filterable multiple>\n              <Option v-for=\"item in assetList\" :key=\"item.id\" :value=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"tag_detail\">\n            <span>备注信息</span>\n            <Input v-model=\"formValidate.tag_detail\" type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 5}\" placeholder=\"Enter something...\" />\n          </FormItem>\n        </template>\n        <div class=\"codo-footer\">\n          <Button v-if=\"currentStep === 0\" style=\"margin-right: 8px\" type=\"primary\" @click=\"currentStep += 1\">下一步</Button>\n          <Button v-if=\"currentStep === 1\" style=\"margin-right: 8px\" @click=\"currentStep -= 1\">上一步</Button>\n          <Button v-if=\"currentStep === 1\" style=\"margin-right: 8px\" type=\"primary\" @click=\"handleSubmit('formValidate')\">提交</Button>\n          <Button @click=\"modalMap.modalVisible = false\">取消</Button>\n        </div>\n      </Form>\n    </Modal>\n  </div>\n</template>\n\n<script>\n\nimport { patchTag, getTagAssetID } from '@/api/cmdb'\nimport { getServerList } from '@/api/cloud/server'\nimport { getMySQLList} from '@/api/cloud/mysql'\nimport { getRedisList} from '@/api/cloud/redis'\n\nexport default {\n  name: 'TagEdit',\n  components: {},\n  props: {\n    form: {\n      default() {\n        return null\n      },\n      type: Object,\n    },\n    dialog: {\n      default() {\n        return null\n      },\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      // 资产列表\n      assetList: [],\n      // 资产类型列表\n      assetTypeList: [\n        {\n          value: 'server',\n          label: '主机',\n        },\n        {\n          value: 'mysql',\n          label: '数据库',\n        },\n        {\n          value: 'redis',\n          label: '缓存',\n        },\n        // {\n        //   value: 'lb',\n        //   label: '负载均衡',\n        // },\n      ],\n      // 当前步骤，默认0\n      currentStep: 0,\n    }\n  },\n  computed: {\n    formValidate() {\n      return this.form\n    },\n    modalMap() {\n      return this.dialog\n    },\n  },\n  mounted() {},\n  methods: {\n    handleNext() {\n      this.currentStep += 1\n    },\n    //  获取指定资源的列表\n    async getAssetList() {\n      // 获取已有的ID\n      this.assetList = []\n      // this.formValidate.asset_ids = []\n      const assetType = this.formValidate.asset_type\n      const { data } = await getTagAssetID({ tag_id: this.formValidate.tag_id, asset_type: assetType })\n      this.formValidate.asset_ids = data\n\n      switch (assetType) {\n      case 'server':\n        this.getServerList()\n        break\n      case 'mysql':\n        this.getMysqlList()\n        break\n      case 'redis':\n        this.getRedisList()\n        break\n      default:\n        console.log('default')\n      }\n    },\n    // 获取主机数据\n    async getServerList() {\n      const { data } = await getServerList({ page_size: 999999 })\n      this.assetList = data\n    },\n    // 获取mysql数据\n    async getMysqlList() {\n      const { data } = await getMySQLList({ page_size: 999999 })\n      this.assetList = data\n    },\n    // 获取redis数据\n    async getRedisList() {\n      const { data } = await getRedisList({ page_size: 999999 })\n      this.assetList = data\n    },\n    // 提交给后端\n    async handleSubmit() {\n      const { msg } = await patchTag(this.formValidate)\n      this.$Message.success(msg)\n      this.$emit('e-close')\n      this.$emit('e-update')\n    },\n  },\n}\n</script>\n\n<style>\n.codo-footer {\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  padding: 3px 16px;\n  text-align: right;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tag-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tag-edit.vue?vue&type=template&id=07023b6a&\"\nimport script from \"./tag-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./tag-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tag-edit.vue?vue&type=style&index=0&id=07023b6a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}