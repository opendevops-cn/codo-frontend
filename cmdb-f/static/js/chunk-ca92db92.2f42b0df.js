(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-ca92db92"],{6925:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e._self._c;return a("div",[a("Card",{attrs:{"dis-hover":"",bordered:!1}},[a("Alert",{attrs:{"show-icon":""}},[e._v(" 业务信息从权限中心同步，请联系管理员添加。 ")]),a("div"),a("div",{staticClass:"search-con search-con-top"},[a("Input",{staticClass:"search-input",attrs:{search:"",maxlength:50,placeholder:"输入关键字全局搜索"},on:{"on-search":e.handleSearch},model:{value:e.initPara.searchVal,callback:function(a){e.$set(e.initPara,"searchVal",a)},expression:"initPara.searchVal"}}),a("Button",{staticClass:"search-btn",on:{click:e.handCreate}},[e._v("添加业务")])],1),a("Table",{ref:"selection",attrs:{size:"small",columns:e.columns,data:e.tableData},on:{"on-sort-change":e.handleSort}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"left"}},[a("Page",{attrs:{total:e.i.pageTotal,current:e.initPara.page_number,"page-size":e.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[10,15,50,100]},on:{"on-change":e.handlerChangePage,"on-page-size-change":e.handlePageSize}})],1)])],1),a("Modal",{attrs:{title:e.modalMap.modalTitle,loading:!0,"footer-hide":!0,width:"750"},model:{value:e.modalMap.modalVisible,callback:function(a){e.$set(e.modalMap,"modalVisible",a)},expression:"modalMap.modalVisible"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"中文名称",prop:"biz_cn_name"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入中文名称,不可重复"},model:{value:e.formValidate.biz_cn_name,callback:function(a){e.$set(e.formValidate,"biz_cn_name",a)},expression:"formValidate.biz_cn_name"}})],1),a("FormItem",{attrs:{label:"英文名称",prop:"biz_en_name"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入英文名称"},model:{value:e.formValidate.biz_en_name,callback:function(a){e.$set(e.formValidate,"biz_en_name",a)},expression:"formValidate.biz_en_name"}})],1),a("FormItem",{attrs:{label:"运维同学",prop:"biz_opser"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入运维负责人"},model:{value:e.formValidate.biz_opser,callback:function(a){e.$set(e.formValidate,"biz_opser",a)},expression:"formValidate.biz_opser"}})],1),a("FormItem",{attrs:{label:"研发同学",prop:"biz_developer"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入研发负责人"},model:{value:e.formValidate.biz_developer,callback:function(a){e.$set(e.formValidate,"biz_developer",a)},expression:"formValidate.biz_developer"}})],1),a("FormItem",{attrs:{label:"测试同学",prop:"biz_tester"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入测试负责人"},model:{value:e.formValidate.biz_tester,callback:function(a){e.$set(e.formValidate,"biz_tester",a)},expression:"formValidate.biz_tester"}})],1),a("FormItem",{attrs:{label:"生命周期",prop:"life_cycle"}},[a("Select",{attrs:{placeholder:"生命周期"},model:{value:e.formValidate.life_cycle,callback:function(a){e.$set(e.formValidate,"life_cycle",a)},expression:"formValidate.life_cycle"}},[a("Option",{attrs:{value:"开发中"}},[e._v("开发中")]),a("Option",{attrs:{value:"测试中"}},[e._v("测试中")]),a("Option",{attrs:{value:"已上线"}},[e._v("已上线")]),a("Option",{attrs:{value:"停运"}},[e._v("停运")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formValidate")}}},[e._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){return e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)],1)],1)},l=[],r=t("30b3"),n={data(){return{modalMap:{loading:!1,modalVisible:!1,modalTitle:"添加"},initPara:{page_number:1,page_size:10,searchVal:null,order_by:"sort",order:"ascend"},i:{pageTotal:0,tableLoading:!1},selectList:[],method_data:null,formValidate:{},tableData:[],columns:[{type:"selection",width:60,align:"center"},{title:"业务ID",key:"biz_id",align:"center",width:100,sortable:!0,render:(e,a)=>e("a",{on:{click:()=>{this.handleDetail(a.index)}}},a.row.biz_id)},{title:"业务(中文名)",key:"biz_cn_name",minWidth:150,align:"center",sortable:!0},{title:"业务(英文名)",key:"biz_en_name",minWidth:150,align:"center",sortable:!0},{title:"生命周期",key:"life_cycle",align:"center",width:120,sortable:!0,render:(e,a)=>{let t=a.row.life_cycle;return"已上线"===t?e("div",[e("Tag",{props:{color:"green"}},"已上线")]):"开发中"===t?e("div",[e("Tag",{props:{color:"blue"}},"开发中")]):"测试中"===t?e("div",[e("Tag",{props:{color:"geekblue"}},"测试中")]):"停运"===t?e("div",[e("Tag",{props:{color:"red"}},"停运")]):void 0}},{title:"运维同学",minWidth:100,key:"biz_opser",align:"center"},{title:"开发同学",key:"biz_developer",align:"center",minWidth:100},{title:"测试同学",key:"biz_tester",align:"center",minWidth:100},{title:"更新时间",key:"update_time",align:"center",sortable:!0,width:180},{title:"操作",key:"handle",width:90,align:"center",render:(e,a)=>e("div",[e("a",{on:{click:()=>{this.formValidate=this.rowToConfig(a.row),this.modalMap.modalVisible=!0,this.modalMap.modalTitle="编辑业务",this.method_data="put"}}},"编辑")])}],ruleValidate:{biz_cn_name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],biz_en_name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],life_cycle:[{required:!0,message:"请输入生命周期",trigger:"blur"}],biz_opser:[{required:!0,message:"请输入维护人员",trigger:"blur"}]}}},methods:{handleGetData(){Object(r["getBusinesslist"])(this.initPara).then(e=>{0===e.code?(this.tableData=e.data,this.i.pageTotal=e.count):this.$message.error(""+e.msg)})},handleDetail(e){this.$Modal.info({width:30,title:"业务信息",content:`中文名称：${this.tableData[e].biz_cn_name}<br>\n        英文名称：${this.tableData[e].biz_en_name}<br>\n        生命周期：${this.tableData[e].life_cycle}<br>\n        运维人员：${this.tableData[e].biz_opser}<br>\n        开发人员：${this.tableData[e].biz_developer}<br>\n        测试人员：${this.tableData[e].biz_tester}<br>\n        创建时间：${this.tableData[e].create_time}<br>\n        最后一次更新时间：${this.tableData[e].update_time}\n        `})},handCreate(){this.$Message.success("联系管理添加")},handleSubmit(e){this.$refs[e].validate(e=>{e?setTimeout(()=>{Object(r["operationBusiness"])(this.formValidate,this.method_data).then(e=>{0===e.code?(this.$Message.success(""+e.msg),this.handleGetData(),this.modalMap.modalVisible=!1):this.$Message.error(""+e.msg)})},500):this.$Message.error("缺少必要参数")})},rowToConfig(e,a=e.biz_id){return{...e,biz_id:a}},handleSearch(){this.initPara.page_number=1,this.handleGetData()},handleSort(e,a,t){this.initPara.order="asc"===e.order?"ascend":"descend",this.initPara.order_by=e.key,this.handleGetData()},handlerChangePage(e){this.initPara.page_number=e,this.handleGetData()},handlePageSize(e){this.initPara.page_number=1,this.initPara.page_size=e,this.handleGetData()},handleReset(e){this.$refs[e].resetFields()}},mounted(){this.handleGetData()}},s=n,o=(t("f2d1"),t("2877")),d=Object(o["a"])(s,i,l,!1,null,"65839070",null);a["default"]=d.exports},a80f:function(e,a,t){},f2d1:function(e,a,t){"use strict";t("a80f")}}]);
//# sourceMappingURL=chunk-ca92db92.2f42b0df.js.map