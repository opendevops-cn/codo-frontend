(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-4b8ba636","chunk-2d0de8d7","chunk-2d0d5fe1","chunk-2d213107"],{"713d":function(t,e,a){"use strict";a.r(e),a.d(e,"getRedisList",(function(){return r})),a.d(e,"optrationRedis",(function(){return i}));var s=a("be3b");const r=t=>Object(s["default"])({url:"/api/v2/cmdb/redis/",method:"get",params:t}),i=(t,e)=>Object(s["default"])({url:"/api/v2/cmdb/redis/",method:e,data:t})},"85ae":function(t,e,a){"use strict";a.r(e),a.d(e,"getMySQLList",(function(){return r})),a.d(e,"optrationMysQL",(function(){return i}));var s=a("be3b");const r=t=>Object(s["default"])({url:"/api/v2/cmdb/mysql/",method:"get",params:t}),i=(t,e)=>Object(s["default"])({url:"/api/v2/cmdb/mysql/",method:e,data:t})},aaa2:function(t,e,a){"use strict";a.r(e),a.d(e,"getServerList",(function(){return r})),a.d(e,"optServer",(function(){return i})),a.d(e,"optBatchServer",(function(){return l})),a.d(e,"getUserField",(function(){return o})),a.d(e,"optrationUserField",(function(){return n}));var s=a("be3b");const r=t=>Object(s["default"])({url:"/api/v2/cmdb/server/",method:"get",params:t}),i=(t,e)=>Object(s["default"])({url:"/api/v2/cmdb/server/",method:e,data:t}),l=(t,e)=>Object(s["default"])({url:"/api/v2/cmdb/server/batch/",method:e,data:t}),o=t=>Object(s["default"])({url:"/api/v2/cmdb/user_field/",method:"get",params:t}),n=t=>Object(s["default"])({url:"/api/v2/cmdb/user_field/",method:"put",data:t})},b96f:function(t,e,a){"use strict";a("ff9e")},e303:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{title:t.modalMap.modalTitle,"footer-hide":!0,width:"750"},model:{value:t.modalMap.modalVisible,callback:function(e){t.$set(t.modalMap,"modalVisible",e)},expression:"modalMap.modalVisible"}},[e("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":10,"mask-closable":!1}},[e("FormItem",[e("Steps",{attrs:{current:t.currentStep}},[e("Step",{attrs:{title:"标签信息",icon:"md-pricetags"}}),e("Step",{attrs:{title:"绑定资源",icon:"md-albums"}})],1)],1),0===t.currentStep?[e("FormItem",[e("Row",[e("Col",{attrs:{span:"12"}},[t._v("标签键")]),e("Col",{attrs:{span:"12"}},[t._v("标签值")])],1)],1),e("FormItem",[e("Row",[e("Col",{attrs:{span:"10"}},[e("Input",{attrs:{placeholder:"Enter key ..."},model:{value:t.formValidate.tag_key,callback:function(e){t.$set(t.formValidate,"tag_key",e)},expression:"formValidate.tag_key"}})],1),e("Col",{attrs:{span:"1",offset:"1"}},[e("span",[t._v(" : ")])]),e("Col",{attrs:{span:"10"}},[e("Input",{attrs:{placeholder:"Enter value ..."},model:{value:t.formValidate.tag_value,callback:function(e){t.$set(t.formValidate,"tag_value",e)},expression:"formValidate.tag_value"}})],1)],1)],1)]:t._e(),1===t.currentStep?[e("FormItem",{attrs:{prop:"asset_type"}},[e("span",[t._v("选择类型:")]),e("Select",{attrs:{clearable:""},on:{"on-change":t.getAssetList},model:{value:t.formValidate.asset_type,callback:function(e){t.$set(t.formValidate,"asset_type",e)},expression:"formValidate.asset_type"}},t._l(t.assetTypeList,(function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])})),1)],1),e("FormItem",{attrs:{prop:"asset_ids"}},[e("span",[t._v("选择资源:")]),e("Select",{attrs:{clearable:"",filterable:"",multiple:""},model:{value:t.formValidate.asset_ids,callback:function(e){t.$set(t.formValidate,"asset_ids",e)},expression:"formValidate.asset_ids"}},t._l(t.assetList,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("FormItem",{attrs:{prop:"tag_detail"}},[e("span",[t._v("备注信息")]),e("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"Enter something..."},model:{value:t.formValidate.tag_detail,callback:function(e){t.$set(t.formValidate,"tag_detail",e)},expression:"formValidate.tag_detail"}})],1)]:t._e(),e("div",{staticClass:"codo-footer"},[0===t.currentStep?e("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:function(e){t.currentStep+=1}}},[t._v("下一步")]):t._e(),1===t.currentStep?e("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(e){t.currentStep-=1}}},[t._v("上一步")]):t._e(),1===t.currentStep?e("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")]):t._e(),e("Button",{on:{click:function(e){t.modalMap.modalVisible=!1}}},[t._v("取消")])],1)],2)],1)],1)},r=[],i=a("30b3"),l=a("aaa2"),o=a("85ae"),n=a("713d"),d={name:"TagEdit",components:{},props:{form:{default(){return null},type:Object},dialog:{default(){return null},type:Object}},data(){return{assetList:[],assetTypeList:[{value:"server",label:"主机"},{value:"mysql",label:"数据库"},{value:"redis",label:"缓存"}],currentStep:0}},computed:{formValidate(){return this.form},modalMap(){return this.dialog}},mounted(){},methods:{handleNext(){this.currentStep+=1},async getAssetList(){this.assetList=[];const t=this.formValidate.asset_type,{data:e}=await Object(i["getTagAssetID"])({tag_id:this.formValidate.tag_id,asset_type:t});switch(this.formValidate.asset_ids=e,t){case"server":this.getServerList();break;case"mysql":this.getMysqlList();break;case"redis":this.getRedisList();break;default:console.log("default")}},async getServerList(){const{data:t}=await Object(l["getServerList"])({page_size:999999});this.assetList=t},async getMysqlList(){const{data:t}=await Object(o["getMySQLList"])({page_size:999999});this.assetList=t},async getRedisList(){const{data:t}=await Object(n["getRedisList"])({page_size:999999});this.assetList=t},async handleSubmit(){const{msg:t}=await Object(i["patchTag"])(this.formValidate);this.$Message.success(t),this.$emit("e-close"),this.$emit("e-update")}}},c=d,u=(a("b96f"),a("2877")),m=Object(u["a"])(c,s,r,!1,null,null,null);e["default"]=m.exports},ff9e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4b8ba636.d3a5d5c8.js.map