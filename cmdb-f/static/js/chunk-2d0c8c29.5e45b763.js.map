{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/biz/components/preview-host.vue","webpack://cmdb-[name]/src/views/cmdb/biz/components/preview-host.vue","webpack://cmdb-[name]/./src/views/cmdb/biz/components/preview-host.vue?0eb5","webpack://cmdb-[name]/./src/views/cmdb/biz/components/preview-host.vue?c4f5"],"names":["render","_vm","this","_c","_self","attrs","model","value","dialog","show","callback","$$v","$set","expression","_v","_s","totalCount","staticStyle","nativeOn","$event","type","indexOf","_k","keyCode","key","handleSearch","apply","arguments","searchVal","on","columns","tableData","pageNum","pageSize","handlerChangePage","staticRenderFns","name","props","Object","default","data","serverList","pageTotal","title","align","sortable","minWidth","width","h","params","row","color","state","text","status","agent_status","watch","computed","length","methods","setCurrentPageData","begin","end","slice","checkExecList","item","instance_id","inner_ip","filter","component"],"mappings":"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","file":"static/js/chunk-2d0c8c29.5e45b763.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Modal',{attrs:{\"title\":\"预览主机\",\"width\":\"950\",\"mask-closable\":false,\"footer-hide\":true},model:{value:(_vm.dialog.show),callback:function ($$v) {_vm.$set(_vm.dialog, \"show\", $$v)},expression:\"dialog.show\"}},[_c('alert',[_vm._v(\"一共查询到:\"+_vm._s(_vm.totalCount)+\"条数据\")]),_c('Input',{staticStyle:{\"width\":\"330px\",\"margin\":\"0px\"},attrs:{\"clearable\":\"\",\"placeholder\":\"输入实例ID、主机名、内网IP搜索\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearch.apply(null, arguments)}},model:{value:(_vm.searchVal),callback:function ($$v) {_vm.searchVal=$$v},expression:\"searchVal\"}}),_c('Button',{staticStyle:{\"margin\":\"3px\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"搜索\")]),_c('div',{staticStyle:{\"margin-top\":\"5px\"}},[_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"size\":\"small\",\"columns\":_vm.columns,\"data\":_vm.tableData}})],1),_c('div',{staticStyle:{\"margin\":\"10px\",\"overflow\":\"hidden\"}},[_c('Page',{attrs:{\"total\":_vm.totalCount,\"current\":_vm.pageNum,\"page-size\":_vm.pageSize,\"show-total\":\"\"},on:{\"on-change\":_vm.handlerChangePage}})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable vue/no-mutating-props -->\n<template>\n  <div>\n    <Modal v-model=\"dialog.show\" title=\"预览主机\" width=\"950\" :mask-closable=\"false\" :footer-hide=\"true\">\n      <alert>一共查询到:{{ totalCount }}条数据</alert>\n      <Input v-model=\"searchVal\" style=\"width: 330px; margin: 0px\" clearable placeholder=\"输入实例ID、主机名、内网IP搜索\" @keydown.enter.native=\"handleSearch\" />\n\n      <Button style=\"margin: 3px\" @click=\"handleSearch\">搜索</Button>\n\n      <div style=\"margin-top: 5px\">\n        <Table stripe border size=\"small\" :columns=\"columns\" :data=tableData ></Table>\n      </div>\n      \n      <div style=\"margin: 10px; overflow: hidden\">\n        <Page :total=\"totalCount\" :current=\"pageNum\" :page-size=\"pageSize\" show-total @on-change=\"handlerChangePage\" />\n      </div>\n    </Modal>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'preViewHost',\n  props: {\n    dialog: {\n      type: Object,\n      default: {}\n    },\n  },\n  data() {\n    return {\n      serverList: [], //初始总数\n      tableData: [],\n      searchVal: null,\n      pageTotal: 0,\n      pageSize: 10,\n      pageNum: 1,\n      columns: [\n        {\n          title: '实例ID',\n          key: 'instance_id',\n          align: 'center',\n          sortable: true,\n        },\n        {\n          title: '主机名称',\n          key: 'name',\n          align: 'center',\n          minWidth: 100,\n          sortable: true,\n        },\n        {\n          title: '内网IP',\n          key: 'inner_ip',\n          align: 'center',\n          width: 140,\n\n          sortable: true,\n        },\n        {\n          title: '外网IP',\n          key: 'outer_ip',\n          align: 'center',\n          width: 140,\n          sortable: true,\n        },\n        {\n          title: '运行状态',\n          key: 'state',\n          align: 'center',\n          width: 135,\n          sortable: true,\n          render: (h, params) => {\n            const { row } = params\n            // eslint-disable-next-line no-nested-ternary\n            const color = row.state === '运行中' ? 'success' : row.state === '关机' ? 'error' : row.state === '创建中' ? 'primary' : 'error'\n            // eslint-disable-next-line no-nested-ternary\n            const text = row.state === '运行中' ? '运行中' : row.state === '关机' ? '已关机' : row.state === '创建中' ? '创建中' : 'Fail'\n            return h(\n              'Tag',\n              {\n                props: {\n                  type: 'dot',\n                  color,\n                },\n              },\n              text,\n            )\n          },\n        },\n        {\n          title: 'Agent状态',\n          key: 'agent_status',\n          align: 'center',\n          width: 135,\n          sortable: true,\n          render: (h, params) => {\n            let status = params.row.agent_status\n            if (status == '1') {\n              return h('div', [h('Tag', { props: { color: 'green', type: 'border' } }, '在线')])\n            } else if (status == '2') {\n              return h('div', [h('Tag', { props: { color: 'red' } }, '离线')])\n            } else {\n              return h('div', [h('Tag', { props: { color: 'error' } }, '未知')])\n            }\n          }\n        },\n      ],\n    }\n  },\n  watch: {\n  },\n  computed: {\n    totalCount() {\n      return this.serverList.length\n    }\n  },\n  methods: {\n    handlerChangePage (value) {\n      this.pageNum = value\n      this.setCurrentPageData()\n    },\n    // 分页处理\n    setCurrentPageData () {\n      let begin = (this.pageNum - 1) * this.pageSize;\n      let end = this.pageNum * this.pageSize;\n      this.tableData = this.serverList.slice(begin, end);\n    },\n    checkExecList (item) {\n      return item.instance_id.indexOf(this.searchVal) >= 0 || item.name.indexOf(this.searchVal) >= 0 || item.inner_ip.indexOf(this.searchVal) >= 0\n    },\n     // 前端搜索\n    handleSearch () {\n      if (this.searchVal) {\n        this.pageNum = 1\n        this.tableData = this.serverList.filter(this.checkExecList)\n      } else {\n         this.pageNum = 1\n         this.setCurrentPageData ()\n      }\n    }\n  },\n}\n</script>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-host.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-host.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./preview-host.vue?vue&type=template&id=9cc6ef1a&\"\nimport script from \"./preview-host.vue?vue&type=script&lang=js&\"\nexport * from \"./preview-host.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}