(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-7eb55048","chunk-2d0c5367","chunk-2d0b95f2"],{3351:function(t,a,e){"use strict";e.r(a),e.d(a,"getCluster",(function(){return i})),e.d(a,"optCluster",(function(){return l}));var s=e("be3b");const i=t=>Object(s["default"])({url:"/api/v2/cmdb/k8s/cluster/",method:"get",params:t}),l=(t,a)=>Object(s["default"])({url:"/api/v2/cmdb/k8s/cluster/",method:a,data:t})},3529:function(t,a,e){},"3daa":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("Modal",{attrs:{width:"780px;",title:t.modalData.title,"footer-hide":!0,styles:{top:"30px"}},model:{value:t.modalData.show,callback:function(a){t.$set(t.modalData,"show",a)},expression:"modalData.show"}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{staticClass:"inner"},[a("Alert",{attrs:{"show-icon":""}},[t._v("基本信息")]),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("实例ID：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.clusterData.instance_id))])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("实例名称：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.clusterData.name))])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("厂商：")])])]),t.clusterData.cloud_name?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.clusterData.cloud_name)+" ")])]):t._e(),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("AccountID：")])])]),a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.clusterData.account_id)+" ")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("网络类型：")])])]),t.clusterData.network_type?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.clusterData.network_type)+" ")])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("付费类型：")])])]),t.clusterData.charge_type?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.clusterData.charge_type)+" ")])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("实例状态：")])])]),"运行中"==t.clusterData.state||"可用"==t.clusterData.state?a("Col",{attrs:{span:"8"}},[a("p",[a("tag",{attrs:{color:"success"}},[t._v(t._s(t.clusterData.state))])],1)]):a("Col",{attrs:{span:"8"}},[a("p",[a("tag",{attrs:{color:"red"}},[t._v(t._s(t.clusterData.state))])],1)]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("是否过期：")])])]),!0===t.clusterData.is_expired?a("Col",{attrs:{span:"8"}},[a("p",[a("tag",{attrs:{color:"red"}},[t._v(t._s(t.clusterData.is_expired))])],1)]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("正常")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("实例类型：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.clusterData.cluster_type)+" ")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("创建时间：")])])]),t.clusterData.create_time?a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.clusterData.create_time)+" ")])]):a("Col",{attrs:{span:"20"}},[a("p",[t._v("未知信息")])])],1),a("Row",[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("最后更新时间：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.clusterData.update_time)+" ")])])],1)],1)],1)])],1)},i=[],l={name:"clusterDetail",props:{modalData:{type:Object,default:()=>{}},clusterData:{type:Object,default:()=>{}}}},r=l,n=e("2877"),o=Object(n["a"])(r,s,i,!1,null,null,null);a["default"]=o.exports},"514b":function(t,a,e){"use strict";e("3529")},a3b1:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"search-con search-con-top"},[a("Input",{staticClass:"search-input",attrs:{search:"",maxlength:50,placeholder:"输入关键字搜索"},on:{"on-search":t.handleSearch},model:{value:t.initPara.searchVal,callback:function(a){t.$set(t.initPara,"searchVal",a)},expression:"initPara.searchVal"}}),t.instance_id?a("h4",{staticClass:"search-col"},[t._v("实例："+t._s(t.instance_id))]):t._e(),t.instance_id?t._e():a("Button",{staticClass:"search-add-btn",attrs:{type:"error",disabled:0===t.selectList.length},on:{click:t.handleDel}},[t._v("批量删除")])],1),a("Table",{ref:"selection",attrs:{size:"small",columns:t.tableColumns,data:t.tableData,loading:t.i.tableLoading},on:{"on-sort-change":t.handleSort,"on-selection-change":t.handleSelect}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"left"}},[a("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),t.clusterData?a("div",[a("ClusterDetail",{attrs:{"modal-data":t.modalData,"cluster-data":t.clusterData}})],1):t._e()],1)},i=[],l=(e("14d9"),e("3351")),r=e("3daa"),n={name:"Cluster",components:{ClusterDetail:r["default"]},props:{instance_id:{type:String,default:null},sg_ids:{type:Object|Array,default:null}},data(){return{modalData:{show:!1,title:"集群详情"},clusterData:{},tableColumns:[{type:"selection",key:"selection",width:60,align:"center"},{title:"云厂商",key:"cloud_name",minWidth:130,maxWidth:160,sortable:!0,render:(t,a)=>{const e=a.row.cloud_name;return"qcloud"===e?t("div",[t("Tag",{props:{color:"geekblue"}},"腾讯云")]):"aliyun"===e?t("div",[t("Tag",{props:{color:"blue"}},"阿里云")]):"cds"===e?t("div",[t("Tag",{props:{color:"cyan"}},"首都云")]):"volc"===e?t("div",[t("Tag",{props:{color:"orange"}},"火山云")]):"gcp"===e?t("div",[t("Tag",{props:{color:"green"}},"谷歌云")]):"aws"===e?t("div",[t("Tag",{props:{color:"volcano"}},"AWS")]):void 0}},{title:"实例状态",key:"state",align:"center",width:130,sortable:!0,render:(t,a)=>{const{row:e}=a,s="运行中"===e.state?"success":"关机"===e.state?"error":"创建中"===e.state?"primary":"error",i="运行中"===e.state?"运行中":"关机"===e.state?"已关机":"创建中"===e.state?"创建中":e.state;return t("Tag",{props:{type:"dot",color:s}},i)}},{title:"名称",key:"name",tooltip:!0,sortable:!0,minWidth:150},{title:"实例ID",key:"instance_id",ellipsis:!0,tooltip:!0,minWidth:200,render:(t,a)=>t("a",{on:{click:()=>{this.handleDetail(a.row)}}},a.row.instance_id)},{title:"版本",key:"version",minWidth:100},{title:"地域",key:"region",minWidth:90},{title:"集群类型",key:"cluster_type",minWidth:100},{title:"备注",key:"description",ellipsis:!0,tooltip:!0,minWidth:100},{title:"更新时间",key:"update_time",sortable:!0,width:170}],tableData:[],i:{pageTotal:0,tableLoading:!0},initPara:{page_number:1,page_size:15,searchVal:null,sg_ids:[],order_by:"",order:"ascend"},selectList:[]}},methods:{async handleGetData(){const t=await Object(l["getCluster"])(this.initPara);0==t.code?(this.tableData=t.data,this.i.pageTotal=t.count):this.$Message.error(t.msg),this.i.tableLoading=!1},handleDel(){this.$Modal.confirm({title:"二次确认",content:"确定删除已选中的数据？",onOk:()=>{Object(l["optCluster"])({id_list:this.selectList},"delete").then(t=>{0===t.code?(this.$Message.success(t.msg),this.handleGetData()):this.$Notice.error({title:""+t.msg})})},onCancel:()=>{this.$Message.info("回头是岸~")}})},handleDetail(t){this.clusterData=t,this.modalData.show=!0},handleClose(){this.modalAdd.show=!1,this.modalData.show=!1,this.handleGetData()},handleSelect(t){let a=[];t.forEach(t=>{a.push(t.id)}),this.selectList=a},handleSearch(){this.initPara.page_number=1,this.handleGetData()},handleSort(t,a,e){this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.handleGetData()},handlerChangePage(t){this.initPara.page_number=t,this.handleGetData()},handlePageSize(t){this.initPara.page_number=1,this.initPara.page_size=t,this.handleGetData()}},watch:{searchValue(t){this.pageNum=1,this.handleGetData()},instance_id(t){this.pageNum=1,this.securityInfoList=[],this.handleGetData()},sg_ids(t){this.initPara["sg_ids"]=JSON.stringify(this.sg_ids),this.pageNum=1,this.securityInfoList=[],this.handleGetData()}},computed:{},mounted(){this.handleGetData()}},o=n,c=(e("514b"),e("2877")),d=Object(c["a"])(o,s,i,!1,null,"9e0bccae",null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-7eb55048.bdf4b6a0.js.map