(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-3d543042","chunk-2d0ae8c9"],{"0b12":function(e,t,a){"use strict";a.r(t),a.d(t,"postTreeAsset",(function(){return o})),a.d(t,"getTreeAsset",(function(){return l})),a.d(t,"changeTreeAssetStatus",(function(){return s})),a.d(t,"deleteTreeAsset",(function(){return i})),a.d(t,"getRelation",(function(){return n})),a.d(t,"getServiceTreelist",(function(){return d})),a.d(t,"operationTree",(function(){return m})),a.d(t,"getBizEnv",(function(){return c})),a.d(t,"getTreeModule",(function(){return u}));var r=a("be3b");const o=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/asset/",method:"post",data:e}),l=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/asset/",method:"get",params:e}),s=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/asset/",method:"patch",data:e}),i=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/asset/",method:"delete",data:e}),n=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/asset/relation/",method:"get",params:e}),d=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/",method:"get",params:e}),m=(e,t)=>Object(r["default"])({url:"/api/v2/cmdb/tree/",method:t,data:e}),c=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/env/",method:"get",params:e}),u=e=>Object(r["default"])({url:"/api/v2/cmdb/tree/module/",method:"get",params:e})},e3f2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("Modal",{attrs:{title:e.modalMapTree.modalTitle,loading:!0,"footer-hide":!0,width:"650","mask-closable":!1},model:{value:e.modalMapTree.modalVisible,callback:function(t){e.$set(e.modalMapTree,"modalVisible",t)},expression:"modalMapTree.modalVisible"}},[t("Form",{ref:"formValidateTree",attrs:{model:e.formValidateTree,"label-width":95}},["post"===e.methodData?[t("FormItem",{attrs:{label:"模式："}},[t("RadioGroup",{model:{value:e.formValidateTree.create_from,callback:function(t){e.$set(e.formValidateTree,"create_from",t)},expression:"formValidateTree.create_from"}},[t("Radio",{attrs:{label:"直接创建"}}),2===e.formValidateTree.node_type?[t("Radio",{attrs:{label:"模板创建"}})]:[t("Radio",{attrs:{label:"模板创建",disabled:""}})]],2)],1)]:e._e(),t("FormItem",{attrs:{label:"节点：",prop:"parent_node"}},[t("span",[e._v(e._s(e.formValidateTree.parent_node))])]),"post"===e.methodData?[t("FormItem",{attrs:{label:"名称：",prop:"title"}},[t("Input",{attrs:{maxlength:35,placeholder:"请输入名称"},model:{value:e.formValidateTree.title,callback:function(t){e.$set(e.formValidateTree,"title",t)},expression:"formValidateTree.title"}})],1)]:[t("FormItem",{attrs:{label:"名称：",prop:"title"}},[t("Input",{attrs:{disabled:"",maxlength:35,placeholder:"请输入名称"},model:{value:e.formValidateTree.title,callback:function(t){e.$set(e.formValidateTree,"title",t)},expression:"formValidateTree.title"}})],1)],"模板创建"===e.formValidateTree.create_from?[t("FormItem",{attrs:{label:"模板："}},[t("Select",{model:{value:e.formValidateTree.temp_id,callback:function(t){e.$set(e.formValidateTree,"temp_id",t)},expression:"formValidateTree.temp_id"}},e._l(e.setTempList,(function(a){return t("Option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.temp_name))])})),1)],1)]:[t("FormItem",{attrs:{label:"排序：",prop:"node_sort"}},[t("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前"}},[t("InputNumber",{attrs:{max:1e3,min:1},model:{value:e.formValidateTree.node_sort,callback:function(t){e.$set(e.formValidateTree,"node_sort",t)},expression:"formValidateTree.node_sort"}})],1)],1),t("FormItem",{attrs:{label:"展开：",prop:"expand"}},[t("i-switch",{attrs:{size:"large"},model:{value:e.formValidateTree.expand,callback:function(t){e.$set(e.formValidateTree,"expand",t)},expression:"formValidateTree.expand"}},[t("span",{attrs:{slot:"open"},slot:"open"},[e._v("启用")]),t("span",{attrs:{slot:"close"},slot:"close"},[e._v("关闭")])])],1),t("FormItem",{attrs:{label:"扩展字段"}},[t("vue-json-editor",{attrs:{"show-btns":!1,mode:"code",lang:"zh"},on:{"json-change":e.onJsonChange,"json-save":e.onJsonSave,"has-error":e.onError},model:{value:e.formValidateTree.ext_info,callback:function(t){e.$set(e.formValidateTree,"ext_info",t)},expression:"formValidateTree.ext_info"}})],1),t("FormItem",{attrs:{label:"备注：",prop:"detail"}},[t("Input",{attrs:{type:"textarea",rows:2,maxlength:1024,placeholder:"Enter something..."},model:{value:e.formValidateTree.detail,callback:function(t){e.$set(e.formValidateTree,"detail",t)},expression:"formValidateTree.detail"}})],1)],t("FormItem",{staticStyle:{"text-align":"right"}},[t("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmitTree("formValidateTree")}}},[e._v("Submit")])],1)],2)],1)},o=[],l=a("45a3"),s=a("30b3"),i=a("0b12"),n={name:"TreeAdd",components:{vueJsonEditor:l["a"]},props:{dialog:{default(){return{}},type:Object},method:{default(){return null},type:String},form:{default(){return{}},type:Object}},data(){return{setTempList:[],jsonErrFlag:!1}},computed:{modalMapTree(){return this.dialog},methodData(){return this.method},formValidateTree(){return this.form}},mounted(){this.getSetTempList()},methods:{async getSetTempList(){const e=await Object(s["getSetTemplist"])();this.setTempList=e.data},handleSubmitTree(e){this.$refs[e].validate(e=>{e?setTimeout(()=>{console.info(this.formValidateTree,this.methodData),Object(i["operationTree"])(this.formValidateTree,this.methodData).then(e=>{0===e.code?(this.$Message.success(""+e.msg),this.$emit("e-close"),this.$emit("e-update")):this.$Message.error(""+e.msg)})},1e3):this.$Message.error("缺少必要参数")})},onJsonChange(e){console.log("更改了--\x3e"+e),this.jsonErrFlag=!1},onJsonSave(e){console.log("保存了---\x3e",e)},onError(e){this.$Message.error("必须为JSON格式--\x3e"+e),this.jsonErrFlag=!0}}},d=n,m=a("2877"),c=Object(m["a"])(d,r,o,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-3d543042.6f0bf1bb.js.map