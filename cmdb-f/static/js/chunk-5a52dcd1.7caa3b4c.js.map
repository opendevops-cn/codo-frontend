{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue","webpack://cmdb-[name]/src/views/cmdb/resource/templateManagement/addTemplate.vue","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?a4c4","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?275e","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?2c89","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/templateManagement.vue","webpack://cmdb-[name]/src/views/cmdb/resource/templateManagement/templateManagement.vue","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/templateManagement.vue?e51d","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/templateManagement.vue?3b45","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/templateManagement.vue?556e"],"names":["render","_vm","this","_c","_self","attrs","title","modalLoading","on","ok","cancel","model","value","showModal","callback","$$v","expression","staticClass","ref","formValues","formRules","_v","name","$set","res_type","_l","resTypeOptions","item","key","_s","label","handleInstanceChange","subnet_id","vswitchOptions","id","instance_id","vpc_name","cloud_region_id","cloundAccountRender","region","zone","_uid","script_type","read","content","tagsValues","index","required","message","trigger","handleSelectTag","tagKeyOptions","tagKey","undefined","tagValueOptions","tagValue","length","handleAddTag","_e","$event","handleRemoveTag","description","buy","buyValues","buyFormRules","slot","staticStyle","count","staticRenderFns","DEFAULT_FORM_VALUES","cloud_region_name","account_id","vendor","tags","DEFAULT_PRICE","bandwidth_dis_count","bandwidth_dis_count_price","bandwidth_original_price","dis_count","dis_count_price","original_price","components","codoEditor","props","show","type","Boolean","default","buyRow","Object","data","lang","imageIdOptions","imageIdLoading","bindWidthIdOptions","bindWidthIdLoading","priceLoading","price","specialSplit","dataDiskTypeOptions","systemDiskTypeOptions","instanceChargeTypeOptions","internetChargeTypeOptions","securityGroupOptions","computed","realShow","insTypeParams","instance_type","watch","v","getSettings","val","getInsTypeOptions","deep","mounted","getUniqueStr","methods","getVswitchData","getTagData","getVswitch","map","c","cidr_block_v4","getTagList","tag","tag_key","push","filter","_","i","option","find","subnet_name","cloud_name","vpc_id","replace","cloudRender","Promise","resolve","reject","$refs","form","validate","Error","buyForm","params","getParams","res","createOrder","instance_name","image_passwd","createOrderTemplate","$emit","$Message","success","msg","err","error","$nextTick","component","searchParams","searchVal","getTableData","handleAddddTemplate","tableLoading","columns","tableData","pageTotal","page_number","page_size","changePage","handlePageSize","cloneModalLoading","colneModalOk","cloneModalCancel","showCloneModal","cloneFormValues","deleteModalLoading","deleteModalOk","deleteModalCancel","showDeleteModal","closeAddModal","addSuccessCallback","showDrawer","curRow","closeDrawer","editSuccessCallback","AddTemplateModal","EditTemplate","width","align","minWidth","h","style","color","cursor","click","row","size","order_by","order","deleteOrderTemplate","id_list","getOrderTemplateList","handleShowModal"],"mappings":"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","file":"static/js/chunk-5a52dcd1.7caa3b4c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"title\":_vm.title,\"loading\":_vm.modalLoading,\"width\":70},on:{\"on-ok\":_vm.ok,\"on-cancel\":_vm.cancel},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"modal__content\"},[_c('Form',{ref:\"form\",attrs:{\"model\":_vm.formValues,\"label-width\":100,\"rules\":_vm.formRules}},[_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"基础配置\")]),_c('div',{staticClass:\"modal__content__section__form\"},[_c('div',{staticClass:\"modal__content__section__form__custom\"},[_c('FormItem',{attrs:{\"prop\":\"name\",\"label\":\"模板名称\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入模板名称\"},model:{value:(_vm.formValues.name),callback:function ($$v) {_vm.$set(_vm.formValues, \"name\", $$v)},expression:\"formValues.name\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"res_type\",\"label\":\"模板类型\"}},[_c('Select',{attrs:{\"type\":\"text\",\"placeholder\":\"请选择模板类型\"},model:{value:(_vm.formValues.res_type),callback:function ($$v) {_vm.$set(_vm.formValues, \"res_type\", $$v)},expression:\"formValues.res_type\"}},_vm._l((_vm.resTypeOptions),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"subnet_id\",\"label\":\"私有子网\"}},[_c('Select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择私有子网\"},on:{\"on-change\":_vm.handleInstanceChange},model:{value:(_vm.formValues.subnet_id),callback:function ($$v) {_vm.$set(_vm.formValues, \"subnet_id\", $$v)},expression:\"formValues.subnet_id\"}},_vm._l((_vm.vswitchOptions),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.instance_id}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"vpc_name\",\"label\":\"私有网络\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\"},model:{value:(_vm.formValues.vpc_name),callback:function ($$v) {_vm.$set(_vm.formValues, \"vpc_name\", $$v)},expression:\"formValues.vpc_name\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"cloud_region_id\",\"label\":\"云区域\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formValues.cloud_region_id),callback:function ($$v) {_vm.$set(_vm.formValues, \"cloud_region_id\", $$v)},expression:\"formValues.cloud_region_id\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"cloundAccountRender\",\"label\":\"云厂商\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\",\"placeholder\":\"\"},model:{value:(_vm.formValues.cloundAccountRender),callback:function ($$v) {_vm.$set(_vm.formValues, \"cloundAccountRender\", $$v)},expression:\"formValues.cloundAccountRender\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"region\",\"label\":\"地域\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\",\"placeholder\":\"\"},model:{value:(_vm.formValues.region),callback:function ($$v) {_vm.$set(_vm.formValues, \"region\", $$v)},expression:\"formValues.region\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"zone\",\"label\":\"可用区\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formValues.zone),callback:function ($$v) {_vm.$set(_vm.formValues, \"zone\", $$v)},expression:\"formValues.zone\"}})],1)],1)]),_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"TF配置\")]),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"content\"}},[_c('codo-editor',{key:`${_vm._uid}`,attrs:{\"lang\":_vm.formValues.script_type,\"read\":_vm.read},model:{value:(_vm.formValues.content),callback:function ($$v) {_vm.$set(_vm.formValues, \"content\", $$v)},expression:\"formValues.content\"}})],1)],1)]),_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"其他设置\")]),_c('div',{staticClass:\"modal__content__section__form\"},[_c('div',{staticClass:\"modal__content__section__form__tags\"},[_c('div',{staticClass:\"modal__content__section__form__tags__label\"},[_vm._v(\" 标签 \")]),_c('div',{staticClass:\"modal__content__section__form__tags__content\"},_vm._l((_vm.formValues.tagsValues),function(item,index){return _c('div',{key:index,staticClass:\"modal__content__section__form__tags__content__line\"},[_c('FormItem',{attrs:{\"prop\":'tagsValues.' + index + '.key',\"rules\":{\n                      required: true,\n                      message: '标签键不能为空',\n                      trigger: 'blur',\n                    }}},[_c('Select',{attrs:{\"filterable\":\"\"},on:{\"on-select\":_vm.handleSelectTag},model:{value:(item.key),callback:function ($$v) {_vm.$set(item, \"key\", $$v)},expression:\"item.key\"}},_vm._l((_vm.tagKeyOptions),function(tagKey){return _c('Option',{key:tagKey.value,attrs:{\"value\":tagKey.value}},[_vm._v(_vm._s(tagKey.label))])}),1)],1),_c('FormItem',{attrs:{\"prop\":'tagsValues.' + index + '.value',\"rules\":{\n                      required: true,\n                      message: '标签值不能为空',\n                      trigger: 'blur',\n                    }}},[_c('Select',{attrs:{\"filterable\":\"\",\"loading\":_vm.tagValueOptions[item.key] === undefined,\"disabled\":item.key === '',\"placeholder\":item.key === '' ? '请先选择标签键' : '请选择'},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}},_vm._l((_vm.tagValueOptions[item.key]),function(tagValue){return _c('Option',{key:tagValue.value,attrs:{\"value\":tagValue.value}},[_vm._v(_vm._s(tagValue.label))])}),1)],1),(index === _vm.formValues.tagsValues.length - 1)?_c('Icon',{attrs:{\"size\":\"20\",\"type\":\"md-add\"},on:{\"click\":_vm.handleAddTag}}):_vm._e(),(_vm.formValues.tagsValues.length > 1)?_c('Icon',{attrs:{\"size\":\"20\",\"type\":\"md-close\"},on:{\"click\":function($event){return _vm.handleRemoveTag(index)}}}):_vm._e()],1)}),0)]),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"description\",\"label\":\"备注\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入备注\"},model:{value:(_vm.formValues.description),callback:function ($$v) {_vm.$set(_vm.formValues, \"description\", $$v)},expression:\"formValues.description\"}})],1)],1)])])])]),(_vm.buy)?_c('div',{staticClass:\"modal__content__buy\"},[_c('Form',{ref:\"buyForm\",attrs:{\"model\":_vm.buyValues,\"label-width\":100,\"rules\":_vm.buyFormRules}},[_c('FormItem',{attrs:{\"prop\":\"name\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('span',[_vm._v(\"资源名称\")]),_c('Tooltip',{attrs:{\"placement\":\"top-start\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('div',[_vm._v(\" 示例：业务-厂商-地域-环境-服务+编号(ops-tx-sh-test-etcd01) \")]),_c('div',[_vm._v(\"全部为英文或者数字，-为分隔符 是关键字不能被占用\")])]),_c('Icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"ios-help-circle-outline\"}})],1)],1),_c('Input',{attrs:{\"type\":\"text\"},model:{value:(_vm.buyValues.name),callback:function ($$v) {_vm.$set(_vm.buyValues, \"name\", $$v)},expression:\"buyValues.name\"}})],1),_c('FormItem',{attrs:{\"prop\":\"count\",\"label\":\"购买数量\"}},[_c('InputNumber',{attrs:{\"max\":10,\"min\":1},model:{value:(_vm.buyValues.count),callback:function ($$v) {_vm.$set(_vm.buyValues, \"count\", $$v)},expression:\"buyValues.count\"}})],1)],1)],1):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    v-model=\"showModal\"\n    :title=\"title\"\n    :loading=\"modalLoading\"\n    :width=\"70\"\n    @on-ok=\"ok\"\n    @on-cancel=\"cancel\"\n  >\n    <div class=\"modal__content\">\n      <Form\n        ref=\"form\"\n        :model=\"formValues\"\n        :label-width=\"100\"\n        :rules=\"formRules\"\n      >\n        <div class=\"modal__content__section\">\n          <div class=\"modal__content__section__title\">基础配置</div>\n          <div class=\"modal__content__section__form\">\n            <div class=\"modal__content__section__form__custom\">\n              <FormItem prop=\"name\" label=\"模板名称\">\n                <Input\n                  v-model=\"formValues.name\"\n                  type=\"text\"\n                  placeholder=\"请输入模板名称\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"res_type\" label=\"模板类型\">\n                <Select\n                  v-model=\"formValues.res_type\"\n                  type=\"text\"\n                  placeholder=\"请选择模板类型\"\n                >\n                  <Option\n                    v-for=\"item in resTypeOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    >{{ item.label }}</Option\n                  >\n                </Select>\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"subnet_id\" label=\"私有子网\">\n                <Select\n                  v-model=\"formValues.subnet_id\"\n                  filterable\n                  placeholder=\"请选择私有子网\"\n                  @on-change=\"handleInstanceChange\"\n                >\n                  <Option\n                    v-for=\"item in vswitchOptions\"\n                    :key=\"item.id\"\n                    :value=\"item.instance_id\"\n                    >{{ item.label }}</Option\n                  >\n                </Select>\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"vpc_name\" label=\"私有网络\">\n                <Input v-model=\"formValues.vpc_name\" type=\"text\" disabled />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"cloud_region_id\" label=\"云区域\">\n                <Input\n                  v-model=\"formValues.cloud_region_id\"\n                  type=\"text\"\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"cloundAccountRender\" label=\"云厂商\">\n                <Input\n                  v-model=\"formValues.cloundAccountRender\"\n                  type=\"text\"\n                  disabled\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"region\" label=\"地域\">\n                <Input\n                  v-model=\"formValues.region\"\n                  type=\"text\"\n                  disabled\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"zone\" label=\"可用区\">\n                <Input v-model=\"formValues.zone\" type=\"text\" placeholder=\"\" />\n              </FormItem>\n            </div>\n          </div>\n          <div class=\"modal__content__section\">\n            <div class=\"modal__content__section__title\">TF配置</div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"content\">\n                <codo-editor\n                  v-model=\"formValues.content\"\n                  :lang=\"formValues.script_type\"\n                  :read=\"read\"\n                  :key=\"`${_uid}`\"\n                />\n              </FormItem>\n            </div>\n          </div>\n          <div class=\"modal__content__section\">\n            <div class=\"modal__content__section__title\">其他设置</div>\n            <div class=\"modal__content__section__form\">\n              <div class=\"modal__content__section__form__tags\">\n                <div class=\"modal__content__section__form__tags__label\">\n                  标签\n                </div>\n                <div class=\"modal__content__section__form__tags__content\">\n                  <div\n                    v-for=\"(item, index) in formValues.tagsValues\"\n                    :key=\"index\"\n                    class=\"modal__content__section__form__tags__content__line\"\n                  >\n                    <FormItem\n                      :prop=\"'tagsValues.' + index + '.key'\"\n                      :rules=\"{\n                        required: true,\n                        message: '标签键不能为空',\n                        trigger: 'blur',\n                      }\"\n                    >\n                      <Select\n                        v-model=\"item.key\"\n                        filterable\n                        @on-select=\"handleSelectTag\"\n                      >\n                        <Option\n                          v-for=\"tagKey in tagKeyOptions\"\n                          :key=\"tagKey.value\"\n                          :value=\"tagKey.value\"\n                          >{{ tagKey.label }}</Option\n                        >\n                      </Select>\n                    </FormItem>\n                    <FormItem\n                      :prop=\"'tagsValues.' + index + '.value'\"\n                      :rules=\"{\n                        required: true,\n                        message: '标签值不能为空',\n                        trigger: 'blur',\n                      }\"\n                    >\n                      <Select\n                        v-model=\"item.value\"\n                        filterable\n                        :loading=\"tagValueOptions[item.key] === undefined\"\n                        :disabled=\"item.key === ''\"\n                        :placeholder=\"\n                          item.key === '' ? '请先选择标签键' : '请选择'\n                        \"\n                      >\n                        <Option\n                          v-for=\"tagValue in tagValueOptions[item.key]\"\n                          :key=\"tagValue.value\"\n                          :value=\"tagValue.value\"\n                          >{{ tagValue.label }}</Option\n                        >\n                      </Select>\n                    </FormItem>\n                    <Icon\n                      v-if=\"index === formValues.tagsValues.length - 1\"\n                      size=\"20\"\n                      type=\"md-add\"\n                      @click=\"handleAddTag\"\n                    />\n                    <Icon\n                      v-if=\"formValues.tagsValues.length > 1\"\n                      size=\"20\"\n                      type=\"md-close\"\n                      @click=\"handleRemoveTag(index)\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div class=\"modal__content__section__form__longer\">\n                <FormItem prop=\"description\" label=\"备注\">\n                  <Input\n                    v-model=\"formValues.description\"\n                    type=\"textarea\"\n                    placeholder=\"请输入备注\"\n                  />\n                </FormItem>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Form>\n      <div v-if=\"buy\" class=\"modal__content__buy\">\n        <Form\n          ref=\"buyForm\"\n          :model=\"buyValues\"\n          :label-width=\"100\"\n          :rules=\"buyFormRules\"\n        >\n          <FormItem prop=\"name\">\n            <span slot=\"label\">\n              <span>资源名称</span>\n              <Tooltip placement=\"top-start\">\n                <div slot=\"content\">\n                  <div>\n                    示例：业务-厂商-地域-环境-服务+编号(ops-tx-sh-test-etcd01)\n                  </div>\n                  <div>全部为英文或者数字，-为分隔符 是关键字不能被占用</div>\n                </div>\n                <Icon type=\"ios-help-circle-outline\" style=\"margin-left: 5px\" />\n              </Tooltip>\n            </span>\n            <Input v-model=\"buyValues.name\" type=\"text\" />\n          </FormItem>\n          <FormItem prop=\"count\" label=\"购买数量\">\n            <InputNumber v-model=\"buyValues.count\" :max=\"10\" :min=\"1\" />\n          </FormItem>\n        </Form>\n      </div>\n    </div>\n  </Modal>\n</template>\n<!-- eslint-disable camelcase -->\n<script>\nimport {\n  createOrderTemplate,\n  getTagList,\n  createOrder,\n} from '@/api/cmdb';\n\nimport { getVswitch } from '@/api/cloud/vswitch';\n\nimport { getUniqueStr, getParams } from '../utils';\nimport codoEditor from '@/components/editor/editor-v3';\n\nimport {\n  resTypeOptions,\n  dataDiskTypeOptions,\n  systemDiskTypeOptions,\n  instanceChargeTypeOptions,\n  internetChargeTypeOptions,\n} from '../options';\n\nconst DEFAULT_FORM_VALUES = {\n  script_type: 'python',\n  content: '',\n  cloud_region_id: '',\n  cloud_region_name: '',\n  account_id: '',\n  name: '',\n  res_type: '',\n  vendor: '',\n  region: '',\n  zone: '',\n  tags: {},\n  tagsValues: [\n    {\n      key: '',\n      value: '',\n    },\n  ],\n};\n\nconst DEFAULT_PRICE = {\n  bandwidth_dis_count: 100,\n  bandwidth_dis_count_price: 0,\n  bandwidth_original_price: 0,\n  dis_count: 100,\n  dis_count_price: 0,\n  original_price: 0,\n};\n\nexport default {\n  components: { codoEditor },\n  name: 'AddTemplateModal',\n  props: {\n    show: {\n      type: Boolean,\n      default: false,\n    },\n    buyRow: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      lang: 'text',\n      read: false,\n      // 镜像远程搜索\n      imageIdOptions: [],\n      imageIdLoading: false,\n      // 镜像远程搜索\n      bindWidthIdOptions: [],\n      bindWidthIdLoading: false,\n      title: '创建模板',\n      priceLoading: false,\n      buy: false,\n      price: DEFAULT_PRICE,\n      // 处理tags、security_groups等数据结构\n      specialSplit: '',\n      resTypeOptions,\n      dataDiskTypeOptions,\n      systemDiskTypeOptions,\n      instanceChargeTypeOptions,\n      internetChargeTypeOptions,\n      vswitchOptions: [],\n      securityGroupOptions: [],\n      tagKeyOptions: [],\n      tagValueOptions: {},\n      buyValues: {\n        name: '',\n        count: 1,\n      },\n\n      formValues: DEFAULT_FORM_VALUES,\n      formRules: {\n        name: [{ required: true, message: '模板名称必填', trigger: 'blur' }],\n        res_type: [\n          { required: true, message: '模板类型必选', trigger: 'blur' },\n        ],\n        subnet_id: [\n          { required: true, message: '私有子网必选', trigger: 'blur' },\n        ],\n        cloundAccountRender: [\n          { required: true, message: '云厂商不能为空', trigger: 'blur' },\n        ],\n        vpc_name: [\n          { required: true, message: '私有网络不能为空', trigger: 'blur' },\n        ],\n        region: [{ required: true, message: '地域不能为空', trigger: 'blur' }],\n        zone: [{ required: true, message: '可用区不能为空', trigger: 'blur' }],\n        tags: [{ required: true, message: '标签必填', trigger: 'blur' }],\n      },\n      showModal: this.show,\n      modalLoading: true,\n    };\n  },\n  computed: {\n    realShow() {\n      return this.show;\n    },\n    insTypeParams() {\n      const {\n        account_id,\n        vendor,\n        res_type,\n        region,\n        zone,\n        instance_type,\n        content,\n      } = this.formValues;\n      return {\n        account_id,\n        vendor,\n        res_type,\n        region,\n        zone,\n        instance_type,\n        content,\n      };\n    },\n  },\n  watch: {\n    show(v) {\n      if (v) {\n        this.getSettings();\n      }\n      this.showModal = v;\n    },\n    insTypeParams: {\n      async handler(val) {\n        const { account_id, vendor, res_type, region, zone, instance_type } =\n          val;\n        if (\n          !account_id ||\n          !vendor ||\n          !res_type ||\n          !region ||\n          !zone ||\n          !instance_type\n        )\n          return;\n        this.getInsTypeOptions();\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.specialSplit = getUniqueStr(3);\n  },\n  methods: {\n    async getSettings() {\n      this.getVswitchData();\n      this.getTagData();\n    },\n    async getVswitchData() {\n      const { data } = await getVswitch();\n      this.vswitchOptions = data.map((c) => ({\n        ...c,\n        label: `${c.instance_id} | ${c.name} | ${c.cidr_block_v4}`,\n      }));\n    },\n    async getTagData() {\n      const { data } = await getTagList();\n\n      this.tagKeyOptions = data.map((c) => ({\n        label: c,\n        value: c,\n      }));\n    },\n    async handleSelectTag(tag) {\n      const { data } = await getTagList({ tag_key: tag.value });\n\n      this.$set(\n        this.tagValueOptions,\n        tag.value,\n        data.map((c) => ({\n          label: c,\n          value: c,\n        }))\n      );\n    },\n    handleAddTag() {\n      this.formValues.tagsValues.push({\n        key: '',\n        value: '',\n      });\n    },\n    handleRemoveTag(index) {\n      this.formValues.tagsValues = this.formValues.tagsValues.filter(\n        (_, i) => i !== index\n      );\n    },\n    handleInstanceChange(v) {\n      const option = this.vswitchOptions.find((c) => c?.instance_id === v);\n      if (!option) return;\n      this.formValues = {\n        ...this.formValues,\n        subnet_name: `${option.instance_id} | ${option.name} | ${option.cidr_block_v4}`,\n        vendor: option.cloud_name,\n        account_id: option.account_id,\n        cloundAccountRender: `${option.account_id} | ${option.cloud_name}`,\n        vpc_id: option.vpc_id.replace(/[\\r\\n]/g, ''),\n        vpc_name: `${option.vpc_id} | ${option.vpc_name}`,\n        cloud_region_id: option.cloud_region_id || '',\n        cloudRender: `${option.cloud_region_id}`,\n        region: option.region,\n        zone: option.zone,\n      };\n    },\n    async ok() {\n      this.modalLoading = false;\n      try {\n        await new Promise((resolve, reject) => {\n          this.$refs.form.validate((v) => {\n            if (!v) {\n              reject(new Error('表单校验失败，请检查'));\n            }\n          });\n          if (this.buy) {\n            this.$refs.buyForm.validate((v) => {\n              if (!v) {\n                reject(new Error('表单校验失败，请检查'));\n              }\n            });\n          }\n          resolve();\n        });\n        const params = getParams(this.formValues, this);\n        const res = await (this.buy\n          ? createOrder({\n              instance_name: this.buyValues.name,\n              count: this.buyValues.count,\n              image_passwd: '',\n              ...params,\n            })\n          : createOrderTemplate({\n              ...params,\n            }));\n        if (!res) {\n          throw new Error('请求错误，请重试');\n        }\n        this.$emit('addSuccessCallback');\n        this.showModal = false;\n        this.$Message.success(res.msg);\n      } catch (err) {\n        this.$Message.error(err.message);\n        this.modalLoading = false;\n      } finally {\n        this.$nextTick(() => {\n          this.modalLoading = true;\n        });\n      }\n    },\n    cancel() {\n      this.$emit('closeAddModal');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n/deep/ .ivu-modal-body {\n  padding: 16px 16px 0 0;\n}\n\n.modal {\n  &__content {\n    padding-left: 16px;\n    position: relative;\n    max-height: calc(~'100vh - 300px');\n    overflow-y: auto;\n    &__section {\n      border-width: 1px 0 0 0;\n      border-color: #ccc;\n      border-style: solid;\n      &__title {\n        margin: 12px 0;\n      }\n      &__form {\n        padding-left: 12px;\n        display: flex;\n        flex-wrap: wrap;\n        &__custom {\n          width: 50%;\n        }\n        &__select {\n          width: 50%;\n        }\n        &__int {\n          width: 50%;\n          &__unit {\n            line-height: 32px;\n          }\n        }\n        &__longer {\n          width: 100%;\n        }\n\n        /deep/ .ivu-form-item {\n          padding-right: 20px;\n          // width: 50%;\n          .ivu-form-item-label {\n            padding: 10px 0;\n            font-size: 12px;\n            text-align: center;\n          }\n          .ivu-form-item-content {\n            margin-left: 112px !important;\n          }\n        }\n        &__special,\n        &__tags {\n          display: flex;\n          &__label {\n            width: 100px;\n            height: 32px;\n            line-height: 32px;\n            font-size: 12px;\n            text-align: center;\n            flex-shrink: 0;\n          }\n          &__label::before {\n            content: '*';\n            display: inline-block;\n            margin-right: 4px;\n            line-height: 1;\n            font-family: SimSun;\n            font-size: 14px;\n            color: #ed4014;\n          }\n          &__unit {\n            margin-left: 5px;\n          }\n        }\n        &__special {\n          /deep/ .ivu-form-item {\n            flex: 1;\n            padding-right: 0px;\n            .ivu-form-item-content {\n              display: flex;\n              margin-left: 12px !important;\n              margin-right: 20px;\n            }\n          }\n        }\n        &__limit {\n          width: 50%;\n          &__special {\n            display: flex;\n            &__label {\n              width: 100px;\n              height: 32px;\n              line-height: 32px;\n              font-size: 12px;\n              text-align: center;\n              flex-shrink: 0;\n            }\n            &__label::before {\n              content: '*';\n              display: inline-block;\n              margin-right: 4px;\n              line-height: 1;\n              font-family: SimSun;\n              font-size: 14px;\n              color: #ed4014;\n            }\n            &__slider {\n              flex: 1;\n            }\n            &__input {\n              flex-grow: 0;\n              width: 160px;\n              flex-shrink: 0;\n            }\n            &__unit {\n              margin-left: 5px;\n            }\n            /deep/ .ivu-form-item {\n              padding-right: 0px;\n              .ivu-form-item-content {\n                display: flex;\n                margin-left: 12px !important;\n                margin-right: 20px;\n                .ivu-input-number {\n                  width: 100%;\n                }\n                .ivu-slider {\n                  flex: 1;\n                }\n              }\n            }\n          }\n        }\n        &__tags {\n          width: 100%;\n          &__content {\n            flex: 1;\n            &__line {\n              display: flex;\n              /deep/ .ivu-form-item {\n                margin-left: 12px;\n                width: calc(~'50% - 62px');\n                .ivu-form-item-content {\n                  width: 100%;\n                  margin-left: 0 !important;\n                }\n              }\n              /deep/ .ivu-icon-md-close,\n              .ivu-icon-md-add {\n                margin-right: 10px;\n                line-height: 32px;\n                cursor: pointer;\n              }\n            }\n          }\n        }\n      }\n    }\n    &__buy {\n      z-index: 1;\n      padding-top: 12px;\n      background-color: #fbfcfc;\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-end;\n      position: sticky;\n      padding-left: 12px;\n      margin-left: -16px;\n      bottom: 0;\n      border-top: 1px solid #e8eaec;\n      -webkit-box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.03);\n      box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.03);\n      /deep/ .ivu-form-item {\n        padding-right: 20px;\n        // width: 50%;\n\n        .ivu-form-item-label {\n          padding: 10px 0;\n          font-size: 12px;\n          text-align: right;\n        }\n        .ivu-form-item-content {\n          margin-left: 112px !important;\n          width: 200px;\n          .ivu-input-number {\n            width: 100%;\n          }\n        }\n      }\n      &__price {\n        height: 34px;\n        margin-bottom: 24px;\n        margin-right: 200px;\n        display: flex;\n        align-items: center;\n        &__label {\n          margin-right: 12px;\n          text-decoration: underline dotted #999999;\n        }\n        &__value {\n          color: #ba0018;\n        }\n        &__loading {\n          animation: load 1.1s infinite linear;\n        }\n      }\n    }\n  }\n  @keyframes load {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n}\n\n.popup {\n  &__price {\n    &__header {\n      display: flex;\n      padding-left: 10px;\n      align-items: center;\n      background-color: #f1f2f5;\n      height: 50px;\n      &__label {\n        width: 80px;\n        flex-shrink: 0;\n      }\n      &__value {\n        font-weight: bold;\n      }\n    }\n    &__item {\n      display: flex;\n      padding-left: 10px;\n      padding-right: 20px;\n      align-items: center;\n      height: 70px;\n      border-bottom: 1px solid #e2e6ed;\n      &__label {\n        width: 80px;\n        flex-shrink: 0;\n      }\n      &__value {\n        display: flex;\n        align-items: center;\n        &__final {\n          font-weight: bold;\n          margin-right: 10px;\n          color: #ff7200;\n          font-size: 16px;\n        }\n        &__discount {\n          font-weight: bold;\n          margin-right: 10px;\n          height: 32px;\n          line-height: 30px;\n          padding: 0 10px;\n          background-color: #ffe8d5;\n          color: #ff7200;\n          border: 1px solid #ff7200;\n          border-radius: 50%;\n        }\n        &__original {\n          font-size: 14px;\n          text-decoration: line-through;\n          color: #a5aebb;\n        }\n      }\n    }\n  }\n}\n\n/deep/ .ivu-tooltip-content {\n  .ivu-tooltip-inner {\n    max-width: unset;\n    background-color: #fff;\n    color: #000;\n  }\n  .ivu-tooltip-arrow {\n    background-color: #fff;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addTemplate.vue?vue&type=template&id=3ebe8931&scoped=true&\"\nimport script from \"./addTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./addTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addTemplate.vue?vue&type=style&index=0&id=3ebe8931&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ebe8931\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=style&index=0&id=3ebe8931&prod&scoped=true&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"template__header\"},[_c('div',{staticClass:\"template__header__search\"},[_c('Input',{staticClass:\"template__header__search__input\",attrs:{\"placeholder\":\"请输入搜索内容\"},model:{value:(_vm.searchParams.searchVal),callback:function ($$v) {_vm.$set(_vm.searchParams, \"searchVal\", $$v)},expression:\"searchParams.searchVal\"}}),_c('Button',{staticClass:\"template__header__search__button\",on:{\"click\":_vm.getTableData}},[_vm._v(\"搜索\")])],1),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAddddTemplate}},[_vm._v(\"创建模板\")])],1),_c('Table',{ref:\"selection\",attrs:{\"stripe\":\"\",\"size\":\"small\",\"loading\":_vm.tableLoading,\"columns\":_vm.columns,\"data\":_vm.tableData}}),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\",\"margin-top\":\"10px\",\"overflow\":\"hidden\"}},[_c('Page',{attrs:{\"total\":_vm.pageTotal,\"current\":_vm.searchParams.page_number,\"page-size\":_vm.searchParams.page_size,\"page-size-opts\":[12, 35, 50, 100],\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.handlePageSize}})],1),_c('Modal',{attrs:{\"title\":\"克隆模板\",\"loading\":_vm.cloneModalLoading,\"width\":60},on:{\"on-ok\":_vm.colneModalOk,\"on-cancel\":_vm.cloneModalCancel},model:{value:(_vm.showCloneModal),callback:function ($$v) {_vm.showCloneModal=$$v},expression:\"showCloneModal\"}},[_c('div',{staticClass:\"clone-modal__content\"},[_c('Form',{ref:\"form\",attrs:{\"model\":_vm.cloneFormValues}},[_c('FormItem',{attrs:{\"prop\":\"name\",\"label\":\"模板名称\",\"label-width\":100,\"rules\":{\n            required: true,\n            message: '模板名称必填',\n            trigger: 'change',\n          }}},[_c('Input',{model:{value:(_vm.cloneFormValues.name),callback:function ($$v) {_vm.$set(_vm.cloneFormValues, \"name\", $$v)},expression:\"cloneFormValues.name\"}})],1)],1)],1)]),_c('Modal',{attrs:{\"title\":\"删除模板\",\"loading\":_vm.deleteModalLoading},on:{\"on-ok\":_vm.deleteModalOk,\"on-cancel\":_vm.deleteModalCancel},model:{value:(_vm.showDeleteModal),callback:function ($$v) {_vm.showDeleteModal=$$v},expression:\"showDeleteModal\"}},[_vm._v(\" 确认删除模板吗？ \")]),_c('AddTemplateModal',{attrs:{\"show\":_vm.showModal,\"buyRow\":_vm.buyRow},on:{\"closeAddModal\":_vm.closeAddModal,\"addSuccessCallback\":_vm.addSuccessCallback}}),_c('EditTemplate',{attrs:{\"show\":_vm.showDrawer,\"row\":_vm.curRow},on:{\"closeDrawer\":_vm.closeDrawer,\"editSuccessCallback\":_vm.editSuccessCallback}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable vue/attribute-hyphenation -->\n<template>\n  <div>\n    <div class=\"template__header\">\n      <div class=\"template__header__search\">\n        <Input\n          v-model=\"searchParams.searchVal\"\n          class=\"template__header__search__input\"\n          placeholder=\"请输入搜索内容\"\n        />\n        <Button class=\"template__header__search__button\" @click=\"getTableData\"\n          >搜索</Button\n        >\n      </div>\n      <Button type=\"primary\" @click=\"handleAddddTemplate\">创建模板</Button>\n    </div>\n    <Table\n      ref=\"selection\"\n      stripe\n      size=\"small\"\n      :loading=\"tableLoading\"\n      :columns=\"columns\"\n      :data=\"tableData\"\n    />\n    <!-- 分页 -->\n    <div\n      style=\"\n        display: flex;\n        justify-content: flex-end;\n        margin-top: 10px;\n        overflow: hidden;\n      \"\n    >\n      <Page\n        :total=\"pageTotal\"\n        :current=\"searchParams.page_number\"\n        :page-size=\"searchParams.page_size\"\n        :page-size-opts=\"[12, 35, 50, 100]\"\n        show-sizer\n        show-total\n        @on-change=\"changePage\"\n        @on-page-size-change=\"handlePageSize\"\n      />\n    </div>\n\n    <Modal\n      v-model=\"showCloneModal\"\n      title=\"克隆模板\"\n      :loading=\"cloneModalLoading\"\n      :width=\"60\"\n      @on-ok=\"colneModalOk\"\n      @on-cancel=\"cloneModalCancel\"\n    >\n      <div class=\"clone-modal__content\">\n        <Form ref=\"form\" :model=\"cloneFormValues\">\n          <FormItem\n            prop=\"name\"\n            label=\"模板名称\"\n            :label-width=\"100\"\n            :rules=\"{\n              required: true,\n              message: '模板名称必填',\n              trigger: 'change',\n            }\"\n          >\n            <Input v-model=\"cloneFormValues.name\" />\n          </FormItem>\n        </Form>\n      </div>\n    </Modal>\n    <Modal\n      v-model=\"showDeleteModal\"\n      title=\"删除模板\"\n      :loading=\"deleteModalLoading\"\n      @on-ok=\"deleteModalOk\"\n      @on-cancel=\"deleteModalCancel\"\n    >\n      确认删除模板吗？\n    </Modal>\n    <AddTemplateModal\n      :show=\"showModal\"\n      :buyRow=\"buyRow\"\n      @closeAddModal=\"closeAddModal\"\n      @addSuccessCallback=\"addSuccessCallback\"\n    />\n    <EditTemplate\n      :show=\"showDrawer\"\n      :row=\"curRow\"\n      @closeDrawer=\"closeDrawer\"\n      @editSuccessCallback=\"editSuccessCallback\"\n    />\n  </div>\n</template>\n<!-- eslint-disable camelcase -->\n\n<script>\nimport {\n  getOrderTemplateList,\n  createOrderTemplate,\n  deleteOrderTemplate,\n} from '@/api/cmdb';\n\nimport AddTemplateModal from './addTemplate.vue';\nimport EditTemplate from './editTemplate.vue';\n\nexport default {\n  components: {\n    AddTemplateModal,\n    EditTemplate,\n  },\n  data() {\n    return {\n      buyRow: null,\n      pageTotal: 0,\n      showDrawer: false,\n      showDeleteModal: false,\n      deleteModalLoading: true,\n      curRow: {},\n      showModal: false,\n      showCloneModal: false,\n      cloneModalLoading: true,\n      tableLoading: false,\n      cloneFormValues: {\n        name: '',\n      },\n      columns: [\n        {\n          title: '资源ID',\n          key: 'id',\n          width: 100,\n        },\n        {\n          title: '模板名称',\n          key: 'name',\n          align: 'center',\n          minWidth: 160,\n          render: (h, params) =>\n            h('div', [\n              h(\n                'div',\n                {\n                  style: {\n                    color: '#2d8cf0',\n                    cursor: 'pointer',\n                  },\n                  on: {\n                    click: () => {\n                      this.showDrawer = true;\n                      this.curRow = params.row;\n                    },\n                  },\n                },\n                params.row.name\n              ),\n            ]),\n        },\n        {\n          title: '子网信息',\n          key: 'subnet_name',\n          width: 400,\n          align: 'center',\n        },\n        {\n          title: '模板类型',\n          key: 'res_type_alias',\n          width: 120,\n          align: 'center',\n        },\n        {\n          title: '云厂商',\n          key: 'vendor_alias',\n          width: 120,\n          align: 'center',\n        },\n        {\n          title: '更新时间',\n          key: 'update_time',\n          width: 160,\n          align: 'center',\n        },\n        {\n          title: '最后一次使用时间',\n          key: 'last_time',\n          width: 160,\n          align: 'center',\n        },\n        {\n          title: '修改人',\n          key: 'modify_user',\n          width: 160,\n          align: 'center',\n        },\n        {\n          title: '操作',\n          align: 'center',\n          render: (h, params) =>\n            h('div', [\n              // h(\n              //   'Button',\n              //   {\n              //     props: {\n              //       type: 'text',\n              //       size: 'small',\n              //     },\n              //     style: {\n              //       color: '#2d8cf0',\n              //     },\n              //     on: {\n              //       click: () => {\n              //         this.showModal = true;\n              //         this.buyRow = params.row;\n              //       },\n              //     },\n              //   },\n              //   '购买'\n              // ),\n              h(\n                'Button',\n                {\n                  props: {\n                    type: 'text',\n                    size: 'small',\n                  },\n                  style: {\n                    color: '#2d8cf0',\n                  },\n                  on: {\n                    click: () => {\n                      this.cloneFormValues.name = `${params.row.name}-克隆`;\n                      this.curRow = params.row;\n                      this.showCloneModal = true;\n                    },\n                  },\n                },\n                '克隆'\n              ),\n              h(\n                'Button',\n                {\n                  props: {\n                    type: 'text',\n                    size: 'small',\n                  },\n                  style: {\n                    color: '#ed4014',\n                  },\n                  on: {\n                    click: () => {\n                      this.curRow = params.row;\n                      this.showDeleteModal = true;\n                    },\n                  },\n                },\n                '删除'\n              ),\n            ]),\n          width: 200,\n        },\n      ],\n      tableData: [],\n      searchParams: {\n        page_number: 1,\n        page_size: 12,\n        order_by: 'id',\n        order: 'descend',\n        searchVal: '',\n      },\n    };\n  },\n  mounted() {\n    this.getTableData();\n  },\n  methods: {\n    handleAddddTemplate() {\n      this.buyRow = null;\n      this.showModal = true;\n    },\n    editSuccessCallback() {\n      this.showDrawer = false;\n      this.getTableData();\n    },\n    closeDrawer() {\n      this.showDrawer = false;\n    },\n    async deleteModalOk() {\n      try {\n        const { id } = this.curRow;\n        const res = await deleteOrderTemplate({\n          id_list: [id],\n        });\n        if (!res) {\n          throw new Error('请求错误，请重试');\n        }\n        this.showDeleteModal = false;\n        this.$Message.success(res.msg);\n        this.getTableData();\n      } catch (err) {\n        this.$Message.error(err.message);\n        this.deleteModalLoading = false;\n      } finally {\n        this.$nextTick(() => {\n          this.deleteModalLoading = true;\n        });\n      }\n    },\n    deleteModalCancel() {\n      this.showDeleteModal = false;\n    },\n    addSuccessCallback() {\n      this.showModal = false;\n      this.getTableData();\n    },\n    closeAddModal() {\n      this.showModal = false;\n    },\n    cloneModalCancel() {\n      this.showCloneModal = false;\n    },\n    async colneModalOk() {\n      try {\n        await new Promise((resolve, reject) => {\n          this.$refs.form.validate((v) => {\n            if (!v) {\n              reject(new Error('表单校验失败，请检查'));\n            }\n            resolve();\n          });\n        });\n        const {\n          account_id,\n          vendor,\n          cloud_region_id,\n          res_type,\n          region,\n          zone,\n          instance_type,\n          tags,\n          vpc_id,\n          vpc_name,\n          subnet_id,\n          subnet_name,\n          content,\n        } = this.curRow;\n        const res = await createOrderTemplate({\n          name: this.cloneFormValues.name,\n          account_id,\n          vendor,\n          cloud_region_id,\n          res_type,\n          region,\n          zone,\n          instance_type,\n          tags,\n          vpc_id,\n          vpc_name,\n          subnet_id,\n          subnet_name,\n          content,\n          description: this.cloneFormValues.description || '',\n        });\n        if (!res) {\n          throw new Error('请求错误，请重试');\n        }\n        this.showCloneModal = false;\n        this.$Message.success(res.msg);\n        this.getTableData();\n      } catch (err) {\n        this.$Message.error(err.message);\n        this.cloneModalLoading = false;\n      } finally {\n        this.$nextTick(() => {\n          this.cloneModalLoading = true;\n        });\n      }\n    },\n    async getTableData() {\n      try {\n        this.tableLoading = true;\n        const { data, count } = await getOrderTemplateList(this.searchParams);\n        this.pageTotal = count;\n        this.tableData = data;\n      } catch (err) {\n        this.$Message.error(err.message);\n      } finally {\n        this.tableLoading = false;\n      }\n    },\n    handleShowModal(show) {\n      this.showModal = show;\n    },\n    // 每页条数\n    handlePageSize(val) {\n      this.searchParams.page_size = val;\n      this.getTableData();\n    },\n    // 切换分页\n    changePage(val) {\n      this.searchParams.page_number = val;\n      this.getTableData();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.template__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n  &__search {\n    display: flex;\n    &__input {\n      margin-right: 20px;\n      width: 200px;\n    }\n  }\n}\n\n.clone-modal__content {\n  padding: 0 30px;\n}\n\n/deep/ .ivu-table-wrapper {\n  max-height: calc(~'100vh - 200px');\n  .ivu-table-body {\n    max-height: calc(~'100vh - 280px');\n    overflow-y: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./templateManagement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./templateManagement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./templateManagement.vue?vue&type=template&id=5a734a5d&scoped=true&\"\nimport script from \"./templateManagement.vue?vue&type=script&lang=js&\"\nexport * from \"./templateManagement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./templateManagement.vue?vue&type=style&index=0&id=5a734a5d&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a734a5d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./templateManagement.vue?vue&type=style&index=0&id=5a734a5d&prod&scoped=true&lang=less&\""],"sourceRoot":""}