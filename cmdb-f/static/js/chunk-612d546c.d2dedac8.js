(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-612d546c"],{"13ad":function(t,e,a){},b48c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[t.showEdit?e("consul-instance",{attrs:{serverName:t.serverName},on:{close:t.handleClose}}):e("Card",{attrs:{"dis-hover":"",bordered:!1}},[e("Alert",{staticStyle:{"margin-left":"1px"},attrs:{type:"info","show-icon":""}},[t._v(" 使用说明： "),e("Icon",{attrs:{slot:"icon",type:"ios-bulb-outline"},slot:"icon"}),e("template",{slot:"desc"},[e("p",[t._v("CMDB同步拓扑以及关联数据到consul，为监控等服务提供数据源做服务发现，默认只同步和业务关联的数据并把业务数据放入Meta数据，业务ID放入Tag。")]),e("p",[t._v("可以根据Tags来区分业务，提供给多区域的Prometheus使用。")])])],2),e("div",[e("Affix",{staticStyle:{"padding-bottom":"15px"},attrs:{"offset-top":50}},[e("Input",{staticClass:"search-input",attrs:{search:"",placeholder:"查询..."},on:{"on-search":t.handleSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),e("Row",{attrs:{gutter:10}},t._l(t.serverData,(function(a,s){return e("i-col",{key:s,attrs:{xxl:6,xl:6,lg:8,md:12,sm:12}},[e("Card",{staticStyle:{margin:"0 1px 10px","text-align":"center"}},[e("p",{staticClass:"card-title",attrs:{slot:"title"},on:{click:function(e){return t.handlePreview(a.name)}},slot:"title"},[t._v(" "+t._s(a.name)+" ")]),e("Tooltip",{attrs:{"max-width":"200",transfer:!0}},[e("div",{staticStyle:{margin:"5px 0px 5px",height:"25px",overflow:"hidden"}},t._l(a.tags,(function(a){return e("span",[e("Tag",{attrs:{color:"cyan"}},[t._v(t._s(a))])],1)})),0),e("div",{attrs:{slot:"content"},slot:"content"},t._l(a.tags,(function(a){return e("span",[e("span",{staticStyle:{padding:"2px"}},[t._v(t._s(a)+" ")])])})),0)]),e("div",{staticStyle:{"padding-top":"8px","padding-bottom":"15px"}},[e("div",{staticStyle:{float:"left"}},[t._v(" "+t._s(a.count)+" instances ")]),e("div",{staticStyle:{float:"right"}},[e("Icon",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{type:"ios-thumbs-down"}}),t._v(" "+t._s(a.checks_critical)+" ")],1),e("div",{staticStyle:{float:"right"}},[e("Icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"ios-thumbs-up"}}),t._v(" "+t._s(a.checks_passing)+" ")],1)])],1)],1)})),1)],1)],1)],1)},i=[],n=a("47ec"),r=a("a6f3"),c={components:{ConsulInstance:r["default"]},data(){return{showEdit:!1,serverName:"",searchVal:null,serverData:[]}},methods:{async handleGetData(){const t=await Object(n["getConsulServices"])();0==t.code?this.serverData=t.data:this.$Message.error(t.msg)},handleClose(){this.showEdit=!1,this.handleGetData()},async handlePreview(t){this.serverName=t,this.showEdit=!this.showEdit},checkExist(t){let e=JSON.stringify(t.tags);return t.name.indexOf(this.searchVal)>=0||e.indexOf(this.searchVal)>=0},handleSearch(){this.searchVal?(this.pageNum=1,this.serverData=this.serverData.filter(this.checkExist)):(this.pageNum=1,this.handleGetData())}},watch:{searchVal(t){t||this.handleGetData()}},mounted(){this.handleGetData()}},l=c,o=(a("d81b"),a("2877")),h=Object(o["a"])(l,s,i,!1,null,"7528fdfa",null);e["default"]=h.exports},d81b:function(t,e,a){"use strict";a("13ad")}}]);
//# sourceMappingURL=chunk-612d546c.d2dedac8.js.map