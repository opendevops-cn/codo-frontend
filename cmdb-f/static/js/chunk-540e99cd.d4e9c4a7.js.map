{"version":3,"sources":["webpack://cmdb-[name]/./src/api/cloud/vpc.js","webpack://cmdb-[name]/./src/views/cmdb/components/cloud-region-edit.vue?7476","webpack://cmdb-[name]/./src/views/cmdb/components/cloud-region-edit.vue","webpack://cmdb-[name]/src/views/cmdb/components/cloud-region-edit.vue","webpack://cmdb-[name]/./src/views/cmdb/components/cloud-region-edit.vue?bf21","webpack://cmdb-[name]/./src/views/cmdb/components/cloud-region-edit.vue?0109"],"names":["getVPC","params","request","url","method","optVPC","data","render","_vm","this","_c","_self","attrs","ref","formValidate","ruleValidate","_v","formData","id","model","value","name","callback","$$v","$set","expression","cloud_region_id","proxy_ip","ssh_user","slot","ssh_ip","ssh_port","_l","asset_group_rules","items","i","length","staticStyle","_e","item","index","status","key","_uid","staticClass","_s","vpcOptions","query_value","on","$event","handleAddRules","handleRemoveRules","preventDefault","handleRemoveCard","scopedSlots","_u","fn","proxy","jms_org_id","jms_domain_id","jms_account_template","accounts","account_type","jms_account_template_id","handleRemove","handleAdd","minRows","maxRows","ssh_key","ssh_pub_key","detail","btnLoading","handleSubmit","handleCancel","staticRenderFns","components","props","type","Object","default","cloudList","vpcList","vendorMap","required","message","trigger","max","filters","testF","location","methods","$Notice","warning","title","push","splice","transformData","forEach","cloud_zh_name","region","label","vpc_name","instance_id","keys","map","vendor","children","res","getCloudSettinglist","code","$message","error","msg","getVpcCloudName","accountID","cloud","find","vpc","account_id","getVpcRegion","vpcName","page_number","page_size","cidr_block_v4","desc","duration","query_name","query_conditions","JSON","stringify","$Modal","confirm","content","onOk","$emit","onCancel","$Message","info","$refs","validate","valid","accountTypes","Set","duplicateFound","account","has","add","rules","rule","Array","isArray","trim","setTimeout","watch","computed","mounted","getCloudSettingList","getVpcList","component"],"mappings":"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","file":"static/js/chunk-540e99cd.d4e9c4a7.js","sourcesContent":["/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\nexport const getVPC = (params) => request({\n  url: '/api/v2/cmdb/vpc/',\n  method: 'get',\n  params,\n})\n\nexport const optVPC = (data, method) => request({\n  url: '/api/v2/cmdb/vpc/',\n  method,\n  data,\n})\n\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cloud-region-edit.vue?vue&type=style&index=0&id=7f901a44&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Card',{attrs:{\"bordered\":false,\"dis-hover\":\"\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-colon\":true,\"label-position\":\"right\",\"label-width\":200}},[_c('Row',[_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_c('Divider',[_vm._v(\"基础配置\")]),(_vm.formData.id)?_c('FormItem',{attrs:{\"label\":\"云区域名称\",\"prop\":\"name\"}},[_c('Input',{attrs:{\"maxlength\":\"50\",\"type\":\"text\",\"disabled\":\"\",\"placeholder\":\"请输入规则名称...\"},model:{value:(_vm.formValidate.name),callback:function ($$v) {_vm.$set(_vm.formValidate, \"name\", $$v)},expression:\"formValidate.name\"}})],1):_c('FormItem',{attrs:{\"label\":\"云区域名称\",\"prop\":\"name\"}},[_c('Input',{attrs:{\"maxlength\":\"50\",\"type\":\"text\",\"placeholder\":\"请输入规则名称...\"},model:{value:(_vm.formValidate.name),callback:function ($$v) {_vm.$set(_vm.formValidate, \"name\", $$v)},expression:\"formValidate.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"云区域ID\",\"prop\":\"cloud_region_id\"}},[_c('Input',{attrs:{\"maxlength\":\"10\",\"type\":\"text\",\"placeholder\":\"云区域ID、代理ID...\"},model:{value:(_vm.formValidate.cloud_region_id),callback:function ($$v) {_vm.$set(_vm.formValidate, \"cloud_region_id\", $$v)},expression:\"formValidate.cloud_region_id\"}})],1),_c('FormItem',{attrs:{\"label\":\"代理地址\",\"prop\":\"proxy_ip\"}},[_c('Input',{attrs:{\"maxlength\":\"100\",\"type\":\"text\",\"placeholder\":\"连接代理节点IP地址或域名地址，一般为内网LB或者内网域名\"},model:{value:(_vm.formValidate.proxy_ip),callback:function ($$v) {_vm.$set(_vm.formValidate, \"proxy_ip\", $$v)},expression:\"formValidate.proxy_ip\"}})],1),_c('FormItem',{attrs:{\"label\":\"SSH\",\"prop\":\"ssh_user\"}},[_c('Row',{attrs:{\"gutter\":6}},[_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{attrs:{\"maxlength\":\"25\",\"type\":\"text\",\"placeholder\":\"用户名...\"},model:{value:(_vm.formValidate.ssh_user),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ssh_user\", $$v)},expression:\"formValidate.ssh_user\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"ssh\")])])],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{attrs:{\"maxlength\":\"100\",\"type\":\"text\",\"placeholder\":\"主机/ip...\"},model:{value:(_vm.formValidate.ssh_ip),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ssh_ip\", $$v)},expression:\"formValidate.ssh_ip\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"@\")])])],1),_c('Col',{attrs:{\"span\":\"8\"}},[_c('Input',{attrs:{\"maxlength\":\"10\",\"type\":\"text\",\"placeholder\":\"端口...\"},model:{value:(_vm.formValidate.ssh_port),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ssh_port\", $$v)},expression:\"formValidate.ssh_port\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"-p\")])])],1)],1)],1),_vm._l((_vm.formValidate.asset_group_rules),function(items,i){return [(_vm.formValidate.asset_group_rules && _vm.formValidate.asset_group_rules.length !== 0)?_c('FormItem',{attrs:{\"label\":\"关联主机\"}},[(i === 0)?_c('Alert',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"8px\"},attrs:{\"show-icon\":\"\"}},[_vm._v(\" 通过关联vpc把一组vpc下的主机资产划分到云区域，vpc之间的的条件关系为或。 \")]):_vm._e(),_c('Row',{attrs:{\"gutter\":20}},[_c('Col',[(items.length > 0)?_c('Card',{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{\"dis-hover\":\"\"}},_vm._l((items),function(item,index){return (item.status)?_c('FormItem',{key:index + _vm._uid},[_c('div',{staticClass:\"alert-con\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('span',{staticStyle:{\"margin-right\":\"5px\",\"min-width\":\"30px\",\"display\":\"inline-block\"}},[_vm._v(\" \"+_vm._s(index + 1)+\" - \")]),_c('Cascader',{staticStyle:{\"width\":\"700px\",\"margin-left\":\"10px\"},attrs:{\"data\":_vm.vpcOptions},model:{value:(item.query_value),callback:function ($$v) {_vm.$set(item, \"query_value\", $$v)},expression:\"item.query_value\"}}),_c('Button',{staticClass:\"rule-btn-add\",attrs:{\"shape\":\"circle\",\"type\":\"text\",\"icon\":\"md-add\"},on:{\"click\":function($event){return _vm.handleAddRules(i)}}}),(items.length !== 1)?_c('Button',{staticClass:\"rule-btn-del\",attrs:{\"shape\":\"circle\",\"type\":\"text\",\"icon\":\"md-close\"},on:{\"click\":function($event){return _vm.handleRemoveRules(i, index)}}}):_vm._e()],1)]):_vm._e()}),1):_vm._e(),(_vm.formValidate.asset_group_rules.length > 1 && i != 2)?_c('p',{staticStyle:{\"padding-top\":\"15px\"}},[_vm._v(\"或\")]):_vm._e()],1),_c('Col',{attrs:{\"span\":\"2\"}},[(_vm.formValidate.asset_group_rules.length !== 1)?_c('a',{on:{\"click\":function($event){$event.preventDefault();return _vm.handleRemoveCard(i)}}},[_vm._v(\" 删除\")]):_vm._e()])],1)],1):_vm._e()]}),_c('Divider',{attrs:{\"dashed\":\"\"}},[_vm._v(\"堡垒机配置\")]),_c('FormItem',{attrs:{\"prop\":\"jms_org_id\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(\" 组织ID \"),_c('Tooltip',{attrs:{\"placement\":\"top-start\",\"max-width\":\"400\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('p',[_vm._v(\"关联堡垒机组织，社区版不支持组织管理，只有默认Default组织，企业版支持多组织管理\")]),_c('p',[_vm._v(\"堡垒机查看组织ID方法：堡垒机资产管理-->网域列表-->点击网域查看ID\")])]},proxy:true}])},[_c('Icon',{attrs:{\"type\":\"ios-help-circle-outline\"}}),_vm._v(\" : \")],1)]},proxy:true}])},[_c('Input',{attrs:{\"maxlength\":\"100\",\"type\":\"text\",\"placeholder\":\"堡垒机组织ID...\"},model:{value:(_vm.formValidate.jms_org_id),callback:function ($$v) {_vm.$set(_vm.formValidate, \"jms_org_id\", $$v)},expression:\"formValidate.jms_org_id\"}})],1),_c('FormItem',{attrs:{\"prop\":\"jms_domain_id\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(\" 网域ID \"),_c('Tooltip',{attrs:{\"placement\":\"top-start\",\"max-width\":\"400\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('p',[_vm._v(\"关联堡垒机网域，指定云区域下的主机属于哪个网域，理论上一个区域的主机归属于同一个网域\")]),_c('p',[_vm._v(\"堡垒机查看网域ID方法：堡垒机资产管理-->网域列表-->点击网域查看ID\")])]},proxy:true}])},[_c('Icon',{attrs:{\"type\":\"ios-help-circle-outline\"}}),_vm._v(\" : \")],1)]},proxy:true}])},[_c('Input',{attrs:{\"maxlength\":\"100\",\"type\":\"text\",\"placeholder\":\"堡垒机网域ID...\"},model:{value:(_vm.formValidate.jms_domain_id),callback:function ($$v) {_vm.$set(_vm.formValidate, \"jms_domain_id\", $$v)},expression:\"formValidate.jms_domain_id\"}})],1),_c('FormItem',{attrs:{\"label\":\"\",\"prop\":\"jms_account_template\"},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(\" 特权账号模版ID \"),_c('Tooltip',{attrs:{\"placement\":\"top-start\",\"max-width\":\"400\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('p',[_vm._v(\"关联堡垒机特权账户模板，创建主机时需指定特权账号，用户推送创建非特权账号到服务器\")]),_c('p',[_vm._v(\"堡垒机特权账号模版ID方法：堡垒机账号管理-->账号模板-->点击特权账号查看ID\")])]},proxy:true}])},[_c('Icon',{attrs:{\"type\":\"ios-help-circle-outline\"}}),_vm._v(\" : \")],1)]},proxy:true}])},[_c('Input',{attrs:{\"maxlength\":\"100\",\"type\":\"text\",\"placeholder\":\"堡垒机特权账户模板ID...\"},model:{value:(_vm.formValidate.jms_account_template),callback:function ($$v) {_vm.$set(_vm.formValidate, \"jms_account_template\", $$v)},expression:\"formValidate.jms_account_template\"}})],1)],2),_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_vm._l((_vm.formValidate.accounts),function(item,index){return [(item.status)?_c('FormItem',{key:index,attrs:{\"label\":'账户模板ID ' + (index + 1),\"prop\":'accounts.' + index + '.value'},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(\" 账户模板ID \"),_c('Tooltip',{attrs:{\"placement\":\"top-start\",\"max-width\":\"400\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('p',[_vm._v(\"关联堡垒机特权账户模板，需指定普通账号模板ID和特权账户模板ID，分别用于创建普通用户和特权账户, 如模板不存在则需在堡垒机创建并录入\")]),_c('p',[_vm._v(\"查看堡垒机账号模版ID方法：堡垒机账号管理-->账号模板-->点击特权查看ID\")])]},proxy:true}],null,true)},[_c('Icon',{attrs:{\"type\":\"ios-help-circle-outline\"}}),_vm._v(\" : \")],1)]},proxy:true}],null,true)},[_c('Row',[_c('Select',{staticStyle:{\"margin-right\":\"1px\",\"margin-left\":\"1px\",\"max-width\":\"100px\"},attrs:{\"placeholder\":\"选择账户类型\"},model:{value:(item.account_type),callback:function ($$v) {_vm.$set(item, \"account_type\", $$v)},expression:\"item.account_type\"}},[_c('Option',{attrs:{\"value\":\"dev\"}},[_vm._v(\"普通账户\")]),_c('Option',{attrs:{\"value\":\"ops\"}},[_vm._v(\"特权账户\")])],1),_c('Input',{staticStyle:{\"max-width\":\"500px\"},attrs:{\"placeholder\":\"请输入待创建账号模板ID\"},model:{value:(item.jms_account_template_id),callback:function ($$v) {_vm.$set(item, \"jms_account_template_id\", $$v)},expression:\"item.jms_account_template_id\"}}),_c('Icon',{staticStyle:{\"margin-top\":\"8px\",\"margin-left\":\"4px\"},attrs:{\"type\":\"ios-backspace\"},on:{\"click\":function($event){return _vm.handleRemove(index)}}})],1)],1):_vm._e()]}),_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Tooltip',{attrs:{\"trigger\":\"hover\",\"placement\":\"top-start\",\"content\":\"只允许添加两个不同类型的账户\"}},[_c('Button',{attrs:{\"type\":\"dashed\",\"long\":\"\",\"icon\":\"md-add\"},on:{\"click\":function($event){return _vm.handleAdd(_vm.account_type)}}},[_vm._v(\"添加账户\")])],1)],1)],1)],1)],2),_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_c('FormItem',{attrs:{\"label\":\"网域密钥\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"maxlength\":\"65500\",\"autosize\":{minRows: 6,maxRows: 15},\"placeholder\":\"当前云区域网域私钥...\"},model:{value:(_vm.formValidate.ssh_key),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ssh_key\", $$v)},expression:\"formValidate.ssh_key\"}})],1)],1),_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_c('FormItem',{attrs:{\"label\":\"网域公钥\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"maxlength\":\"65500\",\"autosize\":{minRows: 3,maxRows: 15},\"placeholder\":\"当前云区域网域公钥...\"},model:{value:(_vm.formValidate.ssh_pub_key),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ssh_pub_key\", $$v)},expression:\"formValidate.ssh_pub_key\"}})],1)],1),_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_c('FormItem',{attrs:{\"label\":\"备注信息\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"maxlength\":\"65500\",\"autosize\":{minRows: 2,maxRows: 5},\"placeholder\":\"备注信息...\"},model:{value:(_vm.formValidate.detail),callback:function ($$v) {_vm.$set(_vm.formValidate, \"detail\", $$v)},expression:\"formValidate.detail\"}})],1)],1),_c('Col',{attrs:{\"span\":\"12\",\"offset\":\"4\"}},[_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},on:{\"click\":function($event){return _vm.handleSubmit('formValidate')}}},[_vm._v(\"确定\")]),_c('Button',{staticStyle:{\"margin-left\":\"15px\"},on:{\"click\":_vm.handleCancel}},[_vm._v(\"返回\")])],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Card :bordered=\"false\" dis-hover>\n    <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-colon='true' label-position=\"right\"\n          :label-width=\"200\">\n      <Row>\n        <Col span=\"12\" offset=\"4\">\n          <Divider>基础配置</Divider>\n          <FormItem label=\"云区域名称\" prop=\"name\" v-if=\"formData.id\">\n            <Input v-model=\"formValidate.name\" maxlength=\"50\" type=\"text\" disabled\n                   placeholder=\"请输入规则名称...\"></Input>\n          </FormItem>\n          <FormItem label=\"云区域名称\" prop=\"name\" v-else>\n            <Input v-model=\"formValidate.name\" maxlength=\"50\" type=\"text\" placeholder=\"请输入规则名称...\"></Input>\n          </FormItem>\n          <FormItem label=\"云区域ID\" prop=\"cloud_region_id\">\n            <Input v-model=\"formValidate.cloud_region_id\" maxlength=\"10\" type=\"text\"\n                   placeholder=\"云区域ID、代理ID...\"></Input>\n          </FormItem>\n          <FormItem label=\"代理地址\" prop=\"proxy_ip\">\n            <Input v-model=\"formValidate.proxy_ip\" maxlength=\"100\" type=\"text\"\n                   placeholder=\"连接代理节点IP地址或域名地址，一般为内网LB或者内网域名\"></Input>\n            <!--                  <Select v-model=\"formValidate.proxy_ips\" filterable multiple suffix allow-create-->\n            <!--                          placeholder=\"请输入代理节点IP地址或域名\" @on-create=\"handleCreate\">-->\n            <!--                    <Option v-for=\"item in formValidate.proxy_ips\" :key=\"item\" :value=\"item\">{{ item }}</Option>-->\n            <!--                  </Select>-->\n          </FormItem>\n          <FormItem label=\"SSH\" prop=\"ssh_user\">\n            <Row :gutter=\"6\">\n              <Col span=\"8\">\n                <Input v-model=\"formValidate.ssh_user\" maxlength=\"25\" type=\"text\" placeholder=\"用户名...\">\n                  <span slot=\"prepend\">ssh</span>\n                </Input>\n              </Col>\n              <Col span=\"8\">\n                <Input v-model=\"formValidate.ssh_ip\" maxlength=\"100\" type=\"text\" placeholder=\"主机/ip...\">\n                  <span slot=\"prepend\">@</span>\n                </Input>\n              </Col>\n              <Col span=\"8\">\n                <Input v-model=\"formValidate.ssh_port\" maxlength=\"10\" type=\"text\" placeholder=\"端口...\">\n                  <span slot=\"prepend\">-p</span>\n                </Input>\n              </Col>\n            </Row>\n          </FormItem>\n          <template v-for=\"items, i in formValidate.asset_group_rules\" class=\"alert-c\">\n            <FormItem label=\"关联主机\"\n                      v-if=\"formValidate.asset_group_rules && formValidate.asset_group_rules.length !== 0\">\n              <Alert show-icon v-if=\"i === 0\" style=\"width: 100%; margin-bottom: 8px;\">\n                通过关联vpc把一组vpc下的主机资产划分到云区域，vpc之间的的条件关系为或。\n              </Alert>\n              <Row :gutter=\"20\">\n                <Col>\n                  <Card v-if=\"items.length > 0\" style=\"margin-bottom: 0px;\" dis-hover>\n                    <FormItem v-for=\"(item, index) in items\" v-if=\"item.status\" :key=\"index + _uid\">\n                      <div class=\"alert-con\" style=\"margin-bottom: 10px;\">\n                            <span style=\"margin-right: 5px; min-width: 30px; display: inline-block;\">\n                                {{ index + 1 }} -\n                            </span>\n                        <Cascader :data=\"vpcOptions\" v-model=\"item.query_value\"\n                                  style=\"width:700px;margin-left: 10px;\"></Cascader>\n                        <Button shape=\"circle\" type=\"text\" icon=\"md-add\" class=\"rule-btn-add\"\n                                @click=\"handleAddRules(i)\"></Button>\n                        <Button v-if=\"items.length !== 1\" shape=\"circle\" type=\"text\" icon=\"md-close\"\n                                class=\"rule-btn-del\" @click=\"handleRemoveRules(i, index)\"></Button>\n                      </div>\n                    </FormItem>\n                  </Card>\n                  <p v-if=\"formValidate.asset_group_rules.length > 1 && i != 2\" style=\"padding-top: 15px\">或</p>\n                </Col>\n                <Col span=\"2\">\n                  <a v-if=\"formValidate.asset_group_rules.length !== 1\" @click.prevent=\"handleRemoveCard(i)\"> 删除</a>\n                </Col>\n              </Row>\n            </FormItem>\n          </template>\n          <!--          <Row>-->\n          <!--          <Tooltip trigger=\"hover\" placement=\"right-start\" content=\"选择是会自动更新关联主机的云区域ID\">-->\n          <!-- <FormItem prop=\"auto_update_agent_id\" style=\"width: 100%\">\n            <template #label>\n              自动修改AgentID\n              <Tooltip placement=\"top-start\" max-width=\"400\">\n                <template #content>\n                  <p>如果选择是：会自动把当前云区域ID通过VPC和主机关联，设置主机AgentID为主机IP:云区域ID</p>\n                </template>\n                <Icon type=\"ios-help-circle-outline\" />\n                :\n              </Tooltip>\n            </template>\n            <RadioGroup v-model=\"formValidate.auto_update_agent_id\">\n              <Radio label=\"yes\">是</Radio>\n              <Radio label=\"no\">否</Radio>\n            </RadioGroup>\n          </FormItem> -->\n          <Divider dashed>堡垒机配置</Divider>\n          <FormItem prop=\"jms_org_id\">\n            <template #label>\n              组织ID\n              <Tooltip placement=\"top-start\" max-width=\"400\">\n                <template #content>\n                  <p>关联堡垒机组织，社区版不支持组织管理，只有默认Default组织，企业版支持多组织管理</p>\n                  <p>堡垒机查看组织ID方法：堡垒机资产管理-->网域列表-->点击网域查看ID</p>\n                </template>\n                <Icon type=\"ios-help-circle-outline\" />\n                :\n              </Tooltip>\n            </template>\n\n            <Input v-model=\"formValidate.jms_org_id\" maxlength=\"100\" type=\"text\"\n                   placeholder=\"堡垒机组织ID...\"></Input>\n          </FormItem>\n\n          <FormItem prop=\"jms_domain_id\">\n            <template #label>\n              网域ID\n              <Tooltip placement=\"top-start\" max-width=\"400\">\n                <template #content>\n                  <p>关联堡垒机网域，指定云区域下的主机属于哪个网域，理论上一个区域的主机归属于同一个网域</p>\n                  <p>堡垒机查看网域ID方法：堡垒机资产管理-->网域列表-->点击网域查看ID</p>\n                </template>\n                <Icon type=\"ios-help-circle-outline\" />\n                :\n              </Tooltip>\n            </template>\n            <Input v-model=\"formValidate.jms_domain_id\" maxlength=\"100\" type=\"text\"\n                   placeholder=\"堡垒机网域ID...\"></Input>\n          </FormItem>\n          <FormItem label=\"\" prop=\"jms_account_template\">\n            <template #label>\n              特权账号模版ID\n              <Tooltip placement=\"top-start\" max-width=\"400\">\n                <template #content>\n                  <p>关联堡垒机特权账户模板，创建主机时需指定特权账号，用户推送创建非特权账号到服务器</p>\n                  <p>堡垒机特权账号模版ID方法：堡垒机账号管理-->账号模板-->点击特权账号查看ID</p>\n                </template>\n                <Icon type=\"ios-help-circle-outline\" />\n                :\n              </Tooltip>\n            </template>\n            <Input v-model=\"formValidate.jms_account_template\" maxlength=\"100\" type=\"text\"\n                   placeholder=\"堡垒机特权账户模板ID...\"></Input>\n          </FormItem>\n        </Col>\n        <Col span=\"12\" offset=\"4\">\n          <template v-for=\"(item, index) in formValidate.accounts\">\n            <FormItem v-if=\"item.status\" :key=\"index\" :label=\"'账户模板ID ' + (index + 1)\"\n                      :prop=\"'accounts.' + index + '.value'\">\n              <template #label>\n                账户模板ID\n                <Tooltip placement=\"top-start\" max-width=\"400\">\n                  <template #content>\n                    <p>关联堡垒机特权账户模板，需指定普通账号模板ID和特权账户模板ID，分别用于创建普通用户和特权账户, 如模板不存在则需在堡垒机创建并录入</p>\n                    <p>查看堡垒机账号模版ID方法：堡垒机账号管理-->账号模板-->点击特权查看ID</p>\n                  </template>\n                  <Icon type=\"ios-help-circle-outline\" />\n                  :\n                </Tooltip>\n              </template>\n              <Row>\n                <Select v-model=\"item.account_type\" placeholder=\"选择账户类型\"\n                        style=\"margin-right: 1px;margin-left: 1px; max-width: 100px\">\n                  <Option value=\"dev\">普通账户</Option>\n                  <Option value=\"ops\">特权账户</Option>\n                </Select>\n                <Input style=\"max-width: 500px\" v-model=\"item.jms_account_template_id\"\n                       placeholder=\"请输入待创建账号模板ID\"></Input>\n                <Icon v-on:click=\"handleRemove(index)\" type=\"ios-backspace\" style=\"margin-top: 8px; margin-left: 4px\"/>\n              </Row>\n            </FormItem>\n          </template>\n          <FormItem>\n            <Row>\n              <Col span=\"12\">\n                <Tooltip trigger=\"hover\" placement=\"top-start\" content=\"只允许添加两个不同类型的账户\">\n                  <Button type=\"dashed\" long @click=\"handleAdd(account_type)\" icon=\"md-add\">添加账户</Button>\n                </Tooltip>\n              </Col>\n            </Row>\n          </FormItem>\n        </Col>\n        <Col span=\"12\" offset=\"4\">\n          <FormItem label=\"网域密钥\">\n            <Input v-model=\"formValidate.ssh_key\" type=\"textarea\" maxlength=\"65500\"\n                   :autosize=\"{minRows: 6,maxRows: 15}\"\n                   placeholder=\"当前云区域网域私钥...\" />\n          </FormItem>\n        </Col>\n        <Col span=\"12\" offset=\"4\">\n          <FormItem label=\"网域公钥\">\n            <Input v-model=\"formValidate.ssh_pub_key\" type=\"textarea\" maxlength=\"65500\"\n                   :autosize=\"{minRows: 3,maxRows: 15}\" placeholder=\"当前云区域网域公钥...\" />\n          </FormItem>\n        </Col>\n\n        <Col span=\"12\" offset=\"4\">\n          <FormItem label=\"备注信息\">\n            <Input v-model=\"formValidate.detail\" type=\"textarea\" maxlength=\"65500\" :autosize=\"{minRows: 2,maxRows: 5}\"\n                   placeholder=\"备注信息...\" />\n          </FormItem>\n        </Col>\n        <Col span=\"12\" offset=\"4\">\n          <FormItem>\n            <Button type=\"primary\" :loading=\"btnLoading\" @click=\"handleSubmit('formValidate')\">确定</Button>\n            <Button @click=\"handleCancel\" style=\"margin-left: 15px\">返回</Button>\n          </FormItem>\n\n        </Col>\n      </Row>\n    </Form>\n\n  </Card>\n</template>\n<script>\nimport { getCloudSettinglist } from '@/api/cmdb';\nimport { getVPC } from '@/api/cloud/vpc.js';\n\nexport default {\n  components: {},\n  name: 'cloudRegionEdit',\n  props: {\n    formData: {\n      type: Object,\n      default: {}\n    }\n  },\n  data() {\n    return {\n      btnLoading: false,\n      cloudList: [],\n      index: 1,\n      vpcList: [],\n      vpcOptions: [],\n      vendorMap: {},\n      account_type: 'dev',\n      ruleValidate: {\n        name: [{ required: true, message: '名称不能为空', trigger: 'blur' }],\n        cloud_region_id: [{ required: true, message: '不能为空', trigger: 'blur' }],\n        ssh_user: [{ required: true, message: '不能为空', trigger: 'blur' }],\n        proxy_ip: [{ required: true, message: '不能为空', trigger: 'blur' }],\n        detail: [{ type: 'string', max: 300, message: '备注也不能太长吧', trigger: 'blur' }],\n        // auto_update_agent_id: [{ type: 'string', max: 10, message: '不能为空', trigger: 'blur', required: true }],\n        asset_group_rules: [{ type: 'array', max: 10, message: '不能为空', trigger: 'blur', required: true }],\n        jms_domain_id: [{ message: '不能为空', trigger: 'blur', required: true, max: 100 }],\n        jms_account_template: [{ message: '不能为空', trigger: 'blur', required: true, max: 100 }],\n        jms_org_id: [{ required: true, message: '组织ID为空', trigger: 'blur', max: 100 }]\n      }\n    };\n  },\n  filters: {\n    testF(value, location) {\n      if (location === 1) {\n        return '资产 B';\n      } else if (location === 2) {\n        return '资产 C';\n      } else if (location === 0) {\n        return '资产 A';\n      }\n    }\n  },\n  methods: {\n    // 添加条件\n    handleAdd() {\n      this.index++;\n      if (this.index > 2) {\n        this.$Notice.warning({\n          title: '条件超出最大限制'\n        });\n        this.index--;\n        return;\n      }\n      // 条件默认配置\n      this.formValidate.accounts.push({\n        account_type: 'dev',\n        jms_account_template_id: '',\n        index: this.index,\n        status: 1\n      });\n    },\n    // 移除条件\n    handleRemove(index) {\n      this.index--;\n      this.formValidate.accounts.splice(index, 1);\n    },\n\n    transformData(data) {\n      data.forEach(item => {\n        if (!item.cloud_zh_name) {\n          return;\n        }\n        if (!this.vendorMap[item.cloud_zh_name]) {\n          this.vendorMap[item.cloud_zh_name] = {};\n        }\n        if (!this.vendorMap[item.cloud_zh_name][item.region]) {\n          this.vendorMap[item.cloud_zh_name][item.region] = [];\n        }\n        this.vendorMap[item.cloud_zh_name][item.region].push({\n          label: item.vpc_name,\n          value: item.instance_id\n        });\n      });\n\n      return Object.keys(this.vendorMap).map(vendor => ({\n        label: vendor,\n        value: vendor,\n        children: Object.keys(this.vendorMap[vendor]).map(region => ({\n          label: region,\n          value: region,\n          children: this.vendorMap[vendor][region]\n        }))\n      }));\n    },\n\n    async getCloudSettingList() {\n      const res = await getCloudSettinglist();\n      if (res.code === 0) {\n        this.cloudList = res.data;\n      } else {\n        this.$message.error(`${res.msg}`);\n      }\n    },\n    getVpcCloudName(accountID) {\n      const cloud = this.cloudList.find(vpc => vpc.account_id === accountID);\n      return cloud ? cloud.name : '';\n    },\n    getVpcRegion(vpcName) {\n      const vpc = this.vpcList.find(vpc => vpc.vpc_name === vpcName);\n      return vpc ? vpc.region : '';\n    },\n    async getVpcList() {\n      const params = {\n        page_number: 1,\n        page_size: 300\n      };\n      const res = await getVPC(params);\n      if (res.code === 0) {\n        this.vpcList = res.data;\n        for (const vpc of this.vpcList) {\n          if (vpc.cidr_block_v4) {\n            vpc.vpc_name = vpc.vpc_name + '(' + vpc.cidr_block_v4 + ')';\n          }\n          vpc.cloud_zh_name = this.getVpcCloudName(vpc.account_id);\n        }\n        // 转换成级联选择器的数据格式\n        this.vpcOptions = this.transformData(this.vpcList);\n      } else {\n        this.$message.error(`${res.msg}`);\n      }\n    },\n    handleAddRules(i) {\n      this.index++;\n      if (this.formValidate.asset_group_rules[i].length > 14) {\n        this.$Notice.warning({\n          title: '限制提示',\n          desc: '添加指标的个数不能超过十五个',\n          duration: 10\n        });\n        return;\n      }\n      this.formValidate.asset_group_rules[i].push({\n        index: this.index,\n        query_name: 'vpc',\n        query_conditions: '=', //条件 like = !=\n        query_value: [], //值\n        status: 1\n      });\n    },\n    handleRemoveRules(i, index) {\n      this.formValidate.asset_group_rules[i].splice(index, 1);\n    },\n    handleRemoveCard(i) {\n      this.formValidate.asset_group_rules.splice(i, 1);\n    },\n    handleCancel() {\n      if (JSON.stringify(this.formValidate) != JSON.stringify(this.formData)) {\n        this.$Modal.confirm({\n          content: `<p>编辑还没有保存，确定要离开？</p>`,\n          onOk: () => {\n            this.$emit('edit-close');\n          },\n          onCancel: () => {\n            this.$Message.info('回头是岸');\n          }\n        });\n      } else {\n        this.$emit('edit-close');\n      }\n    },\n\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          const accountTypes = new Set();\n          let duplicateFound = false;\n          if (this.formValidate.accounts) {\n            for (const account of this.formValidate.accounts) {\n              if (account.status === 1 && (account.jms_account_template_id === '' || !account.jms_account_template_id)) {\n                this.$Notice.warning({ title: '账号模板ID存在空值！' });\n                return;\n              }\n              if (accountTypes.has(account.account_type)) {\n                duplicateFound = true;\n                break;\n              }\n              accountTypes.add(account.account_type);\n            }\n          }\n          if (duplicateFound) {\n            this.$Notice.warning({\n              title: '账号类型重复，请检查！'\n            });\n            return;\n          }\n          if (this.formValidate.asset_group_rules) {\n            for (const rules of this.formValidate.asset_group_rules) {\n              for (const rule of rules) {\n                if (rule.status === 1 && (Array.isArray(rule.query_value) && rule.query_value.length < 2)) {\n                  this.$Notice.warning({ title: '查询条件存在空值！' });\n                  return;\n                }\n                // vpc_id不能为空\n                if (!rule.query_value[rule.query_value.length - 1]) {\n                  this.$Notice.warning({ title: 'VPC存在空值！' });\n                  return;\n                }\n              }\n            }\n          }\n          this.btnLoading = true;\n          this.formValidate.name = this.formValidate.name.trim();\n          setTimeout(() => {\n            this.$emit('save-data', this.formValidate);\n            this.btnLoading = false;\n          }, 1000);\n        } else {\n          this.$Message.error('表单校验不通过!');\n        }\n      });\n    }\n\n\n  },\n  watch: {\n    formValidate(value) {\n    }\n  },\n  computed: {\n    formValidate: function() {\n      return this.formData;\n    }\n  },\n  //\n  mounted() {\n    this.getCloudSettingList();\n    this.getVpcList();\n  }\n};\n</script>\n\n<style scoped>\n.alert-con {\n  display: flex;\n  align-items: center;\n}\n.rule-btn-add,\n.rule-btn-del {\n  margin-left: 10px; /* 根据需要调整间距 */\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cloud-region-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cloud-region-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cloud-region-edit.vue?vue&type=template&id=7f901a44&scoped=true&\"\nimport script from \"./cloud-region-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./cloud-region-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cloud-region-edit.vue?vue&type=style&index=0&id=7f901a44&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f901a44\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}