(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-0ef1ccae","chunk-df44726e","chunk-2d0bda11","chunk-2d0efd8a","chunk-2d225f8a","chunk-2d208deb"],{"2d8a":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",[a("Modal",{attrs:{title:t.modalData.title,loading:!0,"footer-hide":!0,width:"750"},on:{"on-cancel":t.handleCancel},model:{value:t.modalData.show,callback:function(a){t.$set(t.modalData,"show",a)},expression:"modalData.show"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入名称、虚拟交换机、虚拟子网"},model:{value:t.formValidate.name,callback:function(a){t.$set(t.formValidate,"name",a)},expression:"formValidate.name"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("FormItem",{attrs:{label:"厂商",prop:"cloud_name"}},[a("Select",{model:{value:t.formValidate.cloud_name,callback:function(a){t.$set(t.formValidate,"cloud_name",a)},expression:"formValidate.cloud_name"}},[a("Option",{attrs:{value:"neiwang"}},[t._v("内网")])],1)],1)],1),a("FormItem",{attrs:{label:"局域网名",prop:"vpc_name"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入局域网名 VPC"},model:{value:t.formValidate.vpc_name,callback:function(a){t.$set(t.formValidate,"vpc_name",a)},expression:"formValidate.vpc_name"}})],1),a("FormItem",{attrs:{label:"网段V4",prop:"cidr_block_v4"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入网段 IPv4"},model:{value:t.formValidate.cidr_block_v4,callback:function(a){t.$set(t.formValidate,"cidr_block_v4",a)},expression:"formValidate.cidr_block_v4"}})],1),a("FormItem",{attrs:{label:"网段V6",prop:"cidr_block_v6"}},[a("Input",{attrs:{maxlength:250,placeholder:"请输入网段 IPv6"},model:{value:t.formValidate.cidr_block_v6,callback:function(a){t.$set(t.formValidate,"cidr_block_v6",a)},expression:"formValidate.cidr_block_v6"}})],1),a("FormItem",{attrs:{label:"网关地址",prop:"route"}},[a("Input",{attrs:{maxlength:120,placeholder:"请输入网关地址"},model:{value:t.formValidate.route,callback:function(a){t.$set(t.formValidate,"route",a)},expression:"formValidate.route"}})],1),a("FormItem",{attrs:{label:"详情备注",prop:"description"}},[a("Input",{attrs:{maxlength:250,type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入详情备注..."},model:{value:t.formValidate.description,callback:function(a){t.$set(t.formValidate,"description",a)},expression:"formValidate.description"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(a){return t.handleSubmit("formValidate")}}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)],1)},i=[],l={name:"vswitchAdd",props:{modalData:{type:Object,default:{}}},data(){return{btnLoading:!1,ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],vpc_name:[{required:!0,message:"虚拟局域网名不能为空",trigger:"blur"}],description:[{required:!0,message:"备注不能为空",trigger:"blur"}]},formValidate:{cloud_name:"neiwang"}}},methods:{handleCancel(){this.$emit("drawer-close")},handleClose(){this.$emit("drawer-close")},handleSubmit(t){this.$refs[t].validate(t=>{t?(this.btnLoading=!0,setTimeout(()=>{this.$emit("save-data",this.formValidate,this.modalData.action),this.btnLoading=!1},1e3)):this.$Message.error("表单校验不通过!")})}},watch:{},computed:{},mounted(){}},s=l,n=e("2877"),r=Object(n["a"])(s,o,i,!1,null,null,null);a["default"]=r.exports},"9a9e":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("Modal",{attrs:{width:"720px",title:t.modalData.title,"footer-hide":!0,styles:{top:"35px"}},model:{value:t.modalData.show,callback:function(a){t.$set(t.modalData,"show",a)},expression:"modalData.show"}},[a("Card",{attrs:{"dis-hover":""}},[a("div",{staticClass:"inner"},[a("Alert",{attrs:{"show-icon":""}},[t._v("基本信息")]),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Row",[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("实例ID：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.switchData.instance_id))])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("交换机名：")])])]),a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.name))])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("云区域ID：")])])]),a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.cloud_region_id))])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("厂商：")])])]),t.switchData.cloud_name?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.cloud_name)+" ")])]):t._e(),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("AccountID：")])])]),a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.account_id)+" ")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("地区：")])])]),t.switchData.region?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.region))])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知")])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("机房：")])])]),a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.zone)+" ")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("网段V4：")])])]),t.switchData.cidr_block_v4?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.cidr_block_v4))])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("网段V6：")])])]),t.switchData.cidr_block_v6?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.cidr_block_v6)+" ")])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("VPC：")])])]),t.switchData.vpc_id?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.vpc_id))])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("VPC名称：")])])]),t.switchData.vpc_name?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.vpc_name)+" ")])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("可用IP：")])])]),t.switchData.address_count?a("Col",{attrs:{span:"8"}},[a("p",[a("tag",{attrs:{color:"gold"}},[t._v(t._s(t.switchData.address_count))])],1)]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("未知信息")])]),a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("备注信息：")])])]),t.switchData.detail?a("Col",{attrs:{span:"8"}},[a("p",[t._v(" "+t._s(t.switchData.detail)+" ")])]):a("Col",{attrs:{span:"8"}},[a("p",[t._v("无")])])],1),a("Row",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("创建时间：")])])]),t.switchData.create_time?a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.switchData.create_time)+" ")])]):a("Col",{attrs:{span:"20"}},[a("p",[t._v("未知信息")])])],1),a("Row",[a("Col",{attrs:{span:"4"}},[a("p",[a("b",[t._v("最后更新时间：")])])]),a("Col",{attrs:{span:"20"}},[a("p",[t._v(" "+t._s(t.switchData.update_time)+" ")])])],1)],1)],1)])],1)},i=[],l={name:"VswitchDetail",props:{modalData:{type:Object,default:()=>{}},switchData:{type:Object,default:()=>{}}}},s=l,n=e("2877"),r=Object(n["a"])(s,o,i,!1,null,null,null);a["default"]=r.exports},a743:function(t,a,e){"use strict";e.r(a),e.d(a,"getVswitch",(function(){return i})),e.d(a,"optVswitch",(function(){return l}));var o=e("be3b");const i=t=>Object(o["default"])({url:"/api/v2/cmdb/vswitch/",method:"get",params:t}),l=(t,a)=>Object(o["default"])({url:"/api/v2/cmdb/vswitch/",method:a,data:t})},b314:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("Modal",{attrs:{title:t.modalData.title,"footer-hide":!0},model:{value:t.modalData.show,callback:function(a){t.$set(t.modalData,"show",a)},expression:"modalData.show"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"请选择云区域"},model:{value:t.cloud_region_id,callback:function(a){t.cloud_region_id=a},expression:"cloud_region_id"}},t._l(t.cloudRegionList,(function(t){return a("Option",{key:t.id,attrs:{value:t.cloud_region_id,label:t.name}})})),1),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"success",loading:t.btnLoading,long:""},on:{click:t.handleChangeSave}},[t._v("确定更换")])],1)},i=[],l=e("e757"),s={name:"regionModal",props:{modalData:{type:Object,default:{}}},data(){return{cloud_region_id:null,btnLoading:!1,cloudRegionList:[],initPara:{page_number:1,page_size:300}}},methods:{async handleGetData(){const t=await Object(l["getCloudRegion"])(this.initPara);0==t.code?this.cloudRegionList=t.data:this.$Message.error(t.msg)},handleChangeSave(){this.cloud_region_id?(this.btnLoading=!0,setTimeout(()=>{this.$emit("save-data",{id:this.modalData.id,cloud_region_id:this.cloud_region_id}),this.btnLoading=!1},1e3)):this.$Message.info("请选择一个云区域吧")}},watch:{},created(){},mounted(){this.handleGetData()}},n=s,r=e("2877"),d=Object(r["a"])(n,o,i,!1,null,null,null);a["default"]=d.exports},b32f:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"search-con search-con-top"},[a("Input",{staticClass:"search-input",attrs:{search:"",maxlength:50,placeholder:"输入关键字搜索"},on:{"on-search":t.handleSearch},model:{value:t.initPara.searchVal,callback:function(a){t.$set(t.initPara,"searchVal",a)},expression:"initPara.searchVal"}}),a("Button",{staticClass:"search-add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加")]),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("一键筛选：")]),a("RadioGroup",{attrs:{type:"button","button-style":"solid"},on:{"on-change":t.handleSearch},model:{value:t.initPara.cloud_type,callback:function(a){t.$set(t.initPara,"cloud_type",a)},expression:"initPara.cloud_type"}},[a("Radio",{attrs:{label:"neiwang"}},[t._v("内网")]),a("Radio",{attrs:{label:"cloud"}},[t._v("云商")])],1),a("Checkbox",{staticStyle:{"margin-left":"10px"},on:{"on-change":t.handleSearch},model:{value:t.initPara.is_not_default,callback:function(a){t.$set(t.initPara,"is_not_default",a)},expression:"initPara.is_not_default"}},[t._v("非默认")]),a("Button",{staticClass:"search-add-btn",attrs:{type:"error",disabled:0===t.selectList.length},on:{click:t.handleDel}},[t._v("批量删除")])],1),a("Table",{ref:"selection",attrs:{size:"small",border:"",columns:t.columns,data:t.tableData,loading:t.i.tableLoading},on:{"on-sort-change":t.handleSort,"on-selection-change":t.handleSelect}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"left"}},[a("Page",{attrs:{total:t.i.pageTotal,current:t.initPara.page_number,"page-size":t.initPara.page_size,"show-total":"","show-sizer":"","page-size-opts":[15,50,100,1e3]},on:{"on-change":t.handlerChangePage,"on-page-size-change":t.handlePageSize}})],1)]),a("VswitchDetail",{attrs:{switchData:t.formData,"modal-data":t.modalData}}),a("vswitch-add",{attrs:{formData:t.formData,"modal-data":t.modalDataAdd},on:{"drawer-close":t.handleClose,"save-data":t.handleSaveData}}),a("region-modal",{ref:"regionModal",attrs:{"modal-data":t.modalDataRegion},on:{"save-data":t.handleUpData}})],1)},i=[],l=(e("14d9"),e("a743")),s=e("9a9e"),n=e("2d8a"),r=e("b314"),d={components:{VswitchDetail:s["default"],vswitchAdd:n["default"],regionModal:r["default"]},data(){return{columns:[{type:"selection",key:"",width:60,align:"center"},{title:"交换机名称",key:"name",tooltip:!0,sortable:!0,resizable:!0,minWidth:150},{title:"资源ID",key:"instance_id",tooltip:!0,resizable:!0,width:210,render:(t,a)=>t("a",{on:{click:()=>{this.handlerDetail(a.row)}}},a.row.instance_id)},{title:"VPC",key:"vpc_id",tooltip:!0,sortable:!0,resizable:!0,width:150},{title:"厂商",key:"cloud_name",minWidth:90,resizable:!0,sortable:!0},{title:"地域",key:"region",sortable:!0,resizable:!0,minWidth:90},{title:"网段",key:"cidr_block_v4",tooltip:!0,resizable:!0,width:130},{title:"可用IP",key:"address_count",minWidth:80},{title:"描述",key:"description",tooltip:!0,resizable:!0,minWidth:100},{title:"云区域",key:"handle",width:120,render:(t,a)=>t("div",[t("a",{on:{click:()=>{this.handleShowRegion(a.row)}}},"查看")])},{title:"更新时间",key:"update_time",sortable:!0,width:170}],modalData:{show:!1,title:"虚拟子网详情"},modalDataAdd:{show:!1,title:"添加虚拟子网",action:"post"},modalDataRegion:{show:!1,title:"选择云区域",action:"put"},selectList:[],formData:{},tableData:[],i:{pageTotal:0,tableLoading:!0},initPara:{page_number:1,page_size:15,cloud_type:null,is_not_default:!0,searchVal:null,order_by:"name",order:"ascend"}}},methods:{async handleGetData(){const t=await Object(l["getVswitch"])(this.initPara);0==t.code?(this.tableData=t.data,this.i.pageTotal=t.count):this.$Message.error(t.msg),this.clearSelectAll(),this.i.tableLoading=!1},handleClose(){this.modalData.show=!1,this.modalDataAdd.show=!1,this.modalDataRegion.show=!1,this.handleGetData()},handleAdd(){this.modalDataAdd.show=!0},handleSaveData(t,a){Object(l["optVswitch"])(t,a).then(t=>{0==t.code?(this.$Message.success("成功"),this.handleClose()):this.$Message.error(t.msg)})},handleDel(){this.$Modal.confirm({title:"二次确认",content:"确定删除已选中的数据？",onOk:()=>{Object(l["optVswitch"])({id_list:this.selectList},"delete").then(t=>{0===t.code?(this.$Message.success(t.msg),this.handleGetData()):this.$Notice.error({title:""+t.msg})})},onCancel:()=>{this.$Message.info("回头是岸~")}})},handleShowRegion(t){this.modalDataRegion.show=!0,this.$refs.regionModal.cloud_region_id=t.cloud_region_id,this.modalDataRegion.title=`选择云区域 【${t.name}】`,this.modalDataRegion.id=t.id},handleUpData(t){Object(l["optVswitch"])(t,"patch").then(t=>{0==t.code?(this.$Message.success("成功"),this.handleClose()):this.$Message.error(t.msg)})},handlerDetail(t){this.formData=t,this.modalData.show=!0},handleSelect(t){let a=[];t.forEach(t=>{a.push(t.id)}),this.selectList=a},clearSelectAll(){this.$refs.selection.selectAll(!1)},handleSearch(){this.initPara.page_number=1,this.handleGetData()},handleSort(t,a,e){this.initPara.order="asc"===t.order?"ascend":"descend",this.initPara.order_by=t.key,this.handleGetData()},handlerChangePage(t){this.initPara.page_number=t,this.handleGetData()},handlePageSize(t){this.initPara.page_number=1,this.initPara.page_size=t,this.handleGetData()}},watch:{},computed:{},mounted(){this.handleGetData()}},c=d,h=(e("f247"),e("2877")),p=Object(h["a"])(c,o,i,!1,null,"6380af7b",null);a["default"]=p.exports},c5ec:function(t,a,e){},e757:function(t,a,e){"use strict";e.r(a),e.d(a,"previewCloudRegion",(function(){return i})),e.d(a,"optCloudRegionPro",(function(){return l})),e.d(a,"getCloudRegion",(function(){return s})),e.d(a,"optCloudRegion",(function(){return n}));var o=e("be3b");const i=t=>Object(o["default"])({url:"/api/v2/cmdb/cloud_region/preview/",method:"get",params:t}),l=(t,a)=>Object(o["default"])({url:"/api/v2/cmdb/cloud_region/pro/",data:t,method:a}),s=t=>Object(o["default"])({url:"/api/v2/cmdb/cloud_region/",method:"get",params:t}),n=(t,a)=>Object(o["default"])({url:"/api/v2/cmdb/cloud_region/",data:t,method:a})},f247:function(t,a,e){"use strict";e("c5ec")}}]);
//# sourceMappingURL=chunk-0ef1ccae.c2d2004b.js.map