(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-54b63eaa"],{a06b:function(e,t,a){"use strict";a("bd41")},bd41:function(e,t,a){},bfca:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"template__header"},[t("div",{staticClass:"template__header__search"},[t("Input",{staticClass:"template__header__search__input",attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchParams.searchVal,callback:function(t){e.$set(e.searchParams,"searchVal",t)},expression:"searchParams.searchVal"}}),t("DatePicker",{staticClass:"search-input",staticStyle:{width:"220px"},attrs:{value:e.selectDate,options:e.optionsDate,type:"daterange",placement:"bottom-end",placeholder:"Select date"},on:{"on-change":e.handlerChangeDate}}),t("Button",{staticClass:"template__header__search__button",on:{click:e.getTableData}},[e._v("搜索")])],1)]),t("Table",{ref:"selection",attrs:{stripe:"",size:"small",loading:e.tableLoading,columns:e.columns,data:e.tableData}}),t("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px",overflow:"hidden"}},[t("Page",{attrs:{total:e.pageTotal,current:e.searchParams.page_number,"page-size":e.searchParams.page_size,"page-size-opts":[12,35,50,100],"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.handlePageSize}})],1)],1)},i=[],n=(a("d9e2"),a("30b3")),l={data(){return{buyRow:null,pageTotal:0,showDrawer:!1,showDeleteModal:!1,deleteModalLoading:!0,curRow:{},showModal:!1,showCloneModal:!1,cloneModalLoading:!0,tableLoading:!1,cloneFormValues:{name:""},columns:[{title:"日志ID",key:"id",width:100},{title:"UUID",key:"exec_uuid",width:240},{title:"业务名称",key:"business_name",align:"center",minWidth:100},{title:"模块名称",key:"module_name",width:100,align:"center"},{title:"日志信息",key:"message",width:800,align:"center"},{title:"日志时间",key:"create_time",width:160,align:"center"},{title:"操作人",key:"operator",width:160,align:"center"}],tableData:[],selectDate:[],optionsDate:{shortcuts:[{text:"一星期",value(){const e=new Date;e.setTime(e.getTime()+864e5);const t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]},onClick:e=>{}},{text:"一个月",value(){const e=new Date;e.setTime(e.getTime()+864e5);const t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]},onClick:e=>{}},{text:"三个月",value(){const e=new Date;e.setTime(e.getTime()+864e5);const t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]},onClick:e=>{}}]},searchParams:{page_number:1,page_size:12,order_by:"id",order:"descend",searchVal:""}}},mounted(){this.getTableData(),this.getDates()},methods:{handlerChangeDate(e){this.selectDate=e},getDates(){const e=new Date,t=new Date;t.setTime(t.getTime()+864e5),e.setTime(e.getTime()-1728e5),this.selectDate=[e,t]},handleAddddTemplate(){this.buyRow=null,this.showModal=!0},editSuccessCallback(){this.showDrawer=!1,this.getTableData()},closeDrawer(){this.showDrawer=!1},addSuccessCallback(){this.showModal=!1,this.getTableData()},closeAddModal(){this.showModal=!1},cloneModalCancel(){this.showCloneModal=!1},async colneModalOk(){try{await new Promise((e,t)=>{this.$refs.form.validate(a=>{a||t(new Error("表单校验失败，请检查")),e()})});const{account_id:e,vendor:t,cloud_region_id:a,res_type:s,region:i,zone:n,instance_type:l,tags:o,vpc_id:c,vpc_name:r,subnet_id:d,subnet_name:h,content:g}=this.curRow,m=await createOrderTemplate({name:this.cloneFormValues.name,account_id:e,vendor:t,cloud_region_id:a,res_type:s,region:i,zone:n,instance_type:l,tags:o,vpc_id:c,vpc_name:r,subnet_id:d,subnet_name:h,content:g,description:this.cloneFormValues.description||""});if(!m)throw new Error("请求错误，请重试");this.showCloneModal=!1,this.$Message.success(m.msg),this.getTableData()}catch(e){this.$Message.error(e.message),this.cloneModalLoading=!1}finally{this.$nextTick(()=>{this.cloneModalLoading=!0})}},async getTableData(){try{this.tableLoading=!0,this.searchParams["start_date"]=this.selectDate[0],this.searchParams["end_date"]=this.selectDate[1];const{data:e,count:t}=await Object(n["getAuditList"])(this.searchParams);this.pageTotal=t,this.tableData=e}catch(e){this.$Message.error(e.message)}finally{this.tableLoading=!1}},handleShowModal(e){this.showModal=e},handlePageSize(e){this.searchParams.page_size=e,this.getTableData()},changePage(e){this.searchParams.page_number=e,this.getTableData()}}},o=l,c=(a("a06b"),a("2877")),r=Object(c["a"])(o,s,i,!1,null,"5dfe539a",null);t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-54b63eaa.ec8c6d15.js.map