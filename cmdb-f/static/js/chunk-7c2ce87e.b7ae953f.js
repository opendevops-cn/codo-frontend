(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-7c2ce87e","chunk-2d0ae8c9"],{"0b12":function(e,t,a){"use strict";a.r(t),a.d(t,"postTreeAsset",(function(){return r})),a.d(t,"getTreeAsset",(function(){return i})),a.d(t,"changeTreeAssetStatus",(function(){return s})),a.d(t,"deleteTreeAsset",(function(){return o})),a.d(t,"getRelation",(function(){return n})),a.d(t,"getServiceTreelist",(function(){return d})),a.d(t,"operationTree",(function(){return m})),a.d(t,"getBizEnv",(function(){return c}));var l=a("be3b");const r=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/asset/",method:"post",data:e}),i=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/asset/",method:"get",params:e}),s=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/asset/",method:"patch",data:e}),o=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/asset/",method:"delete",data:e}),n=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/asset/relation/",method:"get",params:e}),d=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/",method:"get",params:e}),m=(e,t)=>Object(l["default"])({url:"/api/v2/cmdb/tree/",method:t,data:e}),c=e=>Object(l["default"])({url:"/api/v2/cmdb/tree/env/",method:"get",params:e})},"98cb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("Drawer",{attrs:{title:e.modalData.title,width:"50%",draggable:"","mask-closable":!1},on:{"on-close":e.handleCancel},model:{value:e.modalData.show,callback:function(t){e.$set(e.modalData,"show",t)},expression:"modalData.show"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-colon":!0,"label-width":100}},[t("FormItem",{attrs:{label:"选择业务",prop:"biz_id"}},[t("Select",{attrs:{filterable:"",placeholder:"请选择业务..."},model:{value:e.formValidate.biz_id,callback:function(t){e.$set(e.formValidate,"biz_id",t)},expression:"formValidate.biz_id"}},e._l(e.bizList,(function(e){return t("Option",{key:e.biz_id,attrs:{value:e.biz_id,label:e.biz_cn_name}})})),1)],1),t("FormItem",{attrs:{label:"选择环境",prop:"env_name"}},[t("Select",{attrs:{filterable:"",placeholder:"请选择环境.."},model:{value:e.formValidate.env_name,callback:function(t){e.$set(e.formValidate,"env_name",t)},expression:"formValidate.env_name"}},e._l(e.envList,(function(e){return t("Option",{key:e,attrs:{value:e,label:e}})})),1)],1),t("FormItem",{attrs:{label:"应用模式"}},[t("RadioGroup",{model:{value:e.formValidate.app_way,callback:function(t){e.$set(e.formValidate,"app_way",t)},expression:"formValidate.app_way"}},[t("Radio",{attrs:{label:"model1"}},[e._v("模式1")]),t("Radio",{attrs:{label:"model2"}},[e._v("模式2")])],1)],1),t("FormItem",[t("Alert",{attrs:{type:"success","show-icon":"",closable:""}},[e._v(" 批量创建集群 "),t("template",{slot:"desc"},[t("p",[e._v("模式1例：填写 测试集群1 测试集群2 测试集群3 测试集群4 以空格或者半角逗号分隔集群。")]),t("p",[e._v("模式2例：填写 测试集群，连接符号 _ ， 范围1,100， 据使用当前模板创建测试集群1 - 测试集群99 一共一百个集群。")])])],2)],1),"model1"==e.formValidate.app_way?t("FormItem",{attrs:{label:"集群列表",prop:"set_list"}},[t("Input",{attrs:{type:"textarea",maxlength:"65500",autosize:{minRows:8,maxRows:15},placeholder:"输入集群..."},model:{value:e.formValidate.set_list,callback:function(t){e.$set(e.formValidate,"set_list",t)},expression:"formValidate.set_list"}})],1):[t("Row",{attrs:{gutter:30}},[t("Col",{attrs:{span:"8"}},[t("FormItem",{attrs:{label:"集群名称",prop:"set_name"}},[t("Input",{attrs:{maxlength:"20",type:"text",placeholder:"测试"},model:{value:e.formValidate.set_name,callback:function(t){e.$set(e.formValidate,"set_name",t)},expression:"formValidate.set_name"}})],1)],1),t("Col",{attrs:{span:"8"}},[t("FormItem",{attrs:{label:"编号范围",prop:"num_range"}},[t("Input",{attrs:{maxlength:"80",type:"text",placeholder:"例如1-100"},model:{value:e.formValidate.num_range,callback:function(t){e.$set(e.formValidate,"num_range",t)},expression:"formValidate.num_range"}})],1)],1),t("Col",{attrs:{span:"8"}},[t("FormItem",{attrs:{label:"分隔符",prop:"delimiter"}},[t("Input",{attrs:{maxlength:"5",type:"text",placeholder:"默认下划线"},model:{value:e.formValidate.delimiter,callback:function(t){e.$set(e.formValidate,"delimiter",t)},expression:"formValidate.delimiter"}})],1)],1)],1)],t("FormItem",[t("Button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("确定")]),t("Button",{staticStyle:{"margin-left":"15px"},on:{click:e.handleCancel}},[e._v("取消")])],1)],2)],1)},r=[],i=a("0b12"),s=a("30b3"),o={components:{},name:"tempApp",props:{modalData:{type:Object,default:{}}},data(){return{btnLoading:!1,bizList:[],envList:[],formValidate:{biz_id:null,app_way:"model1",num_range:"1,5",delimiter:"_"},ruleValidate:{biz_id:[{required:!0,message:"业务不能为空",trigger:"blur"}],env_name:[{required:!0,message:"环境不能为空",trigger:"blur"}],set_list:[{required:!0,message:"集群不能为空",trigger:"blur"}],set_name:[{required:!0,message:"集群不能为空",trigger:"blur"}],num_range:[{required:!0,message:"范围不能为空",trigger:"blur"}],delimiter:[{required:!0,message:"集群不能为空",trigger:"blur"}]}}},methods:{handleCancel(){this.formValidate=this.$options.data().formValidate,this.formValidate.biz_id=localStorage.getItem("selectBusinessID"),this.$emit("drawer-close")},async handleGetEnv(){const e=await Object(i["getBizEnv"])({biz_id:this.formValidate.biz_id});if(0==e.code){this.envList=e.data.env_list;let t=this;t.formValidate.env_name=null}else this.$Message.error(e.msg)},async getBizList(){const e=await Object(s["getBusinesslist"])();this.bizList=e.data},handleSubmit(e){this.$refs[e].validate(e=>{e?(this.btnLoading=!0,this.formValidate["temp_id"]=this.modalData.temp_id,setTimeout(()=>{this.$emit("save-data",this.formValidate),this.btnLoading=!1},1e3)):this.$Message.error("表单校验不通过!")})}},watch:{"formValidate.biz_id":{handler(e,t){e&&e!=t&&this.handleGetEnv()},deep:!0}},computed:{},mounted(){this.getBizList(),this.formValidate.biz_id=localStorage.getItem("selectBusinessID")}},n=o,d=a("2877"),m=Object(d["a"])(n,l,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-7c2ce87e.b7ae953f.js.map