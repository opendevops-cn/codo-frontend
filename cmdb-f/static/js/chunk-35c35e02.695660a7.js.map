{"version":3,"sources":["webpack://cmdb-[name]/./node_modules/core-js/modules/es.array.reduce.js","webpack://cmdb-[name]/./src/views/cmdb/resource/utils.js","webpack://cmdb-[name]/./src/views/cmdb/resource/orderList/orderList.vue","webpack://cmdb-[name]/src/views/cmdb/resource/orderList/orderList.vue","webpack://cmdb-[name]/./src/views/cmdb/resource/orderList/orderList.vue?09e0","webpack://cmdb-[name]/./src/views/cmdb/resource/orderList/orderList.vue?04dc","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue","webpack://cmdb-[name]/src/views/cmdb/resource/templateManagement/addTemplate.vue","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?a4c4","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?275e","webpack://cmdb-[name]/./node_modules/core-js/internals/engine-is-node.js","webpack://cmdb-[name]/./src/views/cmdb/resource/options.js","webpack://cmdb-[name]/./src/views/cmdb/resource/templateManagement/addTemplate.vue?2c89","webpack://cmdb-[name]/./node_modules/core-js/internals/array-method-is-strict.js","webpack://cmdb-[name]/./src/api/cloud/vswitch.js","webpack://cmdb-[name]/./node_modules/core-js/internals/array-reduce.js","webpack://cmdb-[name]/./src/views/cmdb/resource/orderList/orderList.vue?4579"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","getFeFormInfo","v","_this","_this$resTypeOptions$","renderTags","Object","entries","tags","pre","cur","key","value","resTypeRender","resTypeOptions","find","c","res_type","label","cloundAccountRender","account_id","vendor","tagsValues","map","handleSelectTag","getUniqueStr","randomLength","Number","Math","random","toString","substring","Date","now","getParams","formValues","name","cloud_region_id","region","zone","content","description","vpc_id","vpc_name","subnet_id","subnet_name","render","_vm","_c","_self","staticClass","attrs","model","searchParams","searchVal","callback","$$v","$set","expression","on","getTableData","_v","ref","columns","tableData","staticStyle","pageTotal","page_number","page_size","changePage","handlePageSize","deleteModalLoading","deleteModalOk","deleteModalCancel","showDeleteModal","showModal","buyRow","closeAddModal","addSuccessCallback","staticRenderFns","getStatusColor","status","QUERY_POLLING_TIME","components","AddTemplateModal","data","timer","curRow","tableLoading","title","width","h","params","style","color","cursor","click","window","open","row","flow_id","minWidth","props","status_alias","type","size","order_by","order","mounted","beforeDestroy","clearTimeout","methods","id","res","deleteOrderInfo","id_list","Error","$Message","success","msg","err","error","message","$nextTick","count","getOrderInfoList","setTimeout","val","component","modalLoading","ok","cancel","formRules","_l","item","_s","handleInstanceChange","vswitchOptions","instance_id","_uid","script_type","read","index","required","trigger","tagKeyOptions","tagKey","tagValueOptions","tagValue","handleAddTag","_e","$event","handleRemoveTag","buy","buyValues","buyFormRules","slot","DEFAULT_FORM_VALUES","cloud_region_name","DEFAULT_PRICE","bandwidth_dis_count","bandwidth_dis_count_price","bandwidth_original_price","dis_count","dis_count_price","original_price","codoEditor","show","Boolean","default","lang","imageIdOptions","imageIdLoading","bindWidthIdOptions","bindWidthIdLoading","priceLoading","price","specialSplit","dataDiskTypeOptions","systemDiskTypeOptions","instanceChargeTypeOptions","internetChargeTypeOptions","securityGroupOptions","computed","realShow","insTypeParams","instance_type","watch","getSettings","getInsTypeOptions","deep","getVswitchData","getTagData","getVswitch","cidr_block_v4","getTagList","tag","tag_key","push","filter","_","i","option","cloud_name","replace","cloudRender","Promise","resolve","reject","$refs","form","validate","buyForm","createOrder","instance_name","image_passwd","createOrderTemplate","$emit","module","exports","process","classof","fails","METHOD_NAME","argument","method","call","request","url","optVswitch","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","right"],"mappings":"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","file":"static/js/chunk-35c35e02.695660a7.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","/* eslint-disable camelcase */\n// export const getFeFormInfo = (v, _this) => ({\n//   ...v,\n//   renderSecurityGroups: Object.entries(v.security_groups).reduce((pre, cur) => {\n//     const [key, value] = cur\n//     pre += `${key} | ${value};`\n//     return pre\n//   }, \"\"),\n//   renderTags: Object.entries(v.tags).reduce((pre, cur) => {\n//     const [key, value] = cur\n//     pre += `${key} | ${value};`\n//     return pre\n//   }, \"\"),\n//   resTypeRender: _this.resTypeOptions.find((c) => c.value === v.res_type)?.label,\n//   instanceChargeTypeRender: _this.instanceChargeTypeOptions.find((c) => c.value === v.instance_charge_type)?.label,\n//   systemDiskTypeRender: _this.systemDiskTypeOptions.find((c) => c.value === v.system_disk_type)?.label,\n//   dataDiskTypeRender: _this.dataDiskTypeOptions.find((c) => c.value === v.data_disk?.type)?.label,\n//   internetChargeTypeRender: _this.internetChargeTypeOptions.find((c) => c.value === v.internet_charge_type)?.label,\n//   cloundAccountRender: `${v.account_id} | ${v.vendor}`,\n//   data_disk_type: v.data_disk?.type,\n//   data_disk_size: v.data_disk?.size,\n//   is_eip: v.is_eip,\n//   inner_ip: v.inner_ip,\n//   bandwidth_pkg_id: v.bandwidth_pkg_id,\n//   data_disk: v.data_disk || { type: \"\", size: \"\" },\n//   securityGroupsValues: Object.entries(v.security_groups).map((cur) => {\n//     const [key, value] = cur\n//     return `${key}${_this.specialSplit}${value}`\n//   }),\n//   max_flow_out: Number(v.max_flow_out),\n//   tagsValues: Object.entries(v.tags).map((c) => {\n//     _this.handleSelectTag({ value: c[0] })\n//     return {\n//       key: c[0],\n//       value: c[1],\n//     }\n//   }),\n// })\n\nexport const getFeFormInfo = (v, _this) => ({\n  ...v,\n  renderTags: Object.entries(v.tags).reduce((pre, cur) => {\n    const [key, value] = cur\n    pre += `${key} | ${value};`\n    return pre\n  }, \"\"),\n  resTypeRender: _this.resTypeOptions.find((c) => c.value === v.res_type)?.label,\n  cloundAccountRender: `${v.account_id} | ${v.vendor}`,\n  tagsValues: Object.entries(v.tags).map((c) => {\n    _this.handleSelectTag({ value: c[0] })\n    return {\n      key: c[0],\n      value: c[1],\n    }\n  }),\n})\n\nexport const getUniqueStr = (randomLength) => `^${Number(Math.random().toString().substring(2, randomLength) + Date.now()).toString(36)}$`\n\n// export const getParams = (formValues, _this) => {\n//   const {\n//     name, account_id, vendor,\n//     cloud_region_id, res_type, region, zone,\n//     image_id, image_name, cpu, memory, instance_type, system_disk_size,\n//     system_disk_type, securityGroupsValues, tagsValues,\n//     vpc_id, vpc_name, subnet_id, subnet_name, max_flow_out,\n//     instance_charge_type, internet_charge_type,\n//     data_disk_size, data_disk_type, description, is_eip, inner_ip, bandwidth_pkg_id,\n//   } = formValues\n//  return {\n//     name,\n//     account_id,\n//     vendor,\n//     cloud_region_id,\n//     res_type,\n//     region,\n//     zone,\n//     image_id,\n//     image_name,\n//     cpu: Number(cpu),\n//     memory,\n//     instance_type,\n//     system_disk_size: Number(system_disk_size),\n//     system_disk_type,\n//     security_groups: securityGroupsValues.reduce((pre, cur) => {\n//       const arr = cur.split(_this.specialSplit)\n//       const [key, value] = arr\n//       pre[key] = value\n//       return pre\n//     }, {}),\n//     tags: tagsValues.reduce((pre, cur) => {\n//       pre[cur.key] = cur.value\n//       return pre\n//     }, {}),\n//     vpc_id,\n//     vpc_name,\n//     subnet_id,\n//     subnet_name,\n//     max_flow_out,\n//     instance_charge_type,\n//     internet_charge_type,\n//     data_disk: {\n//       size: Number(data_disk_size),\n//       type: data_disk_type,\n//     },\n//     is_eip,\n//     inner_ip,\n//     bandwidth_pkg_id,\n//     description,\n//   }\n// }\n\nexport const getParams = (formValues, _this) => {\n  const {\n    name, account_id, vendor,\n    cloud_region_id, res_type, region, zone, tagsValues,\n    content, description, vpc_id, vpc_name, subnet_id, subnet_name,\n  } = formValues\n\n  return {\n    name,\n    account_id,\n    vendor,\n    cloud_region_id,\n    vpc_id,\n    vpc_name,\n    subnet_id,\n    subnet_name,\n    res_type,\n    region,\n    zone,\n    tags: tagsValues.reduce((pre, cur) => {\n      pre[cur.key] = cur.value\n      return pre\n    }, {}),\n    content,\n    description,\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"orders__header\"},[_c('Input',{staticClass:\"orders__header__input\",attrs:{\"placeholder\":\"请输入搜索内容\"},model:{value:(_vm.searchParams.searchVal),callback:function ($$v) {_vm.$set(_vm.searchParams, \"searchVal\", $$v)},expression:\"searchParams.searchVal\"}}),_c('Button',{staticClass:\"orders__header__button\",on:{\"click\":_vm.getTableData}},[_vm._v(\"搜索\")])],1),_c('Table',{ref:\"selection\",attrs:{\"stripe\":\"\",\"size\":\"small\",\"columns\":_vm.columns,\"data\":_vm.tableData}}),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"flex-end\",\"margin-top\":\"10px\",\"overflow\":\"hidden\"}},[_c('Page',{attrs:{\"total\":_vm.pageTotal,\"current\":_vm.searchParams.page_number,\"page-size\":_vm.searchParams.page_size,\"page-size-opts\":[12, 35, 50, 100],\"show-sizer\":\"\",\"show-total\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.handlePageSize}})],1),_c('Modal',{attrs:{\"title\":\"删除采购记录\",\"width\":520,\"loading\":_vm.deleteModalLoading},on:{\"on-ok\":_vm.deleteModalOk,\"on-cancel\":_vm.deleteModalCancel},model:{value:(_vm.showDeleteModal),callback:function ($$v) {_vm.showDeleteModal=$$v},expression:\"showDeleteModal\"}},[_c('div',[_vm._v(\" 确认删除采购记录吗？ \")])]),_c('AddTemplateModal',{attrs:{\"show\":_vm.showModal,\"buyRow\":_vm.buyRow},on:{\"closeAddModal\":_vm.closeAddModal,\"addSuccessCallback\":_vm.addSuccessCallback}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable vue/attribute-hyphenation -->\n<template>\n  <div>\n    <div class=\"orders__header\">\n      <Input v-model=\"searchParams.searchVal\" class=\"orders__header__input\" placeholder=\"请输入搜索内容\" />\n      <Button class=\"orders__header__button\" @click=\"getTableData\">搜索</Button>\n    </div>\n    <Table ref=\"selection\" stripe size=\"small\" :columns=\"columns\" :data=\"tableData\" />\n    <!-- 分页 -->\n    <div style=\"display: flex; justify-content: flex-end; margin-top: 10px; overflow: hidden\">\n      <Page\n        :total=\"pageTotal\"\n        :current=\"searchParams.page_number\"\n        :page-size=\"searchParams.page_size\"\n        :page-size-opts=\"[12, 35, 50, 100]\"\n        show-sizer\n        show-total\n        @on-change=\"changePage\"\n        @on-page-size-change=\"handlePageSize\" />\n    </div>\n\n    <!-- 删除采购记录 -->\n    <Modal\n      v-model=\"showDeleteModal\"\n      title=\"删除采购记录\"\n      :width=\"520\"\n      :loading=\"deleteModalLoading\"\n      @on-ok=\"deleteModalOk\"\n      @on-cancel=\"deleteModalCancel\">\n      <div>\n        确认删除采购记录吗？\n      </div>\n    </Modal>\n\n    <!-- 复购 -->\n    <AddTemplateModal :show=\"showModal\" :buyRow=\"buyRow\" @closeAddModal=\"closeAddModal\" @addSuccessCallback=\"addSuccessCallback\" />\n  </div>\n</template>\n\n<script>\n\nimport {\n  getOrderInfoList,\n  deleteOrderInfo,\n} from \"@/api/cmdb\"\n\nimport AddTemplateModal from \"../templateManagement/addTemplate.vue\"\n\nconst getStatusColor = (status) => {\n  switch (status) {\n  case \"0\":\n    return \"#FF9900\"\n  case \"1\":\n    return \"#19BE6B\"\n  default:\n    return \"#ED4014\"\n  }\n}\n\nconst QUERY_POLLING_TIME = 5000\n\nexport default {\n  components: {\n    AddTemplateModal,\n  },\n  data() {\n    return {\n      buyRow: null,\n      showModal: false,\n      timer: null,\n      curRow: {},\n      showDeleteModal: false,\n      deleteModalLoading: true,\n      pageTotal: 0,\n      tableLoading: false,\n      columns: [{\n        title: \"ID\",\n        key: \"id\",\n        width: 100,\n      }, {\n        title: \"任务ID\",\n        key: \"flow_id\",\n        width: 120,\n        render: (h, params) => h(\"div\", [\n          h(\"div\", {\n            style: {\n              color: \"#2d8cf0\",\n              cursor: \"pointer\",\n            },\n            on: {\n              click: () => {\n                window.open(`https://flow.huanle.com/#/orderCenter/order-list?order_id=${params.row.flow_id}`)\n              },\n            },\n          }, params.row.flow_id),\n        ]),\n      }, {\n        title: \"名称\",\n        key: \"instance_name\",\n        width: 220,\n      }, {\n        title: \"模板\",\n        key: \"name\",\n        minWidth: 200,\n      },{\n        title: \"资源\",\n        key: \"res_type_alias\",\n        minWidth: 120,\n      }, {\n        title: \"厂商\",\n        key: \"vendor_alias\",\n        width: 160,\n      }, {\n        title: \"状态\",\n        key: \"status_alias\",\n        width: 160,\n        render: (h, params) => h(\"div\", [\n          h(\"Tag\", {\n            props: {\n              color: getStatusColor(params.row.status),\n            },\n            style: {\n              // \"font-weight\": \"bold\",\n            },\n          }, params.row.status_alias),\n        ]),\n      }, {\n        title: \"开始时间\",\n        key: \"create_time\",\n        width: 240,\n      }, {\n        title: \"结束时间\",\n        key: \"update_time\",\n        width: 240,\n      }, {\n        title: \"操作\",\n        render: (h, params) => h(\"div\", [\n          h(\"Button\", {\n            props: {\n              type: \"text\",\n              size: \"small\",\n            },\n            style: {\n              color: \"#2d8cf0\",\n            },\n            on: {\n              click: () => {\n                this.buyRow = params.row.data\n                this.showModal = true\n              },\n            },\n          }, \"复购\"),\n          // h(\"Button\", {\n          //   props: {\n          //     type: \"text\",\n          //     size: \"small\",\n          //   },\n          //   on: {\n          //     click: () => {\n          //       this.curRow = params.row\n          //       this.showDeleteModal = true\n          //     },\n          //   },\n          // }, \"删除\"),\n        ]),\n        width: 120,\n      }],\n      tableData: [],\n      searchParams: {\n        page_number: 1,\n        page_size: 12,\n        order_by: \"id\",\n        order: \"descend\",\n        searchVal: \"\",\n      },\n    }\n  },\n  mounted() {\n    this.getTableData()\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer)\n  },\n  methods: {\n    addSuccessCallback() {\n      this.showModal = false\n      this.getTableData()\n    },\n    closeAddModal() {\n      this.showModal = false\n    },\n    async deleteModalOk() {\n      try {\n        const {\n          id,\n        } = this.curRow\n        const res = await deleteOrderInfo({\n          id_list: [id],\n        })\n        if (!res) {\n          throw new Error(\"请求错误，请重试\")\n        }\n        this.showDeleteModal = false\n        this.$Message.success(res.msg)\n        this.getTableData()\n      } catch (err) {\n        this.$Message.error(err.message)\n        this.deleteModalLoading = false\n      } finally {\n        this.$nextTick(() => {\n          this.deleteModalLoading = true\n        })\n      }\n    },\n    deleteModalCancel() {\n      this.showDeleteModal = false\n    },\n    async getTableData() {\n      try {\n        this.tableLoading = true\n        const { data, count } = await getOrderInfoList(this.searchParams)\n        this.pageTotal = count\n        this.tableData = data\n      } catch (err) {\n        this.$Message.error(err.message)\n      } finally {\n        this.tableLoading = false\n        clearTimeout(this.timer)\n        this.timer = setTimeout(() => {\n          this.getTableData()\n        }, QUERY_POLLING_TIME)\n      }\n    },\n    // 每页条数\n    handlePageSize(val) {\n      this.searchParams.page_size = val\n      this.getTableData()\n    },\n    // 切换分页\n    changePage(val) {\n      this.searchParams.page_number = val\n      this.getTableData()\n    },\n  },\n}\n\n</script>\n\n<style scoped lang=\"less\">\n\n.orders {\n  &__header {\n    margin-bottom: 12px;\n    display: flex;\n    &__input {\n      margin-right: 20px;\n      width: 200px;\n    }\n  }\n}\n\n/deep/ .ivu-table-wrapper {\n  max-height: calc(~\"100vh - 200px\");\n  .ivu-table-body {\n    max-height: calc(~\"100vh - 280px\");\n    overflow-y: auto;\n  }\n}\n\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./orderList.vue?vue&type=template&id=bbea0208&scoped=true&\"\nimport script from \"./orderList.vue?vue&type=script&lang=js&\"\nexport * from \"./orderList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderList.vue?vue&type=style&index=0&id=bbea0208&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bbea0208\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"title\":_vm.title,\"loading\":_vm.modalLoading,\"width\":70},on:{\"on-ok\":_vm.ok,\"on-cancel\":_vm.cancel},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticClass:\"modal__content\"},[_c('Form',{ref:\"form\",attrs:{\"model\":_vm.formValues,\"label-width\":100,\"rules\":_vm.formRules}},[_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"基础配置\")]),_c('div',{staticClass:\"modal__content__section__form\"},[_c('div',{staticClass:\"modal__content__section__form__custom\"},[_c('FormItem',{attrs:{\"prop\":\"name\",\"label\":\"模板名称\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入模板名称\"},model:{value:(_vm.formValues.name),callback:function ($$v) {_vm.$set(_vm.formValues, \"name\", $$v)},expression:\"formValues.name\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"res_type\",\"label\":\"模板类型\"}},[_c('Select',{attrs:{\"type\":\"text\",\"placeholder\":\"请选择模板类型\"},model:{value:(_vm.formValues.res_type),callback:function ($$v) {_vm.$set(_vm.formValues, \"res_type\", $$v)},expression:\"formValues.res_type\"}},_vm._l((_vm.resTypeOptions),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"subnet_id\",\"label\":\"私有子网\"}},[_c('Select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择私有子网\"},on:{\"on-change\":_vm.handleInstanceChange},model:{value:(_vm.formValues.subnet_id),callback:function ($$v) {_vm.$set(_vm.formValues, \"subnet_id\", $$v)},expression:\"formValues.subnet_id\"}},_vm._l((_vm.vswitchOptions),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.instance_id}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"vpc_name\",\"label\":\"私有网络\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\"},model:{value:(_vm.formValues.vpc_name),callback:function ($$v) {_vm.$set(_vm.formValues, \"vpc_name\", $$v)},expression:\"formValues.vpc_name\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"cloud_region_id\",\"label\":\"云区域\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formValues.cloud_region_id),callback:function ($$v) {_vm.$set(_vm.formValues, \"cloud_region_id\", $$v)},expression:\"formValues.cloud_region_id\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"cloundAccountRender\",\"label\":\"云厂商\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\",\"placeholder\":\"\"},model:{value:(_vm.formValues.cloundAccountRender),callback:function ($$v) {_vm.$set(_vm.formValues, \"cloundAccountRender\", $$v)},expression:\"formValues.cloundAccountRender\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"region\",\"label\":\"地域\"}},[_c('Input',{attrs:{\"type\":\"text\",\"disabled\":\"\",\"placeholder\":\"\"},model:{value:(_vm.formValues.region),callback:function ($$v) {_vm.$set(_vm.formValues, \"region\", $$v)},expression:\"formValues.region\"}})],1)],1),_c('div',{staticClass:\"modal__content__section__form__select\"},[_c('FormItem',{attrs:{\"prop\":\"zone\",\"label\":\"可用区\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formValues.zone),callback:function ($$v) {_vm.$set(_vm.formValues, \"zone\", $$v)},expression:\"formValues.zone\"}})],1)],1)]),_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"TF配置\")]),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"content\"}},[_c('codo-editor',{key:`${_vm._uid}`,attrs:{\"lang\":_vm.formValues.script_type,\"read\":_vm.read},model:{value:(_vm.formValues.content),callback:function ($$v) {_vm.$set(_vm.formValues, \"content\", $$v)},expression:\"formValues.content\"}})],1)],1)]),_c('div',{staticClass:\"modal__content__section\"},[_c('div',{staticClass:\"modal__content__section__title\"},[_vm._v(\"其他设置\")]),_c('div',{staticClass:\"modal__content__section__form\"},[_c('div',{staticClass:\"modal__content__section__form__tags\"},[_c('div',{staticClass:\"modal__content__section__form__tags__label\"},[_vm._v(\" 标签 \")]),_c('div',{staticClass:\"modal__content__section__form__tags__content\"},_vm._l((_vm.formValues.tagsValues),function(item,index){return _c('div',{key:index,staticClass:\"modal__content__section__form__tags__content__line\"},[_c('FormItem',{attrs:{\"prop\":'tagsValues.' + index + '.key',\"rules\":{\n                      required: true,\n                      message: '标签键不能为空',\n                      trigger: 'blur',\n                    }}},[_c('Select',{attrs:{\"filterable\":\"\"},on:{\"on-select\":_vm.handleSelectTag},model:{value:(item.key),callback:function ($$v) {_vm.$set(item, \"key\", $$v)},expression:\"item.key\"}},_vm._l((_vm.tagKeyOptions),function(tagKey){return _c('Option',{key:tagKey.value,attrs:{\"value\":tagKey.value}},[_vm._v(_vm._s(tagKey.label))])}),1)],1),_c('FormItem',{attrs:{\"prop\":'tagsValues.' + index + '.value',\"rules\":{\n                      required: true,\n                      message: '标签值不能为空',\n                      trigger: 'blur',\n                    }}},[_c('Select',{attrs:{\"filterable\":\"\",\"loading\":_vm.tagValueOptions[item.key] === undefined,\"disabled\":item.key === '',\"placeholder\":item.key === '' ? '请先选择标签键' : '请选择'},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}},_vm._l((_vm.tagValueOptions[item.key]),function(tagValue){return _c('Option',{key:tagValue.value,attrs:{\"value\":tagValue.value}},[_vm._v(_vm._s(tagValue.label))])}),1)],1),(index === _vm.formValues.tagsValues.length - 1)?_c('Icon',{attrs:{\"size\":\"20\",\"type\":\"md-add\"},on:{\"click\":_vm.handleAddTag}}):_vm._e(),(_vm.formValues.tagsValues.length > 1)?_c('Icon',{attrs:{\"size\":\"20\",\"type\":\"md-close\"},on:{\"click\":function($event){return _vm.handleRemoveTag(index)}}}):_vm._e()],1)}),0)]),_c('div',{staticClass:\"modal__content__section__form__longer\"},[_c('FormItem',{attrs:{\"prop\":\"description\",\"label\":\"备注\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入备注\"},model:{value:(_vm.formValues.description),callback:function ($$v) {_vm.$set(_vm.formValues, \"description\", $$v)},expression:\"formValues.description\"}})],1)],1)])])])]),(_vm.buy)?_c('div',{staticClass:\"modal__content__buy\"},[_c('Form',{ref:\"buyForm\",attrs:{\"model\":_vm.buyValues,\"label-width\":100,\"rules\":_vm.buyFormRules}},[_c('FormItem',{attrs:{\"prop\":\"name\"}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('span',[_vm._v(\"资源名称\")]),_c('Tooltip',{attrs:{\"placement\":\"top-start\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('div',[_vm._v(\" 示例：业务-厂商-地域-环境-服务+编号(ops-tx-sh-test-etcd01) \")]),_c('div',[_vm._v(\"全部为英文或者数字，-为分隔符 是关键字不能被占用\")])]),_c('Icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"ios-help-circle-outline\"}})],1)],1),_c('Input',{attrs:{\"type\":\"text\"},model:{value:(_vm.buyValues.name),callback:function ($$v) {_vm.$set(_vm.buyValues, \"name\", $$v)},expression:\"buyValues.name\"}})],1),_c('FormItem',{attrs:{\"prop\":\"count\",\"label\":\"购买数量\"}},[_c('InputNumber',{attrs:{\"max\":10,\"min\":1},model:{value:(_vm.buyValues.count),callback:function ($$v) {_vm.$set(_vm.buyValues, \"count\", $$v)},expression:\"buyValues.count\"}})],1)],1)],1):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Modal\n    v-model=\"showModal\"\n    :title=\"title\"\n    :loading=\"modalLoading\"\n    :width=\"70\"\n    @on-ok=\"ok\"\n    @on-cancel=\"cancel\"\n  >\n    <div class=\"modal__content\">\n      <Form\n        ref=\"form\"\n        :model=\"formValues\"\n        :label-width=\"100\"\n        :rules=\"formRules\"\n      >\n        <div class=\"modal__content__section\">\n          <div class=\"modal__content__section__title\">基础配置</div>\n          <div class=\"modal__content__section__form\">\n            <div class=\"modal__content__section__form__custom\">\n              <FormItem prop=\"name\" label=\"模板名称\">\n                <Input\n                  v-model=\"formValues.name\"\n                  type=\"text\"\n                  placeholder=\"请输入模板名称\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"res_type\" label=\"模板类型\">\n                <Select\n                  v-model=\"formValues.res_type\"\n                  type=\"text\"\n                  placeholder=\"请选择模板类型\"\n                >\n                  <Option\n                    v-for=\"item in resTypeOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    >{{ item.label }}</Option\n                  >\n                </Select>\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"subnet_id\" label=\"私有子网\">\n                <Select\n                  v-model=\"formValues.subnet_id\"\n                  filterable\n                  placeholder=\"请选择私有子网\"\n                  @on-change=\"handleInstanceChange\"\n                >\n                  <Option\n                    v-for=\"item in vswitchOptions\"\n                    :key=\"item.id\"\n                    :value=\"item.instance_id\"\n                    >{{ item.label }}</Option\n                  >\n                </Select>\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"vpc_name\" label=\"私有网络\">\n                <Input v-model=\"formValues.vpc_name\" type=\"text\" disabled />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"cloud_region_id\" label=\"云区域\">\n                <Input\n                  v-model=\"formValues.cloud_region_id\"\n                  type=\"text\"\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"cloundAccountRender\" label=\"云厂商\">\n                <Input\n                  v-model=\"formValues.cloundAccountRender\"\n                  type=\"text\"\n                  disabled\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"region\" label=\"地域\">\n                <Input\n                  v-model=\"formValues.region\"\n                  type=\"text\"\n                  disabled\n                  placeholder=\"\"\n                />\n              </FormItem>\n            </div>\n            <div class=\"modal__content__section__form__select\">\n              <FormItem prop=\"zone\" label=\"可用区\">\n                <Input v-model=\"formValues.zone\" type=\"text\" placeholder=\"\" />\n              </FormItem>\n            </div>\n          </div>\n          <div class=\"modal__content__section\">\n            <div class=\"modal__content__section__title\">TF配置</div>\n            <div class=\"modal__content__section__form__longer\">\n              <FormItem prop=\"content\">\n                <codo-editor\n                  v-model=\"formValues.content\"\n                  :lang=\"formValues.script_type\"\n                  :read=\"read\"\n                  :key=\"`${_uid}`\"\n                />\n              </FormItem>\n            </div>\n          </div>\n          <div class=\"modal__content__section\">\n            <div class=\"modal__content__section__title\">其他设置</div>\n            <div class=\"modal__content__section__form\">\n              <div class=\"modal__content__section__form__tags\">\n                <div class=\"modal__content__section__form__tags__label\">\n                  标签\n                </div>\n                <div class=\"modal__content__section__form__tags__content\">\n                  <div\n                    v-for=\"(item, index) in formValues.tagsValues\"\n                    :key=\"index\"\n                    class=\"modal__content__section__form__tags__content__line\"\n                  >\n                    <FormItem\n                      :prop=\"'tagsValues.' + index + '.key'\"\n                      :rules=\"{\n                        required: true,\n                        message: '标签键不能为空',\n                        trigger: 'blur',\n                      }\"\n                    >\n                      <Select\n                        v-model=\"item.key\"\n                        filterable\n                        @on-select=\"handleSelectTag\"\n                      >\n                        <Option\n                          v-for=\"tagKey in tagKeyOptions\"\n                          :key=\"tagKey.value\"\n                          :value=\"tagKey.value\"\n                          >{{ tagKey.label }}</Option\n                        >\n                      </Select>\n                    </FormItem>\n                    <FormItem\n                      :prop=\"'tagsValues.' + index + '.value'\"\n                      :rules=\"{\n                        required: true,\n                        message: '标签值不能为空',\n                        trigger: 'blur',\n                      }\"\n                    >\n                      <Select\n                        v-model=\"item.value\"\n                        filterable\n                        :loading=\"tagValueOptions[item.key] === undefined\"\n                        :disabled=\"item.key === ''\"\n                        :placeholder=\"\n                          item.key === '' ? '请先选择标签键' : '请选择'\n                        \"\n                      >\n                        <Option\n                          v-for=\"tagValue in tagValueOptions[item.key]\"\n                          :key=\"tagValue.value\"\n                          :value=\"tagValue.value\"\n                          >{{ tagValue.label }}</Option\n                        >\n                      </Select>\n                    </FormItem>\n                    <Icon\n                      v-if=\"index === formValues.tagsValues.length - 1\"\n                      size=\"20\"\n                      type=\"md-add\"\n                      @click=\"handleAddTag\"\n                    />\n                    <Icon\n                      v-if=\"formValues.tagsValues.length > 1\"\n                      size=\"20\"\n                      type=\"md-close\"\n                      @click=\"handleRemoveTag(index)\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div class=\"modal__content__section__form__longer\">\n                <FormItem prop=\"description\" label=\"备注\">\n                  <Input\n                    v-model=\"formValues.description\"\n                    type=\"textarea\"\n                    placeholder=\"请输入备注\"\n                  />\n                </FormItem>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Form>\n      <div v-if=\"buy\" class=\"modal__content__buy\">\n        <Form\n          ref=\"buyForm\"\n          :model=\"buyValues\"\n          :label-width=\"100\"\n          :rules=\"buyFormRules\"\n        >\n          <FormItem prop=\"name\">\n            <span slot=\"label\">\n              <span>资源名称</span>\n              <Tooltip placement=\"top-start\">\n                <div slot=\"content\">\n                  <div>\n                    示例：业务-厂商-地域-环境-服务+编号(ops-tx-sh-test-etcd01)\n                  </div>\n                  <div>全部为英文或者数字，-为分隔符 是关键字不能被占用</div>\n                </div>\n                <Icon type=\"ios-help-circle-outline\" style=\"margin-left: 5px\" />\n              </Tooltip>\n            </span>\n            <Input v-model=\"buyValues.name\" type=\"text\" />\n          </FormItem>\n          <FormItem prop=\"count\" label=\"购买数量\">\n            <InputNumber v-model=\"buyValues.count\" :max=\"10\" :min=\"1\" />\n          </FormItem>\n        </Form>\n      </div>\n    </div>\n  </Modal>\n</template>\n<!-- eslint-disable camelcase -->\n<script>\nimport {\n  createOrderTemplate,\n  getTagList,\n  createOrder,\n} from '@/api/cmdb';\n\nimport { getVswitch } from '@/api/cloud/vswitch';\n\nimport { getUniqueStr, getParams } from '../utils';\nimport codoEditor from '@/components/editor/editor-v3';\n\nimport {\n  resTypeOptions,\n  dataDiskTypeOptions,\n  systemDiskTypeOptions,\n  instanceChargeTypeOptions,\n  internetChargeTypeOptions,\n} from '../options';\n\nconst DEFAULT_FORM_VALUES = {\n  script_type: 'python',\n  content: '',\n  cloud_region_id: '',\n  cloud_region_name: '',\n  account_id: '',\n  name: '',\n  res_type: '',\n  vendor: '',\n  region: '',\n  zone: '',\n  tags: {},\n  tagsValues: [\n    {\n      key: '',\n      value: '',\n    },\n  ],\n};\n\nconst DEFAULT_PRICE = {\n  bandwidth_dis_count: 100,\n  bandwidth_dis_count_price: 0,\n  bandwidth_original_price: 0,\n  dis_count: 100,\n  dis_count_price: 0,\n  original_price: 0,\n};\n\nexport default {\n  components: { codoEditor },\n  name: 'AddTemplateModal',\n  props: {\n    show: {\n      type: Boolean,\n      default: false,\n    },\n    buyRow: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      lang: 'text',\n      read: false,\n      // 镜像远程搜索\n      imageIdOptions: [],\n      imageIdLoading: false,\n      // 镜像远程搜索\n      bindWidthIdOptions: [],\n      bindWidthIdLoading: false,\n      title: '创建模板',\n      priceLoading: false,\n      buy: false,\n      price: DEFAULT_PRICE,\n      // 处理tags、security_groups等数据结构\n      specialSplit: '',\n      resTypeOptions,\n      dataDiskTypeOptions,\n      systemDiskTypeOptions,\n      instanceChargeTypeOptions,\n      internetChargeTypeOptions,\n      vswitchOptions: [],\n      securityGroupOptions: [],\n      tagKeyOptions: [],\n      tagValueOptions: {},\n      buyValues: {\n        name: '',\n        count: 1,\n      },\n\n      formValues: DEFAULT_FORM_VALUES,\n      formRules: {\n        name: [{ required: true, message: '模板名称必填', trigger: 'blur' }],\n        res_type: [\n          { required: true, message: '模板类型必选', trigger: 'blur' },\n        ],\n        subnet_id: [\n          { required: true, message: '私有子网必选', trigger: 'blur' },\n        ],\n        cloundAccountRender: [\n          { required: true, message: '云厂商不能为空', trigger: 'blur' },\n        ],\n        vpc_name: [\n          { required: true, message: '私有网络不能为空', trigger: 'blur' },\n        ],\n        region: [{ required: true, message: '地域不能为空', trigger: 'blur' }],\n        zone: [{ required: true, message: '可用区不能为空', trigger: 'blur' }],\n        tags: [{ required: true, message: '标签必填', trigger: 'blur' }],\n      },\n      showModal: this.show,\n      modalLoading: true,\n    };\n  },\n  computed: {\n    realShow() {\n      return this.show;\n    },\n    insTypeParams() {\n      const {\n        account_id,\n        vendor,\n        res_type,\n        region,\n        zone,\n        instance_type,\n        content,\n      } = this.formValues;\n      return {\n        account_id,\n        vendor,\n        res_type,\n        region,\n        zone,\n        instance_type,\n        content,\n      };\n    },\n  },\n  watch: {\n    show(v) {\n      if (v) {\n        this.getSettings();\n      }\n      this.showModal = v;\n    },\n    insTypeParams: {\n      async handler(val) {\n        const { account_id, vendor, res_type, region, zone, instance_type } =\n          val;\n        if (\n          !account_id ||\n          !vendor ||\n          !res_type ||\n          !region ||\n          !zone ||\n          !instance_type\n        )\n          return;\n        this.getInsTypeOptions();\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.specialSplit = getUniqueStr(3);\n  },\n  methods: {\n    async getSettings() {\n      this.getVswitchData();\n      this.getTagData();\n    },\n    async getVswitchData() {\n      const { data } = await getVswitch();\n      this.vswitchOptions = data.map((c) => ({\n        ...c,\n        label: `${c.instance_id} | ${c.name} | ${c.cidr_block_v4}`,\n      }));\n    },\n    async getTagData() {\n      const { data } = await getTagList();\n\n      this.tagKeyOptions = data.map((c) => ({\n        label: c,\n        value: c,\n      }));\n    },\n    async handleSelectTag(tag) {\n      const { data } = await getTagList({ tag_key: tag.value });\n\n      this.$set(\n        this.tagValueOptions,\n        tag.value,\n        data.map((c) => ({\n          label: c,\n          value: c,\n        }))\n      );\n    },\n    handleAddTag() {\n      this.formValues.tagsValues.push({\n        key: '',\n        value: '',\n      });\n    },\n    handleRemoveTag(index) {\n      this.formValues.tagsValues = this.formValues.tagsValues.filter(\n        (_, i) => i !== index\n      );\n    },\n    handleInstanceChange(v) {\n      const option = this.vswitchOptions.find((c) => c?.instance_id === v);\n      if (!option) return;\n      this.formValues = {\n        ...this.formValues,\n        subnet_name: `${option.instance_id} | ${option.name} | ${option.cidr_block_v4}`,\n        vendor: option.cloud_name,\n        account_id: option.account_id,\n        cloundAccountRender: `${option.account_id} | ${option.cloud_name}`,\n        vpc_id: option.vpc_id.replace(/[\\r\\n]/g, ''),\n        vpc_name: `${option.vpc_id} | ${option.vpc_name}`,\n        cloud_region_id: option.cloud_region_id || '',\n        cloudRender: `${option.cloud_region_id}`,\n        region: option.region,\n        zone: option.zone,\n      };\n    },\n    async ok() {\n      this.modalLoading = false;\n      try {\n        await new Promise((resolve, reject) => {\n          this.$refs.form.validate((v) => {\n            if (!v) {\n              reject(new Error('表单校验失败，请检查'));\n            }\n          });\n          if (this.buy) {\n            this.$refs.buyForm.validate((v) => {\n              if (!v) {\n                reject(new Error('表单校验失败，请检查'));\n              }\n            });\n          }\n          resolve();\n        });\n        const params = getParams(this.formValues, this);\n        const res = await (this.buy\n          ? createOrder({\n              instance_name: this.buyValues.name,\n              count: this.buyValues.count,\n              image_passwd: '',\n              ...params,\n            })\n          : createOrderTemplate({\n              ...params,\n            }));\n        if (!res) {\n          throw new Error('请求错误，请重试');\n        }\n        this.$emit('addSuccessCallback');\n        this.showModal = false;\n        this.$Message.success(res.msg);\n      } catch (err) {\n        this.$Message.error(err.message);\n        this.modalLoading = false;\n      } finally {\n        this.$nextTick(() => {\n          this.modalLoading = true;\n        });\n      }\n    },\n    cancel() {\n      this.$emit('closeAddModal');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n/deep/ .ivu-modal-body {\n  padding: 16px 16px 0 0;\n}\n\n.modal {\n  &__content {\n    padding-left: 16px;\n    position: relative;\n    max-height: calc(~'100vh - 300px');\n    overflow-y: auto;\n    &__section {\n      border-width: 1px 0 0 0;\n      border-color: #ccc;\n      border-style: solid;\n      &__title {\n        margin: 12px 0;\n      }\n      &__form {\n        padding-left: 12px;\n        display: flex;\n        flex-wrap: wrap;\n        &__custom {\n          width: 50%;\n        }\n        &__select {\n          width: 50%;\n        }\n        &__int {\n          width: 50%;\n          &__unit {\n            line-height: 32px;\n          }\n        }\n        &__longer {\n          width: 100%;\n        }\n\n        /deep/ .ivu-form-item {\n          padding-right: 20px;\n          // width: 50%;\n          .ivu-form-item-label {\n            padding: 10px 0;\n            font-size: 12px;\n            text-align: center;\n          }\n          .ivu-form-item-content {\n            margin-left: 112px !important;\n          }\n        }\n        &__special,\n        &__tags {\n          display: flex;\n          &__label {\n            width: 100px;\n            height: 32px;\n            line-height: 32px;\n            font-size: 12px;\n            text-align: center;\n            flex-shrink: 0;\n          }\n          &__label::before {\n            content: '*';\n            display: inline-block;\n            margin-right: 4px;\n            line-height: 1;\n            font-family: SimSun;\n            font-size: 14px;\n            color: #ed4014;\n          }\n          &__unit {\n            margin-left: 5px;\n          }\n        }\n        &__special {\n          /deep/ .ivu-form-item {\n            flex: 1;\n            padding-right: 0px;\n            .ivu-form-item-content {\n              display: flex;\n              margin-left: 12px !important;\n              margin-right: 20px;\n            }\n          }\n        }\n        &__limit {\n          width: 50%;\n          &__special {\n            display: flex;\n            &__label {\n              width: 100px;\n              height: 32px;\n              line-height: 32px;\n              font-size: 12px;\n              text-align: center;\n              flex-shrink: 0;\n            }\n            &__label::before {\n              content: '*';\n              display: inline-block;\n              margin-right: 4px;\n              line-height: 1;\n              font-family: SimSun;\n              font-size: 14px;\n              color: #ed4014;\n            }\n            &__slider {\n              flex: 1;\n            }\n            &__input {\n              flex-grow: 0;\n              width: 160px;\n              flex-shrink: 0;\n            }\n            &__unit {\n              margin-left: 5px;\n            }\n            /deep/ .ivu-form-item {\n              padding-right: 0px;\n              .ivu-form-item-content {\n                display: flex;\n                margin-left: 12px !important;\n                margin-right: 20px;\n                .ivu-input-number {\n                  width: 100%;\n                }\n                .ivu-slider {\n                  flex: 1;\n                }\n              }\n            }\n          }\n        }\n        &__tags {\n          width: 100%;\n          &__content {\n            flex: 1;\n            &__line {\n              display: flex;\n              /deep/ .ivu-form-item {\n                margin-left: 12px;\n                width: calc(~'50% - 62px');\n                .ivu-form-item-content {\n                  width: 100%;\n                  margin-left: 0 !important;\n                }\n              }\n              /deep/ .ivu-icon-md-close,\n              .ivu-icon-md-add {\n                margin-right: 10px;\n                line-height: 32px;\n                cursor: pointer;\n              }\n            }\n          }\n        }\n      }\n    }\n    &__buy {\n      z-index: 1;\n      padding-top: 12px;\n      background-color: #fbfcfc;\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-end;\n      position: sticky;\n      padding-left: 12px;\n      margin-left: -16px;\n      bottom: 0;\n      border-top: 1px solid #e8eaec;\n      -webkit-box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.03);\n      box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.03);\n      /deep/ .ivu-form-item {\n        padding-right: 20px;\n        // width: 50%;\n\n        .ivu-form-item-label {\n          padding: 10px 0;\n          font-size: 12px;\n          text-align: right;\n        }\n        .ivu-form-item-content {\n          margin-left: 112px !important;\n          width: 200px;\n          .ivu-input-number {\n            width: 100%;\n          }\n        }\n      }\n      &__price {\n        height: 34px;\n        margin-bottom: 24px;\n        margin-right: 200px;\n        display: flex;\n        align-items: center;\n        &__label {\n          margin-right: 12px;\n          text-decoration: underline dotted #999999;\n        }\n        &__value {\n          color: #ba0018;\n        }\n        &__loading {\n          animation: load 1.1s infinite linear;\n        }\n      }\n    }\n  }\n  @keyframes load {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n}\n\n.popup {\n  &__price {\n    &__header {\n      display: flex;\n      padding-left: 10px;\n      align-items: center;\n      background-color: #f1f2f5;\n      height: 50px;\n      &__label {\n        width: 80px;\n        flex-shrink: 0;\n      }\n      &__value {\n        font-weight: bold;\n      }\n    }\n    &__item {\n      display: flex;\n      padding-left: 10px;\n      padding-right: 20px;\n      align-items: center;\n      height: 70px;\n      border-bottom: 1px solid #e2e6ed;\n      &__label {\n        width: 80px;\n        flex-shrink: 0;\n      }\n      &__value {\n        display: flex;\n        align-items: center;\n        &__final {\n          font-weight: bold;\n          margin-right: 10px;\n          color: #ff7200;\n          font-size: 16px;\n        }\n        &__discount {\n          font-weight: bold;\n          margin-right: 10px;\n          height: 32px;\n          line-height: 30px;\n          padding: 0 10px;\n          background-color: #ffe8d5;\n          color: #ff7200;\n          border: 1px solid #ff7200;\n          border-radius: 50%;\n        }\n        &__original {\n          font-size: 14px;\n          text-decoration: line-through;\n          color: #a5aebb;\n        }\n      }\n    }\n  }\n}\n\n/deep/ .ivu-tooltip-content {\n  .ivu-tooltip-inner {\n    max-width: unset;\n    background-color: #fff;\n    color: #000;\n  }\n  .ivu-tooltip-arrow {\n    background-color: #fff;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addTemplate.vue?vue&type=template&id=3ebe8931&scoped=true&\"\nimport script from \"./addTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./addTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addTemplate.vue?vue&type=style&index=0&id=3ebe8931&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ebe8931\",\n  null\n  \n)\n\nexport default component.exports","var classof = require('../internals/classof-raw');\n\nmodule.exports = typeof process != 'undefined' && classof(process) == 'process';\n","const dataDiskTypeOptions = [\n  {\n    label: \"高性能云硬盘\",\n    value: \"CLOUD_PREMIUM\",\n  },\n  {\n    label: \"通用型SSD云硬盘\",\n    value: \"CLOUD_BSSD\",\n  },\n  {\n    label: \"SSD云硬盘\",\n    value: \"CLOUD_SSD\",\n  },\n  {\n    label: \"增强型SSD云硬盘\",\n    value: \"CLOUD_HSSD\",\n  },\n]\nconst systemDiskTypeOptions = [\n  {\n    label: \"高性能云硬盘\",\n    value: \"CLOUD_PREMIUM\",\n  },\n  {\n    label: \"通用型SSD云硬盘\",\n    value: \"CLOUD_BSSD\",\n  },\n  {\n    label: \"SSD云硬盘\",\n    value: \"CLOUD_SSD\",\n  },\n  {\n    label: \"增强型SSD云硬盘\",\n    value: \"CLOUD_HSSD\",\n  },\n]\nconst resTypeOptions = [\n  {\n    label: \"服务器\",\n    value: \"server\",\n  },\n  {\n    label: \"LB\",\n    value: \"LB\",\n  },\n  // {\n  //   label: \"Mysql\",\n  //   value: \"mysql\",\n  // },\n  // {\n  //   label: \"Redis\",\n  //   value: \"redis\",\n  // },\n]\nconst instanceChargeTypeOptions = [\n  {\n    label: \"包年包月\",\n    value: \"PREPAID\",\n  },\n  {\n    label: \"按量计费\",\n    value: \"POSTPAID_BY_HOUR\",\n  },\n]\nconst internetChargeTypeOptions = [\n  {\n    label: \"带宽包用户\",\n    value: \"BANDWIDTH_PACKAGE\",\n  },\n  {\n    label: \"按带宽包年包月计费\",\n    value: \"BANDWIDTH_PREPAID\",\n  },\n  {\n    label: \"流量按小时后付费\",\n    value: \"TRAFFIC_POSTPAID_BY_HOUR\",\n  },\n]\nexport {\n  resTypeOptions,\n  dataDiskTypeOptions,\n  systemDiskTypeOptions,\n  instanceChargeTypeOptions,\n  internetChargeTypeOptions,\n}\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTemplate.vue?vue&type=style&index=0&id=3ebe8931&prod&scoped=true&lang=less&\"","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","/* eslint-disable camelcase */\nimport request from '@/plugins/axios'\n\nexport const getVswitch = (params) => request({\n  url: '/api/v2/cmdb/vswitch/',\n  method: 'get',\n  params,\n})\n\nexport const optVswitch = (data, method) => request({\n  url: '/api/v2/cmdb/vswitch/',\n  method,\n  data,\n})\n\n","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderList.vue?vue&type=style&index=0&id=bbea0208&prod&scoped=true&lang=less&\""],"sourceRoot":""}