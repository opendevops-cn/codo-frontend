{"version":3,"sources":["webpack://cmdb-[name]/./src/views/cmdb/components/mysql-add.vue","webpack://cmdb-[name]/src/views/cmdb/components/mysql-add.vue","webpack://cmdb-[name]/./src/views/cmdb/components/mysql-add.vue?1685","webpack://cmdb-[name]/./src/views/cmdb/components/mysql-add.vue?5eab"],"names":["render","_vm","this","_c","_self","attrs","handleClose","modalData","title","on","handleCancel","model","value","show","callback","$$v","$set","expression","ref","formValidate","ruleValidate","name","cloud_name","db_version","db_engine","instance_id","db_address","onJsonChange","onJsonSave","onError","ext_info","$event","handleSubmit","_v","staticStyle","handleReset","staticRenderFns","components","vueJsonEditor","props","type","Object","default","data","btnLoading","required","message","trigger","methods","$emit","next","$refs","validate","valid","setTimeout","action","$Message","error","val","console","log","jsonErrFlag","watch","computed","mounted","component"],"mappings":"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","file":"static/js/chunk-2d2077df.8dcc556f.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Drawer',{attrs:{\"before-close\":_vm.handleClose,\"title\":_vm.modalData.title,\"width\":\"50%\",\"draggable\":\"\",\"mask-closable\":false,\"footer-hide\":true},on:{\"on-close\":_vm.handleCancel},model:{value:(_vm.modalData.show),callback:function ($$v) {_vm.$set(_vm.modalData, \"show\", $$v)},expression:\"modalData.show\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"实例名称\",\"prop\":\"name\"}},[_c('Input',{attrs:{\"maxlength\":120,\"placeholder\":\"请输入实例名称\"},model:{value:(_vm.formValidate.name),callback:function ($$v) {_vm.$set(_vm.formValidate, \"name\", $$v)},expression:\"formValidate.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"厂商信息\",\"prop\":\"cloud_name\"}},[_c('Input',{attrs:{\"maxlength\":120,\"placeholder\":\"请输入厂商名称\"},model:{value:(_vm.formValidate.cloud_name),callback:function ($$v) {_vm.$set(_vm.formValidate, \"cloud_name\", $$v)},expression:\"formValidate.cloud_name\"}})],1),_c('FormItem',{attrs:{\"label\":\"版本\",\"prop\":\"db_version\"}},[_c('Input',{attrs:{\"maxlength\":120,\"placeholder\":\"请输入\"},model:{value:(_vm.formValidate.db_version),callback:function ($$v) {_vm.$set(_vm.formValidate, \"db_version\", $$v)},expression:\"formValidate.db_version\"}})],1),_c('FormItem',{attrs:{\"label\":\"引擎\",\"prop\":\"db_engine\"}},[_c('Input',{attrs:{\"maxlength\":120,\"placeholder\":\"请输入\"},model:{value:(_vm.formValidate.db_engine),callback:function ($$v) {_vm.$set(_vm.formValidate, \"db_engine\", $$v)},expression:\"formValidate.db_engine\"}})],1),_c('FormItem',{attrs:{\"label\":\"实例ID\",\"prop\":\"instance_id\"}},[_c('Input',{attrs:{\"maxlength\":120,\"placeholder\":\"请输入实例ID，如果不填则随机生成\"},model:{value:(_vm.formValidate.instance_id),callback:function ($$v) {_vm.$set(_vm.formValidate, \"instance_id\", $$v)},expression:\"formValidate.instance_id\"}})],1),_c('FormItem',{attrs:{\"label\":\"数据库地址\"}},[_c('vue-json-editor',{attrs:{\"show-btns\":false,\"mode\":'code',\"lang\":\"zh\"},model:{value:(_vm.formValidate.db_address),callback:function ($$v) {_vm.$set(_vm.formValidate, \"db_address\", $$v)},expression:\"formValidate.db_address\"}})],1),_c('FormItem',{attrs:{\"label\":\"扩展字段\"}},[_c('vue-json-editor',{attrs:{\"show-btns\":false,\"mode\":'code',\"lang\":\"zh\"},on:{\"json-change\":_vm.onJsonChange,\"json-save\":_vm.onJsonSave,\"has-error\":_vm.onError},model:{value:(_vm.formValidate.ext_info),callback:function ($$v) {_vm.$set(_vm.formValidate, \"ext_info\", $$v)},expression:\"formValidate.ext_info\"}})],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSubmit('formValidate', false)}}},[_vm._v(\"保存\")]),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":function($event){return _vm.handleSubmit('formValidate', true)}}},[_vm._v(\"保存并继续\")]),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":function($event){return _vm.handleReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- eslint-disable vue/no-mutating-props -->\n<template>\n  <div>\n    <!-- 添加 -->\n    <Drawer v-model=\"modalData.show\" @on-close='handleCancel' :before-close='handleClose' :title=\"modalData.title\" width=\"50%\" \n      draggable :mask-closable='false' :footer-hide='true'>\n      <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"100\">\n        <FormItem label=\"实例名称\" prop=\"name\">\n          <Input v-model=\"formValidate.name\" :maxlength=\"120\" placeholder=\"请输入实例名称\"></Input>\n        </FormItem>\n        \n        <FormItem label=\"厂商信息\" prop=\"cloud_name\">\n           <Input v-model=\"formValidate.cloud_name\" :maxlength=\"120\" placeholder=\"请输入厂商名称\"></Input>\n        </FormItem>\n\n        <FormItem label=\"版本\" prop=\"db_version\">\n          <Input v-model=\"formValidate.db_version\" :maxlength=\"120\" placeholder=\"请输入\"></Input>\n        </FormItem>\n        \n        <FormItem label=\"引擎\" prop=\"db_engine\">\n          <Input v-model=\"formValidate.db_engine\" :maxlength=\"120\" placeholder=\"请输入\"></Input>\n        </FormItem>\n\n        <FormItem label=\"实例ID\" prop=\"instance_id\">\n          <Input v-model=\"formValidate.instance_id\" :maxlength=\"120\" placeholder=\"请输入实例ID，如果不填则随机生成\"></Input>\n        </FormItem>\n        \n        <FormItem label=\"数据库地址\">\n          <vue-json-editor  v-model=\"formValidate.db_address\" :show-btns=\"false\"  :mode=\"'code'\" lang=\"zh\" ></vue-json-editor>\n        </FormItem>\n        \n          <FormItem label=\"扩展字段\">\n          <vue-json-editor v-model=\"formValidate.ext_info\" :show-btns=\"false\" :mode=\"'code'\" lang=\"zh\" @json-change=\"onJsonChange\" @json-save=\"onJsonSave\" @has-error=\"onError\" />\n        </FormItem>\n\n        <FormItem>\n          <Button type=\"primary\" @click=\"handleSubmit('formValidate', false)\">保存</Button>\n          <Button @click=\"handleSubmit('formValidate', true)\" style=\"margin-left: 8px\">保存并继续</Button>\n          <Button @click=\"handleReset('formValidate')\" style=\"margin-left: 8px\">重置</Button>\n        </FormItem>\n      </Form>\n    </Drawer>\n  </div>\n</template>\n<script>\nimport vueJsonEditor from 'vue-json-editor'\nexport default {\n  name: 'mysqlAdd',\n  components: {\n    vueJsonEditor,\n  },\n  props: {\n    modalData: {\n      type: Object,\n      default: {}\n    },\n  },\n  data () {\n    return {\n      btnLoading: false,\n      ruleValidate: {\n        name: [{ required: true, message: '名称不能为空', trigger: 'blur' }],\n        cloud_name: [{ required: true, message: '不能为空', trigger: 'blur' }],\n      },\n      formValidate: {\n        cloud_name: 'qcloud',\n        db_engine: 'MySQL',\n        db_version: '5.7',\n        db_address: {\n          \"items\": [\n            {\n              \"ip\": \"10.0.70.145\",\n              \"port\": 3306,\n              \"type\": \"private\",\n              \"domain\": \"\",\n              \"endpoint_type\": \"Primary\"\n            },\n            {\n              \"ip\": \"\",\n              \"port\": 0,\n              \"type\": \"public\",\n              \"domain\": \"\",\n              \"endpoint_type\": \"Primary\"\n            }\n          ]\n        },\n        ext_info: {\"account_id\": \"3jcaSEJREKqaVLKSDdFCEt\", \"region\": \"ap-singapore\", \"zone\": \"ap-singapore-3\", \"state\": \"运行中\", \"db_class\": \"4C/8G/200G\", \"charge_type\": \"按量付费\", \"create_time\": \"2023-03-27 09:52:09\"}\n      }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('drawer-close')\n    },\n    handleClose () {\n     this.$emit('drawer-close')\n    },\n    handleSubmit (name, next) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.btnLoading = true\n          setTimeout(() => {\n            this.$emit('save-data',this.formValidate, this.modalData.action, next)\n            this.btnLoading = false\n          }, 1000)\n        } else {\n          this.$Message.error('表单校验不通过!')\n        }\n      })\n    },\n    // 获取最新数据\n    onJsonChange(val) {\n      console.log('更改了-->', val)\n      this.jsonErrFlag = false\n    },\n    onJsonSave(val) {\n      console.log('保存了--->', val)\n    },\n    onError(val) {\n      console.log('报错了--->', val)\n      this.jsonErrFlag = true\n    },\n  },\n  watch: {\n  },\n  computed: {\n  },\n  //\n  mounted () {\n  }\n  //\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mysql-add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mysql-add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mysql-add.vue?vue&type=template&id=22799d64&\"\nimport script from \"./mysql-add.vue?vue&type=script&lang=js&\"\nexport * from \"./mysql-add.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}