(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-b0338880"],{b8d5:function(e,a,t){},bfca:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"template__header"},[a("div",{staticClass:"template__header__search"},[a("Input",{staticClass:"template__header__search__input",attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchParams.searchVal,callback:function(a){e.$set(e.searchParams,"searchVal",a)},expression:"searchParams.searchVal"}}),a("Button",{staticClass:"template__header__search__button",on:{click:e.getTableData}},[e._v("搜索")])],1)]),a("Table",{ref:"selection",attrs:{stripe:"",size:"small",loading:e.tableLoading,columns:e.columns,data:e.tableData}}),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px",overflow:"hidden"}},[a("Page",{attrs:{total:e.pageTotal,current:e.searchParams.page_number,"page-size":e.searchParams.page_size,"page-size-opts":[12,35,50,100],"show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.handlePageSize}})],1)],1)},i=[],n=(t("d9e2"),t("30b3")),l={data(){return{buyRow:null,pageTotal:0,showDrawer:!1,showDeleteModal:!1,deleteModalLoading:!0,curRow:{},showModal:!1,showCloneModal:!1,cloneModalLoading:!0,tableLoading:!1,cloneFormValues:{name:""},columns:[{title:"日志ID",key:"id",width:100},{title:"UUID",key:"exec_uuid",width:240},{title:"业务名称",key:"business_name",align:"center",minWidth:100},{title:"模块名称",key:"module_name",width:100,align:"center"},{title:"日志信息",key:"message",width:800,align:"center"},{title:"日志时间",key:"create_time",width:160,align:"center"},{title:"操作人",key:"operator",width:160,align:"center"}],tableData:[],searchParams:{page_number:1,page_size:12,order_by:"id",order:"descend",searchVal:""}}},mounted(){this.getTableData()},methods:{handleAddddTemplate(){this.buyRow=null,this.showModal=!0},editSuccessCallback(){this.showDrawer=!1,this.getTableData()},closeDrawer(){this.showDrawer=!1},addSuccessCallback(){this.showModal=!1,this.getTableData()},closeAddModal(){this.showModal=!1},cloneModalCancel(){this.showCloneModal=!1},async colneModalOk(){try{await new Promise((e,a)=>{this.$refs.form.validate(t=>{t||a(new Error("表单校验失败，请检查")),e()})});const{account_id:e,vendor:a,cloud_region_id:t,res_type:s,region:i,zone:n,instance_type:l,tags:o,vpc_id:c,vpc_name:r,subnet_id:d,subnet_name:h,content:g}=this.curRow,u=await createOrderTemplate({name:this.cloneFormValues.name,account_id:e,vendor:a,cloud_region_id:t,res_type:s,region:i,zone:n,instance_type:l,tags:o,vpc_id:c,vpc_name:r,subnet_id:d,subnet_name:h,content:g,description:this.cloneFormValues.description||""});if(!u)throw new Error("请求错误，请重试");this.showCloneModal=!1,this.$Message.success(u.msg),this.getTableData()}catch(e){this.$Message.error(e.message),this.cloneModalLoading=!1}finally{this.$nextTick(()=>{this.cloneModalLoading=!0})}},async getTableData(){try{this.tableLoading=!0;const{data:e,count:a}=await Object(n["getAuditList"])(this.searchParams);this.pageTotal=a,this.tableData=e}catch(e){this.$Message.error(e.message)}finally{this.tableLoading=!1}},handleShowModal(e){this.showModal=e},handlePageSize(e){this.searchParams.page_size=e,this.getTableData()},changePage(e){this.searchParams.page_number=e,this.getTableData()}}},o=l,c=(t("cac3"),t("2877")),r=Object(c["a"])(o,s,i,!1,null,"4ec47914",null);a["default"]=r.exports},cac3:function(e,a,t){"use strict";t("b8d5")}}]);
//# sourceMappingURL=chunk-b0338880.b325b09b.js.map