(window["webpackJsonp_cmdb"]=window["webpackJsonp_cmdb"]||[]).push([["chunk-2d0c8c29"],{"55f9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("Modal",{attrs:{title:"预览主机",width:"950","mask-closable":!1,"footer-hide":!0},model:{value:e.dialog.show,callback:function(t){e.$set(e.dialog,"show",t)},expression:"dialog.show"}},[t("alert",[e._v("一共查询到:"+e._s(e.totalCount)+"条数据")]),t("Input",{staticStyle:{width:"330px",margin:"0px"},attrs:{clearable:"",placeholder:"输入实例ID、主机名、内网IP搜索",search:""},on:{"on-change":e.handleFilter},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter.apply(null,arguments)}},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}}),t("div",{staticStyle:{"margin-top":"5px"}},[t("Table",{ref:"table",attrs:{stripe:"",border:"",size:"small",columns:e.columns,data:e.tableData}})],1),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("Page",{attrs:{total:e.totalCount,current:e.pageNum,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.handlerChangePage}})],1)],1)],1)},r=[],s={name:"PreViewHost",props:{dialog:{type:Object,default:{}}},data(){return{serverList:[],serverFilteredList:[],tableData:[],searchVal:"",pageTotal:0,pageSize:10,pageNum:1,filterState:void 0,filterAgentStatus:void 0,columns:[{title:"实例ID",key:"instance_id",align:"center",sortable:!0},{title:"主机名称",key:"name",align:"center",minWidth:100,sortable:!0},{title:"内网IP",key:"inner_ip",align:"center",width:140,sortable:!0},{title:"外网IP",key:"outer_ip",align:"center",width:140,sortable:!0},{title:"运行状态",key:"state",align:"center",width:135,sortable:!0,render:(e,t)=>{const{row:a}=t,i="运行中"===a.state?"success":"关机"===a.state?"error":"创建中"===a.state?"primary":"error",r="运行中"===a.state?"运行中":"关机"===a.state?"已关机":"创建中"===a.state?"创建中":"Fail";return e("Tag",{props:{type:"dot",color:i}},r)},filterMultiple:!1,filters:[{label:"运行中",value:"运行中"},{label:"已关机",value:"关机"},{label:"创建中",value:"创建中"},{label:"Fail",value:"Fail"}],filterRemote:(e,t)=>{this.filterState=e[0],this.handleFilter()}},{title:"Agent状态",key:"agent_status",align:"center",width:135,sortable:!0,render:(e,t)=>{const a=t.row.agent_status;return e("div","1"==a?[e("Tag",{props:{color:"green",type:"border"}},"在线")]:"2"==a?[e("Tag",{props:{color:"red"}},"离线")]:[e("Tag",{props:{color:"error"}},"未知")])},filterMultiple:!1,filters:[{label:"在线",value:"1"},{label:"离线",value:"2"},{label:"未知",value:"error"}],filterRemote:(e,t)=>{this.filterAgentStatus=e[0],this.handleFilter()}}]}},computed:{totalCount(){return this.serverFilteredList.length}},watch:{"dialog.show":function(e){e&&(this.initData(),this.setCurrentPageData())}},methods:{handlerChangePage(e){this.pageNum=e,this.setCurrentPageData()},setCurrentPageData(){const e=(this.pageNum-1)*this.pageSize,t=this.pageNum*this.pageSize;this.tableData=this.serverFilteredList.slice(e,t)},checkExecList(e){return(e.instance_id.indexOf(this.searchVal)>=0||e.name.indexOf(this.searchVal)>=0||e.inner_ip.indexOf(this.searchVal)>=0)&&(!this.filterState||e.state===this.filterState||"Fail"===this.filterState&&!["运行中","关机","创建中"].includes(e.state))&&(!this.filterAgentStatus||e.agent_status===this.filterAgentStatus||"error"===this.filterAgentStatus&&!["1","2"].includes(e.agent_status))},handleFilter(){this.pageNum=1,this.searchVal||this.filterState||this.filterAgentStatus?this.serverFilteredList=this.serverList.filter(this.checkExecList):this.serverFilteredList=this.serverList,this.setCurrentPageData()},initData(){this.serverFilteredList=this.serverList,this.pageNum=1,this.pageSize=10,this.searchVal="",this.filterState=void 0,this.filterAgentStatus=void 0,this.$refs.table.handleFilterReset(4),this.$refs.table.handleFilterReset(5)}}},l=s,n=a("2877"),o=Object(n["a"])(l,i,r,!1,null,null,null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0c8c29.7329d3a7.js.map