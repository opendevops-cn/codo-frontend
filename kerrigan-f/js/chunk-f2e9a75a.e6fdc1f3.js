(window["webpackJsonp_kerrigan"]=window["webpackJsonp_kerrigan"]||[]).push([["chunk-f2e9a75a"],{"36db":function(t,e,a){},a0bc:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return i}));var r=a("66df"),o=function(t){return r["a"].request({url:"/api/kerrigan/v1/conf/project/",method:"get",params:t})},n=function(t){return r["a"].request({url:"/api/kerrigan/v1/conf/project/",method:"post",data:t})},c=function(t){return r["a"].request({url:"/api/kerrigan/v1/conf/project/",method:"put",data:t})},i=function(t){return r["a"].request({url:"/api/kerrigan/v1/conf/project/",method:"patch",data:t})}},c4cd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"confd-def"},[e("Row",[e("i-col",{attrs:{span:"24"}},[e("Input",{staticStyle:{padding:"6px",width:"100%"},attrs:{autofocus:"autofocus",placeholder:"输入名称或者代号进行搜索"},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}})],1),e("i-col",{attrs:{lg:4,md:6,sm:8,xs:12}},[e("Card",{staticStyle:{margin:"0 5px 10px","text-align":"center",background:"#aee888"}},[e("a",{on:{click:function(e){return t.handlerCreate()}}},[e("Icon",{attrs:{type:"md-add"}}),e("p",[t._v("新建项目")])],1)])],1),t._l(t.project_list,(function(a){return e("i-col",{key:"custom-icon-".concat(a.project_code,"-").concat(t._uid),attrs:{lg:4,md:6,sm:8,xs:12}},[e("Card",{staticStyle:{margin:"0 5px 10px","text-align":"center"}},[e("a",{on:{click:function(e){return t.handlerCheck(a.project_code,a.etcd_conf)}}},[e("p",[t._v(t._s(a.project_code))]),e("p",[t._v(t._s(a.project_name))])])])],1)})),e("i-col",{attrs:{lg:4,md:6,sm:8,xs:12}},[e("Card",{staticStyle:{margin:"0 5px 10px","text-align":"center"}},[e("a",{on:{click:function(e){return t.handlerMore()}}},[e("Icon",{attrs:{type:"ios-more"}}),e("p",[t._v("查看更多")])],1)])],1)],2),e("Add",{attrs:{dialog:t.dialog,formData:t.formData},on:{"e-update":t.getProjectData,"e-close":t.closeModal}})],1)},o=[],n=function(){var t=this,e=t._self._c;return e("div",[e("Modal",{attrs:{width:"600px;",title:t.dialog.title,loading:!0,"footer-hide":!0},on:{"on-cancel":t.handleCancel},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[e("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate,"label-width":80}},[e("FormItem",{attrs:{label:"项目代号",prop:"project_code"}},[e("Input",{attrs:{maxlength:18,placeholder:"项目英文名称或者代号"},model:{value:t.formData.project_code,callback:function(e){t.$set(t.formData,"project_code",e)},expression:"formData.project_code"}})],1),e("FormItem",{attrs:{label:"项目名称",prop:"project_name"}},[e("Input",{attrs:{maxlength:18,placeholder:"项目中文名"},model:{value:t.formData.project_name,callback:function(e){t.$set(t.formData,"project_name",e)},expression:"formData.project_name"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formData")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formData")}}},[t._v("重置")])],1)],1)],1)],1)},c=[],i=(a("7f7f"),a("a0bc")),s={name:"add",data:function(){return{ruleValidate:{project_code:[{required:!0,message:"项目代号不能为空",trigger:"blur"},{type:"string",max:18,message:"超出最大长度",trigger:"change"}],project_name:[{required:!0,message:"项目名称不能为空",trigger:"blur"},{type:"string",max:18,message:"超出最大长度",trigger:"change"}]}}},methods:{handleCancel:function(){this.$emit("e-close")},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?Object(i["a"])(e.formData).then((function(t){0===t.data.code?(e.$Message.success({content:t.data.msg,duration:3}),e.$emit("e-close"),e.$emit("e-update")):e.$Message.error({content:t.data.msg,duration:3})})).catch((function(t){e.$Message.error({content:JSON.stringify(t.response.data),duration:10})})):e.$Message.error({content:"请检查必选项",duration:3})}))},handleReset:function(t){this.$refs[t].resetFields()}},props:{dialog:Object,formData:Object}},l=s,d=a("2877"),u=Object(d["a"])(l,n,c,!1,null,null,null),p=u.exports,f={name:"add",components:{Add:p},data:function(){return{project_list:[],dialog:{show:!1,title:"添加项目"},formData:{project_code:null,project_name:null},project_limit:50,searchVal:""}},methods:{handlerCreate:function(){this.dialog.show=!0},handlerMore:function(){this.project_limit=this.project_limit+30,this.getProjectData()},handlerCheck:function(t,e){e&&(e=JSON.stringify(e));var a={name:"confConfig",params:{etcd_conf:e},query:{project_code:t},meta:{title:"项目配置-".concat(t)}};this.$router.push(a)},getProjectData:function(){var t=this;Object(i["c"])({limit:this.project_limit,key:this.searchVal}).then((function(e){0===e.data.code?t.project_list=e.data.data:t.$Message.error(e.data.msg)})).catch((function(e){t.$Message.error({content:JSON.stringify(e.response.data),duration:10})}))},closeModal:function(){this.formData={project_code:null,project_name:null},this.dialog.show=!1}},watch:{searchVal:function(t){this.getProjectData()}},created:function(){this.getProjectData()}},m=f,h=(a("fd19"),Object(d["a"])(m,r,o,!1,null,"6b8d28ab",null));e["default"]=h.exports},fd19:function(t,e,a){"use strict";a("36db")}}]);