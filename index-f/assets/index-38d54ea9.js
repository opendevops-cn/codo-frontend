import{m as me,t as le,u as _e,_ as he,a as Re,b as Be,E as H,c as Le,d as Oe,e as ze,f as Q,g as Ae,p as Fe,U as ge,h as ue,l as Ie,i as Me,j as Ue}from"./_plugin-vue_export-helper-c32ba3f7.js";import{c as de,b as De,i as Ve,M as Ke,F as ve}from"./FormLogin-ca68f3f1.js";import{c as qe,i as se,a as oe,s as He,b as W,d as ie,e as M,f as re,u as G,r as h,w as O,n as D,o as A,g as U,h as ye,j as k,k as Qe,l as J,m as V,p as ce,q as je,t as v,v as We,x as we,y as fe,z as Ge,A as Je,B as Xe,C as Ce,D as Ne,E as Ye,F as Ze,G as et,H as tt,I as at,J as st,K as nt,L as z,M as be,N as ot,O as lt,P as q,Q as it,R as rt}from"./index-b3afacdb.js";const F=e=>qe(e),j=e=>{const s=se(e)?e:[e],l=[];return s.forEach(o=>{var u;se(o)?l.push(...j(o)):oe(o)&&se(o.children)?l.push(...j(o.children)):(l.push(o),oe(o)&&((u=o.component)!=null&&u.subTree)&&l.push(...j(o.component.subTree)))}),l},ct=(e,s,l)=>j(e.subTree).filter(t=>{var i;return oe(t)&&((i=t.type)==null?void 0:i.name)===s&&!!t.component}).map(t=>t.component.uid).map(t=>l[t]).filter(t=>!!t),ut=(e,s)=>{const l={},o=He([]);return{children:o,addChild:i=>{l[i.uid]=i,o.value=ct(e,s,l)},removeChild:i=>{delete l[i],o.value=o.value.filter(x=>x.uid!==i)}}},X=Symbol("tabsRootContextKey"),dt=W({tabs:{type:ie(Array),default:()=>me([])}}),Ee="ElTabBar",vt=M({name:Ee}),ft=M({...vt,props:dt,setup(e,{expose:s}){const l=e,o=J(),u=re(X);u||le(Ee,"<el-tabs><el-tab-bar /></el-tabs>");const t=G("tabs"),i=h(),x=h(),f=()=>{let g=0,b=0;const p=["top","bottom"].includes(u.props.tabPosition)?"width":"height",r=p==="width"?"x":"y",B=r==="x"?"left":"top";return l.tabs.every(S=>{var N,n;const y=(n=(N=o.parent)==null?void 0:N.refs)==null?void 0:n[`tab-${S.uid}`];if(!y)return!1;if(!S.active)return!0;g=y[`offset${F(B)}`],b=y[`client${F(p)}`];const a=window.getComputedStyle(y);return p==="width"&&(l.tabs.length>1&&(b-=Number.parseFloat(a.paddingLeft)+Number.parseFloat(a.paddingRight)),g+=Number.parseFloat(a.paddingLeft)),!1}),{[p]:`${b}px`,transform:`translate${F(r)}(${g}px)`}},w=()=>x.value=f();return O(()=>l.tabs,async()=>{await D(),w()},{immediate:!0}),_e(i,()=>w()),s({ref:i,update:w}),(g,b)=>(A(),U("div",{ref_key:"barRef",ref:i,class:ye([k(t).e("active-bar"),k(t).is(k(u).props.tabPosition)]),style:Qe(x.value)},null,6))}});var bt=he(ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const pt=W({panes:{type:ie(Array),default:()=>me([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),mt={tabClick:(e,s,l)=>l instanceof Event,tabRemove:(e,s)=>s instanceof Event},pe="ElTabNav",_t=M({name:pe,props:pt,emits:mt,setup(e,{expose:s,emit:l}){const o=J(),u=re(X);u||le(pe,"<el-tabs><tab-nav /></el-tabs>");const t=G("tabs"),i=Re(),x=Be(),f=h(),w=h(),g=h(),b=h(),p=h(!1),r=h(0),B=h(!1),S=h(!0),N=V(()=>["top","bottom"].includes(u.props.tabPosition)?"width":"height"),n=V(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${r.value}px)`})),y=()=>{if(!f.value)return;const d=f.value[`offset${F(N.value)}`],m=r.value;if(!m)return;const c=m>d?m-d:0;r.value=c},a=()=>{if(!f.value||!w.value)return;const d=w.value[`offset${F(N.value)}`],m=f.value[`offset${F(N.value)}`],c=r.value;if(d-c<=m)return;const P=d-c>m*2?c+m:d-m;r.value=P},_=async()=>{const d=w.value;if(!p.value||!g.value||!f.value||!d)return;await D();const m=g.value.querySelector(".is-active");if(!m)return;const c=f.value,P=["top","bottom"].includes(u.props.tabPosition),T=m.getBoundingClientRect(),E=c.getBoundingClientRect(),L=P?d.offsetWidth-E.width:d.offsetHeight-E.height,$=r.value;let C=$;P?(T.left<E.left&&(C=$-(E.left-T.left)),T.right>E.right&&(C=$+T.right-E.right)):(T.top<E.top&&(C=$-(E.top-T.top)),T.bottom>E.bottom&&(C=$+(T.bottom-E.bottom))),C=Math.max(C,0),r.value=Math.min(C,L)},R=()=>{var d;if(!w.value||!f.value)return;e.stretch&&((d=b.value)==null||d.update());const m=w.value[`offset${F(N.value)}`],c=f.value[`offset${F(N.value)}`],P=r.value;c<m?(p.value=p.value||{},p.value.prev=P,p.value.next=P+c<m,m-P<c&&(r.value=m-c)):(p.value=!1,P>0&&(r.value=0))},Y=d=>{const m=d.code,{up:c,down:P,left:T,right:E}=Q;if(![c,P,T,E].includes(m))return;const L=Array.from(d.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),$=L.indexOf(d.target);let C;m===T||m===c?$===0?C=L.length-1:C=$-1:$<L.length-1?C=$+1:C=0,L[C].focus({preventScroll:!0}),L[C].click(),K()},K=()=>{S.value&&(B.value=!0)},Z=()=>B.value=!1;return O(i,d=>{d==="hidden"?S.value=!1:d==="visible"&&setTimeout(()=>S.value=!0,50)}),O(x,d=>{d?setTimeout(()=>S.value=!0,50):S.value=!1}),_e(g,R),ce(()=>setTimeout(()=>_(),0)),je(()=>R()),s({scrollToActiveTab:_,removeFocus:Z}),O(()=>e.panes,()=>o.update(),{flush:"post",deep:!0}),()=>{const d=p.value?[v("span",{class:[t.e("nav-prev"),t.is("disabled",!p.value.prev)],onClick:y},[v(H,null,{default:()=>[v(Le,null,null)]})]),v("span",{class:[t.e("nav-next"),t.is("disabled",!p.value.next)],onClick:a},[v(H,null,{default:()=>[v(Oe,null,null)]})])]:null,m=e.panes.map((c,P)=>{var T,E,L,$;const C=c.uid,ee=c.props.disabled,te=(E=(T=c.props.name)!=null?T:c.index)!=null?E:`${P}`,ae=!ee&&(c.isClosable||e.editable);c.index=`${P}`;const $e=ae?v(H,{class:"is-icon-close",onClick:I=>l("tabRemove",c,I)},{default:()=>[v(ze,null,null)]}):null,xe=(($=(L=c.slots).label)==null?void 0:$.call(L))||c.props.label,ke=!ee&&c.active?0:-1;return v("div",{ref:`tab-${C}`,class:[t.e("item"),t.is(u.props.tabPosition),t.is("active",c.active),t.is("disabled",ee),t.is("closable",ae),t.is("focus",B.value)],id:`tab-${te}`,key:`tab-${C}`,"aria-controls":`pane-${te}`,role:"tab","aria-selected":c.active,tabindex:ke,onFocus:()=>K(),onBlur:()=>Z(),onClick:I=>{Z(),l("tabClick",c,te,I)},onKeydown:I=>{ae&&(I.code===Q.delete||I.code===Q.backspace)&&l("tabRemove",c,I)}},[xe,$e])});return v("div",{ref:g,class:[t.e("nav-wrap"),t.is("scrollable",!!p.value),t.is(u.props.tabPosition)]},[d,v("div",{class:t.e("nav-scroll"),ref:f},[v("div",{class:[t.e("nav"),t.is(u.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(u.props.tabPosition))],ref:w,style:n.value,role:"tablist",onKeydown:Y},[e.type?null:v(bt,{ref:b,tabs:[...e.panes]},null),m])])])}}}),ht=W({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ie(Function),default:()=>!0},stretch:Boolean}),ne=e=>Ge(e)||Je(e),gt={[ge]:e=>ne(e),tabClick:(e,s)=>s instanceof Event,tabChange:e=>ne(e),edit:(e,s)=>["remove","add"].includes(s),tabRemove:e=>ne(e),tabAdd:()=>!0};var yt=M({name:"ElTabs",props:ht,emits:gt,setup(e,{emit:s,slots:l,expose:o}){var u,t;const i=G("tabs"),{children:x,addChild:f,removeChild:w}=ut(J(),"ElTabPane"),g=h(),b=h((t=(u=e.modelValue)!=null?u:e.activeName)!=null?t:"0"),p=n=>{b.value=n,s(ge,n),s("tabChange",n)},r=async n=>{var y,a,_;if(!(b.value===n||fe(n)))try{await((y=e.beforeLeave)==null?void 0:y.call(e,n,b.value))!==!1&&(p(n),(_=(a=g.value)==null?void 0:a.removeFocus)==null||_.call(a))}catch{}},B=(n,y,a)=>{n.props.disabled||(r(y),s("tabClick",n,a))},S=(n,y)=>{n.props.disabled||fe(n.props.name)||(y.stopPropagation(),s("edit",n.props.name,"remove"),s("tabRemove",n.props.name))},N=()=>{s("edit",void 0,"add"),s("tabAdd")};return Ae({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},V(()=>!!e.activeName)),O(()=>e.activeName,n=>r(n)),O(()=>e.modelValue,n=>r(n)),O(b,async()=>{var n;await D(),(n=g.value)==null||n.scrollToActiveTab()}),We(X,{props:e,currentName:b,registerPane:f,unregisterPane:w}),o({currentName:b}),()=>{const n=e.editable||e.addable?v("span",{class:i.e("new-tab"),tabindex:"0",onClick:N,onKeydown:_=>{_.code===Q.enter&&N()}},[v(H,{class:i.is("icon-plus")},{default:()=>[v(Fe,null,null)]})]):null,y=v("div",{class:[i.e("header"),i.is(e.tabPosition)]},[n,v(_t,{ref:g,currentName:b.value,editable:e.editable,type:e.type,panes:x.value,stretch:e.stretch,onTabClick:B,onTabRemove:S},null)]),a=v("div",{class:i.e("content")},[we(l,"default")]);return v("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[y,a]:[a,y]])}}});const wt=W({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Ct=["id","aria-hidden","aria-labelledby"],Pe="ElTabPane",Nt=M({name:Pe}),Et=M({...Nt,props:wt,setup(e){const s=e,l=J(),o=Xe(),u=re(X);u||le(Pe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=G("tab-pane"),i=h(),x=V(()=>s.closable||u.props.closable),f=ue(()=>{var r;return u.currentName.value===((r=s.name)!=null?r:i.value)}),w=h(f.value),g=V(()=>{var r;return(r=s.name)!=null?r:i.value}),b=ue(()=>!s.lazy||w.value||f.value);O(f,r=>{r&&(w.value=!0)});const p=Ce({uid:l.uid,slots:o,props:s,paneName:g,active:f,index:i,isClosable:x});return ce(()=>{u.registerPane(p)}),Ne(()=>{u.unregisterPane(p.uid)}),(r,B)=>k(b)?Ye((A(),U("div",{key:0,id:`pane-${k(g)}`,class:ye(k(t).b()),role:"tabpanel","aria-hidden":!k(f),"aria-labelledby":`tab-${k(g)}`},[we(r.$slots,"default")],10,Ct)),[[Ze,k(f)]]):et("v-if",!0)}});var Te=he(Et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Pt=tt(yt,{TabPane:Te}),Tt=at(Te);const Se=e=>(it("data-v-90ee959a"),e=e(),rt(),e),St={class:"select-none"},$t=["src"],xt=Se(()=>z("div",{class:"absolute flex-c right-5 top-3"},null,-1)),kt={class:"login-container"},Rt={class:"img"},Bt={class:"login-box"},Lt={class:"login-form"},Ot={key:0,class:"icon-saomadenglu01-copy"},zt={key:1,class:"icon-saomadenglu"},At=Se(()=>z("h2",{class:"outline-none"},"CODO一站式运维",-1)),Ft={key:1,id:"login_container"},It=M({__name:"index",setup(e){const s=h("base"),l=h(!1),o=h(!0),u=h();let t=h(),i=st().currentRoute.value.query.c_url||"/";const x=(a,_)=>{s.value=a.paneName},f=Ce({username:"",password:""}),w=h(),g=()=>{o.value=!o.value};let b=h("340");const p=async a=>{l.value=!0,a&&await a.validate((_,R)=>{if(!_)return l.value=!1,R})};function r({code:a}){a==="Enter"&&p(u.value)}O(o,()=>{o.value||D(()=>{S(b.value)})}),O(b,()=>{o.value||D(()=>{S(b.value)})});const B=()=>{const a=new URLSearchParams(window.location.search),_=a.get("code");if(_)try{Ie({code:_,c_url:a.get("state")})}finally{l.value=!1}},S=a=>{const _=document.querySelector("iframe");_&&_.remove(),t.value=QRLogin({id:"login_container",goto:`https://passport.feishu.cn/suite/passport/oauth/authorize?client_id=${de.FEISHU_APP_ID}&redirect_uri=${encodeURIComponent(window.location.origin+window.location.pathname)}&response_type=code&state=${i}`,width:a,height:a})},N=async a=>{a.login_type=s.value;try{Me(a)}finally{l.value=!1}},n=function(a){console.info(a);var _=a.origin;if(t.value&&t.value.matchOrigin(_)){var R=a.data;window.location.href=`https://passport.feishu.cn/suite/passport/oauth/authorize?client_id=${de.FEISHU_APP_ID}&redirect_uri=${encodeURIComponent(window.location.origin+window.location.pathname)}&response_type=code&state=STATE&tmp_code=${R}`}};typeof window.addEventListener<"u"?window.addEventListener("message",n,!1):typeof window.attachEvent<"u"&&window.attachEvent("onmessage",n);const y=()=>{var a;b.value=(a=w.value)==null?void 0:a.offsetWidth};return ce(()=>{B(),window.addEventListener("resize",y),window.document.addEventListener("keypress",r)}),Ne(()=>{window.removeEventListener("resize",y)}),nt(()=>{window.document.removeEventListener("keypress",r)}),(a,_)=>{const R=Tt,Y=Pt;return A(),U("div",St,[z("img",{src:k(De),class:"wave"},null,8,$t),xt,z("div",kt,[z("div",Rt,[(A(),be(ot(lt(k(Ve)))))]),z("div",Bt,[z("div",Lt,[z("span",{class:"iconfont",onClick:g},[o.value?(A(),U("span",Ot)):(A(),U("span",zt))]),v(k(Ke),{delay:300},{default:q(()=>[At]),_:1}),z("div",{ref_key:"loginResize",ref:w},[o.value?(A(),be(Y,{key:0,modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=K=>s.value=K),class:"demo-tabs",onTabClick:x},{default:q(()=>[v(R,{label:"基础认证",name:"base"},{default:q(()=>[v(ve,{ruleForm:f,onLogin:N},null,8,["ruleForm"])]),_:1}),v(R,{label:"LDAP",name:"ldap"},{default:q(()=>[v(ve,{ruleForm:f,onLogin:N},null,8,["ruleForm"])]),_:1})]),_:1},8,["modelValue"])):(A(),U("div",Ft))],512)])])])])}}});const Vt=Ue(It,[["__scopeId","data-v-90ee959a"]]);export{Vt as default};
