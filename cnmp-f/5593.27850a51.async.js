"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[5593],{61159:function(e,t,n){var i=n(24680),a=n(65095),s=n(83408),l=n(61960),o=n(56031),r=n(97500),c=n(32699),d=n(50959),u=n(22241),m=n(99182),p=n(2177),h=n(24831),v=n(32779),x=n(59409),j=n(5695),y=n(19175),f=n(11527),_=[a.N,s.N,l.N],g=[u.N,m.N,p.N,h.N,v.N,x.N,j.N];o.D([].concat(_,g,[y.N]));var b={tooltip:{confine:!0},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{},showTitle:!1}};t.Z=function(e){var t=e.option,n=e.opts,a=e.onEvents,s=e.onChartReady,l=e.theme,o=e.style,u=e.showLoading,m=void 0!==u&&u,p=(0,d.useRef)(),h=(0,d.useMemo)((function(){return(0,c.merge)({},b,t)}),[t]);return(0,d.useEffect)((function(){p.current&&p.current.getEchartsInstance().setOption(h)}),[h]),(0,f.jsx)(i.Z,{ref:p,echarts:r,option:h,notMerge:!0,lazyUpdate:!1,theme:l,onChartReady:s,onEvents:a,opts:n,showLoading:m,style:o})}},39383:function(e,t,n){n.d(t,{L:function(){return i}});var i={deployment:"Deployment","clone-set":"CloneSet","game-server-set":"GameServerSet","stateful-set":"StatefulSet","daemon-set":"DaemonSet","sidecar-set":"SideCarSet",pod:"Pod",service:"Service",ingress:"Ingress"}},91199:function(e,t,n){n.d(t,{J:function(){return u}});var i,a=n(90228),s=n.n(a),l=n(26068),o=n.n(l),r=n(87999),c=n.n(r),d=n(15268),u={deployment:{detail:d.Ke,replicasetList:d.hX,rollback:d.KZ,delete:d.Ax,restart:d.$l,scale:d.po,scaleStream:void 0,upgradeStrategy:void 0},"clone-set":{detail:d.iP,replicasetList:d.qr,rollback:d.nV,delete:d.VE,restart:d.pk,scale:d.YM,scaleStream:d.kd,podDelete:d.lo,upgradeStrategy:d.S8},"game-server-set":{detail:d.dq,replicasetList:d.lr,rollback:d.MC,delete:d.L5,restart:d._U,scale:d.lq,scaleStream:d.b_,upgradeStrategy:d.ZG,podDelete:d.lo},"stateful-set":{detail:d.dd,replicasetList:d.tR,rollback:d.Cq,delete:d.iU,restart:d.R,scale:d.K9,scaleStream:void 0,upgradeStrategy:void 0,podDelete:d.lo},"daemon-set":{detail:d.x2,replicasetList:d.Xi,rollback:d.ti,delete:d.JY,restart:d.Bw,scale:d.Xx,scaleStream:void 0,upgradeStrategy:void 0},pod:{detail:d.j0,replicasetList:d.Xi,rollback:d.ti,delete:d.JY,restart:d.Bw,scale:d.Xx,scaleStream:void 0,upgradeStrategy:void 0},"sidecar-set":{detail:(i=c()(s()().mark((function e(t){return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.VI)(t).then((function(e){var t,n,i,a,s,l;return{detail:o()(o()({},e.detail),{},{status:{readyReplicas:null===(t=e.detail)||void 0===t?void 0:t.matched_pods,replicas:null===(n=e.detail)||void 0===n?void 0:n.matched_pods,updatedReplicas:null===(i=e.detail)||void 0===i?void 0:i.updated_pods,availableReplicas:null===(a=e.detail)||void 0===a?void 0:a.updated_ready_pods},spec_replicas:null===(s=e.detail)||void 0===s?void 0:s.matched_pods,replicas:null===(l=e.detail)||void 0===l?void 0:l.ready_pods})}})));case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),replicasetList:void 0,rollback:void 0,delete:d.FJ,restart:void 0,scale:void 0,scaleStream:void 0,upgradeStrategy:void 0}}},56292:function(e,t,n){n.d(t,{Z:function(){return ye}});var i=n(48305),a=n.n(i),s=n(15268),l=n(83304),o=n(72180),r=n(3885),c=n(69180),d=n(67813),u="edit-btn___Ph09H",m=n(11527),p=function(e){var t=e.current,n=e.onChange,i=e.value,a=e.disabled;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(r.Z,{children:[!a&&(0,m.jsx)(c.ZP,{type:"link",className:u,disabled:i<=0,onClick:function(){n(i-1)},children:(0,m.jsx)(l.Z,{})}),(0,m.jsx)(d.Z,{percent:t/i*100,format:function(){return(0,m.jsxs)("span",{style:{color:"#fff"},children:[t,"/",i]})},percentPosition:{align:"center",type:"inner"},size:[140,16],strokeColor:{"0%":"#22c55e","100%":"#34d399"}}),!a&&(0,m.jsx)(c.ZP,{type:"link",className:u,onClick:function(){n(i+1)},children:(0,m.jsx)(o.Z,{})})]})})},h=n(34654),v=n(39383),x=n(91199),j=n(56765),y=n(38218),f=n(81901),_=n(10534),g=n(47212),b=n(70334),Z=n(62193),k=n(4561),w=n(73634),N=n(82187),S=n.n(N),P=n(50959),C=n(26068),L=n.n(C),R=n(61159),E=n(79890),T=n(27274),M=n(36954),D=n(61562),I=n(84916),A=n(1295),H=n(57562),O=n(21697),Y=n(98632),J=n(78290),q=n(32643),F=n(3827),z=n(18772),U=function(e){var t=e.name,n=e.onCancel,i=e.onOk,s=(0,P.useState)("DELETE_ONLY"),l=a()(s,2),o=l[0],c=l[1];return(0,m.jsxs)(F.Z,{open:!0,onCancel:n,onOk:function(){i(o)},title:"【".concat(t,"】删除"),children:[(0,m.jsxs)("p",{style:{marginTop:20},children:["确定删除 ",t,"?"]}),(0,m.jsxs)(r.Z,{style:{paddingLeft:10},children:["副本数",(0,m.jsxs)(z.ZP.Group,{value:o,onChange:function(e){c(e.target.value)},children:[(0,m.jsx)(z.ZP,{value:"DELETE_ONLY",children:"删除pod（副本数-1）"}),(0,m.jsx)(z.ZP,{value:"DELETE_AND_RECREATE",children:"重建pod(副本数不变)"})]})]}),"DELETE_AND_RECREATE"===o&&(0,m.jsx)("p",{children:"未修改副本数，pod删除后会被重建，可能由于资源不足等原因导致重建失败"})]})},B=n(68413),W=n(88253),V=n(89169),G=n(63983),K=n(72596),X=n(91894),Q=n(19338),$=n(26814),ee=n(97536),te=n(5726),ne=n.n(te),ie=n(32699),ae=n.n(ie),se=n(4578),le=W.Z.Title;function oe(e){if(!e)return"";var t=ne()().diff(ne()(Number(e)),"minute"),n="",i=Math.floor(t/1440);i>0&&(n+="".concat(i,"天"));var a=Math.floor(t%1440/60);0===a&&""===n||(n+="".concat(a,"时"));var s=t%60;return 0===s&&""===n||(n+="".concat(s,"分")),""===n?"1分钟内":n}var re=function(e,t){return{grid:{top:10,bottom:0,left:30,right:10},xAxis:{type:"category",boundaryGap:!1,data:e.map((function(e){return e[0]})),axisLabel:{rotate:30,formatter:function(e){return ne()(Number(e)).format("HH:mm")}}},tooltip:{trigger:"axis",formatter:function(e){var t=ne()(Number(e[0].name)).format("YYYY-MM-DD HH:mm"),n=e[0].value,i=e[0].marker;return"".concat(t,"<br/>").concat(i," Value: ").concat(n)}},yAxis:{type:"value",splitNumber:3,name:null==t?void 0:t.yAxisName,nameTextStyle:{fontSize:14,padding:[0,0,0,20]},axisLabel:{align:"right",borderWidth:1,rich:{value:{width:200}}}},color:null!=t&&t.color?[null==t?void 0:t.color]:"#0fbe8f",series:[{data:e.map((function(e){return e[1]})),type:"line",smooth:!0,symbol:"none",areaStyle:{opacity:.2}}]}},ce={Running:"var(--color-success)",Succeeded:"var(--color-success)",Failed:"var(--color-error)"},de={running:"success",created:"success"},ue=function(e){var t,n,i,l,o,d,u,p,v,x,f,_,g=e.data,w=e.type,N=e.showBelong,S=e.style,C=(0,y.useParams)(),z=C.clusterName,W=void 0===z?"":z,te=C.namespace,ie=void 0===te?"":te,ue=C.name,me=void 0===ue?"":ue,pe=(0,P.useRef)(null),he=(0,B.Z)(pe);console.log("size",he);var ve=ie||(null==g?void 0:g.namespace)||"",xe=(0,y.useLocation)(),je=(0,h.J)(),ye=(0,P.useCallback)((function(e,t){function n(){var n=e.getOption(t.editor.EditorOption.lineHeight),i=n*e.getModel().getLineCount(),a=1*n,s=30*n,l=Math.max(a,Math.min(i,s));e.layout({height:l})}e.getModel().onDidChangeContent((function(){n()})),n()}),[]),fe=(0,P.useState)(),_e=a()(fe,2),ge=_e[0],be=_e[1],Ze=(0,P.useState)(),ke=a()(Ze,2),we=ke[0],Ne=ke[1],Se=[{icon:D.Z,content:function(e){var t,n,i,a;return(0,m.jsxs)("div",{className:se.Z.block,style:{width:600},children:[(0,m.jsx)(le,{level:5,children:"资源请求/限制"}),(0,m.jsx)(T.Z,{columns:[{title:"名称",dataIndex:"name"},{title:"请求Request",dataIndex:"request"},{title:"限制Limit",dataIndex:"limit"}],dataSource:[{name:"CPU",request:null==e||null===(t=e.requests)||void 0===t?void 0:t.cpu,limit:null==e||null===(n=e.limits)||void 0===n?void 0:n.cpu},{name:"内存",request:null==e||null===(i=e.requests)||void 0===i?void 0:i.memory,limit:null==e||null===(a=e.limits)||void 0===a?void 0:a.memory}],hideTitle:!0,tableProps:{pagination:!1}})]})},key:"resources"},{icon:I.Z,content:function(e){return(0,m.jsxs)("div",{className:se.Z.block,style:{width:600},children:[(0,m.jsx)(le,{level:5,children:"端口映射"}),(0,m.jsx)(T.Z,{columns:[{title:"名称",dataIndex:"name"},{title:"协议",dataIndex:"protocol"},{title:"容器端口",dataIndex:"containerPort"},{title:"宿主机端口",dataIndex:"hostPort"}],dataSource:e,hideTitle:!0,tableProps:{pagination:!1}})]})},key:"ports"},{icon:A.Z,content:function(e){return(0,m.jsxs)("div",{className:se.Z.block,style:{width:600},children:[(0,m.jsx)(le,{level:5,children:"环境变量"}),(0,m.jsx)(T.Z,{columns:[{title:"Key",dataIndex:"name"},{title:"Value",dataIndex:"value"}],dataSource:e,hideTitle:!0,tableProps:{pagination:!1}})]})},key:"env"},{icon:H.Z,content:function(e){return(0,m.jsxs)("div",{className:se.Z.block,style:{width:600},children:[(0,m.jsx)(le,{level:5,children:"数据卷挂载"}),e.map((function(e){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.Z,{style:{marginTop:10},children:e.read_only?(0,m.jsx)(V.Z,{color:"orange",children:"只读"}):(0,m.jsx)(V.Z,{color:"green",children:"读写"})}),(0,m.jsx)(q.ZP,{theme:"vs-dark",language:"yaml",value:e.content,options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",scrollBeyondLastLine:!1},className:se.Z.editor,onMount:ye})]})}))]})},key:"volume_mounts"},{icon:O.Z,content:function(e){return(0,m.jsxs)("div",{className:se.Z.block,style:{width:600},children:[(0,m.jsx)(le,{level:5,children:"探针"}),e.map((function(e){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.Z,{style:{marginTop:10},children:(0,m.jsx)(V.Z,{color:e.color,children:e.name})}),(0,m.jsx)(q.ZP,{theme:"vs-dark",language:"yaml",value:e.value,options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",scrollBeyondLastLine:!1},className:se.Z.editor,onMount:ye})]})}))]})},key:"probe"}],Pe=(0,P.useState)([]),Ce=a()(Pe,2),Le=Ce[0],Re=Ce[1],Ee=(0,P.useState)([]),Te=a()(Ee,2),Me=Te[0],De=Te[1];(0,P.useEffect)((function(){g&&((0,s.rl)({cluster_name:W,namespace:ve,pod_name:g.name||"",time:Math.floor(Date.now()/1e3)},{showErrorMessage:!1}).then((function(e){var t;be(void 0),Re((null===(t=e.items)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.metricPoints)||void 0===t?void 0:t.map((function(e){return[Number(1e3*e.timestamp),parseFloat((e.value/1e3).toFixed(3))]})))||[])})).catch((function(e){be(e),Re([])})),(0,s.HQ)({cluster_name:W,namespace:ve,pod_name:g.name||"",time:Math.floor(Date.now()/1e3)},{showErrorMessage:!1}).then((function(e){var t;Ne(void 0),De((null===(t=e.items)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.metricPoints)||void 0===t?void 0:t.map((function(e){return[1e3*e.timestamp,parseFloat((e.value/1024/1024).toFixed(3))]})))||[])})).catch((function(e){Ne(e),De([])})))}),[g]);var Ie=(0,P.useMemo)((function(){var e={};return null==g||g.pod_conditions.forEach((function(t){t.type&&(e[t.type]={status:"True"===t.status,time:(0,j.kZ)(t.lastTransitionTime)})})),e}),[g.pod_conditions]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:se.Z.container,style:S,ref:pe,children:[(0,m.jsxs)(Z.Z,{justify:"space-between",align:"center",className:se.Z.block,children:[(0,m.jsxs)("div",{style:{flex:1,width:0,marginRight:10},children:[(0,m.jsx)(k.Z,{children:(0,m.jsxs)("div",{className:se.Z.detailName,children:["Pod详情 - ",g.name]})}),(null==he?void 0:he.width)&&he.width<600&&(0,m.jsx)(k.Z,{title:(0,j.kZ)(g.create_time),children:(0,m.jsx)("div",{children:oe(g.create_time)})})]}),(0,m.jsxs)(r.Z,{children:[(null==he?void 0:he.width)&&he.width>=600&&(0,m.jsx)(k.Z,{title:(0,j.kZ)(g.create_time),children:oe(g.create_time)}),N&&w&&"workload"in g&&(0,m.jsx)(c.ZP,{type:"primary",ghost:!0,onClick:function(){},children:(0,m.jsx)(y.Link,{to:"/cluster/".concat(W,"/workloads/").concat(ve,"/").concat(w,"/detail/").concat(g.workload),children:"所属负载"})}),(0,m.jsx)(E.Z,{modalRender:function(e){return(0,m.jsx)(M.Z,{defaultValue:g.yaml,clusterName:W,onCancel:function(){e()},onOk:function(t){(0,s.kH)({cluster_name:W,namespace:ve,pod_name:g.name,yaml:t}).then((function(){e(),b.ZP.success("编辑成功")}))}})},children:(0,m.jsx)(c.ZP,{type:"primary",ghost:!0,children:"编辑POD YAML"})}),"clone-set"!==w?(0,m.jsx)(c.ZP,{type:"primary",ghost:!0,danger:!0,onClick:function(){F.Z.confirm({title:"【".concat(g.name,"】删除"),content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{children:["确认销毁重建：",g.name,"？"]}),(0,m.jsx)("p",{children:"未修改副本数，pod删除后会被重建，可能由于资源不足等原因导致重建失败"})]}),onOk:function(){(0,s.dS)({cluster_name:W,namespace:ve,pod_name:g.name}).then((function(){b.ZP.success("删除成功"),je()}))}})},children:"删除POD"}):(0,m.jsx)(E.Z,{modalRender:function(e){return(0,m.jsx)(U,{name:g.name,onCancel:e,onOk:function(e){(0,s.Nl)({name:me,namespace:ve,cluster_name:W,delete_policy:e,pod_names:[g.name]}).then((function(){b.ZP.success("删除成功"),je({path:xe.pathname})}))}})},children:(0,m.jsx)(c.ZP,{type:"primary",ghost:!0,danger:!0,children:"删除POD"})})]})]}),(0,m.jsx)("div",{className:se.Z.block,children:(0,m.jsxs)(Z.Z,{justify:"space-between",align:"middle",children:[(0,m.jsxs)("div",{children:["节点IP   ",(0,m.jsx)(y.Link,{to:"/cluster/".concat(W,"/node/").concat(g.node_name),children:g.node_ip})]}),(0,m.jsxs)("div",{children:["实例IP   ",g.pod_ip]}),(0,m.jsxs)("div",{children:["状态   ",(0,m.jsx)("span",{style:{color:ce[g.status]||"var(--color-warning)"},children:g.status})]})]})}),(0,m.jsxs)("div",{className:se.Z.block,children:[(0,m.jsx)("h3",{children:"Pod资源使用率"}),(0,m.jsxs)(G.Z,{children:[(0,m.jsx)(K.Z,{span:12,children:(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)("div",{className:se.Z.verticalText,children:"CPU(核)"}),(0,m.jsx)(R.Z,{option:re(Le,{yAxisName:"cpu（核）"}),style:{height:100,width:"100%"}}),(0,m.jsx)("div",{className:se.Z.errorText,children:ge&&(100404===ge.code?"未安装metrics服务，请联系运维处理":"无数据，metrics已安装，请联系运维排查")})]})}),(0,m.jsx)(K.Z,{span:12,children:(0,m.jsxs)("div",{style:{position:"relative"},children:[(0,m.jsx)("div",{className:se.Z.verticalText,children:"内存(Mi)"}),(0,m.jsx)(R.Z,{option:re(Me,{color:"#234883",yAxisName:"内存（Mi）"}),style:{height:100}}),(0,m.jsx)("div",{className:se.Z.errorText,children:we&&(100404===we.code?"未安装metrics服务，请联系运维处理":"无数据，metrics已安装，请联系运维排查")})]})})]})]}),(0,m.jsx)("div",{className:se.Z.block,children:(0,m.jsxs)(G.Z,{gutter:[16,16],children:[(0,m.jsx)(K.Z,{span:12,children:(0,m.jsx)(X.Z,{message:(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsx)("span",{children:null!==(t=Ie.PodScheduled)&&void 0!==t&&t.status?"已调度":"未调度"}),(0,m.jsx)("span",{children:null===(n=Ie.PodScheduled)||void 0===n?void 0:n.time})]}),type:null!==(i=Ie.PodScheduled)&&void 0!==i&&i.status?"success":"error",showIcon:!0})}),(0,m.jsx)(K.Z,{span:12,children:(0,m.jsx)(X.Z,{message:(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsx)("span",{children:null!==(l=Ie.Initialized)&&void 0!==l&&l.status?"初始化":"未初始化"}),(0,m.jsx)("span",{children:null===(o=Ie.Initialized)||void 0===o?void 0:o.time})]}),type:null!==(d=Ie.Initialized)&&void 0!==d&&d.status?"success":"error",showIcon:!0})}),(0,m.jsx)(K.Z,{span:12,children:(0,m.jsx)(X.Z,{message:(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsx)("span",{children:null!==(u=Ie.ContainersReady)&&void 0!==u&&u.status?"Pods已就绪":"Pods未就绪"}),(0,m.jsx)("span",{children:null===(p=Ie.ContainersReady)||void 0===p?void 0:p.time})]}),type:null!==(v=Ie.ContainersReady)&&void 0!==v&&v.status?"success":"error",showIcon:!0})}),(0,m.jsx)(K.Z,{span:12,children:(0,m.jsx)(X.Z,{message:(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsx)("span",{children:null!==(x=Ie.Ready)&&void 0!==x&&x.status?"容器已就绪":"容器未就绪"}),(0,m.jsx)("span",{children:null===(f=Ie.Ready)||void 0===f?void 0:f.time})]}),type:null!==(_=Ie.Ready)&&void 0!==_&&_.status?"success":"error",showIcon:!0})})]})}),g.containers.map((function(e){var t,n,i,a,s,l,o,d,u,p,h,v,x,f,_,N=function(e){var t=L()(L()({},e),{},{probe:[]});return e.startup_probe&&t.probe.push({name:"启动探针",color:"orange",value:e.startup_probe}),e.liveness_probe&&t.probe.push({name:"存活探针",color:"blue",value:e.liveness_probe}),e.readiness_probe&&t.probe.push({name:"就绪探针",color:"blue",value:e.readiness_probe}),t}(e),S=function(e){var t;if(e&&!ae().isEmpty(e)){var n=null===(t=Object.keys(e))||void 0===t?void 0:t[0];return n?L()({name:n.charAt(0).toUpperCase()+n.slice(1)},e[n]):void 0}}(null===(t=N.status)||void 0===t?void 0:t.lastState);return(0,m.jsxs)("div",{className:se.Z.block,children:[(0,m.jsxs)(Z.Z,{justify:"space-between",align:"center",children:[(0,m.jsxs)("span",{children:[(0,m.jsx)(Y.Z,{style:{fontSize:18,marginRight:10}}),"容器名称 ",N.container_name]}),(0,m.jsx)(k.Z,{title:(0,j.kZ)((null===(n=N.status)||void 0===n||null===(n=n.state)||void 0===n||null===(n=n.running)||void 0===n?void 0:n.startedAt)||""),children:oe((null===(i=N.status)||void 0===i||null===(i=i.state)||void 0===i||null===(i=i.running)||void 0===i?void 0:i.startedAt)||"")}),(0,m.jsxs)(r.Z,{children:[(0,m.jsxs)("span",{children:["CPU ",((null===(a=N.usage)||void 0===a?void 0:a.cpu)||0)/1e3,"核"]}),(0,m.jsxs)("span",{children:["内存 ",Math.floor(((null===(s=N.usage)||void 0===s?void 0:s.memory)||0)/1024),"MiB"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)(V.Z,{color:null!==(l=N.status)&&void 0!==l&&l.ready?"success":"error",children:null!==(o=N.status)&&void 0!==o&&o.ready?"Ready":"Not Ready"}),(0,m.jsx)(V.Z,{color:null!==(d=N.status)&&void 0!==d&&d.state?"success":"error",children:null!==(u=N.status)&&void 0!==u&&u.started?"Started":"Not Started"}),(null===(p=N.status)||void 0===p?void 0:p.state)&&Object.keys(null===(h=N.status)||void 0===h?void 0:h.state).map((function(e){return(0,m.jsx)(V.Z,{color:de[e]||"warning",children:e},e)}))]})]}),(0,m.jsx)(Q.Z,{style:{marginTop:20},column:2,items:[{key:"restart_count",label:"重启次数",children:N.restart_count},{key:"state",label:"Last State",children:S?(0,m.jsx)(k.Z,{overlayStyle:{maxWidth:600},title:(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:"Last State:"}),(0,m.jsxs)("div",{children:["  ",S.name,":"]}),(0,m.jsxs)("div",{children:["    ",(0,m.jsx)("span",{style:{display:"inline-block",width:80},children:"Reason:"}),S.reason]}),(0,m.jsxs)("div",{children:["    ",(0,m.jsx)("span",{style:{display:"inline-block",width:80},children:"Exit Code:"}),"Exit Code: ",S.exitCode]}),(0,m.jsxs)("div",{children:["    ",(0,m.jsx)("span",{style:{display:"inline-block",width:80},children:"Started:"}),ne()(Number(S.startedAt)).format("YYYY-MM-DD HH:mm:ss")]}),(0,m.jsxs)("div",{children:["    ",(0,m.jsx)("span",{style:{display:"inline-block",width:80},children:"Finished:"}),ne()(Number(S.finishedAt)).format("YYYY-MM-DD HH:mm:ss")]})]}),children:(0,m.jsxs)("div",{style:{borderBottom:"1px dashed #7f7f7f"},children:[S.name," ",S.reason," ",S.exitCode]})}):"-"},{key:"strategy",label:"镜像拉取策略",children:N.image_pull_policy},{key:"mirror",label:"镜像",children:(0,m.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,m.jsx)(k.Z,{title:N.image,children:(0,m.jsx)("span",{style:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:N.image})}),(0,m.jsx)("a",{style:{marginLeft:4,padding:"0 6px"},onClick:function(){navigator.clipboard.writeText(N.image).then((function(){b.ZP.success("复制成功")}))},children:(0,m.jsx)(J.Z,{})})]}),span:2,contentStyle:{paddingRight:20}},{key:"cpu",label:"CPU",children:"request：".concat((null==N||null===(v=N.resources)||void 0===v||null===(v=v.requests)||void 0===v?void 0:v.cpu)||"-"," | limit：").concat((null==N||null===(x=N.resources)||void 0===x||null===(x=x.limits)||void 0===x?void 0:x.cpu)||"-")},{key:"memory",label:"内存",children:"request：".concat((null==N||null===(f=N.resources)||void 0===f||null===(f=f.requests)||void 0===f?void 0:f.memory)||"-"," | limit：").concat((null==N||null===(_=N.resources)||void 0===_||null===(_=_.limits)||void 0===_?void 0:_.memory)||"-")}]}),(0,m.jsxs)(Z.Z,{justify:"space-between",style:{marginTop:10},children:[(0,m.jsx)(r.Z,{className:se.Z.containerIconList,children:Se.map((function(e){return N[e.key]&&!ae().isEmpty(N[e.key])?(0,m.jsx)($.Z,{destroyTooltipOnHide:!0,content:(0,m.jsx)("div",{children:e.content(N[e.key])||""}),children:(0,m.jsx)(e.icon,{})},e.key):(0,m.jsx)(e.icon,{className:se.Z.disabled},e.key)}))}),(0,m.jsxs)(r.Z,{children:[(0,m.jsx)(ee.Z.Button,{menu:{items:[{label:"sh",value:"/bin/sh"},{label:"bash",value:"/bin/bash"},{label:"powershell",value:"powershell"},{label:"cmd",value:"cmd"}].map((function(e){return{key:e.value,label:(0,m.jsx)(y.Link,{target:"_blank",to:"/cluster/".concat(W,"/workloads/").concat(ve,"/").concat("service"!==w?w:"pod","/command/").concat(me,"/").concat(g.name,"/").concat(N.container_name,"?shell=").concat(e.value),children:e.label})}}))},children:(0,m.jsx)(y.Link,{rel:"opener",target:"_blank",to:"/cluster/".concat(W,"/workloads/").concat(ve,"/").concat("service"!==w?w:"pod","/command/").concat(me,"/").concat(g.name,"/").concat(N.container_name,"?shell=/bin/bash"),children:"控制台"})}),(0,m.jsx)(y.Link,{to:"/cluster/".concat(W,"/workloads/").concat(ve,"/").concat("service"!==w?w:"pod","/detail/").concat("service"===w?g.name:"workload"in g&&g.workload?g.workload:me,"?pod_name=").concat(g.name,"&container_name=").concat(N.container_name,"&tab=log"),target:"_blank",rel:"opener",children:(0,m.jsx)(c.ZP,{children:"查看日志"})})]})]})]},N.container_id)}))]})})},me="tab-container___c_0la",pe="tab-bar-content___k4CDX",he="not-ready___DM7Jj",ve="tab-bar-content-state___W_Pf7",xe="not-ready-container___JCWLF",je="tab-bar-content-title___v1Jov",ye=function(e){var t,n=e.showReplicaToolbar,i=void 0===n||n,l=e.detailData,o=e.active,c=e.type,d=e.isSinglePod,u=e.showBelong,N=(0,h.J)(),C=(0,f.Z)({pod:""}),L=a()(C,2),R=L[0],E=L[1],T=(0,y.useParams)(),M=T.clusterName,D=void 0===M?"":M,I=T.name,A=void 0===I?"":I,H=T.namespace,O=void 0===H?"":H,Y=(0,P.useState)(l.spec_replicas),J=a()(Y,2),q=J[0],F=J[1],z=(0,_.Z)((function(e){var t,n;null===x.J||void 0===x.J||null===(t=(n=x.J[c]).scale)||void 0===t||t.call(n,{name:A,cluster_name:D,namespace:O,replicas:e}).then((function(){b.ZP.success("修改成功"),setTimeout((function(){N()}),2e3)}))}),{wait:500}).run,U=(0,g.Z)((function(){return(0,s.oZ)({cluster_name:D,namespace:O,controller_name:A,list_all:"",controller_type:v.L[c]}).then((function(e){return e.list}))}),{pollingInterval:2e3,pollingWhenHidden:!1,manual:!0}),B=U.data,W=void 0===B?[]:B,V=U.run,G=U.cancel;(0,P.useEffect)((function(){o?V():G()}),[o]);var K=(0,P.useMemo)((function(){return W.map((function(e){var t=e.isReady;return{key:e.name,label:(0,m.jsx)("div",{className:S()(pe,!t&&he),children:(0,m.jsxs)(Z.Z,{vertical:!0,justify:"space-between",style:{height:"100%"},children:[(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsx)(k.Z,{title:e.name,children:(0,m.jsx)("div",{className:je,children:e.name||""})}),(0,m.jsx)("div",{className:ve,children:t?"Ready":"Not-Ready"})]}),(0,m.jsxs)(Z.Z,{justify:"space-between",children:[(0,m.jsxs)("div",{children:[(0,j.yq)(Number(e.create_time||0))," "]}),(0,m.jsxs)("div",{children:["节点IP：",e.node_ip||"-"," "]}),(0,m.jsxs)("div",{children:["实例IP：",e.pod_ip||"-"," "]})]})]})}),children:(0,m.jsx)(ue,{data:e,type:c})}}))||[]}),[W]);return(0,P.useEffect)((function(){var e;!R.pod&&null!=K&&null!==(e=K[0])&&void 0!==e&&e.key&&E({pod:K[0].key})}),[E,K,R.pod]),d?(null==W?void 0:W[0])&&(0,m.jsx)(ue,{data:W[0],type:c,style:{height:"calc(100vh - 148px)"},showBelong:u}):(0,m.jsxs)(m.Fragment,{children:[i&&(0,m.jsxs)(r.Z,{style:{marginBottom:10},children:[(0,m.jsx)("span",{children:"副本数"}),(0,m.jsx)(p,{disabled:"sidecar-set"===c,value:q,onChange:function(e){z(e),F(e)},current:l.replicas})]}),(0,m.jsx)(w.Z,{onChange:function(e){E({pod:e})},activeKey:R.pod,tabPosition:"left",items:K,className:S()(me,!(null!==(t=W.find((function(e){return e.name===R.pod})))&&void 0!==t&&t.isReady)&&xe)})]})}},4578:function(e,t){t.Z={block:"block___kxAaL",container:"container___wBdIt","detail-name":"detail-name___faUJH",detailName:"detail-name___faUJH","container-tag":"container-tag___HAUs7",containerTag:"container-tag___HAUs7","container-state-tag":"container-state-tag___PDs0m",containerStateTag:"container-state-tag___PDs0m","container-icon-list":"container-icon-list___VIW6z",containerIconList:"container-icon-list___VIW6z",disabled:"disabled___uwFe1",editor:"editor___yJH9t","vertical-text":"vertical-text___uSve5",verticalText:"vertical-text___uSve5","error-text":"error-text___G3C7J",errorText:"error-text___G3C7J"}},75026:function(e,t){t.Z={block:"block___kQaPg",title:"title___OiznK",name:"name___RaxxU",breadcrumb:"breadcrumb___Zch_1"}}}]);