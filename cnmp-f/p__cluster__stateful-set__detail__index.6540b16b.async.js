"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[5144],{68728:function(e,n,t){t.r(n);var s=t(26068),a=t.n(s),l=t(48305),r=t.n(l),i=t(30813),c=t(60396),u=t(58082),o=t(44908),d=t(36970),m=t(32030),h=t(16639),p=t(88934),j=t(97628),x=t(24390),f=t(470),Z=t(35028),v=(t(50959),t(11527)),y=function(e){var n=e.onCancel,t=e.onOK,s=(0,m.useParams)(),l=s.clusterName,c=void 0===l?"":l,u=s.name,o=void 0===u?"":u,d=s.namespace,Z=void 0===d?"":d,y=h.Z.useForm(),g=r()(y,1)[0],b=h.Z.useWatch("update_strategy_type",g);return(0,v.jsx)(p.Z,{title:"更新策略",open:!0,width:600,onCancel:n,onOk:function(){g.validateFields().then((function(e){(0,i.wC)(a()({cluster_name:c,name:o,namespace:Z},e)).then((function(){t(),j.ZP.success("更新策略成功")}))}))},children:(0,v.jsxs)(h.Z,{form:g,labelCol:{span:6},children:[(0,v.jsx)(h.Z.Item,{name:"update_strategy_type",label:"更新方式",initialValue:0,children:(0,v.jsxs)(x.ZP.Group,{children:[(0,v.jsx)(x.ZP,{value:0,children:"滚动更新 RollingUpdate"}),(0,v.jsx)(x.ZP,{value:1,children:"删除后更新 OnDelete"})]})}),0===b&&(0,v.jsx)(h.Z.Item,{name:"partition",label:"分片",initialValue:0,rules:[{required:!0,message:"分片不能为空"},{pattern:/^(0|[1-9]\d*)$/,message:"0或者正整数"}],tooltip:{overlayInnerStyle:{width:630},title:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:"partition"}),(0,v.jsxs)("p",{children:["序号大于等于此数字的容器组将被更新，小于此容器组的则不会被更新。",(0,v.jsx)("br",{}),"如果分片为 0，则所有容器组都将被更新。",(0,v.jsx)("br",{}),"如果分片为 3，则序号大于等于 3 的容器组将被更新，序号为 1、2 的容器组则保持不变。"]})]})},children:(0,v.jsx)(f.Z,{style:{width:"100%"},placeholder:"0或者正整数（default：0）"})})]})})};n.default=function(){var e=(0,m.useParams)(),n=e.clusterName,t=void 0===n?"":n,s=e.name,a=void 0===s?"":s,l=(0,u.J)();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Z,{clusterName:t,items:[{title:(0,v.jsx)(m.Link,{to:"/cluster/".concat(t,"/workloads/stateful-set"),children:"StatefulSet"})},{title:"负载详情：".concat(a)}],sourceType:"stateful-set"}),(0,v.jsx)(d.Z,{type:"stateful-set",operationRender:function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(c.Z,{modalRender:function(e){return(0,v.jsx)(y,{onCancel:e,onOK:function(){e(),l()}})},children:(0,v.jsx)(Z.ZP,{children:"更新策略"})})})}})]})}}}]);