(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[2183],{27274:function(t,e,n){"use strict";n.d(e,{Z:function(){return $}});var r=n(15558),a=n.n(r),i=n(26068),s=n.n(i),o=n(48305),u=n.n(o),c=n(45778),l=n(95974),f=n(41710),d=n(10534),h=n(65460),m=n(96286),v=n(50959),p="table___Rup7Y",x=n(11527),$=function(t){var e=t.placeholder,n=t.request,r=t.columns,i=t.leftTitle,o=t.tableProps,$=t.showSearch,g=void 0===$||$,y=t.dataSource,S=t.searchWidth,Z=t.rightTitle,j=void 0===Z?[]:Z,k=t.refreshDeps,w=t.actionRef,T=t.hideTitle,C=t.searchStyle,D=t.onSearch,b=(0,c.T)(w),O=(0,v.useState)(""),_=u()(O,2),R=_[0],F=_[1],M=(0,v.useRef)(""),U=(0,d.Z)((function(){var t,e;null==D||D(R),null===(t=b.current)||void 0===t||null===(e=t.reloadAndRest)||void 0===e||e.call(t)}),{wait:500}).run;return(0,h.Z)((function(){var t;null===(t=b.current)||void 0===t||t.reload()}),k||[]),(0,x.jsx)(f.Z,s()({className:p,actionRef:b,headerTitle:i,dataSource:y,search:!1,columns:r,request:n&&function(t){return n(s()(s()({},t),{},{keyword:M.current}))},pagination:{showSizeChanger:!0,defaultPageSize:50},options:{reload:!!n},toolBarRender:!T&&function(){return[].concat(a()(j),a()(g?[(0,x.jsx)(m.Z,{style:s()({width:null!=S?S:300},C),value:R,placeholder:e,onChange:function(t){F(t.target.value),M.current=t.target.value,U()},allowClear:!0,suffix:(0,x.jsx)(l.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},o))}},45778:function(t,e,n){"use strict";n.d(e,{T:function(){return a}});var r=n(50959),a=function(t,e){var n=(0,r.useRef)(e);return t||n}},91526:function(t,e,n){"use strict";n.r(e);var r=n(90228),a=n.n(r),i=n(87999),s=n.n(i),o=n(48305),u=n.n(o),c=n(15268),l=n(79890),f=n(27274),d=n(34015),h=n(15209),m=n(34593),v=n(36954),p=n(16782),x=n(56765),$=n(38218),g=n(21630),y=n(3885),S=n(3827),Z=n(70334),j=n(69180),k=n(32699),w=n.n(k),T=n(50959),C=n(11527);e.default=function(){var t=(0,T.useState)(!1),e=u()(t,2),n=e[0],r=e[1],i=(0,T.useState)("create"),o=u()(i,2),k=o[0],D=o[1],b=(0,$.useParams)(),O=b.clusterName,_=void 0===O?"":O,R=b.namespace,F=void 0===R?"":R,M=(0,T.useRef)(),U=g.Z.useForm(),Y=u()(U,1)[0];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.Z,{items:[{title:"Secret"}],sourceType:"secret",showNamespace:!0}),(0,C.jsx)(f.Z,{actionRef:M,columns:[{dataIndex:"name",title:"名称",render:function(t,e){return(0,C.jsx)(p.Z,{follow_type:"Secret",follow_value:e.name,follow:e.is_followed,style:{paddingRight:6},title:t,children:(0,C.jsx)($.Link,{to:"/cluster/".concat(_,"/configuration-resources/").concat(F,"/secret/").concat(e.name),children:e.name})})}},{dataIndex:"ref_count",title:"引用数"},{dataIndex:"labels",title:"标签",render:function(t,e){return"-"===t?"-":(0,C.jsx)(d.Z,{items:Object.keys(e.labels||{}).map((function(t){return{value:"".concat(t,":").concat(e.labels[t])}})),tagStyle:{maxWidth:200},max:1})}},{dataIndex:"annotations",title:"注解",render:function(t,e){return"-"===t?"-":(0,C.jsx)(d.Z,{items:Object.keys(e.annotations||{}).map((function(t){return{value:"".concat(t,":").concat(e.annotations[t])}})),tagStyle:{maxWidth:200},max:1})}},{dataIndex:"create_time",title:"创建时间",width:160,render:x.kZ},{dataIndex:"operation",width:160,title:"操作",render:function(t,e){return(0,C.jsxs)(y.Z,{children:[(0,C.jsx)("a",{onClick:function(){D("edit"),r(!0),Y.setFieldsValue({data:w().map(e.data,(function(t,e){return{key:e,value:t}})),annotations:w().map(e.annotations,(function(t,e){return{key:e,value:t}})),labels:w().map(e.labels,(function(t,e){return{key:e,value:t}})),name:e.name})},children:"编辑"}),(0,C.jsx)(l.Z,{modalRender:function(t){return(0,C.jsx)(v.Z,{defaultValue:e.yaml,clusterName:_,onCancel:function(){t()},sourceType:"config-map"})},children:(0,C.jsx)("a",{children:"编辑yaml"})}),(0,C.jsx)("a",{onClick:function(){S.Z.confirm({title:"删除命名空间",content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("p",{children:["确认删除Secret【",e.name,"】"]}),(0,C.jsxs)("p",{style:{color:"#FF4D4F"},children:["当前Secret已经被",e.refs.map((function(t){return"".concat(t.kind,"-").concat(t.name)})).join("、"),"引用，删除可能导致引用的工作负载失效"]})]}),okButtonProps:{disabled:!0},onOk:function(){(0,c.d5)({cluster_name:_,name:e.name,namespace:F}).then((function(){var t;Z.ZP.success("删除成功"),null===(t=M.current)||void 0===t||t.reload(!0)}))}})},children:"删除"}),(0,C.jsx)(l.Z,{})]})}}],tableProps:{rowKey:"name"},request:function(){var t=s()(a()().mark((function t(e){var n;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.k2)({cluster_name:_,namespace:F,keyword:e.keyword,page:e.current,page_size:e.pageSize});case 2:return n=t.sent,t.abrupt("return",{data:n.list||[],total:n.total||0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),leftTitle:(0,C.jsx)(j.ZP,{type:"primary",onClick:function(){r(!0),D("create"),Y.setFieldsValue({})},children:"新建Secret"}),placeholder:"模糊搜索Secret名称"}),(0,C.jsx)(h.Z,{title:"".concat("create"===k?"新建":"编辑","Secret"),form:Y,open:n,onClose:function(){r(!1)},onOk:function(){var t;null===(t=M.current)||void 0===t||t.reload(!0),r(!1)},type:k})]})}},10534:function(t,e,n){"use strict";var r=n(99938),a=n(66292),i=n.n(a),s=n(50959),o=n(53270),u=n(77924),c=n(25492),l=n(80785);e.Z=function(t,e){var n;l.Z&&((0,c.mf)(t)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof t)));var a=(0,o.Z)(t),f=null!==(n=null==e?void 0:e.wait)&&void 0!==n?n:1e3,d=(0,s.useMemo)((function(){return i()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.current.apply(a,(0,r.ev)([],(0,r.CR)(t),!1))}),f,e)}),[]);return(0,u.Z)((function(){d.cancel()})),{run:d,cancel:d.cancel,flush:d.flush}}},11110:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var s=a.prototype;i.utc=function(t){return new a({date:t,utc:!0,args:arguments})},s.utc=function(e){var n=i(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},s.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var u=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var c=s.utcOffset;s.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],s=60*+a[1]+ +a[2];return 0===s?0:"+"===i?s:-s}(r),null===r))return this;var s=Math.abs(r)<=16?60*r:r,o=this;if(a)return o.$offset=s,o.$u=0===r,o;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(s+u,t)).$offset=s,o.$x.$localOffset=u}else o=this.utc();return o};var l=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var f=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var d=s.diff;s.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var r=this.local(),a=i(t).local();return d.call(r,a,e,n)}}}()}}]);