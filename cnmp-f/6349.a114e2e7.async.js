"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[6349],{69346:function(e,r,o){o.d(r,{Z:function(){return C}});var t=o(15558),n=o.n(t),l=o(26068),a=o.n(l),c=o(48305),i=o.n(c),s=o(56330),u=o(79179),d=o(60125),p=o(10534),f=o(65460),g=o(80699),h=o(82187),m=o.n(h),b=o(50959),v="no-left-title___t8LWq",y=o(11527),C=function(e){var r=e.placeholder,o=e.request,t=e.columns,l=e.leftTitle,c=e.tableProps,h=e.showSearch,C=void 0===h||h,x=e.dataSource,k=e.searchWidth,S=e.rightTitle,j=void 0===S?[]:S,Z=e.refreshDeps,w=e.actionRef,$=e.hideTitle,O=(0,d.T)(w),T=(0,b.useState)(""),P=i()(T,2),B=P[0],L=P[1],E=(0,b.useRef)(""),N=(0,p.Z)((function(){var e,r;null===(e=O.current)||void 0===e||null===(r=e.reloadAndRest)||void 0===r||r.call(e)}),{wait:500}).run;return(0,f.Z)((function(){var e;null===(e=O.current)||void 0===e||e.reload()}),Z||[]),(0,y.jsx)(u.Z,a()({className:m()((""===l||void 0===l)&&v),actionRef:O,headerTitle:l,dataSource:x,search:!1,columns:t,request:o&&function(e){return o(a()(a()({},e),{},{keyword:E.current}))},pagination:{showSizeChanger:!0},options:{reload:!!o},toolBarRender:!$&&function(){return[].concat(n()(j),n()(C?[(0,y.jsx)(g.Z,{style:{width:null!=k?k:300},value:B,placeholder:r,onChange:function(e){L(e.target.value),E.current=e.target.value,N()},allowClear:!0,suffix:(0,y.jsx)(s.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},c))}},60148:function(e,r,o){o.d(r,{Z:function(){return u}});var t=o(26068),n=o.n(t),l=o(59614),a=o(26059),c=o(85584),i=(o(50959),"tag___Cjdmk"),s=o(11527),u=function(e){var r=e.items,o=e.max,t=e.direction,u=void 0===t?"horizontal":t,d=e.tagStyle;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{direction:u,size:[4,0],wrap:!0,children:r.slice(0,o).map((function(e,r){return(0,s.jsx)(a.Z,{title:e.value,children:(0,s.jsx)(c.Z,{className:i,color:e.color,style:n()({overflow:"hidden",textOverflow:"ellipsis"},d),children:e.value},r)},r)}))}),o&&r.length>o&&(0,s.jsx)(a.Z,{color:"#ffffff",title:(0,s.jsx)(s.Fragment,{children:r.slice(o).map((function(e,r){return(0,s.jsx)(c.Z,{className:i,color:e.color,children:e.value},r)}))}),children:(0,s.jsx)(c.Z,{className:i,children:"..."})})]})}},13726:function(e,r,o){o.d(r,{E:function(){return t}});var t={0:{label:"健康",color:"green"},1:{label:"磁盘空间异常",color:"red"},2:{label:"内存空间异常",color:"red"},3:{label:"进程异常",color:"red"},4:{label:"网络异常",color:"red"},5:{label:"路由异常",color:"red"},6:{label:"Cpu使用过高",color:"red"},7:{label:"内存使用过高",color:"red"}}},60125:function(e,r,o){o.d(r,{T:function(){return n}});var t=o(50959),n=function(e,r){var o=(0,t.useRef)(r);return e||o}},58082:function(e,r,o){o.d(r,{J:function(){return l}});var t=o(32030),n=o(50959),l=function(){var e=(0,t.useNavigate)();return(0,n.useCallback)((function(r){r&&e(r),e("/refresh"),setTimeout((function(){e(-1)}),0)}),[e])}},44908:function(e,r,o){var t=o(15558),n=o.n(t),l=o(48305),a=o.n(l),c=o(30813),i=o(58082),s=o(29882),u=o(32030),d=o(8096),p=o(33587),f=o(20811),g=o(51142),h=o(2918),m=o(30766),b=o(80699),v=o(59614),y=o(35028),C=o(50959),x=o(84609),k=o(11527),S=f.Z.useToken;r.Z=function(e){var r=e.clusterName,o=e.items,t=e.sourceType,l=e.switchCluster,f=(0,C.useState)(""),j=a()(f,2),Z=j[0],w=j[1],$=(0,C.useState)([]),O=a()($,2),T=O[0],P=O[1],B=(0,p.Z)(!1),L=a()(B,2),E=L[0],N=L[1],_=N.setFalse,R=N.setTrue,I=S().token,z=(0,i.J)(),M=(0,u.useLocation)(),Y={backgroundColor:I.colorBgElevated,borderRadius:I.borderRadiusLG,boxShadow:I.boxShadowSecondary},q={boxShadow:"none"},F=(0,C.useMemo)((function(){return T.filter((function(e){return""===e||e.toLowerCase().indexOf(Z.toLowerCase())>-1})).map((function(e){return{key:e,label:(0,k.jsx)("a",{onClick:function(){var r=M.pathname.split("/");l?(r[2]=e,z(r.join("/"))):z("/cluster/".concat(e,"/namespace"))},children:e})}}))}),[Z,T,l]);return(0,C.useEffect)((function(){(0,c.LB)({list_all:"1"}).then((function(e){var r;P((null===(r=e.list)||void 0===r?void 0:r.map((function(e){return e.name})))||[])}))}),[]),(0,k.jsxs)("div",{className:x.Z.block,children:[(0,k.jsxs)(g.Z,{justify:"space-between",align:"center",children:[(0,k.jsx)(h.Z,{items:[{title:(0,k.jsx)(u.Link,{to:"/cluster-list",children:"集群列表"})},{title:(0,k.jsx)(m.Z,{dropdownRender:function(e){return(0,k.jsxs)("div",{style:Y,children:[(0,k.jsx)("div",{style:{padding:8},children:(0,k.jsx)(b.Z,{style:{width:"100%"},placeholder:"请输入集群名称",value:Z,onChange:function(e){return w(e.target.value)}})}),C.cloneElement(e,{style:q})]})},menu:{items:F},children:(0,k.jsxs)(v.Z,{children:["集群名称: ",r,(0,k.jsx)(d.Z,{})]})})}].concat(n()(o||[]))}),(0,k.jsx)(y.ZP,{type:"primary",onClick:function(){R()},children:"YAML创建资源"})]}),E&&(0,k.jsx)(s.Z,{clusterName:r,onCancel:function(){_()},sourceType:t})]})}},29882:function(e,r,o){var t=o(48305),n=o.n(t),l=o(26068),a=o.n(l),c=o(30813),i=o(30433),s=o(31906),u=o(88934),d=o(97628),p=o(35028),f=o(81861),g=o(32699),h=o.n(g),m=o(50959),b=o(11527),v=a()({node:c.wB,namespace:c.B8,hpa:c.F_},h().mapValues(i.J,(function(e){return e.createOrUpdateByYaml})));r.Z=function(e){var r=e.onCancel,o=e.onOk,t=e.clusterName,l=e.defaultValue,a=e.readonly,c=e.sourceType,i=(0,m.useState)(l||""),g=n()(i,2),h=g[0],y=g[1];return(0,b.jsxs)(u.Z,{title:"YAML创建资源",open:!0,style:{top:20},onCancel:r,okButtonProps:a?{style:{display:"none"}}:{},onOk:function(){h?c?v[c]({yaml:h,cluster_name:t}).then((function(){null==r||r(),null==o||o(h),d.ZP.success("YAML创建资源成功")})).catch((function(e){d.ZP.error(e.reason)})):null==o||o(h):d.ZP.warning("请输入YAML")},width:"80vw",children:[(0,b.jsx)(s.ZP,{theme:"vs-dark",language:"yaml",value:h,onChange:function(e){y(e||"")},height:"75vh",options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",scrollBeyondLastLine:!1}}),(0,b.jsx)("div",{style:{position:"relative",height:0},children:a?(0,b.jsx)(p.ZP,{type:"primary",style:{position:"absolute",top:12},ghost:!0,onClick:function(){navigator.clipboard.writeText(h).then((function(){d.ZP.success("复制成功")}))},children:"复制"}):(0,b.jsx)(f.Z,{beforeUpload:function(e){var r=new FileReader;return r.readAsText(e),r.onload=function(e){var r,o=null===(r=e.target)||void 0===r?void 0:r.result;o&&y(o)},!1},accept:".yaml",showUploadList:!1,children:(0,b.jsx)(p.ZP,{type:"primary",onClick:function(){},style:{position:"absolute",top:12},children:"导入YAML"})})})]})}},30433:function(e,r,o){o.d(r,{J:function(){return n}});var t=o(30813),n={deployment:{detail:t.Ke,createOrUpdateByYaml:t.ek,replicasetList:t.hX,rollback:t.KZ,delete:t.Ax,restart:t.$l,scale:t.po,scaleStream:void 0,upgradeStrategy:void 0},"clone-set":{detail:t.iP,createOrUpdateByYaml:t.WX,replicasetList:t.qr,rollback:t.nV,delete:t.VE,restart:t.pk,scale:t.YM,scaleStream:t.kd,upgradeStrategy:t.S8},"game-server-set":{detail:t.dq,createOrUpdateByYaml:t.q4,replicasetList:t.lr,rollback:t.MC,delete:t.L5,restart:t._U,scale:t.lq,scaleStream:t.b_,upgradeStrategy:t.ZG},"stateful-set":{detail:t.dd,createOrUpdateByYaml:t.Iu,replicasetList:t.tR,rollback:t.Cq,delete:t.iU,restart:t.R,scale:t.K9,scaleStream:void 0,upgradeStrategy:void 0},"daemon-set":{detail:t.x2,createOrUpdateByYaml:t.D7,replicasetList:t.Xi,rollback:t.ti,delete:t.JY,restart:t.Bw,scale:t.Xx,scaleStream:void 0,upgradeStrategy:void 0}}},84609:function(e,r){r.Z={block:"block___a01xI"}},10534:function(e,r,o){var t=o(99938),n=o(66292),l=o.n(n),a=o(50959),c=o(53270),i=o(77924),s=o(25492),u=o(80785);r.Z=function(e,r){var o;u.Z&&((0,s.mf)(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var n=(0,c.Z)(e),d=null!==(o=null==r?void 0:r.wait)&&void 0!==o?o:1e3,p=(0,a.useMemo)((function(){return l()((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.current.apply(n,(0,t.ev)([],(0,t.CR)(e),!1))}),d,r)}),[]);return(0,i.Z)((function(){p.cancel()})),{run:p,cancel:p.cancel,flush:p.flush}}},85584:function(e,r,o){o.d(r,{Z:function(){return T}});var t=o(50959),n=o(16646),l=o(82187),a=o.n(l),c=o(80687),i=o(69361),s=o(75053),u=o(2444),d=o(601),p=o(99978),f=o(60926),g=o(41748),h=o(75775);const m=e=>{const{lineWidth:r,fontSizeIcon:o,calc:t}=e,n=e.fontSizeSM;return(0,g.TS)(e,{tagFontSize:n,tagLineHeight:(0,d.bf)(t(e.lineHeightSM).mul(n).equal()),tagIconSize:t(o).sub(t(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary})},b=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var v=(0,h.I$)("Tag",(e=>(e=>{const{paddingXXS:r,lineWidth:o,tagPaddingHorizontal:t,componentCls:n,calc:l}=e,a=l(t).sub(o).equal(),c=l(r).sub(o).equal();return{[n]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,d.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:c,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:a}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}})(m(e))),b),y=function(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]])}return o};const C=t.forwardRef(((e,r)=>{const{prefixCls:o,style:n,className:l,checked:c,onChange:i,onClick:s}=e,d=y(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:f}=t.useContext(u.E_),g=p("tag",o),[h,m,b]=v(g),C=a()(g,`${g}-checkable`,{[`${g}-checkable-checked`]:c},null==f?void 0:f.className,l,m,b);return h(t.createElement("span",Object.assign({},d,{ref:r,style:Object.assign(Object.assign({},n),null==f?void 0:f.style),className:C,onClick:e=>{null==i||i(!c),null==s||s(e)}})))}));var x=C,k=o(35047);var S=(0,h.bk)(["Tag","preset"],(e=>(e=>(0,k.Z)(e,((r,o)=>{let{textColor:t,lightBorderColor:n,lightColor:l,darkColor:a}=o;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:t,background:l,borderColor:n,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}})))(m(e))),b);const j=(e,r,o)=>{const t="string"!=typeof(n=o)?n:n.charAt(0).toUpperCase()+n.slice(1);var n;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${o}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Z=(0,h.bk)(["Tag","status"],(e=>{const r=m(e);return[j(r,"success","Success"),j(r,"processing","Info"),j(r,"error","Error"),j(r,"warning","Warning")]}),b),w=function(e,r){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]])}return o};const $=(e,r)=>{const{prefixCls:o,className:l,rootClassName:d,style:p,children:f,icon:g,color:h,onClose:m,closeIcon:b,closable:y,bordered:C=!0}=e,x=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:k,direction:j,tag:$}=t.useContext(u.E_),[O,T]=t.useState(!0);t.useEffect((()=>{"visible"in x&&T(x.visible)}),[x.visible]);const P=(0,c.o2)(h),B=(0,c.yT)(h),L=P||B,E=Object.assign(Object.assign({backgroundColor:h&&!L?h:void 0},null==$?void 0:$.style),p),N=k("tag",o),[_,R,I]=v(N),z=a()(N,null==$?void 0:$.className,{[`${N}-${h}`]:L,[`${N}-has-color`]:h&&!L,[`${N}-hidden`]:!O,[`${N}-rtl`]:"rtl"===j,[`${N}-borderless`]:!C},l,d,R,I),M=e=>{e.stopPropagation(),null==m||m(e),e.defaultPrevented||T(!1)},[,Y]=(0,i.Z)(y,b,(e=>null===e?t.createElement(n.Z,{className:`${N}-close-icon`,onClick:M}):t.createElement("span",{className:`${N}-close-icon`,onClick:M},e)),null,!1),q="function"==typeof x.onClick||f&&"a"===f.type,F=g||null,A=F?t.createElement(t.Fragment,null,F,f&&t.createElement("span",null,f)):f,U=t.createElement("span",Object.assign({},x,{ref:r,className:z,style:E}),A,Y,P&&t.createElement(S,{key:"preset",prefixCls:N}),B&&t.createElement(Z,{key:"status",prefixCls:N}));return _(q?t.createElement(s.Z,{component:"Tag"},U):U)},O=t.forwardRef($);O.CheckableTag=x;var T=O}}]);