"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[7373],{66780:function(e,n,a){a.d(n,{Z:function(){return o}});var t=a(79482),r=a(50959),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM704 536c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48z"}}]},name:"plus-square",theme:"filled"},l=a(28371),i=function(e,n){return r.createElement(l.Z,(0,t.Z)({},e,{ref:n,icon:s}))};var o=r.forwardRef(i)},35837:function(e,n,a){var t=a(48305),r=a.n(t),s=a(32643),l=a(21630),i=a(3827),o=a(96286),c=(a(50959),a(11527));n.Z=function(e){var n=e.cancel,a=e.initialValues,t=e.onOk,u=l.Z.useForm(),d=r()(u,1)[0];return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.Z,{open:!0,title:a?"编辑数据":"添加数据",onCancel:function(){n()},width:800,onOk:function(){d.validateFields().then((function(e){null==t||t(e)}))},children:(0,c.jsxs)(l.Z,{form:d,labelCol:{span:2},initialValues:a,children:[(0,c.jsx)(l.Z.Item,{name:"key",label:"key",rules:[{required:!0,message:"请输入key"},{max:63,message:"最长253个字符"},{pattern:/^[a-zA-Z0-9_.-]+$/,message:'只能包含大小写字母、下划线(“_“)、分隔符("-")、小数点(".")'}],children:(0,c.jsx)(o.Z,{placeholder:'最长253个字符，只能包含大小写字母、下划线(“_“)、分隔符("-")、小数点(".")'})}),(0,c.jsx)(l.Z.Item,{name:"value",label:"value",children:(0,c.jsx)(s.ZP,{theme:"vs-dark",height:400,options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1}})})]})})})}},15209:function(e,n,a){a.d(n,{Z:function(){return B}});var t=a(15558),r=a.n(t),s=a(90228),l=a.n(s),i=a(87999),o=a.n(i),c=a(15268),u=a(47043),d=a(69150),m=a(23214),x={mockUrl:"https://tc-apidoc.123u.com/mock/370",devUrl:"",prodUrl:"",path:"/api/v1/secret/create",method:u.n$.POST,requestHeaders:{},requestBodyType:u.Py.json,responseBodyType:u.b.json,dataKey:"data",paramNames:[],queryNames:[],requestDataOptional:!1,requestDataJsonSchema:{},responseDataJsonSchema:{},requestFunctionName:"postApiV1SecretCreate",queryStringArrayFormat:u.s0.brackets,extraInfo:{}},h=function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),t=1;t<n;t++)a[t-1]=arguments[t];return m.Z.apply(void 0,[(0,d.Pl)(x,e)].concat(a))};h.requestConfig=x,h.queryKey="codo_k8s_post_api_v1_secret_create";var p=a(79890),f=a(35837),y=a(89629),Z=a(43040),j=a(39585),v=a(38218),k=a(22927),g=a(66780),b=a(21630),F=a(93441),q=a(3885),I=a(69180),V=a(96286),w=a(13702),P=a(18772),A=a(86309),_=a(70334),C=a(99790),z=a(62193),T=a(32699),S=a.n(T),O=(a(50959),a(11527)),B=function(e){var n=e.form,a=e.title,t=e.open,s=e.onClose,i=e.type,u=e.onOk,d=(0,v.useParams)(),m=d.clusterName,x=void 0===m?"":m,T=d.namespace,B=void 0===T?"":T,N=(0,y.gt)({variables:{list_all:1,cluster_name:x}}).data,L=b.Z.useWatch("type",n);return(0,O.jsx)(F.Z,{open:t,title:a,width:900,onClose:function(){n.resetFields(),s()},extra:(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(I.ZP,{onClick:function(){s(),n.resetFields()},children:"取消"}),(0,O.jsx)(I.ZP,{type:"primary",onClick:o()(l()().mark((function e(){var a;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validateFields();case 2:if(a=e.sent,"edit"!==i){e.next=8;break}return e.next=6,(0,c.kf)({name:a.name,namespace:a.namespace,cluster_name:x,data:S().mapValues(S().keyBy(a.data,"key"),"value"),annotations:S().mapValues(S().keyBy(a.annotations,"key"),"value"),labels:S().mapValues(S().keyBy(a.labels,"key"),"value")});case 6:e.next=10;break;case 8:return e.next=10,h({name:a.name,namespace:a.namespace,cluster_name:x,data:S().mapValues(S().keyBy(a.data,"key"),"value"),annotations:S().mapValues(S().keyBy(a.annotations,"key"),"value"),labels:S().mapValues(S().keyBy(a.labels,"key"),"value")});case 10:n.resetFields(),null==u||u();case 12:case"end":return e.stop()}}),e)}))),children:"确认"})]}),children:(0,O.jsxs)(b.Z,{labelCol:{span:4},form:n,children:[(0,O.jsx)(b.Z.Item,{label:"名称",name:"name",rules:[{required:!0,message:"请输入名称"},{max:63,message:"最长63个字符"},{pattern:/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/,message:"只能包含小写字母、数字、分隔符(“-“）、小数点(“.”)，且必须以小写字母或数字开头和结尾"}],children:(0,O.jsx)(V.Z,{disabled:"edit"===i,placeholder:"最长63个字符，只能包含小写字母、数字、分隔符(“-“）、小数点(“.”)，且必须以小写字母或数字开头和结尾"})}),(0,O.jsx)(b.Z.Item,{label:"命名空间",name:"namespace",rules:[{required:!0,message:"请输入命名空间"}],initialValue:B,children:(0,O.jsx)(w.Z,{options:null==N?void 0:N.list.map((function(e){return{value:e.name,label:e.name}})),disabled:"edit"===i})}),(0,O.jsx)(b.Z.Item,{label:"类型",name:"type",initialValue:"Opaque",children:(0,O.jsx)(P.ZP.Group,{block:!0,options:[{label:"Opaque",value:"Opaque"}],optionType:"button"})}),"Opaque"===L&&(0,O.jsxs)(b.Z.Item,{label:"数据",required:!0,children:[(0,O.jsx)(b.Z.Item,{name:"data",rules:[{required:!0,message:"请添加数据"}],valuePropName:"dataSource",children:(0,O.jsx)(A.Z,{pagination:!1,columns:[{dataIndex:"key",title:"key",ellipsis:!0},{dataIndex:"value",title:"value",ellipsis:!0},{dataIndex:"operation",title:"操作",render:function(e,a){return(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(p.Z,{modalRender:function(e){return(0,O.jsx)(f.Z,{cancel:e,initialValues:a,onOk:function(e){var t=n.getFieldValue("data")||[];t.some((function(n){return n.key===e.key}))?_.ZP.warning("存在重复key，请修改key"):n.setFieldsValue({data:(0,Z.A)(t,e,{key:a.key})})}})},children:(0,O.jsx)("a",{children:"编辑"})}),(0,O.jsx)("a",{onClick:function(){n.setFieldsValue({data:S().reject(n.getFieldValue("data"),{key:a.key})})},children:"删除"})]})}}]})}),(0,O.jsxs)(q.Z,{style:{marginTop:10},children:[(0,O.jsx)(p.Z,{modalRender:function(e){return(0,O.jsx)(f.Z,{cancel:e,onOk:function(a){var t=n.getFieldValue("data")||[];t.some((function(e){return e.key===a.key}))?_.ZP.warning("存在重复key，请修改key"):(n.setFieldsValue({data:[].concat(r()(t),[a])}),e())}})},children:(0,O.jsx)(I.ZP,{type:"primary",children:"添加数据"})}),(0,O.jsx)(C.Z,{beforeUpload:function(e){if(e){var a=new FileReader;a.onload=function(a){var t,s=null===(t=a.target)||void 0===t?void 0:t.result,l=n.getFieldValue("data")||[];l.some((function(n){return n.key===(0,j.yZ)(e.name)}))?_.ZP.warning("存在重复key，请修改key"):n.setFieldsValue({data:[].concat(r()(l),[{key:(0,j.yZ)(e.name),value:s}])})},a.readAsText(e)}return!1},fileList:[],children:(0,O.jsx)(I.ZP,{children:"上传文件"})})]})]}),"Dockerconfigjson"===L&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z.Item,{label:"仓库地址",name:"nadame",rules:[{required:!0,message:"请输入仓库域名或IP"}],children:(0,O.jsx)(V.Z,{placeholder:"请输入仓库域名或IP"})}),(0,O.jsx)(b.Z.Item,{label:"用户名",name:"nadadsasme",rules:[{required:!0,message:"请输入仓库用户名"}],children:(0,O.jsx)(V.Z,{placeholder:"请输入仓库用户名"})}),(0,O.jsx)(b.Z.Item,{label:"密码",name:"nadadsame",rules:[{required:!0,message:"请输入仓库密码"}],children:(0,O.jsx)(V.Z.Password,{placeholder:"请输入仓库密码"})})]}),"TLS"===L&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(b.Z.Item,{label:"tls.crt",children:[(0,O.jsx)(b.Z.Item,{name:"tls-crt",children:(0,O.jsx)(V.Z.TextArea,{rows:4,placeholder:"请输入tls.crt"})}),(0,O.jsx)(C.Z,{beforeUpload:function(e){if(e){var a=new FileReader;a.onload=function(e){var a,t=null===(a=e.target)||void 0===a?void 0:a.result;n.setFieldsValue({"tls-crt":t})},a.readAsText(e)}return!1},fileList:[],children:(0,O.jsx)(I.ZP,{children:"上传文件"})})]}),(0,O.jsxs)(b.Z.Item,{label:"tls.key",children:[(0,O.jsx)(b.Z.Item,{name:"tls-key",children:(0,O.jsx)(V.Z.TextArea,{rows:4,placeholder:"请输入仓库用户名"})}),(0,O.jsx)(C.Z,{beforeUpload:function(e){if(e){var a=new FileReader;a.onload=function(e){var a,t=null===(a=e.target)||void 0===a?void 0:a.result;n.setFieldsValue({"tls-key":t})},a.readAsText(e)}return!1},fileList:[],children:(0,O.jsx)(I.ZP,{children:"上传文件"})})]})]}),(0,O.jsx)(b.Z.Item,{label:"标签",children:(0,O.jsx)(b.Z.List,{name:"labels",children:function(e,a){var t=a.add,r=a.remove;return(0,O.jsxs)(O.Fragment,{children:[e.map((function(e,a){return(0,O.jsxs)(z.Z,{gap:16,children:[(0,O.jsx)(b.Z.Item,{name:[e.name,"key"],style:{width:"100%"},rules:[{required:!0,message:"请输入key"},{max:63,message:"最长63个字符"},{message:"支持字母、数字及分隔符（“-”、“_”、”.”、“/”），需以字母、数字开头",pattern:/^[a-zA-Z0-9][a-zA-Z0-9./_-]*$/},{validator:function(e,t){return(n.getFieldValue("labels")||[]).some((function(e,n){return e.key===t&&a!==n}))?Promise.reject(new Error("存在重复key，请修改key")):Promise.resolve()}}],children:(0,O.jsx)(V.Z,{placeholder:"请输入键"})}),(0,O.jsx)(b.Z.Item,{name:[e.name,"value"],style:{width:"100%"},rules:[{required:!0,message:"请输入value"},{max:63,message:"最长63个字符"},{message:"支持字母、数字及分隔符（“-”、“_”、”.”、“/”），需以字母、数字开头",pattern:/^[a-zA-Z0-9][a-zA-Z0-9./_-]*$/}],children:(0,O.jsx)(V.Z,{placeholder:"请输入值"})}),(0,O.jsx)(k.Z,{style:{display:"flex",alignSelf:"baseline",paddingTop:10},onClick:function(){r(e.name)}})]},e.key)})),(0,O.jsx)("div",{children:(0,O.jsx)("a",{onClick:function(){t()},children:(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(g.Z,{style:{fontSize:20,verticalAlign:"text-bottom"}}),"添加"]})})})]})}})}),(0,O.jsx)(b.Z.Item,{label:"注解",children:(0,O.jsx)(b.Z.List,{name:"annotations",children:function(e,a){var t=a.add,r=a.remove;return(0,O.jsxs)(O.Fragment,{children:[e.map((function(e,a){return(0,O.jsxs)(z.Z,{gap:16,children:[(0,O.jsx)(b.Z.Item,{name:[e.name,"key"],rules:[{required:!0,message:"请输入key"},{max:63,message:"最长63个字符"},{message:"支持字母、数字及分隔符（“-”、“_”、”.”、“/”），需以字母、数字开头",pattern:/^[a-zA-Z0-9][a-zA-Z0-9./_-]*$/},{validator:function(e,t){return(n.getFieldValue("annotations")||[]).some((function(e,n){return e.key===t&&a!==n}))?Promise.reject(new Error("存在重复key，请修改key")):Promise.resolve()}}],style:{width:"100%"},children:(0,O.jsx)(V.Z,{placeholder:"请输入键"})}),(0,O.jsx)(b.Z.Item,{name:[e.name,"value"],rules:[{required:!0,message:"请输入value"}],style:{width:"100%"},children:(0,O.jsx)(V.Z,{placeholder:"请输入值"})}),(0,O.jsx)(k.Z,{style:{display:"flex",alignSelf:"baseline",paddingTop:10},onClick:function(){r(e.name)}})]},e.key)})),(0,O.jsx)("div",{children:(0,O.jsx)("a",{onClick:function(){t()},children:(0,O.jsxs)(q.Z,{children:[(0,O.jsx)(g.Z,{style:{fontSize:20,verticalAlign:"text-bottom"}}),"添加"]})})})]})}})})]})})}},43040:function(e,n,a){a.d(n,{A:function(){return s}});var t=a(32699),r=a.n(t),s=function(e,n,a){if(!e)return[];var t=r().findIndex(e,a);return t>-1?r().set(e,t,n):e}},56765:function(e,n,a){a.d(n,{jp:function(){return o},kZ:function(){return u},yq:function(){return c}});var t=a(5726),r=a.n(t),s=a(11110),l=a.n(s);r().extend(l());var i=function(e){var n=(Date.now()-e)/1e3;return n<60?{duration:n,unit:"second"}:n<3600?{duration:Math.floor(n/60),unit:"minute"}:n<86400?{duration:Math.floor(n/3600),unit:"hour"}:{duration:Math.floor(n/86400),unit:"day"}},o=function(e){if(void 0===e)return"";var n=i(e);return"second"===n.unit?"1分钟内":"".concat(n.duration," ").concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[n.unit],"前")},c=function(e){var n=i(e);return"second"===n.unit?"1分钟内":"约".concat(n.duration).concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[n.unit])},u=function(e){return isNaN(Number(e))?e:r()(Number(e)).format("YYYY-MM-DD HH:mm:ss")}}}]);