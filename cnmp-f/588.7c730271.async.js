"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[588],{27948:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(8117),l=t(99381),a=t(470),i=t(35028),o=t(32699),c=t.n(o),s=(t(50959),"main___yy0nV"),u=t(11527),d=function(e){var n=e.onChange,t=e.value,o=e.style,d=e.min,f=e.max;return(0,u.jsx)(a.Z,{controls:!1,addonBefore:(0,u.jsx)(i.ZP,{onClick:function(){c().isNil(t)?null==n||n(d||0):c().isNil(d)?null==n||n(t-1):null==n||n(Math.max(d,t-1))},children:(0,u.jsx)(r.Z,{})}),addonAfter:(0,u.jsx)(i.ZP,{onClick:function(){c().isNil(t)?null==n||n(f||0):c().isNil(f)?null==n||n(t+1):null==n||n(Math.min(f,t+1))},children:(0,u.jsx)(l.Z,{})}),value:t,onChange:function(e){null!==e&&(null==n||n(e))},style:o,className:s})}},60396:function(e,n,t){var r=t(48305),l=t.n(r),a=t(16639),i=t(50959),o=t(11527);n.Z=function(e){var n=e.children,t=e.modalRender,r=(0,i.useState)(!1),c=l()(r,2),s=c[0],u=c[1],d=a.Z.useForm(),f=l()(d,1)[0];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{onClick:function(){u(!0)},children:n}),s&&(null==t?void 0:t((function(){u(!1)}),f))]})}},69346:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(15558),l=t.n(r),a=t(26068),i=t.n(a),o=t(48305),c=t.n(o),s=t(56330),u=t(79179),d=t(60125),f=t(10534),h=t(65460),p=t(80699),m=t(82187),v=t.n(m),x=t(50959),y="no-left-title___t8LWq",Z=t(11527),g=function(e){var n=e.placeholder,t=e.request,r=e.columns,a=e.leftTitle,o=e.tableProps,m=e.showSearch,g=void 0===m||m,j=e.dataSource,k=e.searchWidth,w=e.rightTitle,C=void 0===w?[]:w,b=e.refreshDeps,S=e.actionRef,L=e.hideTitle,_=(0,d.T)(S),B=(0,x.useState)(""),N=c()(B,2),T=N[0],P=N[1],R=(0,x.useRef)(""),Y=(0,f.Z)((function(){var e,n;null===(e=_.current)||void 0===e||null===(n=e.reloadAndRest)||void 0===n||n.call(e)}),{wait:500}).run;return(0,h.Z)((function(){var e;null===(e=_.current)||void 0===e||e.reload()}),b||[]),(0,Z.jsx)(u.Z,i()({className:v()((""===a||void 0===a)&&y),actionRef:_,headerTitle:a,dataSource:j,search:!1,columns:r,request:t&&function(e){return t(i()(i()({},e),{},{keyword:R.current}))},pagination:{showSizeChanger:!0},options:{reload:!!t},toolBarRender:!L&&function(){return[].concat(l()(C),l()(g?[(0,Z.jsx)(p.Z,{style:{width:null!=k?k:300},value:T,placeholder:n,onChange:function(e){P(e.target.value),R.current=e.target.value,Y()},allowClear:!0,suffix:(0,Z.jsx)(s.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},o))}},60148:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(26068),l=t.n(r),a=t(59614),i=t(26059),o=t(85584),c=(t(50959),"tag___Cjdmk"),s=t(11527),u=function(e){var n=e.items,t=e.max,r=e.direction,u=void 0===r?"horizontal":r,d=e.tagStyle;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{direction:u,size:[4,0],wrap:!0,children:n.slice(0,t).map((function(e,n){return(0,s.jsx)(i.Z,{title:e.value,children:(0,s.jsx)(o.Z,{className:c,color:e.color,style:l()({overflow:"hidden",textOverflow:"ellipsis"},d),children:e.value},n)},n)}))}),t&&n.length>t&&(0,s.jsx)(i.Z,{color:"#ffffff",title:(0,s.jsx)(s.Fragment,{children:n.slice(t).map((function(e,n){return(0,s.jsx)(o.Z,{className:c,color:e.color,children:e.value},n)}))}),children:(0,s.jsx)(o.Z,{className:c,children:"..."})})]})}},60125:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(50959),l=function(e,n){var t=(0,r.useRef)(n);return e||t}},58082:function(e,n,t){t.d(n,{J:function(){return a}});var r=t(32030),l=t(50959),a=function(){var e=(0,r.useNavigate)();return(0,l.useCallback)((function(n){n&&e(n),e("/refresh"),setTimeout((function(){e(-1)}),0)}),[e])}},44908:function(e,n,t){var r=t(15558),l=t.n(r),a=t(48305),i=t.n(a),o=t(30813),c=t(58082),s=t(29882),u=t(32030),d=t(8096),f=t(33587),h=t(20811),p=t(51142),m=t(2918),v=t(30766),x=t(80699),y=t(59614),Z=t(35028),g=t(50959),j=t(84609),k=t(11527),w=h.Z.useToken;n.Z=function(e){var n=e.clusterName,t=e.items,r=e.sourceType,a=e.switchCluster,h=(0,g.useState)(""),C=i()(h,2),b=C[0],S=C[1],L=(0,g.useState)([]),_=i()(L,2),B=_[0],N=_[1],T=(0,f.Z)(!1),P=i()(T,2),R=P[0],Y=P[1],M=Y.setFalse,O=Y.setTrue,U=w().token,A=(0,c.J)(),q=(0,u.useLocation)(),F={backgroundColor:U.colorBgElevated,borderRadius:U.borderRadiusLG,boxShadow:U.boxShadowSecondary},J={boxShadow:"none"},V=(0,g.useMemo)((function(){return B.filter((function(e){return""===e||e.toLowerCase().indexOf(b.toLowerCase())>-1})).map((function(e){return{key:e,label:(0,k.jsx)("a",{onClick:function(){var n=q.pathname.split("/");a?(n[2]=e,A(n.join("/"))):A("/cluster/".concat(e,"/namespace"))},children:e})}}))}),[b,B,a]);return(0,g.useEffect)((function(){(0,o.LB)({list_all:"1"}).then((function(e){var n;N((null===(n=e.list)||void 0===n?void 0:n.map((function(e){return e.name})))||[])}))}),[]),(0,k.jsxs)("div",{className:j.Z.block,children:[(0,k.jsxs)(p.Z,{justify:"space-between",align:"center",children:[(0,k.jsx)(m.Z,{items:[{title:(0,k.jsx)(u.Link,{to:"/cluster-list",children:"集群列表"})},{title:(0,k.jsx)(v.Z,{dropdownRender:function(e){return(0,k.jsxs)("div",{style:F,children:[(0,k.jsx)("div",{style:{padding:8},children:(0,k.jsx)(x.Z,{style:{width:"100%"},placeholder:"请输入集群名称",value:b,onChange:function(e){return S(e.target.value)}})}),g.cloneElement(e,{style:J})]})},menu:{items:V},children:(0,k.jsxs)(y.Z,{children:["集群名称: ",n,(0,k.jsx)(d.Z,{})]})})}].concat(l()(t||[]))}),(0,k.jsx)(Z.ZP,{type:"primary",onClick:function(){O()},children:"YAML创建资源"})]}),R&&(0,k.jsx)(s.Z,{clusterName:n,onCancel:function(){M()},sourceType:r})]})}},29882:function(e,n,t){var r=t(48305),l=t.n(r),a=t(26068),i=t.n(a),o=t(30813),c=t(30433),s=t(31906),u=t(88934),d=t(97628),f=t(35028),h=t(81861),p=t(32699),m=t.n(p),v=t(50959),x=t(11527),y=i()({node:o.wB,namespace:o.B8,hpa:o.F_},m().mapValues(c.J,(function(e){return e.createOrUpdateByYaml})));n.Z=function(e){var n=e.onCancel,t=e.onOk,r=e.clusterName,a=e.defaultValue,i=e.readonly,o=e.sourceType,c=(0,v.useState)(a||""),p=l()(c,2),m=p[0],Z=p[1];return(0,x.jsxs)(u.Z,{title:"YAML创建资源",open:!0,style:{top:20},onCancel:n,okButtonProps:i?{style:{display:"none"}}:{},onOk:function(){m?o?y[o]({yaml:m,cluster_name:r}).then((function(){null==n||n(),null==t||t(m),d.ZP.success("YAML创建资源成功")})).catch((function(e){d.ZP.error(e.reason)})):null==t||t(m):d.ZP.warning("请输入YAML")},width:"80vw",children:[(0,x.jsx)(s.ZP,{theme:"vs-dark",language:"yaml",value:m,onChange:function(e){Z(e||"")},height:"75vh",options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",scrollBeyondLastLine:!1}}),(0,x.jsx)("div",{style:{position:"relative",height:0},children:i?(0,x.jsx)(f.ZP,{type:"primary",style:{position:"absolute",top:12},ghost:!0,onClick:function(){navigator.clipboard.writeText(m).then((function(){d.ZP.success("复制成功")}))},children:"复制"}):(0,x.jsx)(h.Z,{beforeUpload:function(e){var n=new FileReader;return n.readAsText(e),n.onload=function(e){var n,t=null===(n=e.target)||void 0===n?void 0:n.result;t&&Z(t)},!1},accept:".yaml",showUploadList:!1,children:(0,x.jsx)(f.ZP,{type:"primary",onClick:function(){},style:{position:"absolute",top:12},children:"导入YAML"})})})]})}},30433:function(e,n,t){t.d(n,{J:function(){return l}});var r=t(30813),l={deployment:{detail:r.Ke,createOrUpdateByYaml:r.ek,replicasetList:r.hX,rollback:r.KZ,delete:r.Ax,restart:r.$l,scale:r.po,scaleStream:void 0,upgradeStrategy:void 0},"clone-set":{detail:r.iP,createOrUpdateByYaml:r.WX,replicasetList:r.qr,rollback:r.nV,delete:r.VE,restart:r.pk,scale:r.YM,scaleStream:r.kd,upgradeStrategy:r.S8},"game-server-set":{detail:r.dq,createOrUpdateByYaml:r.q4,replicasetList:r.lr,rollback:r.MC,delete:r.L5,restart:r._U,scale:r.lq,scaleStream:r.b_,upgradeStrategy:r.ZG},"stateful-set":{detail:r.dd,createOrUpdateByYaml:r.Iu,replicasetList:r.tR,rollback:r.Cq,delete:r.iU,restart:r.R,scale:r.K9,scaleStream:void 0,upgradeStrategy:void 0},"daemon-set":{detail:r.x2,createOrUpdateByYaml:r.D7,replicasetList:r.Xi,rollback:r.ti,delete:r.JY,restart:r.Bw,scale:r.Xx,scaleStream:void 0,upgradeStrategy:void 0}}},84609:function(e,n){n.Z={block:"block___a01xI"}}}]);