(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[663],{59999:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(79482),i=n(50959),a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},s=n(28371),o=function(t,e){return i.createElement(s.Z,(0,r.Z)({},t,{ref:e,icon:a}))};var u=i.forwardRef(o)},27274:function(t,e,n){"use strict";n.d(e,{Z:function(){return x}});var r=n(15558),i=n.n(r),a=n(26068),s=n.n(a),o=n(48305),u=n.n(o),c=n(45778),l=n(95974),f=n(41710),d=n(10534),h=n(65460),m=n(96286),v=n(50959),p="table___Rup7Y",g=n(11527),x=function(t){var e=t.placeholder,n=t.request,r=t.columns,a=t.leftTitle,o=t.tableProps,x=t.showSearch,$=void 0===x||x,w=t.dataSource,Z=t.searchWidth,y=t.rightTitle,C=void 0===y?[]:y,j=t.refreshDeps,D=t.actionRef,S=t.hideTitle,T=t.searchStyle,_=t.onSearch,M=(0,c.T)(D),b=(0,v.useState)(""),k=u()(b,2),P=k[0],Y=k[1],O=(0,v.useRef)(""),R=(0,d.Z)((function(){var t,e;null==_||_(P),null===(t=M.current)||void 0===t||null===(e=t.reloadAndRest)||void 0===e||e.call(t)}),{wait:500}).run;return(0,h.Z)((function(){var t;null===(t=M.current)||void 0===t||t.reload()}),j||[]),(0,g.jsx)(f.Z,s()({className:p,actionRef:M,headerTitle:a,dataSource:w,search:!1,columns:r,request:n&&function(t){return n(s()(s()({},t),{},{keyword:O.current}))},pagination:{showSizeChanger:!0,defaultPageSize:50},options:{reload:!!n},toolBarRender:!S&&function(){return[].concat(i()(C),i()($?[(0,g.jsx)(m.Z,{style:s()({width:null!=Z?Z:300},T),value:P,placeholder:e,onChange:function(t){Y(t.target.value),O.current=t.target.value,R()},allowClear:!0,suffix:(0,g.jsx)(l.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},o))}},45778:function(t,e,n){"use strict";n.d(e,{T:function(){return i}});var r=n(50959),i=function(t,e){var n=(0,r.useRef)(e);return t||n}},28445:function(t,e,n){"use strict";n.r(e);var r=n(90228),i=n.n(r),a=n(87999),s=n.n(a),o=n(15268),u=n(79890),c=n(27274),l=n(34593),f=n(36954),d=n(16782),h=n(56765),m=n(38218),v=n(56260),p=n(59999),g=n(21374),x=n(3885),$=n(3827),w=n(96286),Z=n(70334),y=n(50959),C=n(11527);e.default=function(){var t=(0,m.useParams)(),e=t.clusterName,n=void 0===e?"":e,r=t.namespace,a=void 0===r?"":r,j=(0,y.useRef)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.Z,{items:[{title:"存储卷声明PersistentVolumeClaim"}],showNamespace:!0}),(0,C.jsx)(c.Z,{actionRef:j,columns:[{dataIndex:"name",title:"名称",width:240,ellipsis:!0,render:function(t,e){return(0,C.jsx)(d.Z,{follow_type:"PersistentVolumeClaim",follow_value:e.name,follow:e.is_followed,style:{paddingRight:6},title:e.name,children:t})}},{dataIndex:"capacity",title:"容量",width:90,ellipsis:!0},{dataIndex:"status",title:"状态",width:100,render:function(t){return"Bound"===t?(0,C.jsxs)(x.Z,{style:{color:"var(--color-success)"},children:[(0,C.jsx)(v.Z,{}),t]}):"Lost"===t?(0,C.jsxs)(x.Z,{style:{color:"var(--color-error)"},children:[(0,C.jsx)(p.Z,{}),t]}):(0,C.jsxs)(x.Z,{style:{color:"var(--color-warning)"},children:[(0,C.jsx)(g.Z,{}),t]})}},{dataIndex:"volume_name",title:"绑定的存储卷",width:200,ellipsis:!0},{dataIndex:"access_modes",title:"访问模式",width:160,ellipsis:!0,render:function(t,e){var n;return(null===(n=e.access_modes)||void 0===n?void 0:n.join(","))||""}},{dataIndex:"storage_class_name",title:"存储类",width:140,ellipsis:!0},{dataIndex:"create_time",title:"创建时间",render:h.kZ,width:160},{dataIndex:"operation",title:"操作",fixed:"right",width:140,render:function(t,e){return(0,C.jsxs)(x.Z,{children:[(0,C.jsx)(u.Z,{modalRender:function(t){return(0,C.jsx)(f.Z,{defaultValue:e.yaml,clusterName:n,onCancel:function(){t()}})},children:(0,C.jsx)("a",{children:"编辑yaml"})}),(0,C.jsx)("a",{onClick:function(){var t=$.Z.confirm({title:"删除PersistentVolumeClaim",width:600,content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("p",{children:["确认删除PersistentVolumeClaim【",e.name,"】？"]}),(0,C.jsx)(w.Z,{placeholder:"请输入PersistentVolumeClaim名称",onChange:function(n){n.target.value===e.name?t.update({okButtonProps:{disabled:!1}}):t.update({okButtonProps:{disabled:!0}})}})]}),okButtonProps:{disabled:!0},onOk:function(){(0,o.zb)({cluster_name:n,name:e.name,namespace:a}).then((function(){var t,e;Z.ZP.success("删除成功"),null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t)}))}})},children:"删除"})]})}}],request:function(){var t=s()(i()().mark((function t(e){var r;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.V9)({cluster_name:n,page:e.current,page_size:e.pageSize,keyword:e.keyword,namespace:a});case 2:return r=t.sent,t.abrupt("return",{data:r.list||[],total:r.total||0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tableProps:{scroll:{x:1e3},rowKey:"name"},placeholder:"模糊搜索PersistentVolumeClaim名称"})]})}},56765:function(t,e,n){"use strict";n.d(e,{jp:function(){return u},kZ:function(){return l},yq:function(){return c}});var r=n(5726),i=n.n(r),a=n(11110),s=n.n(a);i().extend(s());var o=function(t){var e=(Date.now()-t)/1e3;return e<60?{duration:e,unit:"second"}:e<3600?{duration:Math.floor(e/60),unit:"minute"}:e<86400?{duration:Math.floor(e/3600),unit:"hour"}:{duration:Math.floor(e/86400),unit:"day"}},u=function(t){if(void 0===t)return"";var e=o(t);return"second"===e.unit?"1分钟内":"".concat(e.duration," ").concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit],"前")},c=function(t){var e=o(t);return"second"===e.unit?"1分钟内":"约".concat(e.duration).concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit])},l=function(t){return isNaN(Number(t))?t:i()(Number(t)).format("YYYY-MM-DD HH:mm:ss")}},10534:function(t,e,n){"use strict";var r=n(99938),i=n(66292),a=n.n(i),s=n(50959),o=n(53270),u=n(77924),c=n(25492),l=n(80785);e.Z=function(t,e){var n;l.Z&&((0,c.mf)(t)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof t)));var i=(0,o.Z)(t),f=null!==(n=null==e?void 0:e.wait)&&void 0!==n?n:1e3,d=(0,s.useMemo)((function(){return a()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.current.apply(i,(0,r.ev)([],(0,r.CR)(t),!1))}),f,e)}),[]);return(0,u.Z)((function(){d.cancel()})),{run:d,cancel:d.cancel,flush:d.flush}}},11110:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,a){var s=i.prototype;a.utc=function(t){return new i({date:t,utc:!0,args:arguments})},s.utc=function(e){var n=a(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},s.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var o=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var u=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var c=s.utcOffset;s.utcOffset=function(r,i){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],a=i[0],s=60*+i[1]+ +i[2];return 0===s?0:"+"===a?s:-s}(r),null===r))return this;var s=Math.abs(r)<=16?60*r:r,o=this;if(i)return o.$offset=s,o.$u=0===r,o;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(s+u,t)).$offset=s,o.$x.$localOffset=u}else o=this.utc();return o};var l=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var f=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var d=s.diff;s.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var r=this.local(),i=a(t).local();return d.call(r,i,e,n)}}}()}}]);