"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[7609],{65957:function(e,n,t){t.r(n);var a=t(90228),c=t.n(a),l=t(87999),i=t.n(l),r=t(48305),s=t.n(r),o=t(15268),u=t(64059),d=t(34015),m=t(34593),h=t(29762),p=t(43162),k=t(16249),b=t(39585),f=t(56765),x=t(38218),y=t(81901),v=t(47212),j=t(3827),Z=t(70334),_=t(73634),g=t(19338),w=t(50959),C=t(11527);n.default=function(){var e=(0,x.useParams)(),n=e.clusterName,t=void 0===n?"":n,a=e.name,l=void 0===a?"":a,r=e.namespace,N=void 0===r?"":r,P=(0,y.Z)({tab:"basic"}),z=s()(P,2),O=z[0],S=z[1],F=(0,x.useNavigate)(),H=(0,v.Z)((function(){return(0,o.Sf)({name:l,cluster_name:t,namespace:N}).then((function(e){return e.detail}))})).data,A=(0,w.useState)(!1),L=s()(A,2),R=L[0],W=L[1],D=Object.keys((null==H?void 0:H.labels)||{}).length>3||Object.keys((null==H?void 0:H.annotations)||{}).length>3;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m.Z,{items:[{title:(0,C.jsx)(x.Link,{to:"/cluster/".concat(t,"/scale/").concat(N,"/hpa"),children:"弹性伸缩HPA"})},{title:"弹性伸缩HPA详情：".concat(l)}],sourceType:"hpa",showNamespace:!0,showCreateYamlButton:!1,footRender:function(){return H&&(0,C.jsx)(h.Z,{title:"弹性伸缩",yaml:H.yaml,name:H.name,onDelete:function(){j.Z.confirm({title:"【".concat(H.name,"】删除"),content:(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("p",{children:["确认删除：",H.name,"？"]})}),onOk:function(){(0,o.g8)({cluster_name:t,namespace:N,name:H.name}).then((function(){F("/cluster/".concat(t,"/scale/").concat(N,"/hpa")),Z.ZP.success("删除成功")}))}})}})}}),H&&(0,C.jsx)(_.Z,{activeKey:O.tab,onChange:function(e){S({tab:e})},items:[{key:"basic",label:"基础信息",children:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:k.Z.block,children:(0,C.jsx)(g.Z,{items:[{key:"name",label:"注解",children:H.name},{key:"namespace",label:"命名空间",children:H.namespace},{key:"workload",label:"工作负载",children:(0,C.jsxs)(x.Link,{to:"/cluster/".concat(t,"/workloads/").concat(N,"/").concat((0,b.qk)(H.workload_type),"/detail/").concat(H.workload),children:[H.workload,"(",H.workload_type,")"]})},{key:"create_time",label:"创建时间",children:(0,f.kZ)(H.create_time)},{key:"update_time",label:"更新时间",children:(0,f.kZ)(H.update_time)}]})}),(0,C.jsx)("div",{className:k.Z.block,children:(0,C.jsx)(g.Z,{title:"伸缩策略",items:[{key:"min_replicas",label:"最小实例数",children:H.min_replicas},{key:"max_replicas",label:"最大实例数",children:H.max_replicas},{key:"current_replicas",label:"当前实例数",children:H.current_replicas},{key:"utilization",label:"伸缩指标",children:(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:["CPU利用率：",H.target_cpu_utilization,"，当前值",H.current_cpu_utilization]}),(0,C.jsxs)("div",{children:["内存利用率：",H.target_memory_utilization,"，当前值",H.current_memory_utilization]})]})}]})}),(0,C.jsxs)("div",{className:k.Z.block,children:[(0,C.jsx)(g.Z,{title:"注解&标签",items:[{key:"annotations",label:"注解",children:(0,C.jsx)(d.Z,{items:Object.keys(H.annotations||{}).map((function(e){return{value:"".concat(e,":").concat(H.annotations[e])}})),tagStyle:{maxWidth:300},direction:"vertical",max:R?void 0:3})},{key:"labels",label:"标签",children:(0,C.jsx)(d.Z,{items:Object.keys(H.labels||{}).map((function(e){return{value:"".concat(e,":").concat(H.labels[e])}})),tagStyle:{maxWidth:300},max:R?void 0:3,direction:"vertical"})}]}),D&&(0,C.jsx)("div",{style:{right:20,top:20,position:"absolute"},children:(0,C.jsx)("a",{onClick:function(){W(!R)},children:R?"收起":"展开"})})]})]})},{key:"event",label:"事件",children:(0,C.jsx)("div",{className:k.Z.block,style:{padding:"16px 0"},children:(0,C.jsx)(p.Z,{type:"Hpa",name:H.name})})},{key:"yaml",label:"YAML",children:(0,C.jsx)("div",{className:k.Z.block,children:(0,C.jsx)(u.Z,{defaultContent:H.yaml,onRefresh:i()(c()().mark((function e(){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.Sf)({name:l,cluster_name:t,namespace:N}).then((function(e){return Z.ZP.success("刷新成功"),e.detail.yaml||""})));case 1:case"end":return e.stop()}}),e)}))),editorHeight:"calc(100vh - 380px)"})})}]})]})}},16249:function(e,n){n.Z={block:"block___u4hkW"}},10534:function(e,n,t){var a=t(99938),c=t(66292),l=t.n(c),i=t(50959),r=t(53270),s=t(77924),o=t(25492),u=t(80785);n.Z=function(e,n){var t;u.Z&&((0,o.mf)(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var c=(0,r.Z)(e),d=null!==(t=null==n?void 0:n.wait)&&void 0!==t?t:1e3,m=(0,i.useMemo)((function(){return l()((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return c.current.apply(c,(0,a.ev)([],(0,a.CR)(e),!1))}),d,n)}),[]);return(0,s.Z)((function(){m.cancel()})),{run:m,cancel:m.cancel,flush:m.flush}}}}]);