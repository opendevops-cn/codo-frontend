(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[4038],{81901:function(t,e,r){"use strict";var n=r(25844),a=r(12246),i=r(90810),o=r(50959);const u=r(44492),c={parseNumbers:!1,parseBooleans:!1},s={skipNull:!1,skipEmptyString:!1};e.Z=(t,e)=>{var r,l;const{navigateMode:f="push",parseOptions:d,stringifyOptions:p}=e||{},h=Object.assign(Object.assign({},c),d),m=Object.assign(Object.assign({},s),p),v=u.useLocation(),g=null===(r=u.useHistory)||void 0===r?void 0:r.call(u),y=null===(l=u.useNavigate)||void 0===l?void 0:l.call(u),b=(0,n.Z)(),j=(0,o.useRef)("function"==typeof t?t():t||{}),x=(0,o.useMemo)((()=>(0,i.parse)(v.search,h)),[v.search]),O=(0,o.useMemo)((()=>Object.assign(Object.assign({},j.current),x)),[x]);return[O,(0,a.Z)((t=>{const e="function"==typeof t?t(O):t;b(),g&&g[f]({hash:v.hash,search:(0,i.stringify)(Object.assign(Object.assign({},x),e),m)||"?"},v.state),y&&y({hash:v.hash,search:(0,i.stringify)(Object.assign(Object.assign({},x),e),m)||"?"},{replace:"replace"===f,state:v.state})}))]}},27274:function(t,e,r){"use strict";r.d(e,{Z:function(){return y}});var n=r(15558),a=r.n(n),i=r(26068),o=r.n(i),u=r(48305),c=r.n(u),s=r(45778),l=r(95974),f=r(41710),d=r(10534),p=r(65460),h=r(96286),m=r(50959),v="table___Rup7Y",g=r(11527),y=function(t){var e=t.placeholder,r=t.request,n=t.columns,i=t.leftTitle,u=t.tableProps,y=t.showSearch,b=void 0===y||y,j=t.dataSource,x=t.searchWidth,O=t.rightTitle,w=void 0===O?[]:O,$=t.refreshDeps,S=t.actionRef,k=t.hideTitle,C=t.searchStyle,I=t.onSearch,Z=(0,s.T)(S),F=(0,m.useState)(""),R=c()(F,2),N=R[0],T=R[1],D=(0,m.useRef)(""),U=(0,d.Z)((function(){var t,e;null==I||I(N),null===(t=Z.current)||void 0===t||null===(e=t.reloadAndRest)||void 0===e||e.call(t)}),{wait:500}).run;return(0,p.Z)((function(){var t;null===(t=Z.current)||void 0===t||t.reload()}),$||[]),(0,g.jsx)(f.Z,o()({className:v,actionRef:Z,headerTitle:i,dataSource:j,search:!1,columns:n,request:r&&function(t){return r(o()(o()({},t),{},{keyword:D.current}))},pagination:{showSizeChanger:!0,defaultPageSize:50},options:{reload:!!r},toolBarRender:!k&&function(){return[].concat(a()(w),a()(b?[(0,g.jsx)(h.Z,{style:o()({width:null!=x?x:300},C),value:N,placeholder:e,onChange:function(t){T(t.target.value),D.current=t.target.value,U()},allowClear:!0,suffix:(0,g.jsx)(l.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},u))}},45778:function(t,e,r){"use strict";r.d(e,{T:function(){return a}});var n=r(50959),a=function(t,e){var r=(0,n.useRef)(e);return t||r}},23790:function(t,e,r){"use strict";r.r(e);var n=r(90228),a=r.n(n),i=r(87999),o=r.n(i),u=r(48305),c=r.n(u),s=r(15268),l=r(79890),f=r(27274),d=r(34593),p=r(36954),h=r(75580),m=r(56765),v=r(38218),g=r(81901),y=r(47212),b=r(73634),j=r(3885),x=r(70334),O=r(13702),w=r(32699),$=r.n(w),S=r(50959),k=r(11527);e.default=function(){var t,e=(0,v.useParams)().clusterName,r=void 0===e?"":e,n=(0,S.useState)("crd"),i=c()(n,2),u=i[0],w=i[1],C=(0,g.Z)({apiGroup:void 0}),I=c()(C,2),Z=I[0],F=I[1],R=(0,S.useState)([]),N=c()(R,2),T=N[0],D=N[1],U=(0,S.useRef)(),_=(0,S.useMemo)((function(){return(0,h.rK)(r)||"default"}),[r]),A=(0,y.Z)((function(){return(0,s.dV)({cluster_name:r,list_all:"1"}).then((function(t){return t.list||[]}))}),{ready:!!r,onSuccess:function(t){D(t)}}).data;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{items:[{title:"自定义资源 "}]}),(0,k.jsx)(b.Z,{activeKey:u,onChange:function(t){w(t)},items:[{key:"crd",label:"CRD",children:(0,k.jsx)(f.Z,{actionRef:U,columns:[{dataIndex:"name",title:"名称",width:200,render:function(t,e){return(0,k.jsx)(v.Link,{to:"/cluster/".concat(r,"/crd/").concat(e.name,"/").concat(e.api_version,"/").concat(e.api_group).concat("Namespaced"===e.scope?"/".concat(_):""),children:t})},ellipsis:!0},{dataIndex:"kind",title:"类型",width:200,ellipsis:!0},{dataIndex:"api_group",title:"API Group",width:200,ellipsis:!0},{dataIndex:"api_version",title:"API 版本",width:160,ellipsis:!0},{dataIndex:"scope",title:"范围",width:200,ellipsis:!0},{dataIndex:"create_time",title:"创建时间",render:m.kZ,width:160},{dataIndex:"operation",title:"操作",fixed:"right",width:160,render:function(t,e){return(0,k.jsx)(j.Z,{children:(0,k.jsx)(l.Z,{modalRender:function(t){return(0,k.jsx)(p.Z,{defaultValue:e.yaml,clusterName:r,onCancel:function(){t()},onOk:function(e){(0,s.F_)({cluster_name:r,yaml:e}).then((function(){t(),x.ZP.success("编辑成功")}))}})},children:(0,k.jsx)("a",{children:"编辑yaml"})})})}}],request:function(){var t=o()(a()().mark((function t(e){var n;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.o6)({cluster_name:r,page:e.current,page_size:e.pageSize,keyword:e.keyword,namespace:_,api_group:e.apiGroup});case 2:return n=t.sent,t.abrupt("return",{data:n.list||[],total:n.total||0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tableProps:{scroll:{x:1e3},rowKey:"name",params:{apiGroup:Z.apiGroup}},placeholder:"模糊搜索CRD名称",rightTitle:[(0,k.jsx)(O.Z,{style:{width:200},allowClear:!0,placeholder:"请选择API Group",showSearch:!0,value:Z.apiGroup,onChange:function(t){F({apiGroup:t})},options:null===(t=$().uniqBy(A||[],"name"))||void 0===t?void 0:t.map((function(t){return{label:t.name,value:t.name}||[]}))},"api")]})},{key:"api",label:"API Group",children:(0,k.jsx)(f.Z,{actionRef:U,onSearch:function(t){D((null==A?void 0:A.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.api_version.toLowerCase().includes(t.toLowerCase())})))||[])},columns:[{dataIndex:"name",title:"名称",ellipsis:!0,render:function(t,e){return(0,k.jsx)("a",{onClick:function(){F({apiGroup:e.name}),w("crd")},children:t})}},{dataIndex:"api_version",title:"API 版本",ellipsis:!0}],dataSource:T,tableProps:{scroll:{x:1e3},rowKey:function(t){return"".concat(t.name,"-").concat(t.api_version)}},placeholder:"模糊搜索API Group名称、API版本"})}]})]})}},56765:function(t,e,r){"use strict";r.d(e,{jp:function(){return c},kZ:function(){return l},yq:function(){return s}});var n=r(5726),a=r.n(n),i=r(11110),o=r.n(i);a().extend(o());var u=function(t){var e=(Date.now()-t)/1e3;return e<60?{duration:e,unit:"second"}:e<3600?{duration:Math.floor(e/60),unit:"minute"}:e<86400?{duration:Math.floor(e/3600),unit:"hour"}:{duration:Math.floor(e/86400),unit:"day"}},c=function(t){if(void 0===t)return"";var e=u(t);return"second"===e.unit?"1分钟内":"".concat(e.duration," ").concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit],"前")},s=function(t){var e=u(t);return"second"===e.unit?"1分钟内":"约".concat(e.duration).concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit])},l=function(t){return isNaN(Number(t))?t:a()(Number(t)).format("YYYY-MM-DD HH:mm:ss")}},90810:function(t,e,r){"use strict";var n=r(48305).default,a=r(335).default,i=r(31759).default,o=r(15558).default,u=r(28577),c=r(54525),s=r(53403),l=r(1469);function f(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,e){return e.encode?e.strict?u(t):encodeURIComponent(t):t}function p(t,e){return e.decode?c(t):t}function h(t){return Array.isArray(t)?t.sort():"object"===i(t)?h(Object.keys(t)).sort((function(t,e){return Number(t)-Number(e)})).map((function(e){return t[e]})):t}function m(t){var e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function v(t){var e=(t=m(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function g(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function y(t,e){f((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var r=function(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return function(t,r,n){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":case"separator":return function(e,r,n){var a="string"==typeof r&&r.includes(t.arrayFormatSeparator),i="string"==typeof r&&!a&&p(r,t).includes(t.arrayFormatSeparator);r=i?p(r,t):r;var o=a||i?r.split(t.arrayFormatSeparator).map((function(e){return p(e,t)})):null===r?r:p(r,t);n[e]=o};default:return function(t,e,r){void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),o=Object.create(null);if("string"!=typeof t)return o;if(!(t=t.trim().replace(/^[?#&]/,"")))return o;var u,c=a(t.split("&"));try{for(c.s();!(u=c.n()).done;){var l=u.value;if(""!==l){var d=s(e.decode?l.replace(/\+/g," "):l,"="),m=n(d,2),v=m[0],y=m[1];y=void 0===y?null:["comma","separator"].includes(e.arrayFormat)?y:p(y,e),r(p(v,e),y,o)}}}catch(t){c.e(t)}finally{c.f()}for(var b=0,j=Object.keys(o);b<j.length;b++){var x=j[b],O=o[x];if("object"===i(O)&&null!==O)for(var w=0,$=Object.keys(O);w<$.length;w++){var S=$[w];O[S]=g(O[S],e)}else o[x]=g(O,e)}return!1===e.sort?o:(!0===e.sort?Object.keys(o).sort():Object.keys(o).sort(e.sort)).reduce((function(t,e){var r=o[e];return Boolean(r)&&"object"===i(r)&&!Array.isArray(r)?t[e]=h(r):t[e]=r,t}),Object.create(null))}e.extract=v,e.parse=y,e.stringify=function(t,e){if(!t)return"";f((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);for(var r=function(r){return e.skipNull&&null==t[r]||e.skipEmptyString&&""===t[r]},n=function(t){switch(t.arrayFormat){case"index":return function(e){return function(r,n){var a=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(o(r),null===n?[[d(e,t),"[",a,"]"].join("")]:[[d(e,t),"[",d(a,t),"]=",d(n,t)].join("")])}};case"bracket":return function(e){return function(r,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(o(r),null===n?[[d(e,t),"[]"].join("")]:[[d(e,t),"[]=",d(n,t)].join("")])}};case"comma":case"separator":return function(e){return function(r,n){return null==n||0===n.length?r:0===r.length?[[d(e,t),"=",d(n,t)].join("")]:[[r,d(n,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(r,n){return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:[].concat(o(r),null===n?[d(e,t)]:[[d(e,t),"=",d(n,t)].join("")])}}}}(e),a={},i=0,u=Object.keys(t);i<u.length;i++){var c=u[i];r(c)||(a[c]=t[c])}var s=Object.keys(a);return!1!==e.sort&&s.sort(e.sort),s.map((function(r){var a=t[r];return void 0===a?"":null===a?d(r,e):Array.isArray(a)?a.reduce(n(r),[]).join("&"):d(r,e)+"="+d(a,e)})).filter((function(t){return t.length>0})).join("&")},e.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var r=s(t,"#"),a=n(r,2),i=a[0],o=a[1];return Object.assign({url:i.split("?")[0]||"",query:y(v(t),e)},e&&e.parseFragmentIdentifier&&o?{fragmentIdentifier:p(o,e)}:{})},e.stringifyUrl=function(t,r){r=Object.assign({encode:!0,strict:!0},r);var n=m(t.url).split("?")[0]||"",a=e.extract(t.url),i=e.parse(a,{sort:!1}),o=Object.assign(i,t.query),u=e.stringify(o,r);u&&(u="?".concat(u));var c=function(t){var e="",r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(c="#".concat(d(t.fragmentIdentifier,r))),"".concat(n).concat(u).concat(c)},e.pick=function(t,r,n){n=Object.assign({parseFragmentIdentifier:!0},n);var a=e.parseUrl(t,n),i=a.url,o=a.query,u=a.fragmentIdentifier;return e.stringifyUrl({url:i,query:l(o,r),fragmentIdentifier:u},n)},e.exclude=function(t,r,n){var a=Array.isArray(r)?function(t){return!r.includes(t)}:function(t,e){return!r(t,e)};return e.pick(t,a,n)}},53403:function(t){"use strict";t.exports=function(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},28577:function(t){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%".concat(t.charCodeAt(0).toString(16).toUpperCase())}))}},10534:function(t,e,r){"use strict";var n=r(99938),a=r(66292),i=r.n(a),o=r(50959),u=r(53270),c=r(77924),s=r(25492),l=r(80785);e.Z=function(t,e){var r;l.Z&&((0,s.mf)(t)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof t)));var a=(0,u.Z)(t),f=null!==(r=null==e?void 0:e.wait)&&void 0!==r?r:1e3,d=(0,o.useMemo)((function(){return i()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.current.apply(a,(0,n.ev)([],(0,n.CR)(t),!1))}),f,e)}),[]);return(0,c.Z)((function(){d.cancel()})),{run:d,cancel:d.cancel,flush:d.flush}}},11110:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(t){return new a({date:t,utc:!0,args:arguments})},o.utc=function(e){var r=i(this.toDate(),{locale:this.$L,utc:!0});return e?r.add(this.utcOffset(),t):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var u=o.parse;o.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),u.call(this,t)};var c=o.init;o.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var s=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?s.call(this):this.$offset;if("string"==typeof n&&(n=function(t){void 0===t&&(t="");var n=t.match(e);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n),null===n))return this;var o=Math.abs(n)<=16?60*n:n,u=this;if(a)return u.$offset=o,u.$u=0===n,u;if(0!==n){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(o+c,t)).$offset=o,u.$x.$localOffset=c}else u=this.utc();return u};var l=o.format;o.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},o.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var f=o.toDate;o.toDate=function(t){return"s"===t&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var d=o.diff;o.diff=function(t,e,r){if(t&&this.$u===t.$u)return d.call(this,t,e,r);var n=this.local(),a=i(t).local();return d.call(n,a,e,r)}}}()},54525:function(t){"use strict";var e="%[a-f0-9]{2}",r=new RegExp("("+e+")|([^%]+?)","gi"),n=new RegExp("("+e+")+","gi");function a(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],a(r),a(n))}function i(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r)||[],n=1;n<e.length;n++)e=(t=a(e,n).join("")).match(r)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var a=i(r[0]);a!==r[0]&&(e[r[0]]=a)}r=n.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),u=0;u<o.length;u++){var c=o[u];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},1469:function(t){"use strict";t.exports=function(t,e){for(var r={},n=Object.keys(t),a=Array.isArray(e),i=0;i<n.length;i++){var o=n[i],u=t[o];(a?-1!==e.indexOf(o):e(o,u,t))&&(r[o]=u)}return r}}}]);