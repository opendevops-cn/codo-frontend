"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[2586],{1160:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(79482),r=t(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},l=t(28371),o=function(e,n){return r.createElement(l.Z,(0,a.Z)({},e,{ref:n,icon:c}))};var i=r.forwardRef(o)},13749:function(e,n,t){t.d(n,{Z:function(){return v}});var a=t(79482),r=t(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},l=t(28371),o=function(e,n){return r.createElement(l.Z,(0,a.Z)({},e,{ref:n,icon:c}))};var i=r.forwardRef(o),s=t(64910),u=t(22639),d=t(69180),m=t(32699),f=t.n(m),p="main___yy0nV",h=t(11527),v=function(e){var n=e.onChange,t=e.value,a=e.style,r=e.min,c=e.max;return(0,h.jsx)(u.Z,{controls:!1,addonBefore:(0,h.jsx)(d.ZP,{onClick:function(){f().isNil(t)?null==n||n(r||0):f().isNil(r)?null==n||n(t-1):null==n||n(Math.max(r,t-1))},children:(0,h.jsx)(i,{})}),addonAfter:(0,h.jsx)(d.ZP,{onClick:function(){f().isNil(t)?null==n||n(c||0):f().isNil(c)?null==n||n(t+1):null==n||n(Math.min(c,t+1))},children:(0,h.jsx)(s.Z,{})}),value:t,onChange:function(e){null!==e&&(null==n||n(e))},style:a,className:p})}},2586:function(e,n,t){t.d(n,{Z:function(){return Me}});var a=t(15558),r=t.n(a),c=t(90228),l=t.n(c),o=t(87999),i=t.n(o),s=t(48305),u=t.n(s),d=t(64059),m=t(34593),f=t(29762),p=t(43162),h=t(39383),v=t(91199),x=t(39585),y=t(38218),g=t(81901),Z=t(47212),b=t(3827),j=t(70334),k=t(73634),w=t(50959),C=t(23352),_=t(79890),R=t(27274),S=t(34015),A=t(36954),N=t(56765),P=t(82187),T=t.n(P),I=t(11527),M=function(e){var n=e.type,t=e.yaml,a=(0,y.useParams)(),r=a.clusterName,c=void 0===r?"":r,o=a.name,s=void 0===o?"":o,u=a.namespace,d=void 0===u?"":u,m=(0,w.useRef)();return(0,I.jsx)(R.Z,{showSearch:!1,actionRef:m,request:i()(l()().mark((function e(){var t,a,r;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(a=v.J[n]).replicasetList)||void 0===t?void 0:t.call(a,{cluster_name:c,namespace:d,name:s});case 2:return r=e.sent,e.abrupt("return",{data:(null==r?void 0:r.list)||[],total:(null==r?void 0:r.total)||0});case 4:case"end":return e.stop()}}),e)}))),columns:[{title:"版本",dataIndex:"version"},{title:"镜像",dataIndex:"images",render:function(e){return(0,I.jsx)(S.Z,{items:e.map((function(e){return{value:e}}))})}},{title:"版本详情",dataIndex:"yaml",render:function(e){return(0,I.jsx)(_.Z,{modalRender:function(n){return(0,I.jsx)(A.Z,{clusterName:c,defaultValue:e,onCancel:n,readonly:!0,sourceType:"deployment"})},children:(0,I.jsx)("a",{children:"查看YAML"})})}},{title:"创建时间",dataIndex:"create_time",render:N.kZ},{title:"操作",dataIndex:"is_current",render:function(e,a){return(0,I.jsx)("a",{className:T()(e&&"disabled-link"),onClick:function(){b.Z.confirm({title:"【".concat(s,"】回滚"),width:"80vw",content:(0,I.jsx)(C.S,{showSimplify:!0,originalContent:t,modifiedContent:a.yaml}),onOk:function(){var e,t;null===(e=(t=v.J[n]).rollback)||void 0===e||e.call(t,{cluster_name:c,name:s,namespace:d,version:a.version}).then((function(){var e;j.ZP.success("操作成功"),null===(e=m.current)||void 0===e||e.reload()}))}})},children:"回滚"})}}]})},O=t(56260),L=t(1160),E=t(3885),B=t(49072),U=t(19338),D={InPlaceIfPossible:"优先原地升级 InPlaceIfPossible",InPlaceOnly:"仅原地升级 InPlaceOnly",Recreate:"重新创建 Recreate",RollingUpdate:"滚动更新 RollingUpdate",OnDelete:"删除后更新 OnDelete",NotUpdate:"不更新 NotUpdate"},F={Running:"var(--color-success)",Succeeded:"var(--color-success)",Failed:"var(--color-error)"},z=function(e){var n=e.detailData,t=e.type,a=(0,w.useState)(!1),c=u()(a,2),l=c[0],o=c[1],i=(0,w.useMemo)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).map((function(e){var n=u()(e,2),t=n[0],a=n[1];return{value:"".concat(t,":").concat(a)}}))};return[e(n.annotations),e(n.labels)].concat(r()(n.selector?[e(n.selector.matchLabels)]:[]))}),[n]),s=i.some((function(e){return e.length>3})),d=(0,w.useMemo)((function(){return!s||l?i:i.map((function(e){return e.slice(0,3)}))}),[l,s]),m=(0,w.useMemo)((function(){if("pod"===t){var e=n;return[{key:"name",label:"名称",children:e.name},{key:"namespace",label:"命名空间",children:e.namespace},{key:"create_time",label:"创建时间",children:(0,N.kZ)(e.create_time||"")},{key:"status",label:"状态",children:(0,I.jsx)("span",{style:{color:F[e.status]||"var(--color-warning)"},children:e.status})},{key:"namespace",label:"节点IP",children:e.node_ip},{key:"namespace",label:"实例IP",children:e.pod_ip},{key:"namespace",label:"重启次数",children:e.restart_count}]}var a=n;return[{key:"name",label:"名称",children:a.name},{key:"create_time",label:"创建时间",children:(0,N.kZ)(a.create_time)},{key:"upadate_time",label:"更新时间",children:(0,N.kZ)(a.create_time)}].concat(r()("sidecar-set"!==t?[{key:"replicas",label:"副本数",children:a.replicas},{key:"status",label:"状态",children:"就绪: ".concat(a.status.readyReplicas,"/").concat(a.status.replicas," | 已更新: ").concat(a.status.updatedReplicas,"  | 可用: ").concat(a.status.availableReplicas," ")}]:[{key:"status",label:"状态",children:(0,I.jsxs)("span",{children:[(0,I.jsxs)(E.Z,{size:4,style:{color:a.status.readyReplicas===a.status.replicas?"var(--color-success)":"var(--color-warning)"},children:[a.status.readyReplicas===a.status.replicas?(0,I.jsx)(O.Z,{}):(0,I.jsx)(L.Z,{}),(0,I.jsxs)("span",{children:["就绪: ",a.status.readyReplicas,"/",a.status.replicas]})]})," ","| 已更新: ",a.status.updatedReplicas," | 已更新可用:",a.status.availableReplicas]})}]),[{key:"update_strategy",label:"更新策略",children:D[a.update_strategy.update_strategy_type]||""}])}),[t,n]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(B.Z,{style:{marginBottom:20},children:(0,I.jsx)(U.Z,{title:"基础信息",items:m})}),(0,I.jsxs)(B.Z,{style:{marginBottom:20},children:[(0,I.jsx)(U.Z,{title:d.length>=3?"注解&标签&选择器":"注解&标签",items:[{key:"annotations",label:"注解",children:(0,I.jsx)(S.Z,{items:d[0],tagStyle:{maxWidth:300},direction:"vertical"})},{key:"labels",label:"标签",children:(0,I.jsx)(S.Z,{items:d[1],tagStyle:{maxWidth:300},direction:"vertical"})}].concat(r()(d[2]?[{key:"selector",label:"选择器",children:(0,I.jsx)(S.Z,{items:d[2],tagStyle:{maxWidth:300},direction:"vertical"})}]:[]))}),s&&(0,I.jsx)("div",{style:{textAlign:"right"},children:(0,I.jsx)("a",{onClick:function(){o(!l)},children:l?"收起":"展开"})})]}),"sidecar-set"!==t&&(0,I.jsx)(R.Z,{dataSource:n.conditions,columns:[{title:"类型",dataIndex:"type"},{title:"状态",dataIndex:"status"}].concat(r()("pod"===t?[{title:"lastProbeTime",dataIndex:"lastProbeTime",render:function(e){return"-"===e?e:N.jp}}]:[{title:"reason",dataIndex:"reason"},{title:"message",dataIndex:"message"},{title:"lastHeartbeatTime",dataIndex:"lastUpdateTime",render:N.jp}]),[{title:"lastTransitionTime",dataIndex:"lastTransitionTime",render:N.jp}]),leftTitle:"健康检查"})]})},J=t(15268),W=t(12446),H=t(75419),V=t(32643),Y=t(99938),q=t(38209),K=t.n(q),X=t(53270),$=t(77924),G=t(25492),Q=t(80785);var ee,ne=function(e,n){var t;Q.Z&&((0,G.mf)(e)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e)));var a=(0,X.Z)(e),r=null!==(t=null==n?void 0:n.wait)&&void 0!==t?t:1e3,c=(0,w.useMemo)((function(){return K()((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a.current.apply(a,(0,Y.ev)([],(0,Y.CR)(e),!1))}),r,n)}),[]);return(0,$.Z)((function(){c.cancel()})),{run:c,cancel:c.cancel,flush:c.flush}},te=t(12246);!function(e){e[e.Connecting=0]="Connecting",e[e.Open=1]="Open",e[e.Closing=2]="Closing",e[e.Closed=3]="Closed"}(ee||(ee={}));var ae=t(62193),re=t(81040),ce=t(13702),le=t(75929),oe=t(69180),ie=t(13749);var se=t(91620).lW;const ue="function"==typeof se,de="function"==typeof TextDecoder?new TextDecoder:void 0,me=("function"==typeof TextEncoder&&new TextEncoder,Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=")),fe=(e=>{let n={};return e.forEach(((e,t)=>n[e]=t)),n})(me),pe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,he=String.fromCharCode.bind(String),ve="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),xe=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),ye=e=>{let n,t,a,r,c="";const l=e.length%3;for(let l=0;l<e.length;){if((t=e.charCodeAt(l++))>255||(a=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");n=t<<16|a<<8|r,c+=me[n>>18&63]+me[n>>12&63]+me[n>>6&63]+me[63&n]}return l?c.slice(0,l-3)+"===".substring(l):c},ge=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ze=e=>{switch(e.length){case 4:var n=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return he(55296+(n>>>10))+he(56320+(1023&n));case 3:return he((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return he((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},be=e=>e.replace(ge,Ze),je=e=>{if(e=e.replace(/\s+/g,""),!pe.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let n,t,a,r="";for(let c=0;c<e.length;)n=fe[e.charAt(c++)]<<18|fe[e.charAt(c++)]<<12|(t=fe[e.charAt(c++)])<<6|(a=fe[e.charAt(c++)]),r+=64===t?he(n>>16&255):64===a?he(n>>16&255,n>>8&255):he(n>>16&255,n>>8&255,255&n);return r},ke="function"==typeof atob?e=>atob(xe(e)):ue?e=>se.from(e,"base64").toString("binary"):je,we=ue?e=>ve(se.from(e,"base64")):e=>ve(ke(e).split("").map((e=>e.charCodeAt(0)))),Ce=ue?e=>se.from(e,"base64").toString("utf8"):de?e=>de.decode(we(e)):e=>be(ke(e)),_e=e=>xe(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),Re=e=>Ce(_e(e));var Se=function(e){var n=e.cancel,t=e.podName,a=e.containerName,r=e.namespace,c=(0,w.useState)(1),l=u()(c,2),o=l[0],i=l[1],s=(0,y.useParams)().clusterName,d=void 0===s?"":s;return(0,I.jsx)(b.Z,{title:"下载日志",open:!0,onCancel:n,onOk:function(){var e=Math.floor((new Date).getTime()/1e3-60*o*60);(0,J.$Y)({start_time:e,cluster_name:d,namespace:r,container_name:a,pod_name:t}).then((function(e){var n,r,c,l,i;""!==e.data?(n=Re(e.data),r="".concat(t,"-").concat(a,"-最近").concat(o,"小时日志"),c=new Blob([n],{type:"text/plain"}),l=URL.createObjectURL(c),(i=document.createElement("a")).href=l,i.download=r,i.click(),URL.revokeObjectURL(l)):j.ZP.warning("最近".concat(o,"小时没有日志"))}))},children:(0,I.jsxs)(E.Z,{children:[(0,I.jsx)("span",{children:"下载最近"}),(0,I.jsx)(ie.Z,{min:0,style:{width:160},value:o,onChange:function(e){null!==e&&i(e)}}),(0,I.jsx)("span",{children:"小时的日志"})]})})},Ae="editor___UAXD6",Ne="fullscreen___OWie9",Pe=function(e){var n=e.type,t=(0,w.useState)(!1),a=u()(t,2),r=a[0],c=a[1],l="https:"===window.location.protocol?"wss://":"ws://",o=window.location.host,i=(0,y.useParams)(),s=i.clusterName,d=void 0===s?"":s,m=i.name,f=void 0===m?"":m,p=i.namespace,v=void 0===p?"":p,x=(0,w.useState)(!0),Z=u()(x,2),b=Z[0],j=Z[1],k=(0,w.useState)(!0),C=u()(k,2),R=C[0],S=C[1],A=(0,w.useRef)({log:"",num:0}),N=(0,w.useRef)(null),P="".concat(l).concat(o).concat("/api/cnmp-ws","/api/v1/ws/pod/log"),M=(0,w.useState)(""),O=u()(M,2),L=O[0],B=O[1],U=(0,w.useState)(100),D=u()(U,2),F=D[0],z=D[1],q=(0,g.Z)(),K=u()(q,1)[0],G=(0,w.useState)([]),Q=u()(G,2),ie=Q[0],se=Q[1],ue=(0,w.useState)(K.pod_name?"".concat(K.pod_name,"/").concat(K.container_name):""),de=u()(ue,2),me=de[0],fe=de[1],pe=ne((function(){var e=!0,n=N.current.getModel().getLineCount()||0,t=N.current.getVisibleRanges();t.length>0&&(t[t.length-1].endLineNumber<n&&(e=!1));if(R){var a=N.current.getModel();null==a||a.setValue(A.current.log);var r=(null==a?void 0:a.getLineCount())||0;null==a||a.forceTokenization(r),e&&N.current.revealLine(r)}}),{wait:500}).run;(0,w.useEffect)((function(){(0,J.oZ)({cluster_name:d,namespace:v,controller_name:f,list_all:"",controller_type:h.L[n]}).then((function(e){se(e.list),fe((function(n){var t,a,r;return""===n?"".concat(null===(t=e.list)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name,"/").concat(null===(a=e.list)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.containers)||void 0===a?void 0:a[0].container_name,"/").concat(null===(r=e.list)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.namespace):n}))}))}),[d,f,v,n]);var he=function(e,n){void 0===n&&(n={});var t=n.reconnectLimit,a=void 0===t?3:t,r=n.reconnectInterval,c=void 0===r?3e3:r,l=n.manual,o=void 0!==l&&l,i=n.onOpen,s=n.onClose,u=n.onMessage,d=n.onError,m=n.protocols,f=(0,X.Z)(i),p=(0,X.Z)(s),h=(0,X.Z)(u),v=(0,X.Z)(d),x=(0,w.useRef)(0),y=(0,w.useRef)(),g=(0,w.useRef)(),Z=(0,Y.CR)((0,w.useState)(),2),b=Z[0],j=Z[1],k=(0,Y.CR)((0,w.useState)(ee.Closed),2),C=k[0],_=k[1],R=function(){var e;x.current<a&&(null===(e=g.current)||void 0===e?void 0:e.readyState)!==ee.Open&&(y.current&&clearTimeout(y.current),y.current=setTimeout((function(){S(),x.current++}),c))},S=function(){y.current&&clearTimeout(y.current),g.current&&g.current.close();var n=new WebSocket(e,m);_(ee.Connecting),n.onerror=function(e){var t;g.current===n&&(R(),null===(t=v.current)||void 0===t||t.call(v,e,n),_(n.readyState||ee.Closed))},n.onopen=function(e){var t;g.current===n&&(null===(t=f.current)||void 0===t||t.call(f,e,n),x.current=0,_(n.readyState||ee.Open))},n.onmessage=function(e){var t;g.current===n&&(null===(t=h.current)||void 0===t||t.call(h,e,n),j(e))},n.onclose=function(e){var t;null===(t=p.current)||void 0===t||t.call(p,e,n),g.current===n&&R(),g.current&&g.current!==n||_(n.readyState||ee.Closed)},g.current=n},A=function(){x.current=0,S()},N=function(){var e;y.current&&clearTimeout(y.current),x.current=a,null===(e=g.current)||void 0===e||e.close(),g.current=void 0};return(0,w.useEffect)((function(){!o&&e&&A()}),[e,o]),(0,$.Z)((function(){N()})),{latestMessage:b,sendMessage:(0,te.Z)((function(e){var n;if(C!==ee.Open)throw new Error("WebSocket disconnected");null===(n=g.current)||void 0===n||n.send(e)})),connect:(0,te.Z)(A),disconnect:(0,te.Z)(N),readyState:C,webSocketIns:g.current}}(P,{onMessage:function(e){var n=JSON.parse(e.data);200===n.code&&(A.current={log:A.current.log+n.data.log,num:A.current.num+1},pe())}}),ve=he.sendMessage,xe=he.readyState,ye=he.disconnect,ge=he.connect;(0,w.useEffect)((function(){1===xe&&me&&(B(""),A.current.log="",ve(JSON.stringify({cluster_name:d,namespace:v||me.split("/")[2]||"",pod_name:me.split("/")[0],container_name:me.split("/")[1],tail_lines:F})))}),[xe,me,F,ve,d,v]);var Ze=(0,w.useMemo)((function(){return ie.map((function(e){return{value:e.name,title:e.name,selectable:!1,children:e.containers.map((function(n){return{value:"".concat(e.name,"/").concat(n.container_name,"/").concat(e.namespace),title:n.container_name,label:"".concat(e.name,"/").concat(n.container_name)}}))}}))}),[ie]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{className:T()(r&&Ne),children:[(0,I.jsxs)(ae.Z,{justify:"space-between",style:{marginBottom:24},children:[(0,I.jsxs)(E.Z,{children:[(0,I.jsx)("span",{children:"选择容器"}),(0,I.jsx)(re.Z,{treeDefaultExpandAll:!0,value:me,treeData:Ze,style:{width:360},onChange:function(e){ye(),fe(e),ge()},treeNodeLabelProp:"label"}),(0,I.jsx)(ce.Z,{value:F,onChange:function(e){ye(),z(e),ge()},options:[{label:"100条",value:100},{label:"200条",value:200},{label:"500条",value:500},{label:"1000条",value:1e3}],style:{width:100}})]}),(0,I.jsxs)(E.Z,{children:[(0,I.jsx)("span",{children:"自动刷新"}),(0,I.jsx)(le.Z,{style:{marginRight:10},checked:R,onChange:function(e){e&&B(A.current.log),S(e)}}),(0,I.jsx)("span",{children:"自动换行"}),(0,I.jsx)(le.Z,{style:{marginRight:10},checked:b,onChange:function(e){return j(e)}}),(0,I.jsx)(_.Z,{modalRender:function(e){return(0,I.jsx)(Se,{cancel:e,podName:me.split("/")[0],containerName:me.split("/")[1],namespace:v||me.split("/")[2]})},children:(0,I.jsx)(oe.ZP,{style:{marginRight:10},children:"下载日志"})}),(0,I.jsx)(oe.ZP,{onClick:function(){c(!r)},children:r?(0,I.jsx)(W.Z,{}):(0,I.jsx)(H.Z,{})})]})]}),(0,I.jsx)(V.ZP,{theme:"vs-dark",language:"yaml",onMount:function(e){N.current=e},value:L,className:Ae,options:{minimap:{enabled:!1},fontSize:14,wordWrap:b?"on":"off",readOnly:!0,scrollBeyondLastLine:!1}})]})})},Te=t(56292),Ie=t(75026),Me=function(e){var n=(0,y.useParams)(),t=n.clusterName,a=void 0===t?"":t,c=n.name,o=void 0===c?"":c,s=n.namespace,C=void 0===s?"":s,_=e.type,R=e.operationRender,S=e.isSinglePod,A=e.showHistoryVersion,N=void 0===A||A,P=e.showBelong,T=(0,w.useState)(!1),O=u()(T,2),L=O[0],E=O[1],B=(0,y.useNavigate)(),U=(0,Z.Z)((function(){return v.J[_].detail({name:o,cluster_name:a,namespace:C}).then((function(e){return e.detail}))}),{pollingInterval:2e3,pollingWhenHidden:!1}),D=U.data,F=U.refresh,J=(0,g.Z)({tab:"pods"}),W=u()(J,2),H=W[0],V=W[1];return D?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.Z,{items:[{title:(0,I.jsx)(y.Link,{to:"/cluster/".concat(a,"/workloads/").concat(C?"".concat(C,"/"):"").concat(_),children:(0,x.H9)(_)})},{title:"负载详情：".concat(o)}],sourceType:_,showNamespace:!!C,className:Ie.Z.breadcrumb,showCreateYamlButton:!1,onParamsChange:function(e){B("/cluster/".concat(e.clusterName||a,"/workloads/").concat(C?"".concat(e.namespace||C,"/"):"").concat(_))},footRender:function(){return(0,I.jsx)(f.Z,{refresh:F,yaml:D.yaml,name:D.name,title:(0,x.H9)(_),onRestart:v.J[_].restart?function(){E(!0)}:void 0,operationRender:function(){return D?null==R?void 0:R(D):null},onDelete:function(){var e;b.Z.confirm({title:"【".concat(o,"】删除"),content:(0,I.jsxs)(I.Fragment,{children:["确认删除资源：",(0,x.H9)(_),"-",o,"？"]}),onOk:(e=i()(l()().mark((function e(){var n,t;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=(t=v.J[_]).delete)||void 0===n?void 0:n.call(t,{name:o,cluster_name:a,namespace:C});case 2:B("/cluster/".concat(a,"/workloads/").concat(C,"/").concat(_)),j.ZP.success("删除成功");case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})}})}}),D&&(0,I.jsx)(k.Z,{activeKey:H.tab,onChange:function(e){V({tab:e})},items:[{key:"pods",label:"Pods",children:(0,I.jsx)("div",{className:Ie.Z.block,children:(0,I.jsx)(Te.Z,{detailData:D,active:"pods"===H.tab,type:_,showBelong:P,isSinglePod:S})})}].concat(r()(N?[{key:"history",label:"历史版本",children:(0,I.jsx)(M,{type:_,yaml:D.yaml||""})}]:[]),[{key:"info",label:"基础信息",children:(0,I.jsx)(z,{detailData:D,type:_})},{key:"event",label:"事件",children:(0,I.jsx)("div",{className:Ie.Z.block,style:{padding:"16px 0"},children:(0,I.jsx)(p.Z,{type:h.L[_],name:D.name,leftTitle:"健康检查"})})},{key:"log",label:"日志",destroyInactiveTabPane:!0,children:(0,I.jsx)("div",{className:Ie.Z.block,children:(0,I.jsx)(Pe,{type:_})})},{key:"yaml",label:"YAML",children:(0,I.jsx)("div",{className:Ie.Z.block,children:(0,I.jsx)(d.Z,{defaultContent:D.yaml||"",onRefresh:i()(l()().mark((function e(){return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.J[_].detail({name:o,cluster_name:a,namespace:C}).then((function(e){var n;return j.ZP.success("刷新成功"),(null===(n=e.detail)||void 0===n?void 0:n.yaml)||""})));case 1:case"end":return e.stop()}}),e)}))),editorHeight:"calc(100vh - 380px)"})})}])}),L&&(0,I.jsxs)(b.Z,{open:!0,title:"【".concat(o,"】重启"),onCancel:function(){E(!1)},onOk:function(){var e,n;null===(e=(n=v.J[_]).restart)||void 0===e||e.call(n,{name:o,cluster_name:a,namespace:C}).then((function(){F(),E(!1),j.ZP.success("修改成功")}))},children:[(0,I.jsxs)("p",{children:["确认重启：",o,"？"]}),(0,I.jsx)("p",{children:"工作负载重启会销毁重建，可能由于资源不足等原因导致重建失败"})]})]}):null}}}]);