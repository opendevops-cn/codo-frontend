(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[1],{1160:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(79482),a=n(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},u=n(28371),o=function(t,e){return a.createElement(u.Z,(0,r.Z)({},t,{ref:e,icon:i}))};var s=a.forwardRef(o)},27274:function(t,e,n){"use strict";n.d(e,{Z:function(){return $}});var r=n(15558),a=n.n(r),i=n(26068),u=n.n(i),o=n(48305),s=n.n(o),c=n(45778),l=n(95974),f=n(41710),d=n(10534),h=n(65460),m=n(96286),v=n(50959),p="table___Rup7Y",g=n(11527),$=function(t){var e=t.placeholder,n=t.request,r=t.columns,i=t.leftTitle,o=t.tableProps,$=t.showSearch,x=void 0===$||$,y=t.dataSource,Z=t.searchWidth,w=t.rightTitle,S=void 0===w?[]:w,_=t.refreshDeps,j=t.actionRef,C=t.hideTitle,D=t.searchStyle,T=t.onSearch,M=(0,c.T)(j),k=(0,v.useState)(""),O=s()(k,2),Y=O[0],R=O[1],b=(0,v.useRef)(""),z=(0,d.Z)((function(){var t,e;null==T||T(Y),null===(t=M.current)||void 0===t||null===(e=t.reloadAndRest)||void 0===e||e.call(t)}),{wait:500}).run;return(0,h.Z)((function(){var t;null===(t=M.current)||void 0===t||t.reload()}),_||[]),(0,g.jsx)(f.Z,u()({className:p,actionRef:M,headerTitle:i,dataSource:y,search:!1,columns:r,request:n&&function(t){return n(u()(u()({},t),{},{keyword:b.current}))},pagination:{showSizeChanger:!0,defaultPageSize:50},options:{reload:!!n},toolBarRender:!C&&function(){return[].concat(a()(S),a()(x?[(0,g.jsx)(m.Z,{style:u()({width:null!=Z?Z:300},D),value:Y,placeholder:e,onChange:function(t){R(t.target.value),b.current=t.target.value,z()},allowClear:!0,suffix:(0,g.jsx)(l.Z,{style:{color:"#918f8f"}})},"__search__input")]:[]))}},o))}},45778:function(t,e,n){"use strict";n.d(e,{T:function(){return a}});var r=n(50959),a=function(t,e){var n=(0,r.useRef)(e);return t||n}},647:function(t,e,n){"use strict";n.r(e);var r=n(90228),a=n.n(r),i=n(87999),u=n.n(i),o=n(15268),s=n(79890),c=n(27274),l=n(34015),f=n(34593),d=n(36954),h=n(16782),m=n(56765),v=n(38218),p=n(56260),g=n(1160),$=n(3885),x=n(70334),y=n(3827),Z=n(50959),w=n(11527);e.default=function(){var t=(0,v.useParams)().clusterName,e=void 0===t?"":t,n=(0,Z.useRef)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(f.Z,{items:[{title:"SidecarSet"}]}),(0,w.jsx)(c.Z,{actionRef:n,columns:[{title:"名称",dataIndex:"name",render:function(t,n){return(0,w.jsx)(h.Z,{follow_type:"SideCarSet",follow_value:n.name,follow:n.is_followed,style:{paddingRight:6},title:t,children:(0,w.jsx)(v.Link,{to:"/cluster/".concat(e,"/workloads/sidecar-set/").concat(n.name),children:t})})}},{dataIndex:"status",title:"状态",width:220,render:function(t,e){return(0,w.jsxs)("span",{children:[(0,w.jsxs)($.Z,{size:4,style:{color:e.ready_pods===e.matched_pods?"var(--color-success)":"var(--color-warning)"},children:[e.ready_pods===e.matched_pods?(0,w.jsx)(p.Z,{}):(0,w.jsx)(g.Z,{}),(0,w.jsxs)("span",{children:["就绪: ",e.ready_pods,"/",e.matched_pods]})]})," ","| 已更新: ",e.updated_pods," | 可用:",e.updated_ready_pods]})}},{dataIndex:"containers",title:"镜像",width:214,render:function(t,e){return(0,w.jsx)(l.Z,{tagStyle:{maxWidth:150},items:e.containers.map((function(t){return{value:t.image}})),max:1})}},{dataIndex:"create_time",title:"创建时间",render:m.kZ,width:160},{dataIndex:"operation",title:"操作",fixed:"right",width:160,render:function(t,r){return(0,w.jsxs)($.Z,{children:[(0,w.jsx)(s.Z,{modalRender:function(t){return(0,w.jsx)(d.Z,{defaultValue:r.yaml,clusterName:e,onCancel:function(){t()},onOk:function(n){(0,o.F_)({cluster_name:e,yaml:n}).then((function(){t(),x.ZP.success("编辑成功")}))}})},children:(0,w.jsx)("a",{children:"编辑yaml"})}),(0,w.jsx)("a",{onClick:function(){y.Z.confirm({title:"【".concat(r.name,"】删除"),content:"确认删除资源：SidecarSet-".concat(r.name,"？"),onOk:function(){(0,o.FJ)({cluster_name:e,name:r.name}).then((function(){var t,e;x.ZP.success("删除成功"),null===(t=n.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t)}))}})},children:"删除"})]})}}],request:function(){var t=u()(a()().mark((function t(n){var r;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.H2)({cluster_name:e,page:n.current,page_size:n.pageSize,keyword:n.keyword});case 2:return r=t.sent,t.abrupt("return",{data:r.list||[],total:r.total||0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tableProps:{scroll:{x:1e3},rowKey:"name"},placeholder:"模糊搜索负载名称、镜像、标签"})]})}},56765:function(t,e,n){"use strict";n.d(e,{jp:function(){return s},kZ:function(){return l},yq:function(){return c}});var r=n(5726),a=n.n(r),i=n(11110),u=n.n(i);a().extend(u());var o=function(t){var e=(Date.now()-t)/1e3;return e<60?{duration:e,unit:"second"}:e<3600?{duration:Math.floor(e/60),unit:"minute"}:e<86400?{duration:Math.floor(e/3600),unit:"hour"}:{duration:Math.floor(e/86400),unit:"day"}},s=function(t){if(void 0===t)return"";var e=o(t);return"second"===e.unit?"1分钟内":"".concat(e.duration," ").concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit],"前")},c=function(t){var e=o(t);return"second"===e.unit?"1分钟内":"约".concat(e.duration).concat({second:"秒",minute:"分钟",hour:"小时",day:"天"}[e.unit])},l=function(t){return isNaN(Number(t))?t:a()(Number(t)).format("YYYY-MM-DD HH:mm:ss")}},10534:function(t,e,n){"use strict";var r=n(99938),a=n(66292),i=n.n(a),u=n(50959),o=n(53270),s=n(77924),c=n(25492),l=n(80785);e.Z=function(t,e){var n;l.Z&&((0,c.mf)(t)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof t)));var a=(0,o.Z)(t),f=null!==(n=null==e?void 0:e.wait)&&void 0!==n?n:1e3,d=(0,u.useMemo)((function(){return i()((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.current.apply(a,(0,r.ev)([],(0,r.CR)(t),!1))}),f,e)}),[]);return(0,s.Z)((function(){d.cancel()})),{run:d,cancel:d.cancel,flush:d.flush}}},11110:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var u=a.prototype;i.utc=function(t){return new a({date:t,utc:!0,args:arguments})},u.utc=function(e){var n=i(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},u.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=u.parse;u.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var s=u.init;u.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else s.call(this)};var c=u.utcOffset;u.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],u=60*+a[1]+ +a[2];return 0===u?0:"+"===i?u:-u}(r),null===r))return this;var u=Math.abs(r)<=16?60*r:r,o=this;if(a)return o.$offset=u,o.$u=0===r,o;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(u+s,t)).$offset=u,o.$x.$localOffset=s}else o=this.utc();return o};var l=u.format;u.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},u.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var f=u.toDate;u.toDate=function(t){return"s"===t&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var d=u.diff;u.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var r=this.local(),a=i(t).local();return d.call(r,a,e,n)}}}()}}]);