"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[8219],{59756:function(e,n,a){a.r(n);var l=a(26068),t=a.n(l),i=a(48305),s=a.n(i),r=a(15268),c=a(79890),u=a(34654),d=a(2586),o=a(38218),p=a(21630),h=a(3827),m=a(70334),x=a(18772),j=a(96286),f=a(69180),Z=(a(50959),a(11527)),v=function(e){var n=e.onCancel,a=e.onOk,l=e.initialValues,i=(0,o.useParams)(),c=i.clusterName,u=void 0===c?"":c,d=i.name,f=void 0===d?"":d,v=i.namespace,g=void 0===v?"":v,b=p.Z.useForm(),y=s()(b,1)[0],k=p.Z.useWatch("update_strategy_type",y);return(0,Z.jsx)(h.Z,{title:"更新策略",open:!0,width:600,onCancel:n,onOk:function(){y.validateFields().then((function(e){(0,r.Wd)(t()({cluster_name:u,name:f,namespace:g},e)).then((function(){null==a||a(),m.ZP.success("更新策略成功")}))}))},children:(0,Z.jsxs)(p.Z,{form:y,labelCol:{span:6},initialValues:l,children:[(0,Z.jsx)(p.Z.Item,{label:"更新方式",name:"update_strategy_type",initialValue:"RollingUpdate",children:(0,Z.jsxs)(x.ZP.Group,{children:[(0,Z.jsx)(x.ZP,{value:"RollingUpdate",children:"滚动更新 RollingUpdate"}),(0,Z.jsx)(x.ZP,{value:"OnDelete",children:"删除后更新 OnDelete"})]})}),"RollingUpdate"===k&&(0,Z.jsx)(p.Z.Item,{label:"最大不可用",tooltip:{title:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("p",{children:"maxUnavailable"}),(0,Z.jsxs)("p",{children:["可以是绝对值（例如:3）,也可以是百分比（例如:10%）。",(0,Z.jsx)("br",{}),"如果是百分比，Kubernetes 会通过向上取整的方式将其换算为绝对值。",(0,Z.jsx)("br",{})]})]}),overlayInnerStyle:{width:630}},name:"max_unavailable",rules:[{pattern:/^(?:[1-9][0-9]*|0)%?$/,message:"仅允许整数或者百分数"}],children:(0,Z.jsx)(j.Z,{placeholder:"0或者正整数或者正百分比（default：25%）"})})]})})};n.default=function(){var e=(0,u.J)();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z,{type:"daemon-set",operationRender:function(n){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(c.Z,{modalRender:function(a){return(0,Z.jsx)(v,{initialValues:n.update_strategy,onCancel:a,onOk:function(){a(),e()}})},children:(0,Z.jsx)(f.ZP,{children:"更新策略"})})})}})})}}}]);