"use strict";(self.webpackChunkcnmp=self.webpackChunkcnmp||[]).push([[5144],{36071:function(e,n,t){t.r(n);var l=t(26068),a=t.n(l),i=t(48305),s=t.n(i),r=t(15268),c=t(79890),u=t(34654),d=t(2586),o=t(38218),p=t(21630),h=t(3827),m=t(70334),j=t(18772),x=t(22639),f=t(69180),Z=(t(50959),t(11527)),g=function(e){var n=e.onCancel,t=e.onOk,l=e.initialValues,i=(0,o.useParams)(),c=i.clusterName,u=void 0===c?"":c,d=i.name,f=void 0===d?"":d,g=i.namespace,v=void 0===g?"":g,y=p.Z.useForm(),b=s()(y,1)[0],k=p.Z.useWatch("update_strategy_type",b);return(0,Z.jsx)(h.Z,{title:"更新策略",open:!0,width:600,onCancel:n,onOk:function(){b.validateFields().then((function(e){(0,r.Z5)(a()({cluster_name:u,name:f,namespace:v},e)).then((function(){t(),m.ZP.success("更新策略成功")}))}))},children:(0,Z.jsxs)(p.Z,{form:b,labelCol:{span:6},initialValues:l,children:[(0,Z.jsx)(p.Z.Item,{name:"update_strategy_type",label:"更新方式",initialValue:"RollingUpdate",children:(0,Z.jsxs)(j.ZP.Group,{children:[(0,Z.jsx)(j.ZP,{value:"RollingUpdate",children:"滚动更新 RollingUpdate"}),(0,Z.jsx)(j.ZP,{value:"OnDelete",children:"删除后更新 OnDelete"})]})}),"RollingUpdate"===k&&(0,Z.jsx)(p.Z.Item,{name:"partition",label:"分片",initialValue:0,rules:[{required:!0,message:"分片不能为空"},{pattern:/^(0|[1-9]\d*)$/,message:"0或者正整数"}],tooltip:{overlayInnerStyle:{width:630},title:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("p",{children:"partition"}),(0,Z.jsxs)("p",{children:["序号大于等于此数字的容器组将被更新，小于此容器组的则不会被更新。",(0,Z.jsx)("br",{}),"如果分片为 0，则所有容器组都将被更新。",(0,Z.jsx)("br",{}),"如果分片为 3，则序号大于等于 3 的容器组将被更新，序号为 1、2 的容器组则保持不变。"]})]})},children:(0,Z.jsx)(x.Z,{style:{width:"100%"},placeholder:"0或者正整数（default：0）"})})]})})};n.default=function(){var e=(0,u.J)();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(d.Z,{type:"stateful-set",operationRender:function(n){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(c.Z,{modalRender:function(t){return(0,Z.jsx)(g,{onCancel:t,initialValues:n.update_strategy,onOk:function(){t(),e()}})},children:(0,Z.jsx)(f.ZP,{children:"更新策略"})})})}})})}}}]);