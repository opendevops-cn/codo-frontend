"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[37],{2949:function(_e,F,t){t.r(F),t.d(F,{default:function(){return Oe}});var se=t(15009),g=t.n(se),oe=t(97857),d=t.n(oe),le=t(99289),y=t.n(le),ce=t(5574),E=t.n(ce),Me=t(31522),ge=t(89871),Le=t(66419),je=t(36683),de=t(87547),ye=t(94149),Ie=t(37476),Ne=t(15267),Y=t(89786),h=t(94272),Se=t(9361),Q=t(2453),k=t(83622),O=t(71230),fe=t(15746),R=t(34407),me=t(96074),P=t(42075),U=t(83062),Te=t(11665),Ee=t(28846),he=t(93967),xe=t.n(he),s=t(67294),ve=t(73935),De=Object.defineProperty,G=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,W=(L,i,o)=>i in L?De(L,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):L[i]=o,Ce=(L,i)=>{for(var o in i||(i={}))Ae.call(i,o)&&W(L,o,i[o]);if(G)for(var o of G(i))ze.call(i,o)&&W(L,o,i[o]);return L};const et=L=>React.createElement("svg",Ce({"data-name":"\\u56FE\\u5C42 2",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 165.99 146.9"},L),React.createElement("defs",null,React.createElement("linearGradient",{id:"logo_svg__b","data-name":"\\u672A\\u547D\\u540D\\u7684\\u6E10\\u53D8",x1:-686.82,y1:610.82,x2:-685.84,y2:609.82,gradientTransform:"matrix(165.99 0 0 -146.9 114009.77 89728.26)",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{offset:0,stopColor:"#15b5fe"}),React.createElement("stop",{offset:.49,stopColor:"#2462fe"}),React.createElement("stop",{offset:1,stopColor:"#903ffe"})),React.createElement("linearGradient",{id:"logo_svg__a","data-name":"\\u672A\\u547D\\u540D\\u7684\\u6E10\\u53D8 3",x1:-683.45,y1:609.93,x2:-682.63,y2:609,gradientTransform:"matrix(92.6 0 0 -117.13 63307.6 71482.08)",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{offset:0,stopColor:"#9442ff"}),React.createElement("stop",{offset:1,stopColor:"#1ab2fd"})),React.createElement("linearGradient",{id:"logo_svg__c","data-name":"\\u672A\\u547D\\u540D\\u7684\\u6E10\\u53D8 3",x1:-697.43,y1:616.93,x2:-698.36,y2:617.82,gradientTransform:"matrix(-93.14 0 0 118.01 -64894.69 -72805.69)",xlinkHref:"#logo_svg__a"})),React.createElement("g",{"data-name":"\\u56FE\\u5C42 1"},React.createElement("path",{d:"M128.87 82.45c5-5.67 5-12 0-19-38.33-36.34-60.33-56-66-59-.44-.23-.93-.48-1.46-.75a74.24 74.24 0 0 1 5.26-1.42c1.77-.41 3.55-.74 5.35-1.02 1.8-.27 3.6-.48 5.41-.61 1.81-.14 3.63-.2 5.44-.2 1.19 0 2.37.03 3.56.09s2.37.15 3.55.26c1.18.12 2.36.26 3.53.44a71.58 71.58 0 0 1 6.98 1.39c1.15.29 2.29.6 3.43.95 1.14.34 2.26.72 3.38 1.12 1.12.4 2.22.83 3.32 1.28 1.1.45 2.18.93 3.25 1.44 1.07.51 2.13 1.04 3.18 1.6a72.48 72.48 0 0 1 6.11 3.65c.99.66 1.96 1.34 2.91 2.05.95.71 1.89 1.44 2.81 2.19a74.568 74.568 0 0 1 5.27 4.77c.84.84 1.66 1.7 2.45 2.58.8.88 1.57 1.78 2.32 2.69.75.92 1.48 1.85 2.19 2.81.71.95 1.39 1.92 2.05 2.91a72.46 72.46 0 0 1 3.65 6.11c.56 1.05 1.09 2.11 1.6 3.18.51 1.07.99 2.16 1.44 3.25.45 1.1.88 2.2 1.28 3.32.4 1.12.77 2.24 1.12 3.38.34 1.14.66 2.28.95 3.43.29 1.15.55 2.31.78 3.47.23 1.16.43 2.33.61 3.51.17 1.17.32 2.35.44 3.53s.2 2.36.26 3.55.09 2.37.09 3.56c0 3.46-.25 6.91-.74 10.34-.49 3.43-1.23 6.8-2.21 10.13.25.37.5.73.75 1.1 16.88 32.67 13.89 43.49 8.95 47.94l-.28.25c-4.99 4.51-12.43 11.24-49.72-15.75-7-5.33-14.5-11.17-22.5-17.5-22.26-20.82-34.43-32.65-36.5-35.5l24.5-25.5-13-11-27.5 27c-5 5.67-5 12 0 19 38.33 36.33 60.33 56 66 59 .05.02.09.05.14.07-3.31.97-6.67 1.7-10.09 2.19s-6.85.74-10.3.74c-1.19 0-2.37-.03-3.56-.09a83.48 83.48 0 0 1-3.55-.26c-1.18-.12-2.36-.26-3.53-.44a71.58 71.58 0 0 1-6.98-1.39c-1.15-.29-2.29-.6-3.43-.95-1.14-.34-2.26-.72-3.38-1.12-1.12-.4-2.22-.83-3.32-1.28-1.1-.45-2.18-.93-3.25-1.44-1.07-.51-2.13-1.04-3.18-1.6a72.48 72.48 0 0 1-6.11-3.65c-.99-.66-1.96-1.34-2.91-2.05-.95-.71-1.89-1.44-2.81-2.19-.92-.75-1.82-1.53-2.69-2.32-.88-.8-1.74-1.62-2.58-2.45-.84-.84-1.66-1.7-2.45-2.58-.8-.88-1.57-1.78-2.32-2.69-.75-.92-1.48-1.85-2.19-2.81-.71-.95-1.39-1.92-2.05-2.91a72.46 72.46 0 0 1-3.65-6.11c-.56-1.05-1.09-2.11-1.6-3.18-.51-1.07-.99-2.16-1.44-3.25-.45-1.1-.88-2.2-1.28-3.32-.4-1.12-.77-2.24-1.12-3.38-.34-1.14-.66-2.28-.95-3.43-.29-1.15-.55-2.31-.78-3.47a80.31 80.31 0 0 1-.61-3.51c-.17-1.17-.32-2.35-.44-3.53-.12-1.18-.2-2.36-.26-3.55s-.09-2.37-.09-3.56a72.475 72.475 0 0 1 2.74-19.73c-.25-.36-.49-.72-.73-1.08l1 1.32C-4.13 19.95-1.13 8.95 3.87 4.45l.28-.25C9.14-.32 16.58-7.04 53.87 19.95c7 5.33 14.5 11.17 22.5 17.5 22.26 20.82 34.43 32.65 36.5 35.5l-24.5 25.5 13 11 27.5-27Z",style:{fill:"url(#logo_svg__b)",fillRule:"evenodd",strokeWidth:0}}),React.createElement("path",{d:"M30.97 29.84c-19 5-41.5 66.5 17 107.5 15 8.67 33.34 10.5 55 5.5l-32-27-30.5-29.5c-7-6.67-8.5-13.33-4.5-20 2.67-3 6.5-6.83 11.5-11.5 5-5 10.83-10.67 17.5-17-10-8.67-21.33-11.33-34-8Z",style:{fill:"url(#logo_svg__a)",strokeWidth:0}}),React.createElement("path",{d:"M135.37 117.19c19-5 39-75.74-17-107.5C103.04.2 84.2-1.89 61.87 3.45l33.5 27.74 30.5 29.5c7 6.67 8.5 13.33 4.5 20-2.67 3-6.5 6.83-11.5 11.5-5 5-10.83 10.67-17.5 17 10 8.67 21.33 11.33 34 8Z",style:{strokeWidth:0,fill:"url(#logo_svg__c)"}})));var pe="data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9IuWbvuWxgiAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTY1Ljk5IDE0Ni45Ij48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImIiIGRhdGEtbmFtZT0i5pyq5ZG95ZCN55qE5riQ5Y+YIiB4MT0iLTY4Ni44MiIgeTE9IjYxMC44MiIgeDI9Ii02ODUuODQiIHkyPSI2MDkuODIiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMTY1Ljk5IDAgMCAtMTQ2LjkgMTE0MDA5Ljc3IDg5NzI4LjI2KSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzE1YjVmZSIvPjxzdG9wIG9mZnNldD0iLjQ5IiBzdG9wLWNvbG9yPSIjMjQ2MmZlIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOTAzZmZlIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImEiIGRhdGEtbmFtZT0i5pyq5ZG95ZCN55qE5riQ5Y+YIDMiIHgxPSItNjgzLjQ1IiB5MT0iNjA5LjkzIiB4Mj0iLTY4Mi42MyIgeTI9IjYwOSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCg5Mi42IDAgMCAtMTE3LjEzIDYzMzA3LjYgNzE0ODIuMDgpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjOTQ0MmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMWFiMmZkIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIGRhdGEtbmFtZT0i5pyq5ZG95ZCN55qE5riQ5Y+YIDMiIHgxPSItNjk3LjQzIiB5MT0iNjE2LjkzIiB4Mj0iLTY5OC4zNiIgeTI9IjYxNy44MiIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgtOTMuMTQgMCAwIDExOC4wMSAtNjQ4OTQuNjkgLTcyODA1LjY5KSIgeGxpbms6aHJlZj0iI2EiLz48L2RlZnM+PGcgZGF0YS1uYW1lPSLlm77lsYIgMSI+PHBhdGggZD0iTTEyOC44NyA4Mi40NWM1LTUuNjcgNS0xMiAwLTE5LTM4LjMzLTM2LjM0LTYwLjMzLTU2LTY2LTU5LS40NC0uMjMtLjkzLS40OC0xLjQ2LS43NWE3NC4yNCA3NC4yNCAwIDAgMSA1LjI2LTEuNDJjMS43Ny0uNDEgMy41NS0uNzQgNS4zNS0xLjAyIDEuOC0uMjcgMy42LS40OCA1LjQxLS42MSAxLjgxLS4xNCAzLjYzLS4yIDUuNDQtLjIgMS4xOSAwIDIuMzcuMDMgMy41Ni4wOXMyLjM3LjE1IDMuNTUuMjZjMS4xOC4xMiAyLjM2LjI2IDMuNTMuNDRhNzEuNTggNzEuNTggMCAwIDEgNi45OCAxLjM5YzEuMTUuMjkgMi4yOS42IDMuNDMuOTUgMS4xNC4zNCAyLjI2LjcyIDMuMzggMS4xMiAxLjEyLjQgMi4yMi44MyAzLjMyIDEuMjggMS4xLjQ1IDIuMTguOTMgMy4yNSAxLjQ0IDEuMDcuNTEgMi4xMyAxLjA0IDMuMTggMS42YTcyLjQ4IDcyLjQ4IDAgMCAxIDYuMTEgMy42NWMuOTkuNjYgMS45NiAxLjM0IDIuOTEgMi4wNS45NS43MSAxLjg5IDEuNDQgMi44MSAyLjE5YTc0LjU2OCA3NC41NjggMCAwIDEgNS4yNyA0Ljc3Yy44NC44NCAxLjY2IDEuNyAyLjQ1IDIuNTguOC44OCAxLjU3IDEuNzggMi4zMiAyLjY5Ljc1LjkyIDEuNDggMS44NSAyLjE5IDIuODEuNzEuOTUgMS4zOSAxLjkyIDIuMDUgMi45MWE3Mi40NiA3Mi40NiAwIDAgMSAzLjY1IDYuMTFjLjU2IDEuMDUgMS4wOSAyLjExIDEuNiAzLjE4LjUxIDEuMDcuOTkgMi4xNiAxLjQ0IDMuMjUuNDUgMS4xLjg4IDIuMiAxLjI4IDMuMzIuNCAxLjEyLjc3IDIuMjQgMS4xMiAzLjM4LjM0IDEuMTQuNjYgMi4yOC45NSAzLjQzLjI5IDEuMTUuNTUgMi4zMS43OCAzLjQ3LjIzIDEuMTYuNDMgMi4zMy42MSAzLjUxLjE3IDEuMTcuMzIgMi4zNS40NCAzLjUzcy4yIDIuMzYuMjYgMy41NS4wOSAyLjM3LjA5IDMuNTZjMCAzLjQ2LS4yNSA2LjkxLS43NCAxMC4zNC0uNDkgMy40My0xLjIzIDYuOC0yLjIxIDEwLjEzLjI1LjM3LjUuNzMuNzUgMS4xIDE2Ljg4IDMyLjY3IDEzLjg5IDQzLjQ5IDguOTUgNDcuOTRsLS4yOC4yNWMtNC45OSA0LjUxLTEyLjQzIDExLjI0LTQ5LjcyLTE1Ljc1LTctNS4zMy0xNC41LTExLjE3LTIyLjUtMTcuNS0yMi4yNi0yMC44Mi0zNC40My0zMi42NS0zNi41LTM1LjVsMjQuNS0yNS41LTEzLTExLTI3LjUgMjdjLTUgNS42Ny01IDEyIDAgMTkgMzguMzMgMzYuMzMgNjAuMzMgNTYgNjYgNTkgLjA1LjAyLjA5LjA1LjE0LjA3LTMuMzEuOTctNi42NyAxLjctMTAuMDkgMi4xOXMtNi44NS43NC0xMC4zLjc0Yy0xLjE5IDAtMi4zNy0uMDMtMy41Ni0uMDlhODMuNDggODMuNDggMCAwIDEtMy41NS0uMjZjLTEuMTgtLjEyLTIuMzYtLjI2LTMuNTMtLjQ0YTcxLjU4IDcxLjU4IDAgMCAxLTYuOTgtMS4zOWMtMS4xNS0uMjktMi4yOS0uNi0zLjQzLS45NS0xLjE0LS4zNC0yLjI2LS43Mi0zLjM4LTEuMTItMS4xMi0uNC0yLjIyLS44My0zLjMyLTEuMjgtMS4xLS40NS0yLjE4LS45My0zLjI1LTEuNDQtMS4wNy0uNTEtMi4xMy0xLjA0LTMuMTgtMS42YTcyLjQ4IDcyLjQ4IDAgMCAxLTYuMTEtMy42NWMtLjk5LS42Ni0xLjk2LTEuMzQtMi45MS0yLjA1LS45NS0uNzEtMS44OS0xLjQ0LTIuODEtMi4xOS0uOTItLjc1LTEuODItMS41My0yLjY5LTIuMzItLjg4LS44LTEuNzQtMS42Mi0yLjU4LTIuNDUtLjg0LS44NC0xLjY2LTEuNy0yLjQ1LTIuNTgtLjgtLjg4LTEuNTctMS43OC0yLjMyLTIuNjktLjc1LS45Mi0xLjQ4LTEuODUtMi4xOS0yLjgxLS43MS0uOTUtMS4zOS0xLjkyLTIuMDUtMi45MWE3Mi40NiA3Mi40NiAwIDAgMS0zLjY1LTYuMTFjLS41Ni0xLjA1LTEuMDktMi4xMS0xLjYtMy4xOC0uNTEtMS4wNy0uOTktMi4xNi0xLjQ0LTMuMjUtLjQ1LTEuMS0uODgtMi4yLTEuMjgtMy4zMi0uNC0xLjEyLS43Ny0yLjI0LTEuMTItMy4zOC0uMzQtMS4xNC0uNjYtMi4yOC0uOTUtMy40My0uMjktMS4xNS0uNTUtMi4zMS0uNzgtMy40N2E4MC4zMSA4MC4zMSAwIDAgMS0uNjEtMy41MWMtLjE3LTEuMTctLjMyLTIuMzUtLjQ0LTMuNTMtLjEyLTEuMTgtLjItMi4zNi0uMjYtMy41NXMtLjA5LTIuMzctLjA5LTMuNTZhNzIuNDc1IDcyLjQ3NSAwIDAgMSAyLjc0LTE5LjczYy0uMjUtLjM2LS40OS0uNzItLjczLTEuMDhsMSAxLjMyQy00LjEzIDE5Ljk1LTEuMTMgOC45NSAzLjg3IDQuNDVsLjI4LS4yNUM5LjE0LS4zMiAxNi41OC03LjA0IDUzLjg3IDE5Ljk1YzcgNS4zMyAxNC41IDExLjE3IDIyLjUgMTcuNSAyMi4yNiAyMC44MiAzNC40MyAzMi42NSAzNi41IDM1LjVsLTI0LjUgMjUuNSAxMyAxMSAyNy41LTI3WiIgc3R5bGU9ImZpbGw6dXJsKCNiKTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6MCIvPjxwYXRoIGQ9Ik0zMC45NyAyOS44NGMtMTkgNS00MS41IDY2LjUgMTcgMTA3LjUgMTUgOC42NyAzMy4zNCAxMC41IDU1IDUuNWwtMzItMjctMzAuNS0yOS41Yy03LTYuNjctOC41LTEzLjMzLTQuNS0yMCAyLjY3LTMgNi41LTYuODMgMTEuNS0xMS41IDUtNSAxMC44My0xMC42NyAxNy41LTE3LTEwLTguNjctMjEuMzMtMTEuMzMtMzQtOFoiIHN0eWxlPSJmaWxsOnVybCgjYSk7c3Ryb2tlLXdpZHRoOjAiLz48cGF0aCBkPSJNMTM1LjM3IDExNy4xOWMxOS01IDM5LTc1Ljc0LTE3LTEwNy41QzEwMy4wNC4yIDg0LjItMS44OSA2MS44NyAzLjQ1bDMzLjUgMjcuNzQgMzAuNSAyOS41YzcgNi42NyA4LjUgMTMuMzMgNC41IDIwLTIuNjcgMy02LjUgNi44My0xMS41IDExLjUtNSA1LTEwLjgzIDEwLjY3LTE3LjUgMTcgMTAgOC42NyAyMS4zMyAxMS4zMyAzNCA4WiIgc3R5bGU9InN0cm9rZS13aWR0aDowO2ZpbGw6dXJsKCNjKSIvPjwvZz48L3N2Zz4=",e=t(85893),x=(0,je.Z)({scriptUrl:"//at.alicdn.com/t/c/font_4007128_to11zcmje6.js"}),Z=(0,Ee.kc)(function(L){var i=L.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:i.colorPrimaryActive}},cornerSwitch:{position:"absolute",top:2,right:2,fontSize:"48px",cursor:"pointer"},pcLogin:{top:0,right:0},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:i.borderRadius,":hover":{backgroundColor:i.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto","& .ant-pro-form-login-page-notice":{},"& .ant-pro-form-login-page-left":{maxWidth:700},"& iframe":{border:"none"},"& .ant-pro-form-login-page-desc":{transform:"scale(0.9)",marginBlockStart:22,marginBlockEnd:30}},authCodeContainer:{margin:"12px auto"}}}),tt=function(){var i=Z(),o=i.styles;return _jsx(_Fragment,{children:_jsx(Tooltip,{title:"\u98DE\u4E66\u767B\u9646",children:_jsx(x,{type:"c-icon-feishu",className:o.action})})})},nt=function(){var i=Z(),o=i.styles;return _jsx("div",{className:o.lang,"data-lang":!0,children:SelectLang&&_jsx(SelectLang,{})})},ut=function(i){var o=i.content;return _jsx(Alert,{style:{marginBottom:24},message:o,type:"error",showIcon:!0})},B={color:"rgba(0, 0, 0, 0.2)",fontSize:"18px",verticalAlign:"middle"},we=function(){var i=(0,s.useState)("base"),o=E()(i,2),b=o[0],Ue=o[1],H=(0,h.useModel)("@@initialState"),f=H.initialState,Ze=H.setInitialState,be=Z(),v=be.styles,J=(0,h.useIntl)(),Fe=Se.Z.useToken(),Ye=Fe.token,Qe=(0,s.useState)(!1),V=E()(Qe,2),D=V[0],X=V[1],ke=(0,s.useState)(!1),$=E()(ke,2),A=$[0],K=$[1],Re=(0,s.useState)(""),q=E()(Re,2),I=q[0],Pe=q[1],Ge=(0,s.useState)(!1),_=E()(Ge,2),N=_[0],ee=_[1],We=(0,s.useCallback)(function(n){Pe(n)},[]),te=(0,s.useRef)(null),C=(0,s.useRef)(),ne=(0,s.useRef)(),p=(0,s.useRef)(),Be=new URL(window.location.href).searchParams,He=Be.get("redirect")||"/",Je=f==null?void 0:f.feishuAppId,z="https://passport.feishu.cn/suite/passport/oauth/authorize?client_id=".concat(Je,"&redirect_uri=").concat(encodeURIComponent(window.location.href),"&response_type=code&state=").concat(He),at=function(){var n=y()(g()().mark(function a(){var u,l;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,f==null||(u=f.fetchUserInfo)===null||u===void 0?void 0:u.call(f);case 2:l=c.sent,l&&(0,ve.flushSync)(function(){Ze(function(M){return d()(d()({},M),{},{currentUser:l})})});case 4:case"end":return c.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),ue=(0,s.useCallback)(function(){var n=y()(g()().mark(function a(u,l){var r,c,M,m,T;return g()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,ge.x4)(u);case 3:if(r=j.sent,r.code!==66){j.next=7;break}return X(!0),j.abrupt("return");case 7:if(!(r.code===0&&r.data)){j.next=18;break}return c="\u767B\u5F55\u6210\u529F\uFF01",Q.ZP.success(c),M=r.data,localStorage.removeItem(M.username),(0,Le.ps)(M),m=new URL(window.location.href).searchParams,setTimeout(function(){window.location.href=M.c_url||m.get("redirect")||"/"},500),j.abrupt("return");case 18:l&&setTimeout(function(){window.location.replace("/user/login")},1e3);case 19:j.next=25;break;case 21:j.prev=21,j.t0=j.catch(0),T="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",Q.ZP.error(T);case 25:case"end":return j.stop()}},a,null,[[0,21]])}));return function(a,u){return n.apply(this,arguments)}}(),[]),Ve=(0,s.useCallback)(y()(g()().mark(function n(){var a;return g()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return I.length===6&&((a=ne.current)===null||a===void 0||a.submit()),l.abrupt("return",!0);case 2:case"end":return l.stop()}},n)})),[I]),ae=(0,s.useCallback)(function(){var n;(n=te.current)===null||n===void 0||n.clear()},[]),Xe=(0,s.useCallback)(y()(g()().mark(function n(){return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:window.location.assign(z);case 1:case"end":return u.stop()}},n)})),[z]),$e=function(){var a=document.querySelector("iframe");a&&a.remove(),p.current=window.QRLogin({id:"login_container",goto:z,width:"328",height:"286"})},re=(0,s.useCallback)(function(n){if(p.current&&p.current.matchOrigin(n.origin)&&p.current.matchData(n.data)){var a=n.data.tmp_code;window.location.href="".concat(z,"&tmp_code=").concat(a)}},[z]);typeof window.addEventListener!="undefined"?window.addEventListener("message",re,!1):typeof window.attachEvent!="undefined"&&window.attachEvent("onmessage",re);var Ke=(0,s.useCallback)(function(){var n=y()(g()().mark(function a(u,l){var r,c,M,m,T,w;return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(r=new URLSearchParams(window.location.search),c=r.get("redirect")||r.get("c_url")||"/",M={},m=I.length===6,!l){S.next=10;break}return M=d()(d()({login_type:"feishu",code:l},m?{dynamic:I}:{}),{},{c_url:c,fs_redirect_uri:"".concat(encodeURIComponent(window.location.href))}),S.next=8,ue(M,!0);case 8:S.next=14;break;case 10:if(!u){S.next=14;break}return M=d()(d()({username:(T=u.username)===null||T===void 0?void 0:T.trim(),password:window.btoa(window.btoa((w=u.password)===null||w===void 0?void 0:w.trim()))},m?{dynamic:I}:{login_type:b}),{},{c_url:c}),S.next=14,ue(M);case 14:case"end":return S.stop()}},a)}));return function(a,u){return n.apply(this,arguments)}}(),[I,b]),ie=function(){var n=y()(g()().mark(function a(u){var l,r;return g()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return l=new URLSearchParams(window.location.search),r=l.get("code"),M.next=4,Ke(u,r!=null?r:"");case 4:case"end":return M.stop()}},a)}));return function(u){return n.apply(this,arguments)}}();(0,s.useEffect)(function(){ae()},[D]),(0,s.useEffect)(function(){I.length===6?K(!0):K(!1)},[I]),(0,s.useEffect)(function(){$e()},[N]),(0,s.useEffect)(function(){y()(g()().mark(function n(){return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ie();case 2:case"end":return u.stop()}},n)}))()},[]),(0,s.useEffect)(function(){if(A){var n;(n=C.current)===null||n===void 0||n.submit()}},[A]);var qe=(0,s.useMemo)(function(){return(0,e.jsx)(Ie.Y,{title:"\u4E8C\u6B21\u9A8C\u8BC1",open:D,width:580,formRef:C,onOpenChange:X,submitter:{resetButtonProps:!1,submitButtonProps:!1,render:function(a,u){return console.log(a),[(0,e.jsx)(k.ZP,{onClick:ae,children:"\u91CD\u7F6E"},"reset"),(0,e.jsx)(k.ZP,{type:"primary",onClick:function(){var r,c;return(r=C.current)===null||r===void 0||(c=r.submit)===null||c===void 0?void 0:c.call(r)},disabled:!A,children:"\u63D0\u4EA4"},"submit")]}},onFinish:Ve,onKeyPress:function(a){if(a.key==="Enter"&&A){var u;(u=C.current)===null||u===void 0||u.submit()}},children:(0,e.jsx)(O.Z,{justify:"center",children:(0,e.jsxs)(fe.Z,{children:[(0,e.jsx)(O.Z,{justify:"center",children:(0,e.jsx)(Me.eF,{onChange:We,containerClassName:v.authCodeContainer,ref:te,allowedCharacters:"numeric"})}),(0,e.jsx)(O.Z,{justify:"center",children:(0,e.jsx)(R.Z.Text,{children:"\u8BF7\u6253\u5F00\u60A8\u624B\u673A\u4E0A\u7684Authenticator\u5E94\u7528\uFF0C\u627E\u5230\u751F\u6210\u76846\u4F4D\u9A8C\u8BC1\u7801\u5E76\u8F93\u5165\u4EE5\u7EE7\u7EED\u3002"})})]})})})},[D,A]);return(0,e.jsxs)("div",{className:v.container,children:[(0,e.jsx)(h.Helmet,{children:(0,e.jsx)("title",{children:"\u767B\u5F55"})}),(0,e.jsxs)("div",{style:{backgroundColor:"white",height:"100vh",background:"url(/imgs/login_bg.jpg) left 10% no-repeat",backgroundSize:"110% auto"},children:[(0,e.jsxs)(Ne.B,{style:{backgroundSize:"auto"},logo:(0,e.jsx)("img",{alt:"logo",src:pe}),title:"\u5168\u7403\u4E00\u7AD9\u5F0F\u8FD0\u7EF4",containerStyle:{backgroundImage:"none",height:500},backgroundImageUrl:"",formRef:ne,subTitle:"\u7814\u8FD0\u4E00\u4F53\uFF0C\u6570\u5B57\u5316\u9A71\u52A8\uFF0C\u5353\u8D8A\u6548\u80FD\u63D0\u5347\uFF0C\u7CBE\u7EC6\u5316\u6210\u672C\u7BA1\u7406",submitter:{render:function(a,u){return!N&&u.pop()}},actions:!N&&(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,e.jsx)(me.Z,{plain:!0,children:(0,e.jsx)("span",{style:{fontWeight:"normal",fontSize:14},children:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"})}),(0,e.jsx)(P.Z,{align:"center",size:24,children:(0,e.jsx)(U.Z,{title:"\u98DE\u4E66\u767B\u9646",placement:"right",children:(0,e.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:40,width:40,border:"1px solid "+Ye.colorPrimaryBorder,borderRadius:"50%",cursor:"pointer"},onClick:Xe,children:(0,e.jsx)(x,{type:"c-icon-feishu",style:d()({},B)})})})})]}),onFinish:function(){var n=y()(g()().mark(function a(u){return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ie(u);case 2:case"end":return r.stop()}},a)}));return function(a){return n.apply(this,arguments)}}(),children:[(0,e.jsxs)("div",{style:{display:N?"block":"none",textAlign:"center"},children:[(0,e.jsx)("div",{id:"login_container"}),(0,e.jsxs)(P.Z,{children:[(0,e.jsx)(x,{type:"c-icon-feishu",style:d()({},B)}),(0,e.jsx)(R.Z.Text,{type:"secondary",children:"\u98DE\u4E66App\u626B\u4E00\u626B"})]})]}),(0,e.jsxs)("div",{style:{display:N?"none":"block"},children:[(0,e.jsx)(Te.Z,{activeKey:b,onChange:function(a){Ue(a)},centered:!0,items:[{key:"base",label:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},{key:"ldap",label:"LDAP"}]}),(0,e.jsx)(Y.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(de.Z,{})},placeholder:J.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}),rules:[{required:!D,message:(0,e.jsx)(h.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(Y.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ye.Z,{})},placeholder:J.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!D,message:(0,e.jsx)(h.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),N?(0,e.jsx)(U.Z,{title:"\u5207\u6362\u81F3\u8D26\u53F7\u767B\u5F55",children:(0,e.jsx)(x,{type:"c-icon-pc-login",className:xe()(v.cornerSwitch,v.pcLogin),onClick:function(){ee(!N)}})}):(0,e.jsx)(U.Z,{title:"\u98DE\u4E66\u626B\u7801\uFF0C\u5FEB\u901F\u767B\u9646",children:(0,e.jsx)(x,{type:"c-icon-saomadenglu01",className:v.cornerSwitch,onClick:function(){ee(!N)}})})]}),qe]})]})},Oe=we}}]);
