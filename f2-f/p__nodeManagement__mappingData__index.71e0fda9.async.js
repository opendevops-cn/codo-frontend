"use strict";(self.webpackChunkf2=self.webpackChunkf2||[]).push([[5858],{57491:function(J,A,e){var h=e(98037),r=e(75271),j=e(19579),P=e(17002),o=function(g,l){return r.createElement(P.Z,(0,h.Z)((0,h.Z)({},g),{},{ref:l,icon:j.Z}))},i=r.forwardRef(o);A.Z=i},65496:function(J,A,e){var h=e(98037),r=e(75271),j=e(22800),P=e(17002),o=function(g,l){return r.createElement(P.Z,(0,h.Z)((0,h.Z)({},g),{},{ref:l,icon:j.Z}))},i=r.forwardRef(o);A.Z=i},82715:function(J,A,e){var h=e(99459),r=e(98037),j=e(58006),P=e(18542),o=e(44725),i=e(86432),I=e(71770),g=e(75271),l=e(34832),s=e(52676),O=["fieldProps","proFieldProps"],y=["fieldProps","proFieldProps"],M="text",C=function(a){var n=a.fieldProps,m=a.proFieldProps,T=(0,j.Z)(a,O);return(0,s.jsx)(l.Z,(0,r.Z)({valueType:M,fieldProps:n,filedConfig:{valueType:M},proFieldProps:m},T))},x=function(a){var n=(0,P.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),m=(0,h.Z)(n,2),T=m[0],S=m[1];return(0,s.jsx)(o.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(U){var Z,t=U.getFieldValue(a.name||[]);return(0,s.jsx)(i.Z,(0,r.Z)((0,r.Z)({getPopupContainer:function(c){return c&&c.parentNode?c.parentNode:c},onOpenChange:function(c){return S(c)},content:(0,s.jsxs)("div",{style:{padding:"4px 0"},children:[(Z=a.statusRender)===null||Z===void 0?void 0:Z.call(a,t),a.strengthText?(0,s.jsx)("div",{style:{marginTop:10},children:(0,s.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:T,children:a.children}))}})},F=function(a){var n=a.fieldProps,m=a.proFieldProps,T=(0,j.Z)(a,y),S=(0,g.useState)(!1),K=(0,h.Z)(S,2),U=K[0],Z=K[1];return n!=null&&n.statusRender&&T.name?(0,s.jsx)(x,{name:T.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:U,onOpenChange:Z,children:(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,(0,r.Z)({valueType:"password",fieldProps:(0,r.Z)((0,r.Z)({},(0,I.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(L){var c;n==null||(c=n.onBlur)===null||c===void 0||c.call(n,L),Z(!1)},onClick:function(L){var c;n==null||(c=n.onClick)===null||c===void 0||c.call(n,L),Z(!0)}}),proFieldProps:m,filedConfig:{valueType:M}},T))})}):(0,s.jsx)(l.Z,(0,r.Z)({valueType:"password",fieldProps:n,proFieldProps:m,filedConfig:{valueType:M}},T))},E=C;E.Password=F,E.displayName="ProFormComponent",A.Z=E},67254:function(J,A,e){var h=e(26068),r=e.n(h),j=e(67825),P=e.n(j),o=e(53649),i=e.n(o),I=e(99503),g=e(77777),l=e(88230),s=e(75271),O=e(52676),y=["children","extra","ghost","title"],M,C,x=(0,l.kc)(function(E){var v=E.css;return{pageContainer:{"& .ant-page-header-heading":v(M||(M=i()([`
      margin-bottom: -50px;
    `]))),"& .ant-page-header-heading-extra":v(C||(C=i()([`
      position: absolute;
      top: 17px;
      right: 20px;
    `])))}}}),F=function(v){var a=v.children,n=v.extra,m=n===void 0?(0,O.jsx)(I.er,{}):n,T=v.ghost,S=T===void 0?!1:T,K=v.title,U=K===void 0?!1:K,Z=P()(v,y),t=x(),L=t.styles;return(0,O.jsx)(g._z,r()(r()({ghost:S,extra:m,className:L.pageContainer,title:U},Z),{},{children:a}))};A.Z=F},78474:function(J,A,e){e.d(A,{j:function(){return j},t:function(){return P}});var h=e(54388),r=e(87300);function j(o,i,I,g,l,s){var O=l!=null?l:r.ZP,y=(0,h.useRequest)(o(i,I),{manual:!0,onSuccess:function(F){if(F.code!==0?O.error(F.msg):O.success(F.msg),s)s();else{var E;g==null||(E=g.current)===null||E===void 0||E.reload(!1)}},onError:function(){O.error("\u64CD\u4F5C\u5931\u8D25")}}),M=y.run,C=y.loading;return{runOpt:M,loading:C}}function P(o){var i=o.optMethod,I=o.optType,g=o.method,l=o.actionRef,s=o.messageApi,O=o.onSuccessCallback,y=o.showSuccessMessage,M=y===void 0?!0:y,C=s!=null?s:r.ZP,x=(0,h.useRequest)(i(I,g),{manual:!0,onSuccess:function(a){var n=typeof a.msg=="string"?a.msg:JSON.stringify(a.msg);if(a.code!==0)C.error(n);else if(O)O(a);else{var m;M&&C.success(n),l==null||(m=l.current)===null||m===void 0||m.reload(!1)}},onError:function(){C.error("\u64CD\u4F5C\u5931\u8D25")}}),F=x.run,E=x.loading;return{runOpt:F,loading:E}}},63604:function(J,A,e){e.r(A),e.d(A,{default:function(){return ve}});var h=e(90228),r=e.n(h),j=e(87999),P=e.n(j),o=e(48305),i=e.n(o),I=e(99503),g=e(67254),l=e(78474),s=e(57491),O=e(19048),y=e(65496),M=e(90254),C=e(54388),x=e(37665),F=e(87300),E=e(50876),v=e(64085),a=e(41901),n=e(20877),m=e(67870),T=e(84249),S=e(75271),K=e(84297),U=e(82715),Z=e(66130),t=e(52676),L=function(f){var V,W=f.open,Y=f.onOpenChange,w=f.onFinish,ee=(0,C.useModel)("@@initialState"),G=ee.initialState,Q=(G==null||(V=G.bizListData)===null||V===void 0?void 0:V.data)||[],ne=(0,S.useState)(""),X=i()(ne,2),te=X[0],ae=X[1],re=function(){var N=P()(r()().mark(function b(B){var z;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,z={agent_id:B.agent_id,alias:B.alias,biz_id:B.biz_id||te},console.log("\u63D0\u4EA4\u6570\u636E:",z),!w){d.next=9;break}return d.next=6,w(z);case 6:return d.abrupt("return",d.sent);case 9:return d.abrupt("return",!0);case 10:d.next=16;break;case 12:return d.prev=12,d.t0=d.catch(0),console.error("\u64CD\u4F5C\u5931\u8D25:",d.t0),d.abrupt("return",!1);case 16:case"end":return d.stop()}},b,null,[[0,12]])}));return function(B){return N.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(K.Y,{title:"\u65B0\u589E\u6620\u5C04\u5173\u7CFB",open:W,onOpenChange:Y,modalProps:{destroyOnClose:!0},onFinish:re,width:500,children:[(0,t.jsx)(U.Z,{name:"agent_id",label:"Agent ID",placeholder:"\u8BF7\u8F93\u5165Agent ID",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Agent ID"}]}),(0,t.jsx)(U.Z,{name:"alias",label:"\u522B\u540D",placeholder:"\u8BF7\u8F93\u5165\u522B\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u522B\u540D"},{max:50,message:"\u522B\u540D\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750\u4E2A\u5B57\u7B26"}]}),(0,t.jsx)(Z.Z,{name:"biz_id",label:"\u4E1A\u52A1",showSearch:!0,allowClear:!1,fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u4E1A\u52A1",onChange:function(b){return ae(b)}},valueEnum:Q.reduce(function(N,b){return N[b.biz_id]=b.biz_cn_name,N},{}),style:{width:"100%"},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E1A\u52A1"}]})]})})},c=L,k=e(23261);function oe($){return(0,k.eg)("/api/job/v1/cloud-agent-mapping/list/",$)}function ie($,f){return(0,k.S_)("/api/job/v1/cloud-agent-mapping/manage/",f)}function de($,f){return(0,k.S_)("/api/job/v1/cloud-agent-mapping/manage/",f)}function Ce(){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function $(){var f;return _regeneratorRuntime().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return f=[{label:"cloud-agent-volcano6666",value:"cloud-agent-volcano6666"},{label:"cloud-agent-test1234",value:"cloud-agent-test1234"},{label:"cloud-agent-prod5678",value:"cloud-agent-prod5678"},{label:"cloud-agent-dev9999",value:"cloud-agent-dev9999"}],W.abrupt("return",f);case 2:case"end":return W.stop()}},$)})),q.apply(this,arguments)}var pe=function(){var f=(0,S.useRef)(),V=F.ZP.useMessage(),W=i()(V,2),Y=W[0],w=W[1],ee=(0,S.useState)(""),G=i()(ee,2),Q=G[0],ne=G[1],X=(0,x.Z)(Q,{wait:300}),te=(0,C.useSearchParams)(),ae=i()(te,1),re=ae[0],N=(0,S.useState)([]),b=i()(N,2),B=b[0],z=b[1],se=(0,S.useState)(!1),d=i()(se,2),ce=d[0],ue=d[1];(0,S.useEffect)(function(){var p;(p=f.current)===null||p===void 0||p.reload()},[re]);var he=(0,l.t)({optMethod:de,optType:"delete",method:"DELETE",actionRef:f,messageApi:Y,showSuccessMessage:!0}),le=he.runOpt,ge=(0,l.t)({optMethod:ie,optType:"create",method:"POST",actionRef:f,messageApi:Y,showSuccessMessage:!0}),me=ge.runOpt,fe=function(){ue(!0)},_e=function(){var p=P()(r()().mark(function D(_){var H;return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,H={id_list:[_.id]},R.next=4,le(H);case 4:z(function(Oe){return Oe.filter(function(Me){return Me.id!==_.id})}),R.next=10;break;case 7:R.prev=7,R.t0=R.catch(0),console.error("\u5220\u9664\u5931\u8D25:",R.t0);case 10:case"end":return R.stop()}},D,null,[[0,7]])}));return function(_){return p.apply(this,arguments)}}(),Pe=function(){var p=P()(r()().mark(function D(){var _;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(B.length!==0){u.next=3;break}return Y.warning("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E"),u.abrupt("return");case 3:return u.prev=3,_={id_list:B.map(function(R){return R.id})},u.next=7,le(_);case 7:z([]),u.next=13;break;case 10:u.prev=10,u.t0=u.catch(3),console.error("\u6279\u91CF\u5220\u9664\u5931\u8D25:",u.t0);case 13:case"end":return u.stop()}},D,null,[[3,10]])}));return function(){return p.apply(this,arguments)}}(),Ee=function(){var p=P()(r()().mark(function D(_){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,me(_);case 3:return ue(!1),u.abrupt("return",!0);case 7:return u.prev=7,u.t0=u.catch(0),console.error("\u64CD\u4F5C\u5931\u8D25:",u.t0),u.abrupt("return",!1);case 11:case"end":return u.stop()}},D,null,[[0,7]])}));return function(_){return p.apply(this,arguments)}}(),De=[{title:"ID",dataIndex:"id",width:80,hideInSearch:!0},{title:"Agent ID",dataIndex:"agent_id",width:200,ellipsis:!0},{title:"\u522B\u540D",dataIndex:"alias",width:180,ellipsis:!0},{title:"\u4E1A\u52A1ID",dataIndex:"biz_id",width:120,align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",width:160,valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:100,fixed:"right",render:function(D,_){return[(0,t.jsx)(E.Z,{title:"\u5220\u9664",children:(0,t.jsx)(v.Z,{title:"\u786E\u8BA4\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u6620\u5C04\u5173\u7CFB\u5417\uFF1F",onConfirm:function(){return _e(_)},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(a.ZP,{type:"link",danger:!0,icon:(0,t.jsx)(s.Z,{})})})},"delete")]}}];return(0,t.jsxs)(t.Fragment,{children:[w,(0,t.jsxs)(g.Z,{header:{title:"Mapping\u6570\u636E"},extra:(0,t.jsx)(I.er,{disabled:!0}),children:[(0,t.jsx)(n.Z,{type:"info",showIcon:!0,message:"\u5173\u8054 Kubernetes \u96C6\u7FA4\u4E0E\u4E1A\u52A1\uFF0C\u786E\u4FDD\u4E91\u539F\u751F\u6D41\u7A0B\u53EA\u80FD\u5728\u7ED1\u5B9A\u96C6\u7FA4\u4E2D\u8FD0\u884C\u3002",style:{marginBottom:16}}),(0,t.jsx)(M.Z,{actionRef:f,params:{searchValue:X},rowKey:"id",search:!1,request:oe(),columns:De,scroll:{x:1200},pagination:{defaultPageSize:10,showSizeChanger:!0},rowSelection:{selectedRowKeys:B.map(function(p){return p.id}),onChange:function(D,_){z(_)}},tableAlertRender:function(D){var _=D.onCleanSelected;return(0,t.jsx)(m.Z,{size:24,children:(0,t.jsxs)("span",{children:["\u5DF2\u9009 ",(0,t.jsx)("a",{style:{fontWeight:600},children:B.length})," \u9879",(0,t.jsx)("a",{style:{marginLeft:8},onClick:function(){z([]),_()},children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(){return(B==null?void 0:B.length)>0&&(0,t.jsx)(v.Z,{title:"\u6279\u91CF\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684\u6620\u5C04\u5173\u7CFB\u5417\uFF1F",onConfirm:Pe,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(a.ZP,{type:"primary",danger:!0,icon:(0,t.jsx)(s.Z,{}),children:"\u6279\u91CF\u5220\u9664"})})},toolbar:{search:(0,t.jsx)(T.Z,{prefix:(0,t.jsx)(O.Z,{}),style:{width:400},placeholder:"\u8BF7\u8F93\u5165Agent ID\u3001\u522B\u540D\u6216\u4E1A\u52A1ID\u641C\u7D22",allowClear:!0,value:Q,onChange:function(D){return ne(D.target.value)}}),actions:[(0,t.jsx)(a.ZP,{type:"primary",icon:(0,t.jsx)(y.Z,{}),onClick:fe,children:"\u65B0\u589E\u6620\u5C04"},"add")]}}),(0,t.jsx)(c,{open:ce,onOpenChange:ue,onFinish:Ee})]})]})},ve=pe}}]);
