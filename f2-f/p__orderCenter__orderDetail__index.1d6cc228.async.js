"use strict";(self.webpackChunkf2=self.webpackChunkf2||[]).push([[7816],{30168:function(ha,Ue,o){o.d(Ue,{OV:function(){return ue}});var Bn=o(60164),ue=function(be,c){var Ne=(0,Bn.ac)({minWidth:c||1700}),w=Ne?be.wide:be.small;return{isWideScreen:Ne,width:w}},cr=function(be){var c=useMediaQuery({minWidth:1700}),Ne=useMediaQuery({maxWidth:1699});return c?{type:"wide",width:be.wide}:Ne?{type:"small",width:be.small}:{type:"small",width:be.small}};Ue.ZP=ue},31060:function(ha,Ue,o){o.r(Ue),o.d(Ue,{default:function(){return st}});var Bn=o(31759),ue=o.n(Bn),cr=o(26068),k=o.n(cr),be=o(90228),c=o.n(be),Ne=o(87999),w=o.n(Ne),ya=o(48305),y=o.n(ya),ve=o(54388),Te=o(99503),ga=o(67254),pr=o(94642),vr=o(38153),ba=o(30168),mr=o(79937),xa=o(69961),ja=o(7770),fr=o(22693),Sa=o(41803),ka=o(58253),Ca=o(41891),hr=o(17931),yr=o(27201),En=o(87300),Ge=o(67870),x=o(80921),E=o(38902),ee=o(50876),g=o(41901),Ze=o(3836),Ke=o(36659),V=o(28061),gr=o(49811),_a=o(40506),wa=o(88230),Ta=o(16483),me=o.n(Ta),p=o(75271),Za=o(78474),br=o(60200),Fa=o(46645),xe=o(94368),Da=o(56192),Ba=o(65729),Ea=o(79818),Fe=o(25577),je=o(57887),De=o(54551),Oa=o(19048),Ia=o(90254),xr=o(84297),jr=o(66130),Pa=o(37665),Aa=o(44725),$=o(84338),Na=o(84249),On=o(80021),Sr=o(20877),In=o(25131),kr=o(80089),Ma=o(19478),La=o(49657),Va=o(32699),$a=o.n(Va),Ra=o(13165),Be=o(23261);function Cr(D){return Pn.apply(this,arguments)}function Pn(){return Pn=w()(c()().mark(function D(h){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Be.B2)("/api/job/v1/flow/order/info/",h));case 1:case"end":return m.stop()}},D)})),Pn.apply(this,arguments)}function za(D){return An.apply(this,arguments)}function An(){return An=w()(c()().mark(function D(h){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Be.B2)("/api/job/v1/flow/circulation/logs/",h));case 1:case"end":return m.stop()}},D)})),An.apply(this,arguments)}function Wa(D){return Nn.apply(this,arguments)}function Nn(){return Nn=w()(c()().mark(function D(h){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Be.B2)("/api/job/v2/flow/task/logs/",h));case 1:case"end":return m.stop()}},D)})),Nn.apply(this,arguments)}function Ha(D){return Mn.apply(this,arguments)}function Mn(){return Mn=w()(c()().mark(function D(h){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Be.B2)("/api/job/v2/flow/run/node/",h));case 1:case"end":return m.stop()}},D)})),Mn.apply(this,arguments)}function Ja(D,h){return(0,Be.S_)("/api/job/v1/flow/run/node/",h)}function Ua(D){return(0,Be.dT)("/api/job/v2/flow/cloud_task/steps/",D)}function Ga(D){return(0,Be.B2)("/api/job/v2/flow/task/logs/",D)}var Me=o(77899),_r=function(h){var Z={0:{color:"black",label:"\u65B0\u5EFA"},1:{color:"grey",label:"\u7B49\u5F85\u6267\u884C"},2:{color:"#65e0f8",label:"\u6B63\u5728\u8FD0\u884C"},3:{color:"success",label:"\u6210\u529F"},4:{color:"#ffafaf",label:"\u51FA\u9519"},5:{color:"#fde1b0",label:"\u7B49\u5F85\u624B\u52A8"},6:{color:"#ffc300",label:"\u4E2D\u6B62"},7:{color:"#5daaf6",label:"\u5B9A\u65F6"},8:{color:"#e2dcf9",label:"\u672A\u77E5"},9:{color:"#fa7c7c",label:"\u5931\u8D25"},10:{color:"#e8eaec",label:"\u5FFD\u7565\u6267\u884C"},11:{color:"#faad14",label:"\u6392\u961F\u4E2D"}};return h in Z?Z[h]:null},wr=function(h){return h.$type==="bpmn:BusinessRuleTask"?h.$attrs["ns1:type"]:h.$type},Ka=function(h){var Z=wr(h),m;return Z in Me.Am?m=Me.Am[Z]:Z in Me.Oi?m=Me.Oi[Z]:m="\u672A\u77E5\u8282\u70B9",m},Ya=function(h){try{var Z=JSON.parse(h),m={};return Object.entries(Z).forEach(function(z){var l=y()(z,2),N=l[0],O=l[1];m[N]=JSON.stringify(O)}),console.log("result",m),m}catch(z){return console.error("Failed to parse JSON string:",z),{}}},Xa=o(1774),Tr=o(81912),e=o(52676),Qa=function(h){var Z=h.open,m=h.onCancel,z=h.globalParams,l=h.globalVariables,N=h.zIndex,O=function(){try{if(z){var he=JSON.parse(z);return Object.entries(he).map(function(K){var Y=y()(K,2),te=Y[0],S=Y[1];return{key:te,paramName:te,paramValue:ue()(S)==="object"?JSON.stringify(S):String(S)}})}return[]}catch(K){return console.error("\u89E3\u6790\u5168\u5C40\u53C2\u6570\u5931\u8D25:",K),[]}},F=function(){try{if(l){var he=JSON.parse(l);return Object.entries(he).map(function(K){var Y=y()(K,2),te=Y[0],S=Y[1];return{key:te,paramName:te,paramValue:ue()(S)==="object"?JSON.stringify(S):String(S)}})}return[]}catch(K){return console.error("\u89E3\u6790\u5168\u5C40\u53D8\u91CF\u5931\u8D25:",K),[]}},fe=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"paramName",key:"paramName",width:"40%"},{title:"\u53C2\u6570\u503C",dataIndex:"paramValue",key:"paramValue",width:"60%"}];return(0,e.jsx)(V.Z,{title:"\u53D8\u91CF\u4FE1\u606F",open:Z,onCancel:m,width:1200,footer:null,destroyOnClose:!0,zIndex:N,children:(0,e.jsx)(Xa.Z,{defaultActiveKey:"initialParams",items:[{key:"initialParams",label:"\u521D\u59CB\u53C2\u6570",children:(0,e.jsx)(Tr.Z,{dataSource:O(),columns:fe,pagination:!1,scroll:{y:600},size:"middle",rowKey:"key"})},{key:"globalVariables",label:"\u5168\u5C40\u53D8\u91CF",children:(0,e.jsx)(Tr.Z,{dataSource:F(),columns:fe,pagination:!1,scroll:{y:600},size:"middle",rowKey:"key"})}]})})},Zr=Qa,qa=o(59906),et=o(54306),nt=function(h){var Z=h.flow_xml,m=h.flow_xml_version,z=m===void 0?"1":m,l=h.updateFlowData,N=h.bpmnViewerRef,O=h.flowFormDataRef,F=h.onElementClick,fe=h.containerId,b=fe===void 0?"canvas":fe,he=(0,p.useRef)(void 0),K=En.ZP.useMessage(),Y=y()(K,2),te=Y[0],S=Y[1],Se=z==="1"?qa.g:et.g,Le=function(){if(N.current){var U=N.current.get("eventBus"),de=N.current.get("elementRegistry");U.on("element.click",function(W){var M=W.element.businessObject.$type,Ee=W.element.businessObject.id,ye=W.element.businessObject;M in Me.H2&&(console.log("Element clicked:",ye),F==null||F(ye))})}},Ve=function(){if(N.current){var U=N.current.get("canvas"),de=N.current.get("elementRegistry").getAll();de.forEach(function(W){var M=W.businessObject.id,Ee=W.businessObject.$attrs,ye=W.businessObject.$type;Ee.run_state&&ye in Me.iL&&U.addMarker(M,"highlight-"+Ee.run_state)})}},ne=function(){screen.availWidth<1024?N.current.get("canvas").zoom(.8):N.current.get("canvas").zoom(.85)},ke=function(){var le=w()(c()().mark(function U(de){return c()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(N.current){M.next=2;break}return M.abrupt("return");case 2:return M.prev=2,M.next=5,N.current.importXML(de);case 5:Le(),Ve(),ne(),M.next=13;break;case 10:M.prev=10,M.t0=M.catch(2),console.error("Error importing XML:",M.t0);case 13:case"end":return M.stop()}},U,null,[[2,10]])}));return function(de){return le.apply(this,arguments)}}();return(0,p.useEffect)(function(){var le=new Se({container:document.getElementById(b)});return N.current=le,Z&&(console.log("flow_xml",Z),ke(Z)),function(){if(N.current){var U=N.current.get("eventBus");U&&U.off("element.click")}}},[z]),(0,p.useEffect)(function(){Z&&N.current&&ke(Z)},[Z]),(0,e.jsxs)(e.Fragment,{children:[S,(0,e.jsx)("div",{className:"containers-v".concat(z),children:(0,e.jsx)("div",{id:b,style:{height:"100%"}})})]})},Fr=nt,rt=function(h){var Z,m,z,l=h.drawerData,N=h.flowData,O=h.flow_run_id,F=h.flow_bpm_id,fe=h.onClose,b=h.isHistoryOrder,he=h.globalParams,K=h.globalVariables,Y=En.ZP.useMessage(),te=y()(Y,2),S=te[0],Se=te[1],Le=(0,p.useState)(null),Ve=y()(Le,2),ne=Ve[0],ke=Ve[1],le=(0,p.useState)(""),U=y()(le,2),de=U[0],W=U[1],M=(0,p.useRef)(),Ee=(0,ve.useSearchParams)(),ye=y()(Ee,1),Br=ye[0],sn=(0,p.useState)(512),on=y()(sn,2),un=on[0],Er=on[1],Ln=(0,p.useState)(!1),dn=y()(Ln,2),cn=dn[0],pn=dn[1],vn=(0,p.useState)({title:"\u67E5\u770B\u811A\u672C\u8BE6\u60C5",info:"",lang:"sh"}),mn=y()(vn,2),Oe=mn[0],fn=mn[1],Vn=(0,p.useState)(!1),hn=y()(Vn,2),Ye=hn[0],yn=hn[1],$n=(0,p.useState)(!1),Xe=y()($n,2),gn=Xe[0],Qe=Xe[1],H=(0,p.useState)({title:"\u58F0\u660E\u4FE1\u606F",info:"",lang:"yaml"}),$e=y()(H,2),qe=$e[0],Rn=$e[1],v=(0,p.useState)(null),bn=y()(v,2),xn=bn[0],en=bn[1],zn=(0,p.useState)(),jn=y()(zn,2),Re=jn[0],ze=jn[1],Wn=(0,p.useState)(!1),nn=y()(Wn,2),Or=nn[0],Sn=nn[1],Ir=(0,p.useState)(!1),Hn=y()(Ir,2),Jn=Hn[0],rn=Hn[1],C=(0,p.useState)([]),T=y()(C,2),B=T[0],G=T[1],I=(0,p.useState)(""),P=y()(I,2),R=P[0],ge=P[1],ie=(0,p.useState)(!1),Un=y()(ie,2),J=Un[0],Pr=Un[1],ot=(0,p.useState)(!1),Ar=y()(ot,2),ut=Ar[0],Nr=Ar[1],dt=(0,p.useState)(!1),Mr=y()(dt,2),ct=Mr[0],Lr=Mr[1],pt=(0,p.useState)(!1),Vr=y()(pt,2),$r=Vr[0],Rr=Vr[1],vt=(0,p.useState)(!1),zr=y()(vt,2),Wr=zr[0],Hr=zr[1],kn=(0,p.useRef)(null),mt=(0,p.useState)({}),Jr=y()(mt,2),Ur=Jr[0],ft=Jr[1],ht=(0,p.useMemo)(function(){return{formSchema:Ur,setFormSchema:ft}},[Ur]),yt=Aa.Z.useForm(),gt=y()(yt,1),ol=gt[0],bt=(0,p.useState)([]),Gr=y()(bt,2),Ce=Gr[0],Cn=Gr[1],Ie=(0,p.useRef)(null),xt=(0,p.useState)(null),Kr=y()(xt,2),Yr=Kr[0],_n=Kr[1],jt=(0,p.useState)(null),Xr=y()(jt,2),re=Xr[0],Qr=Xr[1],St=(0,p.useState)(""),qr=y()(St,2),kt=qr[0],wn=qr[1],Ct=(0,p.useState)(null),ea=y()(Ct,2),Tn=ea[0],Gn=ea[1],_t=(0,p.useState)(null),na=y()(_t,2),_e=na[0],an=na[1],wt=(0,p.useState)(""),ra=y()(wt,2),aa=ra[0],Tt=ra[1],Zt=(0,p.useState)({eventdatetime:null}),ta=y()(Zt,2),tn=ta[0],ln=ta[1],Ft=(0,p.useState)(!1),la=y()(Ft,2),Dt=la[0],Kn=la[1],Zn=(0,Fa.Z)({scriptUrl:"//at.alicdn.com/t/c/font_4660508_0qkw5r2sj29.js"}),X={flow_run_id:O,flow_bpm_id:F,node_type:l.eleType.startsWith("bpmn:")?l.eleType:"bpmn:".concat(l.eleType)},Bt=(0,p.useRef)({}),Et=(0,p.useRef)({}),Ot=(0,p.useState)(""),ia=y()(Ot,2),sa=ia[0],It=ia[1],Yn=(0,Pa.Z)(sa,{wait:300});(0,p.useEffect)(function(){if(Ie.current!==null&&Ce.length>0){var d=parseInt(Ie.current);Ce[d]&&(_e&&(clearInterval(_e),an(null)),Xn(Ce[d].step_name))}},[Ce]);var oa=function(){ke(null),W(""),en(null),ze(void 0),Qr(null),_n(null),Ie.current=null,wn(""),Cn([]),ln({eventdatetime:null}),Kn(!1),Tn&&(clearInterval(Tn),Gn(null)),_e&&(clearInterval(_e),an(null)),fe()},ua=(0,ve.useRequest)(w()(c()().mark(function d(){var a,t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!O||!F)){r.next=2;break}return r.abrupt("return",Promise.resolve(null));case 2:return a=Ha({flow_run_id:O,flow_bpm_id:F}),r.next=5,a;case 5:if(t=r.sent,t.code===0){r.next=9;break}return S.error(t.msg),r.abrupt("return",null);case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}},d)})),{ready:!!O&&!!F&&l.show,refreshDeps:[O,F,l.show],onSuccess:function(a){var t;if(l.eleType==="bpmn:ServiceTask"&&ze(""),(a==null||(t=a.run_bpm_in_data)===null||t===void 0||(t=t.node_info_list)===null||t===void 0?void 0:t.length)>0){var i,r=a.run_bpm_in_data.node_info_list[0];en(r.agent_id),ze((i=r.agent_id)!==null&&i!==void 0?i:""),l.eleType==="cloudNativeServiceTask"&&ma(r)}}}),n=ua.data,ul=ua.run,da=(0,ve.useRequest)(function(){return ne?Wa({flow_run_id:null,flow_bpm_id:null,agent_id:null,log_key:ne}):Promise.resolve(null)},{ready:!!ne&&l.show,refreshDeps:[ne,l.show],formatResult:function(a){return a==null?void 0:a.data},onSuccess:function(a){a&&W(a)},manual:!0}),dl=da.loading,ca=da.run,Pt=(0,ve.useRequest)(function(d){return d&&Cr({order_id:d})},{manual:!0}),At=Pt.run,pa=(0,Za.j)(Ja,void 0,"PATCH",M,S,function(){oa()}),We=pa.loading,Q=pa.runOpt;(0,p.useEffect)(function(){if(O&&F&&typeof Re=="string"){var d=Re?"---".concat(Re):"";ke("".concat(O,"---").concat(F).concat(d))}},[O,F,l.eleType,Re]),(0,p.useEffect)(function(){l.sub_flow_id&&l.show&&At(l.sub_flow_id).then(function(d){Tt(d==null?void 0:d.flow_xml_version)})},[l.sub_flow_id,l.show]),(0,yr.Z)(function(){ne&&l.show&&ca()},2e3),(0,p.useEffect)(function(){ne&&l.show&&ca()},[ne,l.show]),(0,p.useEffect)(function(){if(l.eleType==="bpmn:UserTask"&&l.show&&n!==null&&n!==void 0&&n.run_bpm_in_data){var d,a=n.run_bpm_in_data;(d=kn.current)===null||d===void 0||d.setValues(a)}if(l.eleType==="bpmn:IntermediateCatchEvent"&&l.show&&n!==null&&n!==void 0&&n.run_bpm_data)try{var t=n.run_bpm_data.eventdatetime||null;if(t)ln({eventdatetime:t});else{var i=me()().add(1,"day").toISOString();ln({eventdatetime:i})}}catch(s){console.error("\u521D\u59CB\u5316\u5B9A\u65F6\u5668\u6570\u636E\u51FA\u9519:",s);var r=me()().add(1,"day").toISOString();ln({eventdatetime:r})}},[l.eleType,l.show,n]);var Pe=function(){if(!O||!F||!l.eleType){S.error("\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570");return}V.Z.confirm({content:"\u786E\u5B9A\u8981\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=k()(k()({},X),{},{do_type:"ignore"});try{Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 2:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},ae=function(){var d=w()(c()().mark(function a(t){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!O||!F||!l.eleType)){r.next=3;break}return S.error("\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570"),r.abrupt("return");case 3:V.Z.confirm({content:t!=null&&t.agent_id&&t.name?"\u786E\u5B9A\u8981\u91CD\u8BD5 ".concat(t.name," \u8282\u70B9"):"\u786E\u5B9A\u8981\u91CD\u8BD5\u51FA\u9519\u7684\u4EFB\u52A1\uFF0C\u6B64\u64CD\u4F5C\u91CD\u8BD5\u51FA\u9519\u7684\u8282\u70B9",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var s=w()(c()().mark(function j(){var A;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:A=k()(k()({},X),{},{do_type:"retry",agent_id:t==null?void 0:t.agent_id});try{Q(A)}catch(q){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 2:case"end":return f.stop()}},j)}));function u(){return s.apply(this,arguments)}return u}()});case 4:case"end":return r.stop()}},a)}));return function(t){return d.apply(this,arguments)}}(),Ae=function(){var d=w()(c()().mark(function a(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!O||!F||!l.eleType)){i.next=3;break}return S.error("\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570"),i.abrupt("return");case 3:V.Z.confirm({content:"\u786E\u5B9A\u8981\u4E2D\u65AD\u5F53\u524D\u4EFB\u52A1\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var r=w()(c()().mark(function u(){var j;return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:j=k()(k()({},X),{},{do_type:"stop"});try{Q(j)}catch(f){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 2:case"end":return _.stop()}},u)}));function s(){return r.apply(this,arguments)}return s}()});case 4:case"end":return i.stop()}},a)}));return function(){return d.apply(this,arguments)}}(),He=function(){var d=w()(c()().mark(function a(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!O||!F||!l.eleType)){i.next=3;break}return S.error("\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570"),i.abrupt("return");case 3:V.Z.confirm({content:l.eleType==="bpmn:ScriptTask"?"\u786E\u5B9A\u8981\u91CD\u8BD5\u5F53\u524D\u8282\u70B9\uFF0C\u4F1A\u91CD\u8BD5\u6574\u4E2A\u5F53\u524D\u811A\u672C\u8282\u70B9":l.eleType==="bpmn:ServiceTask"?"\u786E\u5B9A\u8981\u91CD\u8BD5\u5F53\u524D\u8282\u70B9\uFF0C\u4F1A\u91CD\u8BD5\u6574\u4E2A\u5F53\u524D\u670D\u52A1\u8282\u70B9":"\u786E\u5B9A\u8981\u91CD\u8BD5\u5F53\u524D\u8282\u70B9\uFF0C\u4F1A\u91CD\u8BD5\u6574\u4E2A\u5F53\u524D\u8282\u70B9",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var r=w()(c()().mark(function u(){var j;return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:j=k()(k()({},X),{},{do_type:"force-retry"});try{Q(j)}catch(f){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 2:case"end":return _.stop()}},u)}));function s(){return r.apply(this,arguments)}return s}()});case 4:case"end":return i.stop()}},a)}));return function(){return d.apply(this,arguments)}}(),Nt=function(a){if(!O||!F||!l.eleType){S.error("\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570");return}V.Z.confirm({content:"\u4F60\u786E\u5B9A\u63D0\u4EA4\u5F53\u524D\u6570\u636E\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C!",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var t=w()(c()().mark(function r(){var s;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:s=k()(k()({},X),{},{do_type:"form",user_in_data:a});try{Q(s)}catch(A){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 2:case"end":return j.stop()}},r)}));function i(){return t.apply(this,arguments)}return i}()})},Mt=function(){var a;if(n!=null&&(a=n.run_bpm_data)!==null&&a!==void 0&&a.script_info){var t,i,r=l.eleType==="bpmn:BusinessRuleTask"?{task_data:((t=n.run_bpm_data.script_info)===null||t===void 0?void 0:t.task_data)||"",taskrun_data:((i=n.run_bpm_data.script_info)===null||i===void 0?void 0:i.taskrun_data)||""}:n.run_bpm_data.script_info;fn({title:"\u3010".concat(n.run_bpm_data.script_name||"\u811A\u672C\u8BE6\u60C5","\u3011"),info:r,lang:n.run_bpm_data.script_type||"sh"}),pn(!0)}else S.info("\u672C\u8282\u70B9\u4F7F\u7528\u7684\u662F\u670D\u52A1\u5668\u672C\u5730\u811A\u672C")},va=function(){var a;if(n!=null&&(a=n.run_bpm_data)!==null&&a!==void 0&&a.exec_uuid){var t=l.eleType==="cloudNativeServiceTask",i=t?"/f2/jobMeta/cloudNativeTasksMgmt?exec_uuid=".concat(n.run_bpm_data.exec_uuid):"/f2/jobMeta/executiveScript?exec_uuid=".concat(n.run_bpm_data.exec_uuid);window.open(i,"_blank")}else S.info("\u672A\u627E\u5230\u811A\u672CUUID\u4FE1\u606F")},Lt=function(){var a;if(n!=null&&(a=n.run_bpm_data)!==null&&a!==void 0&&a.task_data){var t="";try{if(typeof n.run_bpm_data.task_data=="string"){var i=JSON.parse(n.run_bpm_data.task_data);t=JSON.stringify(i,null,2)}else t=JSON.stringify(n.run_bpm_data.task_data,null,2)}catch(r){t=typeof n.run_bpm_data.task_data=="string"?n.run_bpm_data.task_data:JSON.stringify(n.run_bpm_data.task_data)}Rn({title:"\u4E91\u539F\u751F\u58F0\u660E\u4FE1\u606F",info:t,lang:"yaml"}),Qe(!0)}else S.info("\u672A\u627E\u5230\u4E91\u539F\u751F\u58F0\u660E\u4FE1\u606F")},Vt=function(){var d=w()(c()().mark(function a(){var t,i,r,s;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(t=kn.current)===null||t===void 0?void 0:t.validate();case 3:r=j.sent,s=(r==null||(i=r.errorFields)===null||i===void 0?void 0:i.length)>0,s||V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u5BA1\u6279\u901A\u8FC7\uFF1F\u786E\u5B9A\u540E\u65E0\u6CD5\u64A4\u56DE\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var A=w()(c()().mark(function f(){var q;return c()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:Pr(!0);try{q=k()(k()({},X),{},{do_type:"confirm"}),Q(q)}catch(oe){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}finally{Pr(!1)}case 2:case"end":return se.stop()}},f)}));function _(){return A.apply(this,arguments)}return _}()}),j.next=11;break;case 8:j.prev=8,j.t0=j.catch(0),console.log(j.t0);case 11:case"end":return j.stop()}},a,null,[[0,8]])}));return function(){return d.apply(this,arguments)}}(),$t=function(){V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u5173\u95ED\u672C\u6D41\u7A0B\uFF1F\u786E\u5B9A\u540E\u65E0\u6CD5\u64A4\u56DE\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:Nr(!0);try{r=k()(k()({},X),{},{do_type:"end"}),Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}finally{Nr(!1)}case 2:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},Rt=function(){V.Z.confirm({title:"\u63D0\u9192",content:"\u786E\u5B9A\u8981\u8BA4\u9886\u6B64\u4EFB\u52A1\uFF1F",okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:Lr(!0);try{r=k()(k()({},X),{},{do_type:"claim"}),Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}finally{Lr(!1)}case 2:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},zt=function(){G([]),Sn(!0)},Wt=function(){var d=w()(c()().mark(function a(t){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!t.handlers||t.handlers.length===0)){r.next=3;break}return S.error("\u8BF7\u9009\u62E9\u81F3\u5C11\u4E00\u4E2A\u7528\u6237"),r.abrupt("return",!1);case 3:return V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u6D3E\u5355\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var s=w()(c()().mark(function j(){var A;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return Rr(!0),f.prev=1,A=k()(k()({},X),{},{do_type:"dispatch",user_type:"user",c_data:t.handlers}),Q(A),Sn(!1),f.abrupt("return",!0);case 8:return f.prev=8,f.t0=f.catch(1),S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),f.abrupt("return",!1);case 12:return f.prev=12,Rr(!1),f.finish(12);case 15:case"end":return f.stop()}},j,null,[[1,8,12,15]])}));function u(){return s.apply(this,arguments)}return u}()}),r.abrupt("return",!1);case 5:case"end":return r.stop()}},a)}));return function(t){return d.apply(this,arguments)}}(),Ht=function(){ge(""),rn(!0)},Jt=function(){var d=w()(c()().mark(function a(t){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.handler){r.next=3;break}return S.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u7528\u6237"),r.abrupt("return",!1);case 3:return V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u8F6C\u5355\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var s=w()(c()().mark(function j(){var A;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return Hr(!0),f.prev=1,A=k()(k()({},X),{},{do_type:"transfer",user_type:"user",c_data:t.handler}),Q(A),rn(!1),f.abrupt("return",!0);case 8:return f.prev=8,f.t0=f.catch(1),S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),f.abrupt("return",!1);case 12:return f.prev=12,Hr(!1),f.finish(12);case 15:case"end":return f.stop()}},j,null,[[1,8,12,15]])}));function u(){return s.apply(this,arguments)}return u}()}),r.abrupt("return",!1);case 5:case"end":return r.stop()}},a)}));return function(t){return d.apply(this,arguments)}}(),Ut=function(a){Ie.current=a,_n(a),_e&&(clearInterval(_e),an(null)),Ce[parseInt(a)]?Xn(Ce[parseInt(a)].step_name):wn("")},Xn=function(a){if(!(!O||!F||!(re!=null&&re.agent_id)||!a)){var t="".concat(O,"---").concat(F),i=function(){Ga({flow_run_id:O,flow_bpm_id:F,agent_id:re.agent_id,log_key:t,log_type:"cloud_native",step_name:a}).then(function(u){(u==null?void 0:u.code)===0&&wn((u==null?void 0:u.data)||"")}).catch(function(u){console.error("\u83B7\u53D6\u4E91\u539F\u751F\u4EFB\u52A1\u6B65\u9AA4\u65E5\u5FD7\u5931\u8D25:",u)})};i();var r=setInterval(i,2e3);an(r)}},ma=function(a){if(Qr(a),Tn&&(clearInterval(Tn),Gn(null)),_e&&(clearInterval(_e),an(null)),Ie.current=null,_n(null),wn(""),!(!O||!F||!(a!=null&&a.agent_id))){var t=function(){Ua({flow_run_id:O,flow_bpm_id:F,agent_id:a.agent_id}).then(function(s){if((s==null?void 0:s.code)===0){var u=(s==null?void 0:s.data)||[];Cn(u),u.length>0&&Ie.current===null&&(Ie.current="0",_n("0"),Xn(u[0].step_name))}else Cn([])}).catch(function(s){console.error("\u83B7\u53D6\u4E91\u539F\u751F\u4EFB\u52A1\u6B65\u9AA4\u5931\u8D25:",s),Cn([])})};t();var i=setInterval(t,3e3);Gn(i)}},fa=function(a){return re&&re.inner_ip===a.inner_ip},Gt=function(a){switch(a){case"running":return(0,e.jsx)(xe.Z,{className:"running-icon"});case"success":return(0,e.jsx)(Da.Z,{style:{color:"green"}});case"failed":return(0,e.jsx)(Ba.Z,{style:{color:"red"}});case"start":default:return(0,e.jsx)(Ea.Z,{style:{color:"#5c6b77"}})}},Qn=function(){var a={success:{color:"green",text:"\u5B8C\u6210"},start:{color:"cyan",text:"\u8FD0\u884C"},failed:{color:"error",text:"\u51FA\u9519"}};return{title:"\u72B6\u6001",dataIndex:"status",key:"status",width:100,filters:Object.entries(a).map(function(t){var i=y()(t,2),r=i[0],s=i[1];return{text:s.text,value:r}}),onFilter:function(i,r){return r.status===i},sorter:function(i,r){var s;return((s=i.status)===null||s===void 0?void 0:s.localeCompare(r.status||""))||0},render:function(i,r){var s=a[r.status]||{color:"error",text:r.status};return(0,e.jsx)($.Z,{color:s.color,children:s.text})}}},Kt=function(){switch(l.eleType){case"bpmn:ManualTask":return[];case"bpmn:SubProcess":return[];case"bpmn:ScriptTask":return[{title:"\u4E3B\u673A\u540D",dataIndex:"name",key:"name",width:200},{title:"IP \u5730\u5740",dataIndex:"inner_ip",key:"inner_ip",width:150},Qn(),{title:"\u64CD\u4F5C",key:"action",width:120,render:function(t,i){return(0,e.jsx)(g.ZP,{size:"small",onClick:function(){return ae({agent_id:i.agent_id,name:i.name})},disabled:b||i.status!=="failed",children:"\u91CD\u8BD5"})}}];case"bpmn:ServiceTask":return[{title:"\u4E3B\u673A\u540D",dataIndex:"name",key:"name",width:200},{title:"IP \u5730\u5740",dataIndex:"inner_ip",key:"inner_ip",width:150},Qn(),{title:"\u64CD\u4F5C",key:"action",width:120,render:function(t,i){return(0,e.jsx)(g.ZP,{size:"small",onClick:function(){return ae({agent_id:i.agent_id,name:i.name})},disabled:b||i.status!=="failed",children:"\u91CD\u8BD5"})}}];case"bpmn:BusinessRuleTask":return[{title:"\u4E3B\u673A\u540D",dataIndex:"name",key:"name",width:200},{title:"IP \u5730\u5740",dataIndex:"inner_ip",key:"inner_ip",width:150},Qn(),{title:"\u64CD\u4F5C",key:"action",width:120,render:function(t,i){return(0,e.jsx)(g.ZP,{size:"small",onClick:function(){return ae({agent_id:i.agent_id,name:i.name})},disabled:b||i.status!=="failed",children:"\u91CD\u8BD5"})}}];case"syncFiles":return[{title:"\u6E90\u6587\u4EF6\u8DEF\u5F84",dataIndex:"src_path",key:"src_path",width:150,sorter:function(t,i){return t.src_path.localeCompare(i.src_path)}},{title:"\u6E90\u6587\u4EF6\u4E3B\u673A\u5217\u8868",dataIndex:"src_agent_list",key:"src_agent_list",width:150,render:function(t){return!t||t.length===0?"-":(0,e.jsx)(Te.lx,{tags:t,marginTop:4,marginBottom:4,lineClamp:1})}},{title:"\u76EE\u6807\u4E3B\u673A\u5217\u8868",dataIndex:"dst_agent_list",key:"dst_agent_list",width:150,render:function(t){return!t||t.length===0?"-":(0,e.jsx)(Te.lx,{tags:t,marginTop:4,marginBottom:4,lineClamp:1})}},{title:"\u76EE\u6807\u8DEF\u5F84",dataIndex:"dst_path",key:"dst_path",width:150},{title:"\u72B6\u6001",dataIndex:"sync_mode",key:"sync_mode",width:100,sorter:function(t,i){return t.sync_mode.localeCompare(i.sync_mode)},render:function(){var t=n==null?void 0:n.run_bpm_state,i={0:{color:"default",text:"\u65B0\u5EFA"},1:{color:"cyan",text:"\u7B49\u5F85"},2:{color:"blue",text:"\u5904\u7406\u4E2D"},3:{color:"green",text:"\u5B8C\u6210"},4:{color:"error",text:"\u9519\u8BEF"}},r=i[t]||{color:"default",text:"\u672A\u77E5"};return(0,e.jsx)($.Z,{color:r.color,children:r.text})}}];default:return[]}},qn=function(){var a,t,i,r,s,u,j,A,_,f,q,Je,se,oe,Fn,er,Dn={},ce={},we={};switch(l.eleType){case"bpmn:ManualTask":return null;case"bpmn:UserTask":return null;case"bpmn:IntermediateCatchEvent":return(0,e.jsx)(x.Z,{vertical:!0,gap:"middle",style:{marginBottom:16},children:(0,e.jsx)(Ze.Z,{title:"\u5B9A\u65F6\u5668\u5C5E\u6027",children:(0,e.jsxs)(x.Z,{vertical:!0,gap:"middle",children:[(n==null?void 0:n.node_users)&&(0,e.jsxs)(x.Z,{align:"center",children:[(0,e.jsx)(E.Z.Text,{strong:!0,style:{width:80},children:"\u5904\u7406\u4EBA\u5458\uFF1A"}),(0,e.jsx)(x.Z,{gap:"1",wrap:"wrap",children:n.node_users.length<=5?n.node_users.map(function(L,pe){return(0,e.jsx)($.Z,{color:"blue",children:L},pe)}):(0,e.jsxs)(e.Fragment,{children:[n.node_users.slice(0,5).map(function(L,pe){return(0,e.jsx)($.Z,{color:"blue",children:L},pe)}),(0,e.jsx)(ee.Z,{title:(0,e.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:n.node_users.slice(5).map(function(L,pe){return(0,e.jsx)("div",{children:L},pe+5)})}),children:(0,e.jsxs)($.Z,{color:"blue",children:["+",n.node_users.length-5,"\u4EBA"]})})]})})]}),(0,e.jsxs)(x.Z,{align:"center",children:[(0,e.jsx)(E.Z.Text,{strong:!0,style:{width:80},children:"\u901A\u8FC7\u65F6\u95F4\uFF1A"}),(0,e.jsx)(hr.Z,{name:"eventdatetime",disabled:b||!(n&&n.node_power&&n.run_bpm_state!=="3"),fieldProps:{style:{width:350},value:tn.eventdatetime?me()(tn.eventdatetime):null,onChange:function(pe){return ln({eventdatetime:pe?pe.toISOString():null})},showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",placeholder:"\u9009\u62E9\u65F6\u95F4",presets:[{label:"\u6B64\u523B",value:me()()},{label:"\u4E00\u5C0F\u65F6\u540E",value:me()().add(1,"hour")},{label:"\u4E09\u5C0F\u65F6\u540E",value:me()().add(3,"hours")},{label:"\u4E00\u5929\u540E",value:me()().add(1,"day")},{label:"\u4E00\u5468\u540E",value:me()().add(7,"days")}]},noStyle:!0})]}),(n==null?void 0:n.node_power)&&(n==null?void 0:n.run_bpm_state)!=="3"&&(0,e.jsxs)(x.Z,{gap:"small",style:{marginLeft:80},children:[(0,e.jsx)(g.ZP,{type:"primary",onClick:el,loading:Dt,disabled:b,children:"\u786E\u5B9A"}),(0,e.jsx)(g.ZP,{type:"primary",danger:!0,onClick:nl,disabled:b||(n==null?void 0:n.run_bpm_state)!=="7"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u8DF3\u8FC7"})]})]})})});case"bpmn:SubProcess":return(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[(n==null||(a=n.run_bpm_data)===null||a===void 0?void 0:a.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",loading:We,type:"primary",children:"\u8DF3\u8FC7\u9519\u8BEF"}),(n==null||(t=n.run_bpm_data)===null||t===void 0?void 0:t.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u9519\u8BEF\u91CD\u8BD5"}),(n==null||(i=n.run_bpm_data)===null||i===void 0?void 0:i.need_break)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2"&&(n==null?void 0:n.run_bpm_state)!=="4",children:"\u5F3A\u5236\u4E2D\u6B62"}),(n==null||(r=n.run_bpm_data)===null||r===void 0?void 0:r.force_retry)==="yes"&&(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,children:"\u5F3A\u5236\u91CD\u8BD5"})]});case"bpmn:ScriptTask":return(0,e.jsxs)(x.Z,{justify:"space-between",gap:"small",style:{marginBottom:16},children:[(0,e.jsx)(Na.Z,{placeholder:"\u641C\u7D22\u4E3B\u673A\u540D/IP\u5730\u5740",prefix:(0,e.jsx)(Oa.Z,{}),style:{width:400},value:sa,onChange:function(pe){return It(pe.target.value)},allowClear:!0}),(0,e.jsxs)(x.Z,{gap:"small",children:[(n==null||(s=n.run_bpm_data)===null||s===void 0?void 0:s.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",loading:We,type:"primary",children:"\u8DF3\u8FC7\u9519\u8BEF"}),(n==null||(u=n.run_bpm_data)===null||u===void 0?void 0:u.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u9519\u8BEF\u91CD\u8BD5"}),(n==null||(j=n.run_bpm_data)===null||j===void 0?void 0:j.need_break)==="yes"&&(0,e.jsx)(g.ZP,{danger:!0,icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2"&&(n==null?void 0:n.run_bpm_state)!=="4",children:"\u5F3A\u5236\u4E2D\u6B62"}),(n==null||(A=n.run_bpm_data)===null||A===void 0?void 0:A.force_retry)==="yes"&&(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,children:"\u5F3A\u5236\u91CD\u8BD5"})]})]});case"bpmn:ServiceTask":return(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[(n==null||(_=n.run_bpm_data)===null||_===void 0?void 0:_.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",loading:We,type:"primary",children:"\u8DF3\u8FC7\u9519\u8BEF"}),(n==null||(f=n.run_bpm_data)===null||f===void 0?void 0:f.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u9519\u8BEF\u91CD\u8BD5"}),(n==null||(q=n.run_bpm_data)===null||q===void 0?void 0:q.need_break)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2"&&(n==null?void 0:n.run_bpm_state)!=="4",children:"\u5F3A\u5236\u4E2D\u6B62"}),(n==null||(Je=n.run_bpm_data)===null||Je===void 0?void 0:Je.force_retry)==="yes"&&(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:function(){return ae()},children:"\u5F3A\u5236\u91CD\u8BD5"})]});case"bpmn:BusinessRuleTask":return(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[(n==null||(se=n.run_bpm_data)===null||se===void 0?void 0:se.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",loading:We,type:"primary",children:"\u8DF3\u8FC7\u9519\u8BEF"}),(n==null||(oe=n.run_bpm_data)===null||oe===void 0?void 0:oe.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u9519\u8BEF\u91CD\u8BD5"}),(n==null||(Fn=n.run_bpm_data)===null||Fn===void 0?void 0:Fn.need_break)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2"&&(n==null?void 0:n.run_bpm_state)!=="4",children:"\u5F3A\u5236\u4E2D\u6B62"}),(n==null||(er=n.run_bpm_data)===null||er===void 0?void 0:er.force_retry)==="yes"&&(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,children:"\u5F3A\u5236\u91CD\u8BD5"})]});case"syncFiles":{var nr,rr,ar;if(Dn={need_skip:"yes",force_retry:"yes",need_break:"yes"},ce={},n!=null&&n.run_bpm_data)if(ue()(n.run_bpm_data)==="object")ce=n.run_bpm_data;else try{ce=JSON.parse(n.run_bpm_data)}catch(L){console.error("Failed to parse run_bpm_data for syncFiles:",L),ce={}}return we=k()(k()({},ce),Dn),(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[((nr=we)===null||nr===void 0?void 0:nr.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),type:"primary",onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4",loading:We,children:"\u8DF3\u8FC7\u9519\u8BEF"}),((rr=we)===null||rr===void 0?void 0:rr.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4",children:"\u9519\u8BEF\u91CD\u8BD5"}),((ar=we)===null||ar===void 0?void 0:ar.need_break)==="yes"&&(0,e.jsx)(g.ZP,{danger:!0,icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2",children:"\u5F3A\u5236\u4E2D\u6B62"}),(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,disabled:b,children:"\u5F3A\u5236\u91CD\u8BD5"})]})}case"cloudNativeServiceTask":{var tr,lr,ir;if(Dn={need_skip:"yes",force_retry:"yes",need_break:"yes"},ce={},n!=null&&n.run_bpm_data)if(ue()(n.run_bpm_data)==="object")ce=n.run_bpm_data;else try{ce=JSON.parse(n.run_bpm_data)}catch(L){console.error("Failed to parse run_bpm_data for cloudNativeServiceTask:",L),ce={}}return we=k()(k()({},ce),Dn),(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[((tr=we)===null||tr===void 0?void 0:tr.need_skip)==="yes"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,type:"primary",disabled:b||(n==null?void 0:n.run_bpm_state)!=="4",children:"\u8DF3\u8FC7\u9519\u8BEF"})}),((lr=we)===null||lr===void 0?void 0:lr.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4",children:"\u9519\u8BEF\u91CD\u8BD5"}),((ir=we)===null||ir===void 0?void 0:ir.need_break)==="yes"&&(0,e.jsx)(g.ZP,{danger:!0,icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2",children:"\u5F3A\u5236\u4E2D\u6B62"}),(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,disabled:b,children:"\u5F3A\u5236\u91CD\u8BD5"})]})}default:{var sr,or,ur,dr;return(0,e.jsxs)(x.Z,{justify:"end",gap:"small",style:{marginBottom:16},children:[(n==null||(sr=n.run_bpm_data)===null||sr===void 0?void 0:sr.need_skip)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Fe.Z,{}),onClick:Pe,disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",loading:We,type:"primary",children:"\u8DF3\u8FC7\u9519\u8BEF"}),(n==null||(or=n.run_bpm_data)===null||or===void 0?void 0:or.need_retry)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",onClick:function(){return ae()},disabled:b||(n==null?void 0:n.run_bpm_state)!=="4"&&(n==null?void 0:n.run_bpm_state)!=="2",children:"\u9519\u8BEF\u91CD\u8BD5"}),(n==null||(ur=n.run_bpm_data)===null||ur===void 0?void 0:ur.need_break)==="yes"&&(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(De.Z,{}),type:"primary",onClick:Ae,disabled:b||(n==null?void 0:n.run_bpm_state)!=="2"&&(n==null?void 0:n.run_bpm_state)!=="4",children:"\u5F3A\u5236\u4E2D\u6B62"}),(n==null||(dr=n.run_bpm_data)===null||dr===void 0?void 0:dr.force_retry)==="yes"&&(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(xe.Z,{}),onClick:He,disabled:b,children:"\u5F3A\u5236\u91CD\u8BD5"})]})}}},Yt=function(){if(l.eleType!=="bpmn:ManualTask")return null;var a="";try{if(n!=null&&n.run_bpm_data)if(ue()(n.run_bpm_data)==="object")a=n.run_bpm_data.detail||"";else{var t=JSON.parse(n.run_bpm_data);a=t.detail||""}}catch(i){console.error("\u89E3\u6790\u4EBA\u5DE5\u4EFB\u52A1\u6570\u636E\u51FA\u9519:",i)}return(0,e.jsx)(On.Z,{bordered:!0,children:(0,e.jsx)(On.Z.Item,{label:"\u8BE6\u60C5\u5907\u6CE8",span:3,children:a||"\u5907\u6CE8\u4FE1\u606F\u4E3A\u7A7A"})})},Xt=function(){var a,t,i;if(l.eleType!=="bpmn:UserTask"||!n)return null;var r=n.scene_status||"",s=n.run_bpm_data||{},u=(n==null?void 0:n.node_power)&&(n==null?void 0:n.run_bpm_state)==="2"&&!(n!=null&&n.node_approver),j=(a=n.begin_time)!==null&&a!==void 0?a:"\u672A\u6D41\u8F6C\u5230\u5F53\u524D\u8282\u70B9",A=(t=n.end_time)!==null&&t!==void 0?t:"\u5F53\u524D\u8282\u70B9\u5C1A\u672A\u7ED3\u675F";return(0,e.jsxs)(e.Fragment,{children:[n.begin_time&&(0,e.jsx)(On.Z,{style:{marginBottom:16},column:2,items:[{key:"begin_time",label:"\u5F00\u59CB\u65F6\u95F4",children:j},{key:"end_time",label:"\u7ED3\u675F\u65F6\u95F4",children:A}]}),(0,e.jsx)(Ze.Z,{style:{marginBottom:16},title:(0,e.jsx)("span",{children:n.node_approver?"\u5DF2\u5904\u7406":r==="daipaidan"?"\u5F85\u5206\u6D3E":r==="dairenling"?"\u5F85\u8BA4\u9886":"\u5F85\u5904\u7406"}),bodyStyle:{paddingTop:8},extra:(0,e.jsxs)(x.Z,{justify:"end",gap:"small",children:[r==="daipaidan"&&(0,e.jsx)(g.ZP,{disabled:b||!u,size:"small",onClick:zt,loading:$r,children:"\u6D3E\u5355"}),r==="dairenling"&&(0,e.jsx)(g.ZP,{disabled:b||!u,size:"small",onClick:Rt,loading:ct,children:"\u8BA4\u9886"}),s.is_transfer==="yes"&&r==="daichuli"&&(0,e.jsx)(g.ZP,{disabled:b||!u,size:"small",onClick:Ht,loading:Wr,children:"\u8F6C\u5355"}),(0,e.jsx)(g.ZP,{disabled:b||!(u&&r==="daichuli"),size:"small",onClick:$t,loading:ut,children:"\u64A4\u5355"}),(0,e.jsx)(g.ZP,{disabled:b||!(u&&r==="daichuli"),type:"primary",size:"small",onClick:Vt,loading:J,children:"\u5BA1\u6279"})]}),children:(0,e.jsxs)(x.Z,{style:{marginTop:16},vertical:!0,gap:"middle",children:[(0,e.jsxs)(x.Z,{children:[(0,e.jsxs)(x.Z,{flex:1,children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u63D0\u5355\u4EBA\uFF1A"}),(0,e.jsx)(E.Z.Text,{style:{color:"#595959"},children:n.flow_creator||"-"})]}),(0,e.jsxs)(x.Z,{flex:1,children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u5BA1\u6838\u4EBA\uFF1A"}),(0,e.jsx)(E.Z.Text,{style:{color:"#595959"},children:n.node_approver||"-"})]})]}),r==="daichuli"&&(0,e.jsxs)(e.Fragment,{children:[n.node_roles&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u5904\u7406\u89D2\u8272\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.node_roles.map(function(_,f){return(0,e.jsx)($.Z,{color:"geekblue",children:_},f)})})]}),s.handlers==="creator"&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u5904\u7406\u4EBA\uFF1A"}),(0,e.jsx)($.Z,{color:"blue",children:n.flow_creator})]}),n.node_users&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u5904\u7406\u4EBA\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.node_users.length<=5?n.node_users.map(function(_,f){return(0,e.jsx)($.Z,{color:"blue",children:_},f)}):(0,e.jsxs)(e.Fragment,{children:[n.node_users.slice(0,5).map(function(_,f){return(0,e.jsx)($.Z,{color:"blue",children:_},f)}),(0,e.jsx)(ee.Z,{title:(0,e.jsx)("div",{style:{maxHeight:"300px",overflow:"auto"},children:n.node_users.slice(5).map(function(_,f){return(0,e.jsx)("div",{children:_},f+5)})}),children:(0,e.jsxs)($.Z,{color:"blue",children:["+",n.node_users.length-5,"\u4EBA"]})})]})})]})]}),r==="dairenling"&&(0,e.jsxs)(e.Fragment,{children:[n.claim_users&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u5F85\u8BA4\u9886\u4EBA\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.claim_users.map(function(_,f){return(0,e.jsx)($.Z,{color:"blue",children:_},f)})})]}),n.claim_roles&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,style:{minWidth:110},children:"\u5F85\u8BA4\u9886\u89D2\u8272\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.claim_roles.map(function(_,f){return(0,e.jsx)($.Z,{color:"geekblue",children:_},f)})})]}),s.claim_users==="creator"&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,style:{minWidth:110},children:"\u5F85\u8BA4\u9886\u4EBA\uFF1A"}),(0,e.jsx)($.Z,{color:"blue",children:n.flow_creator})]})]}),r==="daipaidan"&&(0,e.jsxs)(e.Fragment,{children:[s.dispatcher==="user"&&n.node_dispatch_users&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u6D3E\u5355\u4EBA\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.node_dispatch_users.map(function(_,f){return(0,e.jsx)($.Z,{color:"blue",children:_},f)})})]}),s.dispatcher==="role"&&n.node_dispatch_role&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u6D3E\u5355\u89D2\u8272\uFF1A"}),(0,e.jsx)(x.Z,{wrap:"wrap",gap:4,children:n.node_dispatch_role.map(function(_,f){return(0,e.jsx)($.Z,{color:"geekblue",children:_},f)})})]}),s.dispatcher==="creator"&&(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(E.Z.Text,{strong:!0,children:"\u6D3E\u5355\u4EBA\uFF1A"}),(0,e.jsx)($.Z,{color:"blue",children:n.flow_creator})]})]})]})}),(0,e.jsxs)(Ze.Z,{title:"\u8282\u70B9\u8868\u5355",children:[n.node_approver&&(0,e.jsx)(Sr.Z,{message:"\u5F53\u524D\u8282\u70B9\u5DF2\u7ECF\u7ED3\u675F",type:"warning",showIcon:!0,style:{marginBottom:16}}),!n.node_power&&(0,e.jsx)(Sr.Z,{message:"\u4F60\u6CA1\u6709\u64CD\u4F5C\u6743\u9650",type:"warning",showIcon:!0,style:{marginBottom:16}}),s.form_info&&s.form_info!=="{}"&&s.form_info!=="[]"&&s.form_info.trim()!==""?(0,e.jsxs)(vr.Bl.Provider,{value:ht,children:[(0,e.jsx)(pr.Z,{children:(0,e.jsx)(mr.Z,{ref:kn,open:l.show,onFinish:function(f){var q=$a().omit(f,"$formSchema"),Je=Object.keys(q).reduce(function(se,oe){try{se[oe]=typeof q[oe]=="string"?JSON.parse(q[oe]):q[oe]}catch(Fn){se[oe]=q[oe]}return se},{});Nt(Je)},formInfo:{custom_fields:(i=JSON.parse(s.form_info))!==null&&i!==void 0?i:[]},formDisabled:b||!n.node_power||n.node_approver})}),(0,e.jsx)(x.Z,{style:{marginTop:16,marginLeft:"147px"},children:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){var f;return(f=kn.current)===null||f===void 0?void 0:f.submit()},disabled:b||!n.node_power||n.node_approver,children:"\u63D0\u4EA4"})})]}):(0,e.jsx)(gr.Z,{description:"\u8282\u70B9\u8868\u5355\u4E3A\u7A7A"})]})]})},Qt=function(){if(l.eleType!=="bpmn:SubProcess")return null;var a=l.sub_flow_xml,t=l.sub_flow_id,i=window.location.pathname,r=i.split("/");r[r.length-1]=t||"";var s=r.join("/"),u=t?"".concat(window.location.origin).concat(s).concat(window.location.search):"",j=function(_){console.log("\u5B50\u6D41\u7A0B\u5143\u7D20\u88AB\u70B9\u51FB:",_)};return(0,e.jsxs)("div",{style:{paddingTop:20},children:[(0,e.jsx)("div",{style:{paddingLeft:10},children:t?(0,e.jsxs)(e.Fragment,{children:["\u5B50\u6D41\u7A0B\u94FE\u63A5\uFF1A"," ",(0,e.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u})]}):(0,e.jsx)("span",{children:"\u5B50\u6D41\u7A0B\u5C1A\u672A\u5F00\u59CB"})}),a&&aa&&(0,e.jsx)(Ze.Z,{bordered:!1,children:(0,e.jsx)(Fr,{flow_xml:a,flow_xml_version:aa,bpmnViewerRef:Bt,flowFormDataRef:Et,onElementClick:j,containerId:"subFlowCanvas"})})]})},qt=function(){var a;if(l.eleType!=="cloudNativeServiceTask"||!n)return null;var t=(n==null||(a=n.run_bpm_in_data)===null||a===void 0?void 0:a.node_info_list)||[],i=function(s){switch(s){case"success":return{backgroundColor:"#42b983"};case"start":return{backgroundColor:"#2d8cf0"};case"failed":return{backgroundColor:"red",animation:"flash 1s infinite"};default:return{backgroundColor:"#ccc"}}};return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",paddingLeft:10,marginBottom:15},children:t.length>1&&t.map(function(r){return(0,e.jsx)(ee.Z,{title:r.alias,placement:"bottom",children:(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:25,height:25,borderRadius:"50%",cursor:"pointer",marginRight:5,backgroundColor:fa(r)?"#e3e3e3":"transparent",border:fa(r)?"1px solid #e8eaec":"none"},onClick:function(){return ma(r)},children:(0,e.jsx)("div",{style:k()({width:15,height:15,borderRadius:"50%"},i(r.status))})})},r.inner_ip)})}),re&&(0,e.jsxs)(In.Z,{children:[(0,e.jsx)(In.Z.Sider,{width:300,style:{background:"transparent"},children:(0,e.jsx)(Ze.Z,{title:(0,e.jsx)(ee.Z,{title:re.agent_id,children:(0,e.jsx)(E.Z.Text,{ellipsis:!0,style:{maxWidth:200},children:re.alias})}),extra:re.status==="failed"&&!b&&(0,e.jsx)(ee.Z,{title:"\u91CD\u8BD5",children:(0,e.jsx)(g.ZP,{type:"text",icon:(0,e.jsx)(je.Z,{}),size:"small",onClick:function(){return ae({agent_id:re.agent_id,name:re.name})}})}),size:"small",style:{marginBottom:0,height:"100%"},bodyStyle:{padding:"4px 0"},children:Ce.length>0?(0,e.jsx)(kr.Z,{selectedKeys:Yr?[Yr]:[],mode:"vertical",style:{width:298,border:"none"},onSelect:function(s){var u=s.key;return Ut(u)},children:Ce.map(function(r,s){return(0,e.jsx)(kr.Z.Item,{icon:Gt(r.step_status),children:r.step_name},s.toString())})}):(0,e.jsx)("div",{style:{padding:"20px 0",textAlign:"center"},children:(0,e.jsx)(Ma.Z,{tip:"\u52A0\u8F7D\u6B65\u9AA4\u4E2D..."})})})}),(0,e.jsx)(In.Z.Content,{style:{padding:"0 0 0 20px",minHeight:300},children:(0,e.jsx)(Te.ML,{height:500,value:kt,language:"shell",theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",scrollbar:{alwaysConsumeMouseWheel:!1}}})})]})]})},el=function(){if(!tn.eventdatetime){S.error("\u8BF7\u9009\u62E9\u5B9A\u65F6\u5668\u65F6\u95F4");return}V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u8981\u4FEE\u6539\u5B9A\u65F6\u5668\u7684\u65F6\u95F4\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"primary",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:Kn(!0);try{r=k()(k()({},X),{},{timer_data:{eventdatetime:tn.eventdatetime?new Date(tn.eventdatetime).toISOString():null}}),Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}finally{Kn(!1)}case 2:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},nl=function(){V.Z.confirm({title:"\u63D0\u9192",content:"\u786E\u5B9A\u8981\u8DF3\u8FC7\u5F53\u524D\u5B9A\u65F6\u5668\u8282\u70B9\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:try{r=k()(k()({},X),{},{do_type:"ignore"}),Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 1:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},rl=function(){V.Z.confirm({title:"\u63D0\u9192",content:"\u4F60\u786E\u5B9A\u8BBE\u7F6E\u5FFD\u7565\u8FDE\u7EBF\u9519\u8BEF\u5417\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",okText:"\u786E\u8BA4",okType:"danger",cancelText:"\u53D6\u6D88",zIndex:1100,onOk:function(){var a=w()(c()().mark(function i(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:try{r=k()(k()({},X),{},{node_type:"bpmn:SequenceFlow"}),Q(r)}catch(j){S.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5")}case 1:case"end":return u.stop()}},i)}));function t(){return a.apply(this,arguments)}return t}()})},al=function(){return l.eleType!=="bpmn:StartEvent"||!n?null:(0,e.jsx)("div",{style:{marginTop:10,marginBottom:40},children:(0,e.jsx)(E.Z.Title,{level:5,style:{paddingLeft:10},children:"\u5F00\u59CB\u8282\u70B9"})})},tl=function(){var a;if(l.eleType!=="bpmn:SequenceFlow"||!n)return null;var t=(n==null||(a=n.run_bpm_data)===null||a===void 0?void 0:a.condition)||"\u65E0";return(0,e.jsxs)("div",{style:{marginTop:10,marginBottom:40},children:[(0,e.jsx)(E.Z.Title,{level:5,style:{paddingLeft:10},children:"\u8FDE\u7EBF\u6761\u4EF6\uFF1A"}),(0,e.jsx)("div",{style:{margin:"10px 0",paddingLeft:20,paddingRight:20},children:(0,e.jsx)(E.Z.Text,{children:t})}),(n==null?void 0:n.run_bpm_state)==="24"&&(0,e.jsx)("div",{style:{marginTop:40,paddingLeft:20,paddingRight:20},children:(0,e.jsx)(g.ZP,{type:"primary",danger:!0,block:!0,onClick:rl,children:"\u5FFD\u7565\u8FDE\u7EBF\u9519\u8BEF"})})]})},ll=function(){yn(!0)},il=function(){var a;if(l.eleType==="bpmn:UserTask"||l.eleType==="bpmn:ManualTask"||l.eleType==="bpmn:SubProcess"||l.eleType==="bpmn:IntermediateCatchEvent"||l.eleType==="cloudNativeServiceTask"||l.eleType==="bpmn:SequenceFlow"||l.eleType==="bpmn:StartEvent")return null;var t=Kt(),i=(n==null||(a=n.run_bpm_in_data)===null||a===void 0?void 0:a.node_info_list)||[],r=i.map(function(s){return k()(k()({},s),{},{id:(0,Ra.Z)()})}).filter(function(s){if(!Yn)return!0;var u=Yn.toLowerCase();return s.name&&s.name.toLowerCase().includes(u)||s.inner_ip&&s.inner_ip.toLowerCase().includes(u)});return(0,e.jsx)(Ia.Z,{actionRef:M,virtual:!0,rowKey:"id",size:"small",search:!1,options:!1,dataSource:r,scroll:{y:200},className:"hide-horizontal-scrollbar",columns:t,pagination:!1,cardProps:{bodyStyle:{padding:0}},rowClassName:function(u){return u.agent_id===xn?"ant-table-row-selected":""},onRow:function(u){return{onClick:function(){var A;en(u.agent_id),ze((A=u.agent_id)!==null&&A!==void 0?A:"")}}}})},sl=(0,p.useMemo)(function(){return il()},[l.eleType,n==null||(Z=n.run_bpm_in_data)===null||Z===void 0?void 0:Z.node_info_list,xn,Yn]);return(0,e.jsxs)(e.Fragment,{children:[Se,(0,e.jsx)(La.Z,{title:(0,e.jsxs)(Ge.Z,{children:[l.title,l.run_state!==void 0&&(0,e.jsx)($.Z,{color:(m=_r(Number(l.run_state)))===null||m===void 0?void 0:m.color,children:(z=_r(Number(l.run_state)))===null||z===void 0?void 0:z.label})]}),open:l.show,onClose:oa,width:"75%",destroyOnClose:!0,maskClosable:!0,bodyStyle:{padding:0,overflow:"hidden",height:"calc(100% - 55px)"},extra:(0,e.jsxs)(Ge.Z,{children:[(0,e.jsx)(ee.Z,{title:"\u70B9\u51FB\u67E5\u770B\u53D8\u91CF\u4FE1\u606F",children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(fr.Z,{style:{fontSize:14}}),shape:"circle",onClick:ll})}),l.eleType!=="bpmn:ManualTask"&&l.eleType!=="bpmn:UserTask"&&l.eleType!=="bpmn:ServiceTask"&&l.eleType!=="bpmn:SubProcess"&&l.eleType!=="cloudNativeServiceTask"&&l.eleType!=="bpmn:IntermediateCatchEvent"&&l.eleType!=="syncFiles"&&l.eleType!=="bpmn:SequenceFlow"&&l.eleType!=="bpmn:StartEvent"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{title:"\u70B9\u51FB\u67E5\u770B\u811A\u672C\u8BE6\u60C5",children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Zn,{type:"icon-code"}),shape:"circle",onClick:Mt})}),(0,e.jsx)(ee.Z,{title:"\u811A\u672C\u94FE\u63A5",children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Zn,{type:"icon-copyLink"}),shape:"circle",onClick:va})})]}),l.eleType==="cloudNativeServiceTask"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{title:"\u67E5\u770B\u4E91\u539F\u751F\u58F0\u660E\u4FE1\u606F",children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Zn,{type:"icon-code"}),shape:"circle",onClick:Lt})}),(0,e.jsx)(ee.Z,{title:"\u4E91\u539F\u751F\u4EFB\u52A1\u94FE\u63A5",children:(0,e.jsx)(g.ZP,{icon:(0,e.jsx)(Zn,{type:"icon-copyLink"}),shape:"circle",onClick:va})})]})]}),children:(0,e.jsx)("div",{style:{height:"100%",overflow:"auto",padding:"16px"},children:(0,e.jsxs)(x.Z,{vertical:!0,justify:"flex-start",style:{minHeight:"100%"},children:[(0,e.jsxs)("div",{children:[l.eleType!=="bpmn:UserTask"&&l.eleType!=="bpmn:ManualTask"&&l.eleType!=="bpmn:SubProcess"&&l.eleType!=="bpmn:IntermediateCatchEvent"&&l.eleType!=="cloudNativeServiceTask"&&qn(),l.eleType==="cloudNativeServiceTask"&&qn(),l.eleType==="bpmn:IntermediateCatchEvent"&&qn(),l.eleType==="bpmn:UserTask"&&Xt(),l.eleType==="bpmn:ManualTask"&&Yt(),l.eleType==="bpmn:SubProcess"&&n&&Qt(),l.eleType==="cloudNativeServiceTask"&&qt(),l.eleType==="bpmn:StartEvent"&&al(),l.eleType==="bpmn:SequenceFlow"&&tl(),sl]}),l.eleType!=="bpmn:ManualTask"&&l.eleType!=="bpmn:UserTask"&&l.eleType!=="bpmn:SubProcess"&&l.eleType!=="bpmn:IntermediateCatchEvent"&&l.eleType!=="cloudNativeServiceTask"&&l.eleType!=="bpmn:SequenceFlow"&&l.eleType!=="bpmn:StartEvent"&&(0,e.jsxs)("div",{style:{background:"#fff",marginTop:l.eleType==="bpmn:ServiceTask"?-24:16},children:[(0,e.jsx)("div",{style:{marginBottom:12,marginTop:12},children:(0,e.jsx)(E.Z.Text,{style:{fontSize:16,fontWeight:500},children:"\u6267\u884C\u65E5\u5FD7"})}),(0,e.jsx)("div",{children:(0,e.jsx)(Te.ML,{height:un,value:de,language:"shell",theme:"vs-dark",options:{readOnly:!0,scrollbar:{alwaysConsumeMouseWheel:!1},minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1}}})})]})]})})}),(0,e.jsx)(V.Z,{title:Oe.title,open:cn,onCancel:function(){return pn(!1)},width:"68%",footer:null,destroyOnClose:!0,style:{top:35},zIndex:1100,children:(0,e.jsx)(Te.ML,{height:400,value:typeof Oe.info=="string"?Oe.info:"",language:Oe.lang,theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1}}})}),(0,e.jsx)(V.Z,{title:qe.title,open:gn,onCancel:function(){return Qe(!1)},width:"68%",footer:null,destroyOnClose:!0,style:{top:35},zIndex:1100,children:(0,e.jsx)(Te.ML,{height:650,value:qe.info,language:qe.lang,theme:"vs-dark",options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1}}})}),(0,e.jsx)(xr.Y,{title:"\u6307\u6D3E\u5904\u7406\u4EBA",open:Or,width:800,onOpenChange:Sn,onFinish:Wt,layout:"horizontal",modalProps:{zIndex:1100},submitter:{searchConfig:{submitText:"\u786E\u5B9A\u5206\u6D3E"},submitButtonProps:{loading:$r}},children:(0,e.jsx)(jr.Z,{name:"handlers",label:"\u5904\u7406\u4EBA",placeholder:"\u8BF7\u9009\u62E9\u5904\u7406\u4EBA",mode:"multiple",debounceTime:300,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5904\u7406\u4EBA"}],request:w()(c()().mark(function d(){var a,t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,br.lE)({page:1,limit:301});case 2:return t=r.sent,r.abrupt("return",(t==null||(a=t.data)===null||a===void 0?void 0:a.map(function(s){return{label:"".concat(s.username,"(").concat(s.nickname,")"),value:"".concat(s.username,"(").concat(s.nickname,")")}}))||[]);case 4:case"end":return r.stop()}},d)}))})}),(0,e.jsx)(xr.Y,{title:"\u8F6C\u5355\u7ED9\u5176\u4ED6\u4EBA",open:Jn,onOpenChange:rn,layout:"horizontal",width:800,onFinish:Jt,modalProps:{zIndex:1100},submitter:{searchConfig:{submitText:"\u786E\u5B9A\u8F6C\u5355"},submitButtonProps:{loading:Wr}},children:(0,e.jsx)(jr.Z,{name:"handler",label:"\u5904\u7406\u4EBA",placeholder:"\u8BF7\u9009\u62E9\u5904\u7406\u4EBA",debounceTime:300,showSearch:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5904\u7406\u4EBA"}],request:w()(c()().mark(function d(){var a,t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,br.lE)({page:1,limit:301});case 2:return t=r.sent,r.abrupt("return",(t==null||(a=t.data)===null||a===void 0?void 0:a.map(function(s){return{label:"".concat(s.username,"(").concat(s.nickname,")"),value:"".concat(s.username,"(").concat(s.nickname,")")}}))||[]);case 4:case"end":return r.stop()}},d)}))})}),(0,e.jsx)(Zr,{open:Ye,onCancel:function(){return yn(!1)},globalParams:he,globalVariables:K,zIndex:1100})]})},at=`
@keyframes flash {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 0.2;
  }
  100% {
    opacity: 1;
  }
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.running-icon {
  animation: spin 2s linear infinite;
}

.hide-horizontal-scrollbar .ant-table-tbody-virtual-scrollbar.ant-table-tbody-virtual-scrollbar-horizontal {
  display: none;
}
`;if(typeof document!="undefined"){var Dr=document.createElement("style");Dr.innerHTML=at,document.head.appendChild(Dr)}var tt=rt,lt=(0,wa.kc)(function(D){var h=D.token;return{backLink:{color:h.colorPrimary},text:{color:h.colorText,fontSize:"15px",fontWeight:"normal"},bold:{fontWeight:"bold"},timelineTitle:{fontSize:"15px",fontWeight:"bold"},timelineTime:{fontSize:"12px",color:h.colorTextSecondary},timelineContent:{fontSize:"13px"},workflowContainer:{flex:"3",marginRight:"16px"},timelineContainer:{flex:"1.1"},cardFooter:{fontSize:"14px",fontWeight:"bold",backgroundColor:h.colorBgContainer,color:h.colorTextTertiary},customCard:{".ant-card-bordered":{borderTop:"none",borderRight:"none",borderBottom:"none",borderRadius:0},".ant-card-head":{borderRadius:0}}}}),it=function(){var h,Z=lt(),m=Z.styles,z=En.ZP.useMessage(),l=y()(z,2),N=l[1],O=(0,ve.useParams)(),F=O.order_id,fe=(0,ve.useLocation)(),b=(0,p.useState)(!1),he=y()(b,2),K=he[0],Y=he[1],te=(0,p.useState)(!1),S=y()(te,2),Se=S[0],Le=S[1],Ve=(0,p.useState)({show:!1,title:"",eleType:"",sub_flow_xml:"",sub_flow_id:"",run_state:""}),ne=y()(Ve,2),ke=ne[0],le=ne[1],U=(0,p.useState)(null),de=y()(U,2),W=de[0],M=de[1],Ee=(0,p.useState)(null),ye=y()(Ee,2),Br=ye[0],sn=ye[1],on=(0,p.useState)(void 0),un=y()(on,2),Er=un[0],Ln=un[1],dn=(0,p.useState)(!1),cn=y()(dn,2),pn=cn[0],vn=cn[1],mn=(0,p.useState)({}),Oe=y()(mn,2),fn=Oe[0],Vn=Oe[1],hn=(0,p.useMemo)(function(){return{formSchema:fn,setFormSchema:Vn}},[fn]),Ye=(0,p.useRef)(null),yn=fe.pathname,$n=yn.split("/"),Xe=$n[2],gn=Xe==="historyOrderList",Qe=(0,ve.useRequest)(za,{manual:!0,onSuccess:function(T){T!=null&&T.xml&&!pn&&Ln(T.xml)}}),H=Qe.data,$e=Qe.run,qe=(0,yr.Z)(function(){W&&!gn&&$e({flow_run_id:W})},5e3);(0,p.useEffect)(function(){return function(){qe()}},[]);var Rn=(0,ve.useRequest)(function(){return F&&Cr({order_id:F})},{onSuccess:function(T){T&&(M(String(T.id)),$e({flow_run_id:String(T.id)}))}}),v=Rn.data,bn=(0,p.useRef)({}),xn=(0,p.useRef)(null),en=function(){var C=w()(c()().mark(function T(B){var G,I,P,R,ge,ie;return c()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(console.log("Element clicked in parent:",B),sn(B.id),I=B.name?B.name:"ID\uFF1A".concat(B.id),P="",R="",B.$type!=="bpmn:SubProcess"){J.next=19;break}if(vn(!0),R=(ge=B.$attrs)===null||ge===void 0?void 0:ge.sub_flow_id,!(R&&W)){J.next=19;break}return J.prev=9,J.next=12,$e({flow_run_id:R});case 12:ie=J.sent,ie!=null&&ie.xml&&(P=ie.xml),J.next=19;break;case 16:J.prev=16,J.t0=J.catch(9),console.error("\u83B7\u53D6\u5B50\u6D41\u7A0BXML\u5931\u8D25:",J.t0);case 19:le({show:!0,title:"".concat(Ka(B),"---").concat(I),eleType:wr(B),sub_flow_xml:P,sub_flow_id:R,run_state:((G=B.$attrs)===null||G===void 0?void 0:G.run_state)||""});case 20:case"end":return J.stop()}},T,null,[[9,16]])}));return function(B){return C.apply(this,arguments)}}(),zn=function(){le(k()(k()({},ke),{},{show:!1})),sn(null),vn(!1)},jn=function(){ve.history.push("/orderCenter/".concat(Xe),{fromDetail:!0})},Re=function(){Y(!0)},ze=function(){Y(!1)},Wn=function(){Le(!0)};(0,p.useEffect)(function(){if(Se&&v){var C;console.log("argsFormRef.current",Ye.current),(C=Ye.current)===null||C===void 0||C.setValues(JSON.parse((v==null?void 0:v.global_params)||"{}"))}},[Se,v]);var nn=function(){Le(!1)},Or=function(){try{if(v!=null&&v.global_params){var T=JSON.parse(v.global_params);return Object.entries(T).map(function(B){var G=y()(B,2),I=G[0],P=G[1];return{key:I,paramName:I,paramValue:ue()(P)==="object"?JSON.stringify(P):String(P)}})}return[]}catch(B){return console.error("\u89E3\u6790\u5168\u5C40\u53C2\u6570\u5931\u8D25:",B),[]}},Sn=function(){try{if(H!=null&&H.var){var T=JSON.parse(H.var);return Object.entries(T).map(function(B){var G=y()(B,2),I=G[0],P=G[1];return{key:I,paramName:I,paramValue:ue()(P)==="object"?JSON.stringify(P):String(P)}})}return[]}catch(B){return console.error("\u89E3\u6790\u5168\u5C40\u53D8\u91CF\u5931\u8D25:",B),[]}},Ir=[{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"paramName",key:"paramName",width:"40%"},{title:"\u53C2\u6570\u503C",dataIndex:"paramValue",key:"paramValue",width:"60%"}],Hn=[{title:"\u53D8\u91CF\u540D\u79F0",dataIndex:"paramName",key:"paramName",width:"40%"},{title:"\u53D8\u91CF\u503C",dataIndex:"paramValue",key:"paramValue",width:"60%"}],Jn=(0,e.jsxs)(Ge.Z,{size:16,children:[(0,e.jsxs)(x.Z,{align:"center",gap:16,children:[(0,e.jsx)(E.Z.Link,{onClick:jn,className:m.backLink,children:(0,e.jsxs)(x.Z,{align:"center",gap:4,children:[(0,e.jsx)(xa.Z,{}),"\u8FD4\u56DE"]})}),(0,e.jsxs)(E.Z.Text,{className:m.text,style:{maxWidth:(0,ba.ZP)({small:380,wide:800}).width},ellipsis:{tooltip:!0},children:["ID: ",(0,e.jsx)("span",{children:v==null?void 0:v.id}),"\xA0\xA0\xA0\u53D1\u8D77\u4EBA:"," ",(0,e.jsx)("span",{children:v==null?void 0:v.creator}),"\xA0\xA0\xA0\u6807\u9898: ",(0,e.jsx)("span",{children:v==null?void 0:v.order_name})]})]}),(0,e.jsxs)(x.Z,{align:"center",gap:1,children:[(0,e.jsx)(ee.Z,{title:"\u67E5\u770B\u8868\u5355\u4FE1\u606F",children:(0,e.jsx)(g.ZP,{onClick:Wn,icon:(0,e.jsx)(ja.Z,{}),type:"text"})}),(0,e.jsx)(ee.Z,{title:"\u67E5\u770B\u53D8\u91CF\u4FE1\u606F",children:(0,e.jsx)(g.ZP,{onClick:Re,icon:(0,e.jsx)(fr.Z,{}),type:"text"})})]})]}),rn=(0,e.jsxs)(Ge.Z,{size:16,children:[(0,e.jsxs)(E.Z.Text,{className:m.text,children:[(0,e.jsx)("span",{className:m.bold,children:"\u63D0\u4EA4\u65F6\u95F4:"})," ",(0,e.jsx)("span",{children:v==null?void 0:v.flow_begin_time})]}),(0,e.jsxs)(E.Z.Text,{className:m.text,children:[(0,e.jsx)("span",{className:m.bold,children:"\u5F00\u59CB\u65F6\u95F4:"})," ",(0,e.jsx)("span",{children:v==null?void 0:v.create_time})]})]});return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ga.Z,{title:!1,extra:(0,e.jsx)(Te.er,{disabled:!0}),childrenContentStyle:{paddingBottom:0},children:[N,v&&(0,e.jsx)(Ze.Z,{title:Jn,extra:rn,className:m.customCard,style:{height:"100%",minWidth:"1000px"},styles:{body:{padding:1}},children:(0,e.jsxs)(x.Z,{children:[(0,e.jsx)("div",{className:m.workflowContainer,children:(0,e.jsx)(Fr,{flow_xml:Er||(v==null?void 0:v.flow_xml),flow_xml_version:v==null?void 0:v.flow_xml_version,updateFlowData:function(){},bpmnViewerRef:xn,flowFormDataRef:bn,onElementClick:en})}),(0,e.jsx)("div",{className:m.timelineContainer,children:(0,e.jsx)(Ze.Z,{title:(0,e.jsxs)(x.Z,{align:"center",gap:8,justify:"space-between",children:[(0,e.jsxs)(Ge.Z,{children:[(0,e.jsx)(Sa.Z,{style:{color:"#1890ff"}}),(0,e.jsx)(E.Z.Text,{className:m.timelineTitle,children:"\u6D41\u8F6C\u65E5\u5FD7"})]}),(v==null?void 0:v.flow_end_time)&&(v==null?void 0:v.flow_begin_time)&&(0,e.jsxs)("div",{className:m.cardFooter,children:["\u603B\u8017\u65F6\uFF1A",function(){var C=new Date(v.flow_begin_time).getTime(),T=new Date(v.flow_end_time).getTime(),B=(T-C)/1e3;return"".concat(Math.floor(B),"\u79D2")}()]})]}),style:{height:"100%"},styles:{body:{height:"calc(100% - 56px)",padding:0}},children:(0,e.jsx)(x.Z,{vertical:!0,justify:"space-between",style:{height:"100%"},children:(0,e.jsx)("div",{style:{margin:"20px 10px 20px 20px",height:"calc(100cqh - 304px)",overflowY:"auto",paddingTop:10},children:(0,e.jsx)(Ke.Z,{children:H==null||(h=H.log)===null||h===void 0?void 0:h.map(function(C,T,B){return C.log_level==="ERROR"?(0,e.jsxs)(Ke.Z.Item,{color:"red",children:[(0,e.jsx)("div",{className:m.timelineTime,children:C.log_timestamp}),(0,e.jsx)("div",{className:m.timelineContent,children:C.log_data})]},"".concat(C.log_timestamp,"-").concat(T)):C.log_level==="HAND"?(0,e.jsxs)(Ke.Z.Item,{color:"#ff9900",children:[(0,e.jsx)("div",{className:m.timelineTime,children:C.log_timestamp}),(0,e.jsx)("div",{className:m.timelineContent,children:C.log_data})]},"".concat(C.log_timestamp,"-").concat(T)):T===B.length-1?(0,e.jsxs)(Ke.Z.Item,{color:"green",dot:(0,e.jsx)(ka.Z,{style:{fontSize:"12px"}}),children:[(0,e.jsx)("div",{className:m.timelineTime,children:C.log_timestamp}),(0,e.jsx)("div",{className:m.timelineContent,children:C.log_data})]},"".concat(C.log_timestamp,"-").concat(T)):(0,e.jsxs)(Ke.Z.Item,{children:[(0,e.jsx)("div",{className:m.timelineTime,children:C.log_timestamp}),(0,e.jsx)("div",{className:m.timelineContent,children:C.log_data})]},"".concat(C.log_timestamp,"-").concat(T))})})})})})})]})}),(0,e.jsx)(Zr,{open:K,onCancel:ze,globalParams:v==null?void 0:v.global_params,globalVariables:H==null?void 0:H.var}),(0,e.jsxs)(V.Z,{title:"\u8868\u5355\u4FE1\u606F",open:Se,onCancel:nn,width:1200,footer:null,destroyOnClose:!0,children:[(0,e.jsx)(vr.Bl.Provider,{value:hn,children:(0,e.jsx)(pr.Z,{children:v&&v.form_info?(0,e.jsx)(mr.Z,{ref:Ye,open:Se,formInfo:v.form_info,initialValues:Ya(v.global_params),onFinish:nn,formDisabled:!0}):(0,e.jsx)(gr.Z,{description:"\u672C\u6D41\u7A0B\u65E0\u8868\u5355"})})}),(v==null?void 0:v.flow_data)&&function(){try{var C=JSON.parse(v.flow_data),T=Object.entries(C).filter(function(I){var P=y()(I,2),R=P[1];return R.type==="\u5B9A\u65F6\u5668\u4E8B\u4EF6"}).map(function(I){var P=y()(I,2),R=P[0],ge=P[1];return k()({key:R},ge)}),B=v.global_params?JSON.parse(v.global_params):{},G={};return Object.entries(B).forEach(function(I){var P=y()(I,2),R=P[0],ge=P[1];if(R.startsWith("force_params_str:Event_")&&R.endsWith(":eventdatetime")){var ie=R.match(/Event_([^:]+)/);ie&&ie[1]&&(G[ie[1]]=ge)}}),T.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_a.Z,{orientation:"left",style:{marginTop:"-6px"},children:"\u5B9A\u65F6\u5668\u4E8B\u4EF6"}),(0,e.jsx)("div",{children:(0,e.jsx)(Ca.A,{submitter:!1,layout:"horizontal",labelCol:{flex:"147px"},disabled:!0,children:T.map(function(I){var P=I.key.replace("Event_",""),R=G[P]||I.eventdatetime;return(0,e.jsx)(hr.Z,{name:"timer_".concat(I.key),label:"".concat(I.name||"\u5B9A\u65F6\u5668\u4E8B\u4EF6"),fieldProps:{format:"YYYY-MM-DD HH:mm:ss",disabled:!0},initialValue:R?me()(R):void 0},I.key)})})})]}):null}catch(I){return console.error("\u89E3\u6790flow_data\u5931\u8D25:",I),null}}()]}),(0,e.jsx)(tt,{drawerData:ke,flowData:v,flow_run_id:W,flow_bpm_id:Br,onClose:zn,isHistoryOrder:gn,globalParams:v==null?void 0:v.global_params,globalVariables:H==null?void 0:H.var})]})})},st=it}}]);
