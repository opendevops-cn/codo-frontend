(self.webpackChunkf2=self.webpackChunkf2||[]).push([[898],{59707:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return an}});var S=z(67217),N=z(24220),V=z(80836),re=/^class /;function oe(u){return re.test(u.toString())}function F(u){return Object.prototype.toString.call(u)==="[object Array]"}function p(u,h){return Object.prototype.hasOwnProperty.call(u,h)}function R(){var u=Array.prototype.slice.call(arguments);u.length===1&&F(u[0])&&(u=u[0]);var h=u.pop();return h.$inject=u,h}var P=/constructor\s*[^(]*\(\s*([^)]*)\)/m,fe=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,Z=/\/\*([^*]*)\*\//m;function ee(u){if(typeof u!="function")throw new Error('Cannot annotate "'+u+'". Expected a function!');var h=u.toString().match(oe(u)?P:fe);return h?h[1]&&h[1].split(",").map(function(v){return h=v.match(Z),h?h[1].trim():v.trim()})||[]:[]}function X(){var u=[];this.factory=function(h,v){return u.push([h,"factory",v]),this},this.value=function(h,v){return u.push([h,"value",v]),this},this.type=function(h,v){return u.push([h,"type",v]),this},this.forEach=function(h){u.forEach(h)}}function L(u,h){h=h||{get:function(Ke,gt){if(v.push(Ke),gt===!1)return null;throw q('No provider for "'+Ke+'"!')}};var v=[],E=this._providers=Object.create(h._providers||null),C=this._instances=Object.create(null),H=C.injector=this,q=function(Ke){var gt=v.join(" -> ");return v.length=0,new Error(gt?Ke+" (Resolving: "+gt+")":Ke)},me=function(Ke,gt){if(!E[Ke]&&Ke.indexOf(".")!==-1){for(var Yt=Ke.split("."),Pt=me(Yt.shift());Yt.length;)Pt=Pt[Yt.shift()];return Pt}if(p(C,Ke))return C[Ke];if(p(E,Ke)){if(v.indexOf(Ke)!==-1)throw v.push(Ke),q("Cannot resolve circular dependency!");return v.push(Ke),C[Ke]=E[Ke][0](E[Ke][1]),v.pop(),C[Ke]}return h.get(Ke,gt)},je=function(Ke,gt){if(typeof gt=="undefined"&&(gt={}),typeof Ke!="function")if(F(Ke))Ke=R(Ke.slice());else throw new Error('Cannot invoke "'+Ke+'". Expected a function!');var Yt=Ke.$inject||ee(Ke),Pt=Yt.map(function(Ft){return p(gt,Ft)?gt[Ft]:me(Ft)});return{fn:Ke,dependencies:Pt}},Ze=function(Ke){var gt=je(Ke),Yt=gt.fn,Pt=gt.dependencies,Ft=Function.prototype.bind.apply(Yt,[null].concat(Pt));return new Ft},qe=function(Ke,gt,Yt){var Pt=je(Ke,Yt),Ft=Pt.fn,$t=Pt.dependencies;return Ft.apply(gt,$t)},at=function(Ke){return R(function(gt){return Ke.get(gt)})},Vt=function(Ke,gt){if(gt&&gt.length){var Yt=Object.create(null),Pt=Object.create(null),Ft=[],$t=[],Ne=[],Ye,Xe,Nt,kt;for(var Jt in E)Ye=E[Jt],gt.indexOf(Jt)!==-1&&(Ye[2]==="private"?(Xe=Ft.indexOf(Ye[3]),Xe===-1?(Nt=Ye[3].createChild([],gt),kt=at(Nt),Ft.push(Ye[3]),$t.push(Nt),Ne.push(kt),Yt[Jt]=[kt,Jt,"private",Nt]):Yt[Jt]=[Ne[Xe],Jt,"private",$t[Xe]]):Yt[Jt]=[Ye[2],Ye[1]],Pt[Jt]=!0),(Ye[2]==="factory"||Ye[2]==="type")&&Ye[1].$scope&&gt.forEach(function(Qt){Ye[1].$scope.indexOf(Qt)!==-1&&(Yt[Jt]=[Ye[2],Ye[1]],Pt[Qt]=!0)});gt.forEach(function(Qt){if(!Pt[Qt])throw new Error('No provider for "'+Qt+'". Cannot use provider from the parent!')}),Ke.unshift(Yt)}return new L(Ke,H)},Ut={factory:qe,type:Ze,value:function(Ke){return Ke}};u.forEach(function(Ke){function gt($t,Ne){return $t!=="value"&&F(Ne)&&(Ne=R(Ne.slice())),Ne}if(Ke instanceof X)Ke.forEach(function($t){var Ne=$t[0],Ye=$t[1],Xe=$t[2];E[Ne]=[Ut[Ye],gt(Ye,Xe),Ye]});else if(typeof Ke=="object")if(Ke.__exports__){var Yt=Object.keys(Ke).reduce(function($t,Ne){return Ne.substring(0,2)!=="__"&&($t[Ne]=Ke[Ne]),$t},Object.create(null)),Pt=new L((Ke.__modules__||[]).concat([Yt]),H),Ft=R(function($t){return Pt.get($t)});Ke.__exports__.forEach(function($t){E[$t]=[Ft,$t,"private",Pt]})}else Object.keys(Ke).forEach(function($t){if(Ke[$t][2]==="private"){E[$t]=Ke[$t];return}var Ne=Ke[$t][0],Ye=Ke[$t][1];E[$t]=[Ut[Ne],gt(Ne,Ye),Ne]})}),this.get=me,this.invoke=qe,this.instantiate=Ze,this.createChild=Vt}var O=z(2937),A=z.n(O),W=z(84822),K=z(49343),se=z(76971),we=1;function Ge(u,h){W.Z.call(this,u,we),this.CONNECTION_STYLE=h.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=h.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=h.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}A()(Ge,W.Z),Ge.prototype.canRender=function(){return!0},Ge.prototype.drawShape=function(h,v,E){var C=(0,V.Ue)("rect");return(0,V.Lj)(C,{x:0,y:0,width:v.width||0,height:v.height||0}),(0,se.He)(v)?(0,V.Lj)(C,(0,S.f0)({},this.FRAME_STYLE,E||{})):(0,V.Lj)(C,(0,S.f0)({},this.SHAPE_STYLE,E||{})),(0,V.R3)(h,C),C},Ge.prototype.drawConnection=function(h,v,E){var C=(0,K.W5)(v.waypoints,(0,S.f0)({},this.CONNECTION_STYLE,E||{}));return(0,V.R3)(h,C),C},Ge.prototype.getShapePath=function(h){var v=h.x,E=h.y,C=h.width,H=h.height,q=[["M",v,E],["l",C,0],["l",0,H],["l",-C,0],["z"]];return(0,K.KO)(q)},Ge.prototype.getConnectionPath=function(h){var v=h.waypoints,E,C,H=[];for(E=0;C=v[E];E++)C=C.original||C,H.push([E===0?"M":"L",C.x,C.y]);return(0,K.KO)(H)},Ge.$inject=["eventBus","styles"];function ft(){var u={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},h=this;this.cls=function(v,E,C){var H=this.style(E,C);return(0,S.f0)(H,{class:v})},this.style=function(v,E){!(0,S.kJ)(v)&&!E&&(E=v,v=[]);var C=(0,S.u4)(v,function(H,q){return(0,S.f0)(H,u[q]||{})},{});return E?(0,S.f0)(C,E):C},this.computeStyle=function(v,E,C){return(0,S.kJ)(E)||(C=E,E=[]),h.style(E||[],(0,S.f0)({},C,v||{}))}}var rt={__init__:["defaultRenderer"],defaultRenderer:["type",Ge],styles:["type",ft]},yt=z(52837),st=z(88237);function Dt(u,h){return Math.round(u*h)/h}function Wt(u){return(0,S.hj)(u)?u+"px":u}function Xt(u){for(;u.parent;)u=u.parent;return u}function Lt(u){u=(0,S.f0)({},{width:"100%",height:"100%"},u);var h=u.container||document.body,v=document.createElement("div");return v.setAttribute("class","djs-container"),(0,S.f0)(v.style,{position:"relative",overflow:"hidden",width:Wt(u.width),height:Wt(u.height)}),h.appendChild(v),v}function bn(u,h,v){var E=(0,V.Ue)("g");(0,V.Sh)(E).add(h);var C=v!==void 0?v:u.childNodes.length-1;return u.insertBefore(E,u.childNodes[C]||null),E}var Ht="base",Gt="djs-element-hidden",_n=0,Fe=1,Je={shape:["x","y","width","height"],connection:["waypoints"]};function D(u,h,v,E){this._eventBus=h,this._elementRegistry=E,this._graphicsFactory=v,this._init(u||{})}D.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],D.prototype._init=function(u){var h=this._eventBus,v=this._container=Lt(u),E=this._svg=(0,V.Ue)("svg");(0,V.Lj)(E,{width:"100%",height:"100%"}),(0,V.R3)(v,E);var C=this._viewport=bn(E,"viewport");this._layers={},this._planes={},u.deferUpdate!==!1&&(this._viewboxChanged=(0,S.Ds)((0,S.ak)(this._viewboxChanged,this),300)),h.on("diagram.init",function(){h.fire("canvas.init",{svg:E,viewport:C})},this),h.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","plane.set"],function(){delete this._cachedViewbox},this),h.on("diagram.destroy",500,this._destroy,this),h.on("diagram.clear",500,this._clear,this)},D.prototype._destroy=function(u){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var h=this._container.parentNode;h&&h.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},D.prototype._clear=function(){var u=this,h=this._elementRegistry.getAll();h.forEach(function(v){var E=(0,se.oL)(v);E==="root"?u.setRootElementForPlane(null,u.findPlane(v),!0):u._removeElement(v,E)}),this._activePlane=null,this._planes={},delete this._cachedViewbox},D.prototype.getDefaultLayer=function(){return this.getLayer(Ht,_n)},D.prototype.getLayer=function(u,h){if(!u)throw new Error("must specify a name");var v=this._layers[u];if(v||(v=this._layers[u]=this._createLayer(u,h)),typeof h!="undefined"&&v.index!==h)throw new Error("layer <"+u+"> already created at index <"+h+">");return v.group},D.prototype._createLayer=function(u,h){typeof h=="undefined"&&(h=Fe);var v=(0,S.u4)(this._layers,function(E,C){return h>=C.index&&E++,E},0);return{group:bn(this._viewport,"layer-"+u,v),index:h}},D.prototype.getPlane=function(u){if(!u)throw new Error("must specify a name");return this._planes[u]},D.prototype.createPlane=function(u,h){if(!u)throw new Error("must specify a name");if(this._planes[u])throw new Error("plane "+u+" already exists");h||(h={id:"__implicitroot"+u,children:[],isImplicit:!0});var v=this.getLayer(u,_n);(0,V.Sh)(v).add(Gt);var E=this._planes[u]={layer:v,name:u,rootElement:null};return this.setRootElementForPlane(h,E),E},D.prototype.setActivePlane=function(u){if(!u)throw new Error("must specify a plane");return typeof u=="string"&&(u=this.getPlane(u)),this._activePlane&&(0,V.Sh)(this._activePlane.layer).add(Gt),this._activePlane=u,(0,V.Sh)(u.layer).remove(Gt),u.rootElement&&this._elementRegistry.updateGraphics(u.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:u}),u},D.prototype.getActiveLayer=function(){return this.getActivePlane().layer},D.prototype.getActivePlane=function(){var u=this._activePlane;return u||(u=this.createPlane(Ht),this.setActivePlane(Ht)),u},D.prototype.findPlane=function(u){typeof u=="string"&&(u=this._elementRegistry.get(u));var h=Xt(u);return(0,S.sE)(this._planes,function(v){return v.rootElement===h})},D.prototype.getContainer=function(){return this._container},D.prototype._updateMarker=function(u,h,v){var E;u.id||(u=this._elementRegistry.get(u)),E=this._elementRegistry._elements[u.id],E&&((0,S.Ed)([E.gfx,E.secondaryGfx],function(C){C&&(v?(0,V.Sh)(C).add(h):(0,V.Sh)(C).remove(h))}),this._eventBus.fire("element.marker.update",{element:u,gfx:E.gfx,marker:h,add:!!v}))},D.prototype.addMarker=function(u,h){this._updateMarker(u,h,!0)},D.prototype.removeMarker=function(u,h){this._updateMarker(u,h,!1)},D.prototype.hasMarker=function(u,h){u.id||(u=this._elementRegistry.get(u));var v=this.getGraphics(u);return(0,V.Sh)(v).has(h)},D.prototype.toggleMarker=function(u,h){this.hasMarker(u,h)?this.removeMarker(u,h):this.addMarker(u,h)},D.prototype.getRootElement=function(){var u=this.getActivePlane();return u.rootElement},D.prototype.setRootElement=function(u,h){var v=this._activePlane;if(v)return this.setRootElementForPlane(u,v,h);var E=this.createPlane(Ht,u);return this.setActivePlane(E),E.rootElement},D.prototype.setRootElementForPlane=function(u,h,v){typeof h=="string"&&(h=this.getPlane(h)),u&&this._ensureValid("root",u);var E=h.rootElement,C=this._elementRegistry,H=this._eventBus;if(E){if(!v)throw new Error("rootElement already set, need to specify override");H.fire("root.remove",{element:E}),H.fire("root.removed",{element:E}),C.remove(E)}if(u){var q=h.layer;H.fire("root.add",{element:u}),C.add(u,q),H.fire("root.added",{element:u,gfx:q}),h===this._activePlane&&this._elementRegistry.updateGraphics(u,this._svg,!0)}return h.rootElement=u,u},D.prototype._ensureValid=function(u,h){if(!h.id)throw new Error("element must have an id");if(this._elementRegistry.get(h.id))throw new Error("element with id "+h.id+" already exists");var v=Je[u],E=(0,S.yW)(v,function(C){return typeof h[C]!="undefined"});if(!E)throw new Error("must supply { "+v.join(", ")+" } with "+u)},D.prototype._setParent=function(u,h,v){(0,yt.IH)(h.children,u,v),u.parent=h},D.prototype._addElement=function(u,h,v,E){v=v||this.getRootElement();var C=this._eventBus,H=this._graphicsFactory;this._ensureValid(u,h),C.fire(u+".add",{element:h,parent:v}),this._setParent(h,v,E);var q=H.create(u,h,E);return this._elementRegistry.add(h,q),H.update(u,h,q),C.fire(u+".added",{element:h,gfx:q}),h},D.prototype.addShape=function(u,h,v){return this._addElement("shape",u,h,v)},D.prototype.addConnection=function(u,h,v){return this._addElement("connection",u,h,v)},D.prototype._removeElement=function(u,h){var v=this._elementRegistry,E=this._graphicsFactory,C=this._eventBus;if(u=v.get(u.id||u),!!u)return C.fire(h+".remove",{element:u}),E.remove(u),(0,yt.Od)(u.parent&&u.parent.children,u),u.parent=null,C.fire(h+".removed",{element:u}),v.remove(u),u},D.prototype.removeShape=function(u){return this._removeElement(u,"shape")},D.prototype.removeConnection=function(u){return this._removeElement(u,"connection")},D.prototype.getGraphics=function(u,h){return this._elementRegistry.getGraphics(u,h)},D.prototype._changeViewbox=function(u){this._eventBus.fire("canvas.viewbox.changing"),u.apply(this),this._cachedViewbox=null,this._viewboxChanged()},D.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},D.prototype.viewbox=function(u){if(u===void 0&&this._cachedViewbox)return this._cachedViewbox;var h=this._viewport,v,E=this.getSize(),C,H,q,me,je;if(u)this._changeViewbox(function(){q=Math.min(E.width/u.width,E.height/u.height);var Ze=this._svg.createSVGMatrix().scale(q).translate(-u.x,-u.y);(0,V.vs)(h,Ze)});else return v=this._activePlane&&this._activePlane.layer.getBBox()||{},H=(0,V.vs)(h),C=H?H.matrix:(0,V.wz)(),q=Dt(C.a,1e3),me=Dt(-C.e||0,1e3),je=Dt(-C.f||0,1e3),u=this._cachedViewbox={x:me?me/q:0,y:je?je/q:0,width:E.width/q,height:E.height/q,scale:q,inner:{width:v.width||0,height:v.height||0,x:v.x||0,y:v.y||0},outer:E},u;return u},D.prototype.scroll=function(u){var h=this._viewport,v=h.getCTM();return u&&this._changeViewbox(function(){u=(0,S.f0)({dx:0,dy:0},u||{}),v=this._svg.createSVGMatrix().translate(u.dx,u.dy).multiply(v),ve(h,v)}),{x:v.e,y:v.f}},D.prototype.scrollToElement=function(u,h){var v=100;typeof u=="string"&&(u=this._elementRegistry.get(u));var E=this.findPlane(u);E!==this._activePlane&&this.setActivePlane(E),h||(h={}),typeof h=="number"&&(v=h),h={top:h.top||v,right:h.right||v,bottom:h.bottom||v,left:h.left||v};var C=(0,se.jY)(u),H=(0,st.JA)(C),q=this.viewbox(),me=this.zoom(),je,Ze;q.y+=h.top/me,q.x+=h.left/me,q.width-=(h.right+h.left)/me,q.height-=(h.bottom+h.top)/me;var qe=(0,st.JA)(q),at=C.width<q.width&&C.height<q.height;if(!at)je=C.x-q.x,Ze=C.y-q.y;else{var Vt=Math.max(0,H.right-qe.right),Ut=Math.min(0,H.left-qe.left),Ke=Math.max(0,H.bottom-qe.bottom),gt=Math.min(0,H.top-qe.top);je=Vt||Ut,Ze=Ke||gt}this.scroll({dx:-je*me,dy:-Ze*me})},D.prototype.zoom=function(u,h){if(!u)return this.viewbox(u).scale;if(u==="fit-viewport")return this._fitViewport(h);var v,E;return this._changeViewbox(function(){typeof h!="object"&&(v=this.viewbox().outer,h={x:v.width/2,y:v.height/2}),E=this._setZoom(u,h)}),Dt(E.a,1e3)};function ve(u,h){var v="matrix("+h.a+","+h.b+","+h.c+","+h.d+","+h.e+","+h.f+")";u.setAttribute("transform",v)}D.prototype._fitViewport=function(u){var h=this.viewbox(),v=h.outer,E=h.inner,C,H;return E.x>=0&&E.y>=0&&E.x+E.width<=v.width&&E.y+E.height<=v.height&&!u?H={x:0,y:0,width:Math.max(E.width+E.x,v.width),height:Math.max(E.height+E.y,v.height)}:(C=Math.min(1,v.width/E.width,v.height/E.height),H={x:E.x+(u?E.width/2-v.width/C/2:0),y:E.y+(u?E.height/2-v.height/C/2:0),width:v.width/C,height:v.height/C}),this.viewbox(H),this.viewbox(!1).scale},D.prototype._setZoom=function(u,h){var v=this._svg,E=this._viewport,C=v.createSVGMatrix(),H=v.createSVGPoint(),q,me,je,Ze,qe;je=E.getCTM();var at=je.a;return h?(q=(0,S.f0)(H,h),me=q.matrixTransform(je.inverse()),Ze=C.translate(me.x,me.y).scale(1/at*u).translate(-me.x,-me.y),qe=je.multiply(Ze)):qe=C.scale(u),ve(this._viewport,qe),qe},D.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},D.prototype.getAbsoluteBBox=function(u){var h=this.viewbox(),v;if(u.waypoints){var E=this.getGraphics(u);v=E.getBBox()}else v=u;var C=v.x*h.scale-h.x*h.scale,H=v.y*h.scale-h.y*h.scale,q=v.width*h.scale,me=v.height*h.scale;return{x:C,y:H,width:q,height:me}},D.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Ee="data-element-id";function _e(u){this._elements={},this._eventBus=u}_e.$inject=["eventBus"],_e.prototype.add=function(u,h,v){var E=u.id;this._validateId(E),(0,V.Lj)(h,Ee,E),v&&(0,V.Lj)(v,Ee,E),this._elements[E]={element:u,gfx:h,secondaryGfx:v}},_e.prototype.remove=function(u){var h=this._elements,v=u.id||u,E=v&&h[v];E&&((0,V.Lj)(E.gfx,Ee,""),E.secondaryGfx&&(0,V.Lj)(E.secondaryGfx,Ee,""),delete h[v])},_e.prototype.updateId=function(u,h){this._validateId(h),typeof u=="string"&&(u=this.get(u)),this._eventBus.fire("element.updateId",{element:u,newId:h});var v=this.getGraphics(u),E=this.getGraphics(u,!0);this.remove(u),u.id=h,this.add(u,v,E)},_e.prototype.updateGraphics=function(u,h,v){var E=u.id||u,C=this._elements[E];return v?C.secondaryGfx=h:C.gfx=h,(0,V.Lj)(h,Ee,E),h},_e.prototype.get=function(u){var h;typeof u=="string"?h=u:h=u&&(0,V.Lj)(u,Ee);var v=this._elements[h];return v&&v.element},_e.prototype.filter=function(u){var h=[];return this.forEach(function(v,E){u(v,E)&&h.push(v)}),h},_e.prototype.find=function(u){for(var h=this._elements,v=Object.keys(h),E=0;E<v.length;E++){var C=v[E],H=h[C],q=H.element,me=H.gfx;if(u(q,me))return q}},_e.prototype.getAll=function(){return this.filter(function(u){return u})},_e.prototype.forEach=function(u){var h=this._elements;Object.keys(h).forEach(function(v){var E=h[v],C=E.element,H=E.gfx;return u(C,H)})},_e.prototype.getGraphics=function(u,h){var v=u.id||u,E=this._elements[v];return E&&(h?E.secondaryGfx:E.gfx)},_e.prototype._validateId=function(u){if(!u)throw new Error("element must have an id");if(this._elements[u])throw new Error("element with id "+u+" already added")};var Ue=z(48403),ue="__fn",ye=1e3,xe=Array.prototype.slice;function B(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}B.prototype.on=function(u,h,v,E){if(u=(0,S.kJ)(u)?u:[u],(0,S.mf)(h)&&(E=v,v=h,h=ye),!(0,S.hj)(h))throw new Error("priority must be a number");var C=v;E&&(C=(0,S.ak)(v,E),C[ue]=v[ue]||v);var H=this;u.forEach(function(q){H._addListener(q,{priority:h,callback:C,next:null})})},B.prototype.once=function(u,h,v,E){var C=this;if((0,S.mf)(h)&&(E=v,v=h,h=ye),!(0,S.hj)(h))throw new Error("priority must be a number");function H(){H.__isTomb=!0;var q=v.apply(E,arguments);return C.off(u,H),q}H[ue]=v,this.on(u,h,H)},B.prototype.off=function(u,h){u=(0,S.kJ)(u)?u:[u];var v=this;u.forEach(function(E){v._removeListener(E,h)})},B.prototype.createEvent=function(u){var h=new ie;return h.init(u),h},B.prototype.fire=function(u,h){var v,E,C,H;if(H=xe.call(arguments),typeof u=="object"&&(h=u,u=h.type),!u)throw new Error("no event type specified");if(E=this._listeners[u],!!E){h instanceof ie?v=h:v=this.createEvent(h),H[0]=v;var q=v.type;u!==q&&(v.type=u);try{C=this._invokeListeners(v,H,E)}finally{u!==q&&(v.type=q)}return C===void 0&&v.defaultPrevented&&(C=!1),C}},B.prototype.handleError=function(u){return this.fire("error",{error:u})===!1},B.prototype._destroy=function(){this._listeners={}},B.prototype._invokeListeners=function(u,h,v){for(var E;v&&!u.cancelBubble;)E=this._invokeListener(u,h,v),v=v.next;return E},B.prototype._invokeListener=function(u,h,v){var E;if(v.callback.__isTomb)return E;try{E=M(v.callback,h),E!==void 0&&(u.returnValue=E,u.stopPropagation()),E===!1&&u.preventDefault()}catch(C){if(!this.handleError(C))throw console.error("unhandled error in event listener",C),C}return E},B.prototype._addListener=function(u,h){var v=this._getListeners(u),E;if(!v){this._setListeners(u,h);return}for(;v;){if(v.priority<h.priority){h.next=v,E?E.next=h:this._setListeners(u,h);return}E=v,v=v.next}E.next=h},B.prototype._getListeners=function(u){return this._listeners[u]},B.prototype._setListeners=function(u,h){this._listeners[u]=h},B.prototype._removeListener=function(u,h){var v=this._getListeners(u),E,C,H;if(!h){this._setListeners(u,null);return}for(;v;)E=v.next,H=v.callback,(H===h||H[ue]===h)&&(C?C.next=E:this._setListeners(u,E)),C=v,v=E};function ie(){}ie.prototype.stopPropagation=function(){this.cancelBubble=!0},ie.prototype.preventDefault=function(){this.defaultPrevented=!0},ie.prototype.init=function(u){(0,S.f0)(this,u||{})};function M(u,h){return u.apply(null,h)}var G=z(93249),te=z(67887);function k(u,h){this._eventBus=u,this._elementRegistry=h}k.$inject=["eventBus","elementRegistry"],k.prototype._getChildrenContainer=function(u){var h=this._elementRegistry.getGraphics(u),v;return u.parent?(v=(0,G.G)(h),v||(v=(0,V.Ue)("g"),(0,V.Sh)(v).add("djs-children"),(0,V.R3)(h.parentNode,v))):v=h,v},k.prototype._clear=function(u){var h=(0,G.s)(u);return(0,N.ZH)(h),h},k.prototype._createContainer=function(u,h,v,E){var C=(0,V.Ue)("g");(0,V.Sh)(C).add("djs-group"),typeof v!="undefined"?w(C,h,h.childNodes[v]):(0,V.R3)(h,C);var H=(0,V.Ue)("g");(0,V.Sh)(H).add("djs-element"),(0,V.Sh)(H).add("djs-"+u),E&&(0,V.Sh)(H).add("djs-frame"),(0,V.R3)(C,H);var q=(0,V.Ue)("g");return(0,V.Sh)(q).add("djs-visual"),(0,V.R3)(H,q),H},k.prototype.create=function(u,h,v){var E=this._getChildrenContainer(h.parent);return this._createContainer(u,E,v,(0,se.He)(h))},k.prototype.updateContainments=function(u){var h=this,v=this._elementRegistry,E;E=(0,S.u4)(u,function(C,H){return H.parent&&(C[H.parent.id]=H.parent),C},{}),(0,S.Ed)(E,function(C){var H=C.children;if(H){var q=h._getChildrenContainer(C);(0,S.Ed)(H.slice().reverse(),function(me){var je=v.getGraphics(me);w(je.parentNode,q)})}})},k.prototype.drawShape=function(u,h){var v=this._eventBus;return v.fire("render.shape",{gfx:u,element:h})},k.prototype.getShapePath=function(u){var h=this._eventBus;return h.fire("render.getShapePath",u)},k.prototype.drawConnection=function(u,h){var v=this._eventBus;return v.fire("render.connection",{gfx:u,element:h})},k.prototype.getConnectionPath=function(u){var h=this._eventBus;return h.fire("render.getConnectionPath",u)},k.prototype.update=function(u,h,v){if(h.parent){var E=this._clear(v);if(u==="shape")this.drawShape(E,h),(0,te.Iu)(v,h.x,h.y);else if(u==="connection")this.drawConnection(E,h);else throw new Error("unknown type: "+u);h.hidden?(0,V.Lj)(v,"display","none"):(0,V.Lj)(v,"display","block")}},k.prototype.remove=function(u){var h=this._elementRegistry.getGraphics(u);(0,V.Od)(h.parentNode)};function w(u,h,v){var E=v||h.firstChild;u!==E&&h.insertBefore(u,E)}var U={__depends__:[rt],__init__:["canvas"],canvas:["type",D],elementRegistry:["type",_e],elementFactory:["type",Ue.Z],eventBus:["type",B],graphicsFactory:["type",k]};function pe(u){var h=[],v=[];function E(me){return h.indexOf(me)>=0}function C(me){h.push(me)}function H(me){E(me)||((me.__depends__||[]).forEach(H),!E(me)&&(C(me),(me.__init__||[]).forEach(function(je){v.push(je)})))}u.forEach(H);var q=new L(h);return v.forEach(function(me){try{q[typeof me=="string"?"get":"invoke"](me)}catch(je){throw console.error("Failed to instantiate component"),console.error(je.stack),je}}),q}function Pe(u){u=u||{};var h={config:["value",u]},v=[h,U].concat(u.modules||[]);return pe(v)}function ze(u,h){this.injector=h=h||Pe(u),this.get=h.get,this.invoke=h.invoke,this.get("eventBus").fire("diagram.init")}ze.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},ze.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Et(){}Et.prototype.get=function(u){return this.$model.properties.get(this,u)},Et.prototype.set=function(u,h){this.$model.properties.set(this,u,h)};function xt(u,h){this.model=u,this.properties=h}xt.prototype.createType=function(u){var h=this.model,v=this.properties,E=Object.create(Et.prototype);(0,S.Ed)(u.properties,function(q){!q.isMany&&q.default!==void 0&&(E[q.name]=q.default)}),v.defineModel(E,h),v.defineDescriptor(E,u);var C=u.ns.name;function H(q){v.define(this,"$type",{value:C,enumerable:!0}),v.define(this,"$attrs",{value:{}}),v.define(this,"$parent",{writable:!0}),(0,S.Ed)(q,(0,S.ak)(function(me,je){this.set(je,me)},this))}return H.prototype=E,H.hasType=E.$instanceOf=this.model.hasType,v.defineModel(H,h),v.defineDescriptor(H,u),H};var ut={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Tt={String:function(u){return u},Boolean:function(u){return u==="true"},Integer:function(u){return parseInt(u,10)},Real:function(u){return parseFloat(u)}};function Rt(u,h){var v=Tt[u];return v?v(h):h}function le(u){return!!ut[u]}function De(u){return!!Tt[u]}function Ie(u,h){var v=u.split(/:/),E,C;if(v.length===1)E=u,C=h;else if(v.length===2)E=v[1],C=v[0];else throw new Error("expected <prefix:localName> or <localName>, got "+u);return u=(C?C+":":"")+E,{name:u,prefix:C,localName:E}}function de(u){this.ns=u,this.name=u.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}de.prototype.build=function(){return(0,S.ei)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},de.prototype.addProperty=function(u,h,v){typeof h=="boolean"&&(v=h,h=void 0),this.addNamedProperty(u,v!==!1);var E=this.properties;h!==void 0?E.splice(h,0,u):E.push(u)},de.prototype.replaceProperty=function(u,h,v){var E=u.ns,C=this.properties,H=this.propertiesByName,q=u.name!==h.name;if(u.isId){if(!h.isId)throw new Error("property <"+h.ns.name+"> must be id property to refine <"+u.ns.name+">");this.setIdProperty(h,!1)}if(u.isBody){if(!h.isBody)throw new Error("property <"+h.ns.name+"> must be body property to refine <"+u.ns.name+">");this.setBodyProperty(h,!1)}var me=C.indexOf(u);if(me===-1)throw new Error("property <"+E.name+"> not found in property list");C.splice(me,1),this.addProperty(h,v?void 0:me,q),H[E.name]=H[E.localName]=h},de.prototype.redefineProperty=function(u,h,v){var E=u.ns.prefix,C=h.split("#"),H=Ie(C[0],E),q=Ie(C[1],H.prefix).name,me=this.propertiesByName[q];if(me)this.replaceProperty(me,u,v);else throw new Error("refined property <"+q+"> not found");delete u.redefines},de.prototype.addNamedProperty=function(u,h){var v=u.ns,E=this.propertiesByName;h&&(this.assertNotDefined(u,v.name),this.assertNotDefined(u,v.localName)),E[v.name]=E[v.localName]=u},de.prototype.removeNamedProperty=function(u){var h=u.ns,v=this.propertiesByName;delete v[h.name],delete v[h.localName]},de.prototype.setBodyProperty=function(u,h){if(h&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+u.ns.name+">)");this.bodyProperty=u},de.prototype.setIdProperty=function(u,h){if(h&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+u.ns.name+">)");this.idProperty=u},de.prototype.assertNotDefined=function(u,h){var v=u.name,E=this.propertiesByName[v];if(E)throw new Error("property <"+v+"> already defined; override of <"+E.definedBy.ns.name+"#"+E.ns.name+"> by <"+u.definedBy.ns.name+"#"+u.ns.name+"> not allowed without redefines")},de.prototype.hasProperty=function(u){return this.propertiesByName[u]},de.prototype.addTrait=function(u,h){var v=this.allTypesByName,E=this.allTypes,C=u.name;C in v||((0,S.Ed)(u.properties,(0,S.ak)(function(H){H=(0,S.f0)({},H,{name:H.ns.localName,inherited:h}),Object.defineProperty(H,"definedBy",{value:u});var q=H.replaces,me=H.redefines;q||me?this.redefineProperty(H,q||me,q):(H.isBody&&this.setBodyProperty(H),H.isId&&this.setIdProperty(H),this.addProperty(H))},this)),E.push(u),v[C]=u)};function He(u,h){this.packageMap={},this.typeMap={},this.packages=[],this.properties=h,(0,S.Ed)(u,(0,S.ak)(this.registerPackage,this))}He.prototype.getPackage=function(u){return this.packageMap[u]},He.prototype.getPackages=function(){return this.packages},He.prototype.registerPackage=function(u){u=(0,S.f0)({},u);var h=this.packageMap;$e(h,u,"prefix"),$e(h,u,"uri"),(0,S.Ed)(u.types,(0,S.ak)(function(v){this.registerType(v,u)},this)),h[u.uri]=h[u.prefix]=u,this.packages.push(u)},He.prototype.registerType=function(u,h){u=(0,S.f0)({},u,{superClass:(u.superClass||[]).slice(),extends:(u.extends||[]).slice(),properties:(u.properties||[]).slice(),meta:(0,S.f0)(u.meta||{})});var v=Ie(u.name,h.prefix),E=v.name,C={};(0,S.Ed)(u.properties,(0,S.ak)(function(H){var q=Ie(H.name,v.prefix),me=q.name;le(H.type)||(H.type=Ie(H.type,q.prefix).name),(0,S.f0)(H,{ns:q,name:me}),C[me]=H},this)),(0,S.f0)(u,{ns:v,name:E,propertiesByName:C}),(0,S.Ed)(u.extends,(0,S.ak)(function(H){var q=this.typeMap[H];q.traits=q.traits||[],q.traits.push(E)},this)),this.definePackage(u,h),this.typeMap[E]=u},He.prototype.mapTypes=function(u,h,v){var E=le(u.name)?{name:u.name}:this.typeMap[u.name],C=this;function H(me){return q(me,!0)}function q(me,je){var Ze=Ie(me,le(me)?"":u.prefix);C.mapTypes(Ze,h,je)}if(!E)throw new Error("unknown type <"+u.name+">");(0,S.Ed)(E.superClass,v?H:q),h(E,!v),(0,S.Ed)(E.traits,H)},He.prototype.getEffectiveDescriptor=function(u){var h=Ie(u),v=new de(h);this.mapTypes(h,function(C,H){v.addTrait(C,H)});var E=v.build();return this.definePackage(E,E.allTypes[E.allTypes.length-1].$pkg),E},He.prototype.definePackage=function(u,h){this.properties.define(u,"$pkg",{value:h})};function $e(u,h,v){var E=h[v];if(E in u)throw new Error("package with "+v+" <"+E+"> already defined")}function bt(u){this.model=u}bt.prototype.set=function(u,h,v){if(!(0,S.HD)(h)||!h.length)throw new TypeError("property name must be a non-empty string");var E=this.model.getPropertyDescriptor(u,h),C=E&&E.name;Qe(v)?E?delete u[C]:delete u.$attrs[h]:E?C in u?u[C]=v:Re(u,E,v):u.$attrs[h]=v},bt.prototype.get=function(u,h){var v=this.model.getPropertyDescriptor(u,h);if(!v)return u.$attrs[h];var E=v.name;return!u[E]&&v.isMany&&Re(u,v,[]),u[E]},bt.prototype.define=function(u,h,v){if(!v.writable){var E=v.value;v=(0,S.f0)({},v,{get:function(){return E}}),delete v.value}Object.defineProperty(u,h,v)},bt.prototype.defineDescriptor=function(u,h){this.define(u,"$descriptor",{value:h})},bt.prototype.defineModel=function(u,h){this.define(u,"$model",{value:h})};function Qe(u){return typeof u=="undefined"}function Re(u,h,v){Object.defineProperty(u,h.name,{enumerable:!h.isReference,writable:!0,value:v,configurable:!0})}function mt(u){this.properties=new bt(this),this.factory=new xt(this,this.properties),this.registry=new He(u,this.properties),this.typeCache={}}mt.prototype.create=function(u,h){var v=this.getType(u);if(!v)throw new Error("unknown type <"+u+">");return new v(h)},mt.prototype.getType=function(u){var h=this.typeCache,v=(0,S.HD)(u)?u:u.ns.name,E=h[v];return E||(u=this.registry.getEffectiveDescriptor(v),E=h[v]=this.factory.createType(u)),E},mt.prototype.createAny=function(u,h,v){var E=Ie(u),C={$type:u,$instanceOf:function(q){return q===this.$type}},H={name:u,isGeneric:!0,ns:{prefix:E.prefix,localName:E.localName,uri:h}};return this.properties.defineDescriptor(C,H),this.properties.defineModel(C,this),this.properties.define(C,"$parent",{enumerable:!1,writable:!0}),this.properties.define(C,"$instanceOf",{enumerable:!1,writable:!0}),(0,S.Ed)(v,function(q,me){(0,S.Kn)(q)&&q.value!==void 0?C[q.name]=q.value:C[me]=q}),C},mt.prototype.getPackage=function(u){return this.registry.getPackage(u)},mt.prototype.getPackages=function(){return this.registry.getPackages()},mt.prototype.getElementDescriptor=function(u){return u.$descriptor},mt.prototype.hasType=function(u,h){h===void 0&&(h=u,u=this);var v=u.$model.getElementDescriptor(u);return h in v.allTypesByName},mt.prototype.getPropertyDescriptor=function(u,h){return this.getElementDescriptor(u).propertiesByName[h]},mt.prototype.getTypeDescriptor=function(u){return this.registry.typeMap[u]};var gn=String.fromCharCode,en=Object.prototype.hasOwnProperty,Hn=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,cn={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(cn).forEach(function(u){cn[u.toUpperCase()]=cn[u]});function Fn(u,h,v,E){return E?en.call(cn,E)?cn[E]:"&"+E+";":gn(h||parseInt(v,16))}function Kt(u){return u.length>3&&u.indexOf("&")!==-1?u.replace(Hn,Fn):u}var In="http://www.w3.org/2001/XMLSchema-instance",tn="xsi",nn="xsi:type",yn="non-whitespace outside of root node";function ae(u){return new Error(u)}function ct(u){return"missing namespace for prefix <"+u+">"}function Mn(u){return{get:u,enumerable:!0}}function vi(u){var h={},v;for(v in u)h[v]=u[v];return h}function nt(u){return u+"$uri"}function mi(u){var h={},v,E;for(v in u)E=u[v],h[E]=E,h[nt(E)]=v;return h}function Qn(){return{line:0,column:0}}function Wi(u){throw u}function zn(u){if(!this)return new zn(u);var h=u&&u.proxy,v,E,C,H,q=Wi,me,je,Ze,qe,at=Qn,Vt=!1,Ut=!1,Ke=null,gt=!1,Yt;function Pt(Ne){Ne instanceof Error||(Ne=ae(Ne)),Ke=Ne,q(Ne,at)}function Ft(Ne){me&&(Ne instanceof Error||(Ne=ae(Ne)),me(Ne,at))}this.on=function(Ne,Ye){if(typeof Ye!="function")throw ae("required args <name, cb>");switch(Ne){case"openTag":E=Ye;break;case"text":v=Ye;break;case"closeTag":C=Ye;break;case"error":q=Ye;break;case"warn":me=Ye;break;case"cdata":H=Ye;break;case"attention":qe=Ye;break;case"question":Ze=Ye;break;case"comment":je=Ye;break;default:throw ae("unsupported event: "+Ne)}return this},this.ns=function(Ne){if(typeof Ne=="undefined"&&(Ne={}),typeof Ne!="object")throw ae("required args <nsMap={}>");var Ye={},Xe;for(Xe in Ne)Ye[Xe]=Ne[Xe];return Ye[In]=tn,Ut=!0,Yt=Ye,this},this.parse=function(Ne){if(typeof Ne!="string")throw ae("required args <xml=string>");return Ke=null,$t(Ne),at=Qn,gt=!1,Ke},this.stop=function(){gt=!0};function $t(Ne){var Ye=Ut?[]:null,Xe=Ut?mi(Yt):null,Nt,kt=[],Jt=0,Qt=!1,Ot=!1,_t=0,ht=0,qt,Rr,un,At,Ti,ki,Pn,pr,yi,Ce="",Le=0,dt;function hn(){if(dt!==null)return dt;var ri,Ri,En,Jn=Ut&&Xe.xmlns,ui=Ut&&Vt?[]:null,pn=Le,An=Ce,Ci=An.length,fr,Ei,mn,li,lt,Zi={},ja={},Bn,et,jt;e:for(;pn<Ci;pn++)if(Bn=!1,et=An.charCodeAt(pn),!(et===32||et<14&&et>8)){for((et<65||et>122||et>90&&et<97)&&et!==95&&et!==58&&(Ft("illegal first char attribute name"),Bn=!0),jt=pn+1;jt<Ci;jt++)if(et=An.charCodeAt(jt),!(et>96&&et<123||et>64&&et<91||et>47&&et<59||et===46||et===45||et===95)){if(et===32||et<14&&et>8){Ft("missing attribute value"),pn=jt;continue e}if(et===61)break;Ft("illegal attribute name char"),Bn=!0}if(lt=An.substring(pn,jt),lt==="xmlns:xmlns"&&(Ft("illegal declaration of xmlns"),Bn=!0),et=An.charCodeAt(jt+1),et===34)jt=An.indexOf('"',pn=jt+2),jt===-1&&(jt=An.indexOf("'",pn),jt!==-1&&(Ft("attribute value quote missmatch"),Bn=!0));else if(et===39)jt=An.indexOf("'",pn=jt+2),jt===-1&&(jt=An.indexOf('"',pn),jt!==-1&&(Ft("attribute value quote missmatch"),Bn=!0));else for(Ft("missing attribute value quotes"),Bn=!0,jt=jt+1;jt<Ci&&(et=An.charCodeAt(jt+1),!(et===32||et<14&&et>8));jt++);for(jt===-1&&(Ft("missing closing quotes"),jt=Ci,Bn=!0),Bn||(mn=An.substring(pn,jt)),pn=jt;jt+1<Ci&&(et=An.charCodeAt(jt+1),!(et===32||et<14&&et>8));jt++)pn===jt&&(Ft("illegal character after attribute end"),Bn=!0);if(pn=jt+1,Bn)continue e;if(lt in ja){Ft("attribute <"+lt+"> already defined");continue}if(ja[lt]=!0,!Ut){Zi[lt]=mn;continue}if(Vt){if(Ei=lt==="xmlns"?"xmlns":lt.charCodeAt(0)===120&&lt.substr(0,6)==="xmlns:"?lt.substr(6):null,Ei!==null){if(ri=Kt(mn),Ri=nt(Ei),li=Yt[ri],!li){if(Ei==="xmlns"||Ri in Xe&&Xe[Ri]!==ri)do li="ns"+Jt++;while(typeof Xe[li]!="undefined");else li=Ei;Yt[ri]=li}Xe[Ei]!==li&&(fr||(Xe=vi(Xe),fr=!0),Xe[Ei]=li,Ei==="xmlns"&&(Xe[nt(li)]=ri,Jn=li),Xe[Ri]=ri),Zi[lt]=mn;continue}ui.push(lt,mn);continue}if(et=lt.indexOf(":"),et===-1){Zi[lt]=mn;continue}if(!(En=Xe[lt.substring(0,et)])){Ft(ct(lt.substring(0,et)));continue}lt=Jn===En?lt.substr(et+1):En+lt.substr(et),lt===nn&&(et=mn.indexOf(":"),et!==-1?(En=mn.substring(0,et),En=Xe[En]||En,mn=En+mn.substring(et)):mn=Jn+":"+mn),Zi[lt]=mn}if(Vt)for(pn=0,Ci=ui.length;pn<Ci;pn++){if(lt=ui[pn++],mn=ui[pn],et=lt.indexOf(":"),et!==-1){if(!(En=Xe[lt.substring(0,et)])){Ft(ct(lt.substring(0,et)));continue}lt=Jn===En?lt.substr(et+1):En+lt.substr(et),lt===nn&&(et=mn.indexOf(":"),et!==-1?(En=mn.substring(0,et),En=Xe[En]||En,mn=En+mn.substring(et)):mn=Jn+":"+mn)}Zi[lt]=mn}return dt=Zi}function Gn(){for(var ri=/(\r\n|\r|\n)/g,Ri=0,En=0,Jn=0,ui=ht,pn,An;_t>=Jn&&(pn=ri.exec(Ne),!(!pn||(ui=pn[0].length+pn.index,ui>_t)));)Ri+=1,Jn=ui;return _t==-1?(En=ui,An=Ne.substring(ht)):ht===0?An=Ne.substring(ht,_t):(En=_t-Jn,An=ht==-1?Ne.substring(_t):Ne.substring(_t,ht+1)),{data:An,line:Ri,column:En}}for(at=Gn,h&&(yi=Object.create({},{name:Mn(function(){return Pn}),originalName:Mn(function(){return pr}),attrs:Mn(hn),ns:Mn(function(){return Xe})}));ht!==-1;){if(Ne.charCodeAt(ht)===60?_t=ht:_t=Ne.indexOf("<",ht),_t===-1){if(kt.length)return Pt("unexpected end of file");if(ht===0)return Pt("missing start tag");ht<Ne.length&&Ne.substring(ht).trim()&&Ft(yn);return}if(ht!==_t){if(kt.length){if(v&&(v(Ne.substring(ht,_t),Kt,at),gt))return}else if(Ne.substring(ht,_t).trim()&&(Ft(yn),gt))return}if(At=Ne.charCodeAt(_t+1),At===33){if(un=Ne.charCodeAt(_t+2),un===91&&Ne.substr(_t+3,6)==="CDATA["){if(ht=Ne.indexOf("]]>",_t),ht===-1)return Pt("unclosed cdata");if(H&&(H(Ne.substring(_t+9,ht),at),gt))return;ht+=3;continue}if(un===45&&Ne.charCodeAt(_t+3)===45){if(ht=Ne.indexOf("-->",_t),ht===-1)return Pt("unclosed comment");if(je&&(je(Ne.substring(_t+4,ht),Kt,at),gt))return;ht+=3;continue}}if(At===63){if(ht=Ne.indexOf("?>",_t),ht===-1)return Pt("unclosed question");if(Ze&&(Ze(Ne.substring(_t,ht+2),at),gt))return;ht+=2;continue}for(qt=_t+1;;qt++){if(Ti=Ne.charCodeAt(qt),isNaN(Ti))return ht=-1,Pt("unclosed tag");if(Ti===34)un=Ne.indexOf('"',qt+1),qt=un!==-1?un:qt;else if(Ti===39)un=Ne.indexOf("'",qt+1),qt=un!==-1?un:qt;else if(Ti===62){ht=qt;break}}if(At===33){if(qe&&(qe(Ne.substring(_t,ht+1),Kt,at),gt))return;ht+=1;continue}if(dt={},At===47){if(Qt=!1,Ot=!0,!kt.length)return Pt("missing open tag");if(qt=Pn=kt.pop(),un=_t+2+qt.length,Ne.substring(_t+2,un)!==qt)return Pt("closing tag mismatch");for(;un<ht;un++)if(At=Ne.charCodeAt(un),!(At===32||At>8&&At<14))return Pt("close tag")}else{if(Ne.charCodeAt(ht-1)===47?(qt=Pn=Ne.substring(_t+1,ht-1),Qt=!0,Ot=!0):(qt=Pn=Ne.substring(_t+1,ht),Qt=!0,Ot=!1),!(At>96&&At<123||At>64&&At<91||At===95||At===58))return Pt("illegal first char nodeName");for(un=1,Rr=qt.length;un<Rr;un++)if(At=qt.charCodeAt(un),!(At>96&&At<123||At>64&&At<91||At>47&&At<59||At===45||At===95||At==46)){if(At===32||At<14&&At>8){Pn=qt.substring(0,un),dt=null;break}return Pt("invalid nodeName")}Ot||kt.push(Pn)}if(Ut){if(Nt=Xe,Qt&&(Ot||Ye.push(Nt),dt===null&&(Vt=qt.indexOf("xmlns",un)!==-1)&&(Le=un,Ce=qt,hn(),Vt=!1)),pr=Pn,At=Pn.indexOf(":"),At!==-1){if(ki=Xe[Pn.substring(0,At)],!ki)return Pt("missing namespace on <"+pr+">");Pn=Pn.substr(At+1)}else ki=Xe.xmlns;ki&&(Pn=ki+":"+Pn)}if(Qt&&(Le=un,Ce=qt,E&&(h?E(yi,Kt,Ot,at):E(Pn,hn,Kt,Ot,at),gt)))return;if(Ot){if(C&&(C(h?yi:Pn,Kt,Qt,at),gt))return;Ut&&(Qt?Xe=Nt:Xe=Ye.pop())}ht+=1}}}function Mi(u){return u.xml&&u.xml.tagAlias==="lowerCase"}var ge={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},si="xsi:type";function oi(u){return u.xml&&u.xml.serialize}function Gi(u){return oi(u)===si}function j(u){return oi(u)==="property"}function g(u){return u.charAt(0).toUpperCase()+u.slice(1)}function J(u,h){return Mi(h)?u.prefix+":"+g(u.localName):u.name}function ce(u,h){var v=u.name,E=u.localName,C=h.xml&&h.xml.typePrefix;return C&&E.indexOf(C)===0?u.prefix+":"+E.slice(C.length):v}function Oe(u,h){var v=Ie(u),E=h.getPackage(v.prefix);return ce(v,E)}function We(u){return new Error(u)}function it(u){return u.$descriptor}function Mt(u){(0,S.f0)(this,u),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(h){this.references.push(h)},this.addElement=function(h){if(!h)throw We("expected element");var v=this.elementsById,E=it(h),C=E.idProperty,H;if(C&&(H=h.get(C.name),H)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(H))throw new Error("illegal ID <"+H+">");if(v[H])throw We("duplicate ID <"+H+">");v[H]=h}},this.addWarning=function(h){this.warnings.push(h)}}function Bt(){}Bt.prototype.handleEnd=function(){},Bt.prototype.handleText=function(){},Bt.prototype.handleNode=function(){};function vn(){}vn.prototype=Object.create(Bt.prototype),vn.prototype.handleNode=function(){return this};function xn(){}xn.prototype=Object.create(Bt.prototype),xn.prototype.handleText=function(u){this.body=(this.body||"")+u};function Rn(u,h){this.property=u,this.context=h}Rn.prototype=Object.create(xn.prototype),Rn.prototype.handleNode=function(u){if(this.element)throw We("expected no sub nodes");return this.element=this.createReference(u),this},Rn.prototype.handleEnd=function(){this.element.id=this.body},Rn.prototype.createReference=function(u){return{property:this.property.ns.name,id:""}};function xi(u,h){this.element=h,this.propertyDesc=u}xi.prototype=Object.create(xn.prototype),xi.prototype.handleEnd=function(){var u=this.body||"",h=this.element,v=this.propertyDesc;u=Rt(v.type,u),v.isMany?h.get(v.name).push(u):h.set(v.name,u)};function Si(){}Si.prototype=Object.create(xn.prototype),Si.prototype.handleNode=function(u){var h=this,v=this.element;return v?h=this.handleChild(u):(v=this.element=this.createElement(u),this.context.addElement(v)),h};function y(u,h,v){this.model=u,this.type=u.getType(h),this.context=v}y.prototype=Object.create(Si.prototype),y.prototype.addReference=function(u){this.context.addReference(u)},y.prototype.handleText=function(u){var h=this.element,v=it(h),E=v.bodyProperty;if(!E)throw We("unexpected body text <"+u+">");xn.prototype.handleText.call(this,u)},y.prototype.handleEnd=function(){var u=this.body,h=this.element,v=it(h),E=v.bodyProperty;E&&u!==void 0&&(u=Rt(E.type,u),h.set(E.name,u))},y.prototype.createElement=function(u){var h=u.attributes,v=this.type,E=it(v),C=this.context,H=new v({}),q=this.model,me;return(0,S.Ed)(h,function(je,Ze){var qe=E.propertiesByName[Ze],at;qe&&qe.isReference?qe.isMany?(at=je.split(" "),(0,S.Ed)(at,function(Vt){C.addReference({element:H,property:qe.ns.name,id:Vt})})):C.addReference({element:H,property:qe.ns.name,id:je}):(qe?je=Rt(qe.type,je):Ze!=="xmlns"&&(me=Ie(Ze,E.ns.prefix),q.getPackage(me.prefix)&&C.addWarning({message:"unknown attribute <"+Ze+">",element:H,property:Ze,value:je})),H.set(Ze,je))}),H},y.prototype.getPropertyForNode=function(u){var h=u.name,v=Ie(h),E=this.type,C=this.model,H=it(E),q=v.name,me=H.propertiesByName[q],je,Ze;if(me&&!me.isAttr)return Gi(me)&&(je=u.attributes[si],je)?(je=Oe(je,C),Ze=C.getType(je),(0,S.f0)({},me,{effectiveType:it(Ze).name})):me;var qe=C.getPackage(v.prefix);if(qe){if(je=J(v,qe),Ze=C.getType(je),me=(0,S.sE)(H.properties,function(at){return!at.isVirtual&&!at.isReference&&!at.isAttribute&&Ze.hasType(at.type)}),me)return(0,S.f0)({},me,{effectiveType:it(Ze).name})}else if(me=(0,S.sE)(H.properties,function(at){return!at.isReference&&!at.isAttribute&&at.type==="Element"}),me)return me;throw We("unrecognized element <"+v.name+">")},y.prototype.toString=function(){return"ElementDescriptor["+it(this.type).name+"]"},y.prototype.valueHandler=function(u,h){return new xi(u,h)},y.prototype.referenceHandler=function(u){return new Rn(u,this.context)},y.prototype.handler=function(u){return u==="Element"?new Ln(this.model,u,this.context):new y(this.model,u,this.context)},y.prototype.handleChild=function(u){var h,v,E,C;if(h=this.getPropertyForNode(u),E=this.element,v=h.effectiveType||h.type,De(v))return this.valueHandler(h,E);h.isReference?C=this.referenceHandler(h).handleNode(u):C=this.handler(v).handleNode(u);var H=C.element;return H!==void 0&&(h.isMany?E.get(h.name).push(H):E.set(h.name,H),h.isReference?((0,S.f0)(H,{element:E}),this.context.addReference(H)):H.$parent=E),C};function Sn(u,h,v){y.call(this,u,h,v)}Sn.prototype=Object.create(y.prototype),Sn.prototype.createElement=function(u){var h=u.name,v=Ie(h),E=this.model,C=this.type,H=E.getPackage(v.prefix),q=H&&J(v,H)||h;if(!C.hasType(q))throw We("unexpected element <"+u.originalName+">");return y.prototype.createElement.call(this,u)};function Ln(u,h,v){this.model=u,this.context=v}Ln.prototype=Object.create(Si.prototype),Ln.prototype.createElement=function(u){var h=u.name,v=Ie(h),E=v.prefix,C=u.ns[E+"$uri"],H=u.attributes;return this.model.createAny(h,C,H)},Ln.prototype.handleChild=function(u){var h=new Ln(this.model,"Element",this.context).handleNode(u),v=this.element,E=h.element,C;return E!==void 0&&(C=v.$children=v.$children||[],C.push(E),E.$parent=v),h},Ln.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Un(u){u instanceof mt&&(u={model:u}),(0,S.f0)(this,{lax:!1},u)}Un.prototype.fromXML=function(u,h,v){var E=h.rootHandler;h instanceof y?(E=h,h={}):typeof h=="string"?(E=this.handler(h),h={}):typeof E=="string"&&(E=this.handler(E));var C=this.model,H=this.lax,q=new Mt((0,S.f0)({},h,{rootHandler:E})),me=new zn({proxy:!0}),je=Vn();E.context=q,je.push(E);function Ze(Ye,Xe,Nt){var kt=Xe(),Jt=kt.line,Qt=kt.column,Ot=kt.data;Ot.charAt(0)==="<"&&Ot.indexOf(" ")!==-1&&(Ot=Ot.slice(0,Ot.indexOf(" "))+">");var _t="unparsable content "+(Ot?Ot+" ":"")+`detected
	line: `+Jt+`
	column: `+Qt+`
	nested error: `+Ye.message;if(Nt)return q.addWarning({message:_t,error:Ye}),!0;throw We(_t)}function qe(Ye,Xe){return Ze(Ye,Xe,!0)}function at(){var Ye=q.elementsById,Xe=q.references,Nt,kt;for(Nt=0;kt=Xe[Nt];Nt++){var Jt=kt.element,Qt=Ye[kt.id],Ot=it(Jt).propertiesByName[kt.property];if(Qt||q.addWarning({message:"unresolved reference <"+kt.id+">",element:kt.element,property:kt.property,value:kt.id}),Ot.isMany){var _t=Jt.get(Ot.name),ht=_t.indexOf(kt);ht===-1&&(ht=_t.length),Qt?_t[ht]=Qt:_t.splice(ht,1)}else Jt.set(Ot.name,Qt)}}function Vt(){je.pop().handleEnd()}var Ut=/^<\?xml /i,Ke=/ encoding="([^"]+)"/i,gt=/^utf-8$/i;function Yt(Ye){if(Ut.test(Ye)){var Xe=Ke.exec(Ye),Nt=Xe&&Xe[1];!Nt||gt.test(Nt)||q.addWarning({message:"unsupported document encoding <"+Nt+">, falling back to UTF-8"})}}function Pt(Ye,Xe){var Nt=je.peek();try{je.push(Nt.handleNode(Ye))}catch(kt){Ze(kt,Xe,H)&&je.push(new vn)}}function Ft(Ye,Xe){try{je.peek().handleText(Ye)}catch(Nt){qe(Nt,Xe)}}function $t(Ye,Xe){Ye.trim()&&Ft(Ye,Xe)}var Ne=C.getPackages().reduce(function(Ye,Xe){return Ye[Xe.uri]=Xe.prefix,Ye},{"http://www.w3.org/XML/1998/namespace":"xml"});return me.ns(Ne).on("openTag",function(Ye,Xe,Nt,kt){var Jt=Ye.attrs||{},Qt=Object.keys(Jt).reduce(function(_t,ht){var qt=Xe(Jt[ht]);return _t[ht]=qt,_t},{}),Ot={name:Ye.name,originalName:Ye.originalName,attributes:Qt,ns:Ye.ns};Pt(Ot,kt)}).on("question",Yt).on("closeTag",Vt).on("cdata",Ft).on("text",function(Ye,Xe,Nt){$t(Xe(Ye),Nt)}).on("error",Ze).on("warn",qe),new Promise(function(Ye,Xe){var Nt;try{me.parse(u),at()}catch(_t){Nt=_t}var kt=E.element;!Nt&&!kt&&(Nt=We("failed to parse document as <"+E.type.$descriptor.name+">"));var Jt=q.warnings,Qt=q.references,Ot=q.elementsById;return Nt?(Nt.warnings=Jt,Xe(Nt)):Ye({rootElement:kt,elementsById:Ot,references:Qt,warnings:Jt})})},Un.prototype.handler=function(u){return new Sn(this.model,u)};function Vn(){var u=[];return Object.defineProperty(u,"peek",{value:function(){return this[this.length-1]}}),u}var Oi=`<?xml version="1.0" encoding="UTF-8"?>
`,Kn=/<|>|'|"|&|\n\r|\n/g,ei=/<|>|&/g;function rn(u){var h={},v={},E={},C=[],H=[];this.byUri=function(q){return v[q]||u&&u.byUri(q)},this.add=function(q,me){v[q.uri]=q,me?C.push(q):H.push(q),this.mapPrefix(q.prefix,q.uri)},this.uriByPrefix=function(q){return h[q||"xmlns"]},this.mapPrefix=function(q,me){h[q||"xmlns"]=me},this.getNSKey=function(q){return q.prefix!==void 0?q.uri+"|"+q.prefix:q.uri},this.logUsed=function(q){var me=q.uri,je=this.getNSKey(q);E[je]=this.byUri(me),u&&u.logUsed(q)},this.getUsed=function(q){function me(qe){var at=je.getNSKey(qe);return E[at]}var je=this,Ze=[].concat(C,H);return Ze.filter(me)}}function _r(u){return u.charAt(0).toLowerCase()+u.slice(1)}function ke(u,h){return Mi(h)?_r(u):u}function $n(u,h){u.super_=h,u.prototype=Object.create(h.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})}function Ii(u){return(0,S.HD)(u)?u:(u.prefix?u.prefix+":":"")+u.localName}function Yn(u){return u.getUsed().filter(function(h){return h.prefix!=="xml"}).map(function(h){var v="xmlns"+(h.prefix?":"+h.prefix:"");return{name:v,value:h.uri}})}function ar(u,h){return h.isGeneric?(0,S.f0)({localName:h.ns.localName},u):(0,S.f0)({localName:ke(h.ns.localName,h.$pkg)},u)}function or(u,h){return(0,S.f0)({localName:h.ns.localName},u)}function wi(u){var h=u.$descriptor;return(0,S.hX)(h.properties,function(v){var E=v.name;if(v.isVirtual||!(0,S.e$)(u,E))return!1;var C=u[E];return C===v.default||C===null?!1:v.isMany?C.length:!0})}var Zn={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Xn={"<":"lt",">":"gt","&":"amp"};function Li(u,h,v){return u=(0,S.HD)(u)?u:""+u,u.replace(h,function(E){return"&"+v[E]+";"})}function br(u){return Li(u,Kn,Zn)}function Vi(u){return Li(u,ei,Xn)}function sr(u){return(0,S.hX)(u,function(h){return h.isAttr})}function Nr(u){return(0,S.hX)(u,function(h){return!h.isAttr})}function cr(u){this.tagName=u}cr.prototype.build=function(u){return this.element=u,this},cr.prototype.serializeTo=function(u){u.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function b(){}b.prototype.serializeValue=b.prototype.serializeTo=function(u){u.append(this.escape?Vi(this.value):this.value)},b.prototype.build=function(u,h){return this.value=h,u.type==="String"&&h.search(ei)!==-1&&(this.escape=!0),this};function T(u){this.tagName=u}$n(T,b),T.prototype.serializeTo=function(u){u.appendIndent().append("<"+this.tagName+">"),this.serializeValue(u),u.append("</"+this.tagName+">").appendNewLine()};function I(u,h){this.body=[],this.attrs=[],this.parent=u,this.propertyDescriptor=h}I.prototype.build=function(u){this.element=u;var h=u.$descriptor,v=this.propertyDescriptor,E,C,H=h.isGeneric;return H?E=this.parseGeneric(u):E=this.parseNsAttributes(u),v?this.ns=this.nsPropertyTagName(v):this.ns=this.nsTagName(h),this.tagName=this.addTagName(this.ns),H||(C=wi(u),this.parseAttributes(sr(C)),this.parseContainments(Nr(C))),this.parseGenericAttributes(u,E),this},I.prototype.nsTagName=function(u){var h=this.logNamespaceUsed(u.ns);return ar(h,u)},I.prototype.nsPropertyTagName=function(u){var h=this.logNamespaceUsed(u.ns);return or(h,u)},I.prototype.isLocalNs=function(u){return u.uri===this.ns.uri},I.prototype.nsAttributeName=function(u){var h;if((0,S.HD)(u)?h=Ie(u):h=u.ns,u.inherited)return{localName:h.localName};var v=this.logNamespaceUsed(h);return this.getNamespaces().logUsed(v),this.isLocalNs(v)?{localName:h.localName}:(0,S.f0)({localName:h.localName},v)},I.prototype.parseGeneric=function(u){var h=this,v=this.body,E=[];return(0,S.Ed)(u,function(C,H){var q;H==="$body"?v.push(new b().build({type:"String"},C)):H==="$children"?(0,S.Ed)(C,function(me){v.push(new I(h).build(me))}):H.indexOf("$")!==0&&(q=h.parseNsAttribute(u,H,C),q&&E.push({name:H,value:C}))}),E},I.prototype.parseNsAttribute=function(u,h,v){var E=u.$model,C=Ie(h),H;if(C.prefix==="xmlns"&&(H={prefix:C.localName,uri:v}),!C.prefix&&C.localName==="xmlns"&&(H={uri:v}),!H)return{name:h,value:v};if(E&&E.getPackage(v))this.logNamespace(H,!0,!0);else{var q=this.logNamespaceUsed(H,!0);this.getNamespaces().logUsed(q)}},I.prototype.parseNsAttributes=function(u,h){var v=this,E=u.$attrs,C=[];return(0,S.Ed)(E,function(H,q){var me=v.parseNsAttribute(u,q,H);me&&C.push(me)}),C},I.prototype.parseGenericAttributes=function(u,h){var v=this;(0,S.Ed)(h,function(E){if(E.name!==si)try{v.addAttribute(v.nsAttributeName(E.name),E.value)}catch(C){console.warn("missing namespace information for ",E.name,"=",E.value,"on",u,C)}})},I.prototype.parseContainments=function(u){var h=this,v=this.body,E=this.element;(0,S.Ed)(u,function(C){var H=E.get(C.name),q=C.isReference,me=C.isMany;if(me||(H=[H]),C.isBody)v.push(new b().build(C,H[0]));else if(De(C.type))(0,S.Ed)(H,function(qe){v.push(new T(h.addTagName(h.nsPropertyTagName(C))).build(C,qe))});else if(q)(0,S.Ed)(H,function(qe){v.push(new cr(h.addTagName(h.nsPropertyTagName(C))).build(qe))});else{var je=Gi(C),Ze=j(C);(0,S.Ed)(H,function(qe){var at;je?at=new he(h,C):Ze?at=new I(h,C):at=new I(h),v.push(at.build(qe))})}})},I.prototype.getNamespaces=function(u){var h=this.namespaces,v=this.parent,E;return h||(E=v&&v.getNamespaces(),u||!E?this.namespaces=h=new rn(E):h=E),h},I.prototype.logNamespace=function(u,h,v){var E=this.getNamespaces(v),C=u.uri,H=u.prefix,q=E.byUri(C);return(!q||v)&&E.add(u,h),E.mapPrefix(H,C),u},I.prototype.logNamespaceUsed=function(u,h){var v=this.element,E=v.$model,C=this.getNamespaces(h),H=u.prefix,q=u.uri,me,je,Ze;if(!H&&!q)return{localName:u.localName};if(Ze=ge[H]||E&&(E.getPackage(H)||{}).uri,q=q||Ze||C.uriByPrefix(H),!q)throw new Error("no namespace uri given for prefix <"+H+">");if(u=C.byUri(q),!u){for(me=H,je=1;C.uriByPrefix(me);)me=H+"_"+je++;u=this.logNamespace({prefix:me,uri:q},Ze===q)}return H&&C.mapPrefix(H,q),u},I.prototype.parseAttributes=function(u){var h=this,v=this.element;(0,S.Ed)(u,function(E){var C=v.get(E.name);if(E.isReference)if(!E.isMany)C=C.id;else{var H=[];(0,S.Ed)(C,function(q){H.push(q.id)}),C=H.join(" ")}h.addAttribute(h.nsAttributeName(E),C)})},I.prototype.addTagName=function(u){var h=this.logNamespaceUsed(u);return this.getNamespaces().logUsed(h),Ii(u)},I.prototype.addAttribute=function(u,h){var v=this.attrs;(0,S.HD)(h)&&(h=br(h));var E=(0,S.cx)(v,function(H){return H.name.localName===u.localName&&H.name.uri===u.uri&&H.name.prefix===u.prefix}),C={name:u,value:h};E!==-1?v.splice(E,1,C):v.push(C)},I.prototype.serializeAttributes=function(u){var h=this.attrs,v=this.namespaces;v&&(h=Yn(v).concat(h)),(0,S.Ed)(h,function(E){u.append(" ").append(Ii(E.name)).append('="').append(E.value).append('"')})},I.prototype.serializeTo=function(u){var h=this.body[0],v=h&&h.constructor!==b;u.appendIndent().append("<"+this.tagName),this.serializeAttributes(u),u.append(h?">":" />"),h&&(v&&u.appendNewLine().indent(),(0,S.Ed)(this.body,function(E){E.serializeTo(u)}),v&&u.unindent().appendIndent(),u.append("</"+this.tagName+">")),u.appendNewLine()};function he(u,h){I.call(this,u,h)}$n(he,I),he.prototype.parseNsAttributes=function(u){var h=I.prototype.parseNsAttributes.call(this,u),v=u.$descriptor;if(v.name===this.propertyDescriptor.type)return h;var E=this.typeNs=this.nsTagName(v);this.getNamespaces().logUsed(this.typeNs);var C=u.$model.getPackage(E.uri),H=C.xml&&C.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(si),(E.prefix?E.prefix+":":"")+H+v.ns.localName),h},he.prototype.isLocalNs=function(u){return u.uri===(this.typeNs||this.ns).uri};function Me(){this.value="",this.write=function(u){this.value+=u}}function Ve(u,h){var v=[""];this.append=function(E){return u.write(E),this},this.appendNewLine=function(){return h&&u.write(`
`),this},this.appendIndent=function(){return h&&u.write(v.join("  ")),this},this.indent=function(){return v.push(""),this},this.unindent=function(){return v.pop(),this}}function Ct(u){u=(0,S.f0)({format:!1,preamble:!0},u||{});function h(v,E){var C=E||new Me,H=new Ve(C,u.format);if(u.preamble&&H.append(Oi),new I().build(v).serializeTo(H),!E)return C.value}return{toXML:h}}function zt(u,h){mt.call(this,u,h)}zt.prototype=Object.create(mt.prototype),zt.prototype.fromXML=function(u,h,v){(0,S.HD)(h)||(v=h,h="bpmn:Definitions");var E=new Un((0,S.f0)({model:this,lax:!0},v)),C=E.handler(h);return E.fromXML(u,C)},zt.prototype.toXML=function(u,h){var v=new Ct(h);return new Promise(function(E,C){try{var H=v.toXML(u);return E({xml:H})}catch(q){return C(q)}})};var ln="BPMN20",Cn="http://www.omg.org/spec/BPMN/20100524/MODEL",ti="bpmn",Br=[],ci=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Tn=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Wn={tagAlias:"lowerCase",typePrefix:"t"},Wo={name:ln,uri:Cn,prefix:ti,associations:Br,types:ci,enumerations:Tn,xml:Wn},Go="BPMNDI",xr="http://www.omg.org/spec/BPMN/20100524/DI",Vo="bpmndi",Ko=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],Yo=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],ba=[],Zo={name:Go,uri:xr,prefix:Vo,types:Ko,enumerations:Yo,associations:ba},Xo="DC",kr="http://www.omg.org/spec/DD/20100524/DC",xa="dc",Sa=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Jo=[],jr={name:Xo,uri:kr,prefix:xa,types:Sa,associations:Jo},Hr="DI",qo="http://www.omg.org/spec/DD/20100524/DI",wa="di",Fr=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Qo=[],es={tagAlias:"lowerCase"},zr={name:Hr,uri:qo,prefix:wa,types:Fr,associations:Qo,xml:es},gi="bpmn.io colors for BPMN",Ta="http://bpmn.io/schema/bpmn/biocolor/1.0",ts="bioc",Ra=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],Ni=[],Bi=[],ur={name:gi,uri:Ta,prefix:ts,types:Ra,enumerations:Ni,associations:Bi},Ur="BPMN in Color",Sr="http://www.omg.org/spec/BPMN/non-normative/color/1.0",ns="color",is=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Ca=[],lr=[],wr={name:Ur,uri:Sr,prefix:ns,types:is,enumerations:Ca,associations:lr},Pa={bpmn:Wo,bpmndi:Zo,dc:jr,di:zr,bioc:ur,color:wr};function Aa(u,h){var v=(0,S.f0)({},Pa,u);return new zt(v,h)}var Da=z(44657),Ma=z.n(Da),ni=z(8527),Oa=new(Ma())({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Nn(u,h){return u.$instanceOf(h)}function Ia(u){return(0,S.sE)(u.rootElements,function(h){return Nn(h,"bpmn:Process")||Nn(h,"bpmn:Collaboration")})}function $r(u,h){var v={},E=[];function C(Ce,Le){return function(dt){Ce(dt,Le)}}function H(Ce){v[Ce.id]=Ce}function q(Ce){return v[Ce.id]}function me(Ce,Le){var dt=Ce.gfx;if(dt)throw new Error(h("already rendered {element}",{element:(0,ni.x)(Ce)}));return u.element(Ce,Le)}function je(Ce,Le){return u.root(Ce,Le)}function Ze(Ce,Le){try{var dt=Ce.di&&me(Ce,Le);return H(Ce),dt}catch(hn){qe(hn.message,{element:Ce,error:hn}),console.error(h("failed to import {element}",{element:(0,ni.x)(Ce)})),console.error(hn)}}function qe(Ce,Le){u.error(Ce,Le)}function at(Ce){var Le=Ce.bpmnElement;Le?Le.di?qe(h("multiple DI elements defined for {element}",{element:(0,ni.x)(Le)}),{element:Le}):(Oa.bind(Le,"di"),Le.di=Ce):qe(h("no bpmnElement referenced in {element}",{element:(0,ni.x)(Ce)}),{element:Ce})}function Vt(Ce){Ut(Ce.plane)}function Ut(Ce){at(Ce),(0,S.Ed)(Ce.planeElement,Ke)}function Ke(Ce){at(Ce)}function gt(Ce,Le){var dt=Ce.diagrams;if(Le&&dt.indexOf(Le)===-1)throw new Error(h("diagram not part of bpmn:Definitions"));if(!Le&&dt&&dt.length&&(Le=dt[0]),!Le)throw new Error(h("no diagram to display"));Vt(Le);var hn=Le.plane;if(!hn)throw new Error(h("no plane for {element}",{element:(0,ni.x)(Le)}));var Gn=hn.bpmnElement;if(!Gn)if(Gn=Ia(Ce),Gn)qe(h("correcting missing bpmnElement on {plane} to {rootElement}",{plane:(0,ni.x)(hn),rootElement:(0,ni.x)(Gn)})),hn.bpmnElement=Gn,at(hn);else throw new Error(h("no process or collaboration to display"));var ri=je(Gn,hn);if(Nn(Gn,"bpmn:Process"))Pt(Gn,ri);else if(Nn(Gn,"bpmn:Collaboration"))pr(Gn,ri),Ft(Ce.rootElements,ri);else throw new Error(h("unsupported bpmnElement for {plane}: {rootElement}",{plane:(0,ni.x)(hn),rootElement:(0,ni.x)(Gn)}));Yt(E)}function Yt(){for(var Ce;E.length;)Ce=E.shift(),Ce()}function Pt(Ce,Le){Ti(Ce,Le),Qt(Ce.ioSpecification,Le),Jt(Ce.artifacts,Le),H(Ce)}function Ft(Ce,Le){var dt=(0,S.hX)(Ce,function(hn){return!q(hn)&&Nn(hn,"bpmn:Process")&&hn.laneSets});dt.forEach(C(Pt,Le))}function $t(Ce,Le){Ze(Ce,Le)}function Ne(Ce,Le){(0,S.Ed)(Ce,C($t,Le))}function Ye(Ce,Le){Ze(Ce,Le)}function Xe(Ce,Le){Ze(Ce,Le)}function Nt(Ce,Le){Ze(Ce,Le)}function kt(Ce,Le){Ze(Ce,Le)}function Jt(Ce,Le){(0,S.Ed)(Ce,function(dt){Nn(dt,"bpmn:Association")?E.push(function(){kt(dt,Le)}):kt(dt,Le)})}function Qt(Ce,Le){Ce&&((0,S.Ed)(Ce.dataInputs,C(Xe,Le)),(0,S.Ed)(Ce.dataOutputs,C(Nt,Le)))}function Ot(Ce,Le){Ti(Ce,Le),Jt(Ce.artifacts,Le)}function _t(Ce,Le){var dt=Ze(Ce,Le);Nn(Ce,"bpmn:SubProcess")&&Ot(Ce,dt||Le),Nn(Ce,"bpmn:Activity")&&Qt(Ce.ioSpecification,Le),E.push(function(){(0,S.Ed)(Ce.dataInputAssociations,C(Ye,Le)),(0,S.Ed)(Ce.dataOutputAssociations,C(Ye,Le))})}function ht(Ce,Le){Ze(Ce,Le)}function qt(Ce,Le){Ze(Ce,Le)}function Rr(Ce,Le){E.push(function(){var dt=Ze(Ce,Le);Ce.childLaneSet&&un(Ce.childLaneSet,dt||Le),yi(Ce)})}function un(Ce,Le){(0,S.Ed)(Ce.lanes,C(Rr,Le))}function At(Ce,Le){(0,S.Ed)(Ce,C(un,Le))}function Ti(Ce,Le){ki(Ce.flowElements,Le),Ce.laneSets&&At(Ce.laneSets,Le)}function ki(Ce,Le){(0,S.Ed)(Ce,function(dt){Nn(dt,"bpmn:SequenceFlow")?E.push(function(){ht(dt,Le)}):Nn(dt,"bpmn:BoundaryEvent")?E.unshift(function(){_t(dt,Le)}):Nn(dt,"bpmn:FlowNode")?_t(dt,Le):Nn(dt,"bpmn:DataObject")||(Nn(dt,"bpmn:DataStoreReference")||Nn(dt,"bpmn:DataObjectReference")?qt(dt,Le):qe(h("unrecognized flowElement {element} in context {context}",{element:(0,ni.x)(dt),context:Le?(0,ni.x)(Le.businessObject):"null"}),{element:dt,context:Le}))})}function Pn(Ce,Le){var dt=Ze(Ce,Le),hn=Ce.processRef;hn&&Pt(hn,dt||Le)}function pr(Ce){(0,S.Ed)(Ce.participants,C(Pn)),Jt(Ce.artifacts),E.push(function(){Ne(Ce.messageFlows)})}function yi(Ce){(0,S.Ed)(Ce.flowNodeRef,function(Le){var dt=Le.get("lanes");dt&&dt.push(Ce)})}return{handleDeferred:Yt,handleDefinitions:gt,handleSubProcess:Ot,registerDi:at}}function rs(u,h,v){var E,C,H,q,me=[];function je(Ze,qe){var at={root:function(Ut){return E.add(Ut)},element:function(Ut,Ke){return E.add(Ut,Ke)},error:function(Ut,Ke){me.push({message:Ut,context:Ke})}},Vt=new $r(at,H);Vt.handleDefinitions(Ze,qe)}return new Promise(function(Ze,qe){try{return E=u.get("bpmnImporter"),C=u.get("eventBus"),H=u.get("translate"),C.fire("import.render.start",{definitions:h}),je(h,v),C.fire("import.render.complete",{error:q,warnings:me}),Ze({warnings:me})}catch(at){return at.warnings=me,qe(at)}})}var Ki=z(86622),La='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Wr=La;function Tr(u){return u.join(";")}var Gr=Tr(["color: #404040"]),as=Tr(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),Na=Tr(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"]),Bc=Tr(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"]),kc='<div class="bjs-powered-by-lightbox" style="'+as+'"><div class="backdrop" style="'+Na+'"></div><div class="notice" style="'+Bc+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+Gr+'">'+Wr+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Yi;function ii(){Yi||(Yi=(0,N.H6)(kc),N.cl.bind(Yi,".backdrop","click",function(u){document.body.removeChild(Yi)})),document.body.appendChild(Yi)}function an(u){u=(0,S.f0)({},os,u),this._moddle=this._createModdle(u),this._container=this._createContainer(u),ka(this._container),this._init(this._container,this._moddle,u)}A()(an,ze),an.prototype.importXML=(0,Ki.$)(function(h,v){var E=this;function C(H){var q=E.get("eventBus").createEvent(H);return Object.defineProperty(q,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:H.warnings,references:H.references,elementsById:H.elementsById}}}),q}return new Promise(function(H,q){h=E._emit("import.parse.start",{xml:h})||h,E._moddle.fromXML(h,"bpmn:Definitions").then(function(me){var je=me.rootElement,Ze=me.references,qe=me.warnings,at=me.elementsById;je=E._emit("import.parse.complete",C({error:null,definitions:je,elementsById:at,references:Ze,warnings:qe}))||je,E.importDefinitions(je,v).then(function(Vt){var Ut=[].concat(qe,Vt.warnings||[]);return E._emit("import.done",{error:null,warnings:Ut}),H({warnings:Ut})}).catch(function(Vt){var Ut=[].concat(qe,Vt.warnings||[]);return E._emit("import.done",{error:Vt,warnings:Ut}),q(fn(Vt,Ut))})}).catch(function(me){return E._emit("import.parse.complete",{error:me}),me=Ba(me),E._emit("import.done",{error:me,warnings:me.warnings}),q(me)})})}),an.prototype.importDefinitions=(0,Ki.$)(function(h,v){var E=this;return new Promise(function(C,H){E._setDefinitions(h),E.open(v).then(function(q){var me=q.warnings;return C({warnings:me})}).catch(function(q){return H(q)})})}),an.prototype.open=(0,Ki.$)(function(h){var v=this._definitions,E=h,C=this;return new Promise(function(H,q){if(!v){var me=new Error("no XML imported");return q(fn(me,[]))}if(typeof h=="string"&&(E=Kr(v,h),!E)){var je=new Error("BPMNDiagram <"+h+"> not found");return q(fn(je,[]))}try{C.clear()}catch(Ze){return q(fn(Ze,[]))}rs(C,v,E).then(function(Ze){var qe=Ze.warnings;return H({warnings:qe})}).catch(function(Ze){return q(Ze)})})}),an.prototype.saveXML=(0,Ki.$)(function(h){h=h||{};var v=this,E=this._definitions;return new Promise(function(C){if(!E)return C({error:new Error("no definitions loaded")});E=v._emit("saveXML.start",{definitions:E})||E,v._moddle.toXML(E,h).then(function(H){var q=H.xml;return q=v._emit("saveXML.serialized",{xml:q})||q,C({xml:q})})}).catch(function(C){return{error:C}}).then(function(C){v._emit("saveXML.done",C);var H=C.error;return H?Promise.reject(H):C})}),an.prototype.saveSVG=(0,Ki.$)(function(h){h=h||{};var v=this;return new Promise(function(E,C){v._emit("saveSVG.start");var H,q;try{var me=v.get("canvas"),je=me.getDefaultLayer(),Ze=(0,N.IO)("defs",me._svg),qe=(0,V.db)(je),at=Ze?"<defs>"+(0,V.db)(Ze)+"</defs>":"",Vt=je.getBBox();H=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+Vt.width+'" height="'+Vt.height+'" viewBox="'+Vt.x+" "+Vt.y+" "+Vt.width+" "+Vt.height+'" version="1.1">'+at+qe+"</svg>"}catch(Ut){q=Ut}return v._emit("saveSVG.done",{error:q,svg:H}),q?C(q):E({svg:H})})}),an.prototype._setDefinitions=function(u){this._definitions=u},an.prototype.getModules=function(){return this._modules},an.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(u){var h=u.businessObject;h&&h.di&&delete h.di}),ze.prototype.clear.call(this))},an.prototype.destroy=function(){ze.prototype.destroy.call(this),(0,N.Od)(this._container)},an.prototype.on=function(u,h,v,E){return this.get("eventBus").on(u,h,v,E)},an.prototype.off=function(u,h){this.get("eventBus").off(u,h)},an.prototype.attachTo=function(u){if(!u)throw new Error("parentNode required");this.detach(),u.get&&u.constructor.prototype.jquery&&(u=u.get(0)),typeof u=="string"&&(u=(0,N.IO)(u)),u.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},an.prototype.getDefinitions=function(){return this._definitions},an.prototype.detach=function(){var u=this._container,h=u.parentNode;h&&(this._emit("detach",{}),h.removeChild(u))},an.prototype._init=function(u,h,v){var E=v.modules||this.getModules(),C=v.additionalModules||[],H=[{bpmnjs:["value",this],moddle:["value",h]}],q=[].concat(H,E,C),me=(0,S.f0)((0,S.CE)(v,["additionalModules"]),{canvas:(0,S.f0)({},v.canvas,{container:u}),modules:q});ze.call(this,me),v&&v.container&&this.attachTo(v.container)},an.prototype._emit=function(u,h){return this.get("eventBus").fire(u,h)},an.prototype._createContainer=function(u){var h=(0,N.H6)('<div class="bjs-container"></div>');return(0,S.f0)(h.style,{width:Vr(u.width),height:Vr(u.height),position:u.position}),h},an.prototype._createModdle=function(u){var h=(0,S.f0)({},this._moddleExtensions,u.moddleExtensions);return new Aa(h)},an.prototype._modules=[];function fn(u,h){return u.warnings=h,u}function Ba(u){var h=/unparsable content <([^>]+)> detected([\s\S]*)$/,v=h.exec(u.message);return v&&(u.message="unparsable content <"+v[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+v[2]),u}var os={width:"100%",height:"100%",position:"relative"};function Vr(u){return u+((0,S.hj)(u)?"px":"")}function Kr(u,h){return h&&(0,S.sE)(u.diagrams,function(v){return v.id===h})||null}function ka(u){var h=Wr,v='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+Gr+'">'+h+"</a>",E=(0,N.H6)(v);u.appendChild(E),N.B.bind(E,"click",function(C){ii(),C.preventDefault()})}},10561:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return Di}});var S=z(2937),N=z.n(S),V=z(57191),re=z(59707);function oe(e){re.Z.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}N()(oe,re.Z),oe.prototype._createModdle=function(e){var t=re.Z.prototype._createModdle.call(this,e);return t.ids=new V.Z([32,36,1]),t},oe.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};var F=z(1047),p=z(67217),R=z(24220),P=67,fe=86,Z=89,ee=90,X=["c","C",P],L=["v","V",fe],O=["y","Y",Z],A=["z","Z",ee];function W(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function K(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function se(e,t){return e=(0,p.kJ)(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.keyCode)!==-1}function we(e){return e.shiftKey}function Ge(e){return K(e)&&se(X,e)}function ft(e){return K(e)&&se(L,e)}function rt(e){return K(e)&&!we(e)&&se(A,e)}function yt(e){return K(e)&&(se(O,e)||se(A,e)&&we(e))}var st="keyboard.keydown",Dt="keyboard.keyup",Wt="input-handle-modified-keys",Xt=1e3;function Lt(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Lt.$inject=["config.keyboard","eventBus"],Lt.prototype._keydownHandler=function(e){this._keyHandler(e,st)},Lt.prototype._keyupHandler=function(e){this._keyHandler(e,Dt)},Lt.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||st,i),n&&e.preventDefault()}},Lt.prototype._isEventIgnored=function(e){return bn(e.target)&&this._isModifiedKeyIgnored(e)},Lt.prototype._isModifiedKeyIgnored=function(e){if(!K(e))return!0;var t=this._getAllowedModifiers(e.target);return!t.includes(e.key)},Lt.prototype._getAllowedModifiers=function(e){var t=(0,R.oq)(e,"["+Wt+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(Wt).split(",")},Lt.prototype.bind=function(e){this.unbind(),this._node=e,R.B.bind(e,"keydown",this._keydownHandler,!0),R.B.bind(e,"keyup",this._keyupHandler,!0),this._fire("bind")},Lt.prototype.getBinding=function(){return this._node},Lt.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),R.B.unbind(e,"keydown",this._keydownHandler,!0),R.B.unbind(e,"keyup",this._keyupHandler,!0)),this._node=null},Lt.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},Lt.prototype.addListener=function(e,t,n){(0,p.mf)(e)&&(n=t,t=e,e=Xt),this._eventBus.on(n||st,e,t)},Lt.prototype.removeListener=function(e,t){this._eventBus.off(t||st,e)},Lt.prototype.hasModifier=W,Lt.prototype.isCmd=K,Lt.prototype.isShift=we,Lt.prototype.isKey=se;function bn(e){return e&&((0,R.wB)(e,"input, textarea")||e.contentEditable==="true")}var Ht=500,Gt=67,_n=86,Fe=89,Je=90,D=["c","C",Gt],ve=["v","V",_n],Ee=["y","Y",Fe],_e=["z","Z",Je];function Ue(e,t){var n=this;e.on("editorActions.init",Ht,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Ue.$inject=["eventBus","keyboard"],Ue.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(rt(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(yt(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(Ge(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(ft(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(se(["+","Add","="],r)&&K(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(se(["-","Subtract"],r)&&K(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(se("0",r)&&K(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(se(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};var ue={__init__:["keyboard","keyboardBindings"],keyboard:["type",Lt],keyboardBindings:["type",Ue]},ye={moveSpeed:50,moveSpeedAccelerated:200};function xe(e,t,n){var i=this;this._config=(0,p.f0)({},ye,e||{}),t.addListener(r);function r(a){var o=a.keyEvent,s=i._config;if(t.isCmd(o)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],o)){var c=t.isShift(o)?s.moveSpeedAccelerated:s.moveSpeed,l;switch(o.key){case"ArrowLeft":case"Left":l="left";break;case"ArrowUp":case"Up":l="up";break;case"ArrowRight":case"Right":l="right";break;case"ArrowDown":case"Down":l="down";break}return i.moveCanvas({speed:c,direction:l}),!0}}this.moveCanvas=function(a){var o=0,s=0,c=a.speed,l=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":o=l;break;case"up":s=l;break;case"right":o=-l;break;case"down":s=-l;break}n.scroll({dx:o,dy:s})}}xe.$inject=["config.keyboardMove","keyboard","canvas"];var B={__depends__:[ue],__init__:["keyboardMove"],keyboardMove:["type",xe]},ie=/^djs-cursor-.*$/;function M(e){var t=(0,R.Sh)(document.body);t.removeMatching(ie),e&&t.add("djs-cursor-"+e)}function G(){M(null)}function te(e){var t=domClasses(document.body);return t.has("djs-cursor-"+e)}var k=5e3;function w(e,t){t=t||"element.click";function n(){return!1}return e.once(t,k,n),function(){e.off(t,n)}}function U(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function pe(e,t){return{x:e.x-t.x,y:e.y-t.y}}var Pe=z(10409),ze=15;function Et(e,t){var n;e.on("element.mousedown",500,function(o){return a(o.originalEvent)});function i(o){var s=n.start,c=n.button,l=(0,Pe.jt)(o),f=pe(l,s);if(!n.dragging&&xt(f)>ze&&(n.dragging=!0,c===0&&w(e),M("grab")),n.dragging){var d=n.last||n.start;f=pe(l,d),t.scroll({dx:f.x,dy:f.y}),n.last=l}o.preventDefault()}function r(o){R.B.unbind(document,"mousemove",i),R.B.unbind(document,"mouseup",r),n=null,G()}function a(o){if(!(0,R.oq)(o.target,".djs-draggable")){var s=o.button;if(!(s>=2||o.ctrlKey||o.shiftKey||o.altKey))return n={button:s,start:(0,Pe.jt)(o)},R.B.bind(document,"mousemove",i),R.B.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}Et.$inject=["eventBus","canvas"];function xt(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}var ut={__init__:["moveCanvas"],moveCanvas:["type",Et]};function Tt(e){return Math.log(e)/Math.log(10)}function Rt(e,t){var n=Tt(e.min),i=Tt(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function le(e,t){return Math.max(e.min,Math.min(e.max,t))}var De=Math.sign||function(e){return e>=0?1:-1},Ie={min:.2,max:4},de=10,He=.1,$e=.75;function bt(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=(0,p.ak)(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||$e;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}bt.$inject=["config.zoomScroll","eventBus","canvas"],bt.prototype.scroll=function(t){this._canvas.scroll(t)},bt.prototype.reset=function(){this._canvas.zoom("fit-viewport")},bt.prototype.zoom=function(t,n){var i=Rt(Ie,de*2);this._totalDelta+=t,Math.abs(this._totalDelta)>He&&(this._zoom(t,n,i),this._totalDelta=0)},bt.prototype._handleWheel=function(t){if(!(0,R.oq)(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey,r=t.shiftKey,a=-1*this._scale,o;if(i?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,i){var s=n.getBoundingClientRect(),c={x:t.clientX-s.left,y:t.clientY-s.top};o=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*De(t.deltaY)*a,this.zoom(o,c)}else r?o={dx:a*t.deltaY,dy:0}:o={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(o)}},bt.prototype.stepZoom=function(t,n){var i=Rt(Ie,de);this._zoom(t,n,i)},bt.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,a=Tt(i.zoom()),o=Math.round(a/n)*n;o+=n*r;var s=Math.pow(10,o);i.zoom(le(Ie,s),t)},bt.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t=="undefined"&&(t=!r),r!==t&&R.B[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t},bt.prototype._init=function(e){this.toggle(e)};var Qe={__init__:["zoomScroll"],zoomScroll:["type",bt]};function Re(e){F.Z.call(this,e)}N()(Re,F.Z),Re.prototype._navigationModules=[B,ut,Qe],Re.prototype._modules=[].concat(F.Z.prototype._modules,Re.prototype._navigationModules);var mt=z(44275),gn=z(11553),en=z.n(gn),Hn=.2,cn=4,Fn=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function Kt(){}function In(e,t){return t.get(e,!1)}function tn(e){e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.srcEvent&&typeof e.srcEvent.stopPropagation=="function"&&e.srcEvent.stopPropagation(),typeof e.stopImmediatePropagation=="function"&&e.stopImmediatePropagation()}function nn(e){function t(l){(0,p.Ed)(Fn,function(f){R.B.bind(e,f,tn,!0)})}function n(l){setTimeout(function(){(0,p.Ed)(Fn,function(f){R.B.unbind(e,f,tn,!0)})},500)}R.B.bind(e,"touchstart",t,!0),R.B.bind(e,"touchend",n,!0),R.B.bind(e,"touchcancel",n,!0);var i=new(en()).Manager(e,{inputClass:en().TouchInput,recognizers:[],domEvents:!0}),r=new(en()).Tap,a=new(en()).Pan({threshold:10}),o=new(en()).Press,s=new(en()).Pinch,c=new(en()).Tap({event:"doubletap",taps:2});return s.requireFailure(a),s.requireFailure(o),i.add([a,o,s,c,r]),i.reset=function(l){var f=this.recognizers,d=this.session;d.stopped||(i.stop(l),setTimeout(function(){var m,_;for(m=0;_=f[m];m++)_.reset(),_.state=8;d.curRecognizer=null},0))},i.on("hammer.input",function(l){l.srcEvent.defaultPrevented&&i.reset(!0)}),i}function yn(e,t,n,i,r){var a=In("dragging",e),o=In("move",e),s=In("contextPad",e),c=In("palette",e),l;function f(_,x){return function($){var Y=d($.target),Te=Y&&i.get(Y);return x&&($.srcEvent.button=x),r.fire(_,$,Te)}}function d(_){var x=(0,R.oq)(_,"svg, .djs-element",!0);return x}function m(_){l=nn(_);function x(Te){var Se=0,Q=0;function ne(Ae){var tt=Ae.deltaX-Se,vt=Ae.deltaY-Q;t.scroll({dx:tt,dy:vt}),Se=Ae.deltaX,Q=Ae.deltaY}function be(Ae){l.off("panmove",ne),l.off("panend",be),l.off("pancancel",be)}l.on("panmove",ne),l.on("panend",be),l.on("pancancel",be)}function $(Te){var Se=d(Te.target),Q=Se&&i.get(Se);if(o&&t.getRootElement()!==Q)return o.start(Te,Q,!0);x(Te)}function Y(Te){var Se=t.zoom(),Q=Te.center;function ne(Ae){var tt=1-(1-Ae.scale)/1.5,vt=Math.max(Hn,Math.min(cn,tt*Se));t.zoom(vt,Q),tn(Ae)}function be(Ae){l.off("pinchmove",ne),l.off("pinchend",be),l.off("pinchcancel",be),l.reset(!0)}l.on("pinchmove",ne),l.on("pinchend",be),l.on("pinchcancel",be)}l.on("tap",f("element.click")),l.on("doubletap",f("element.dblclick",1)),l.on("panstart",$),l.on("press",$),l.on("pinchstart",Y)}a&&n.on("drag.move",function(_){var x=_.originalEvent;if(!(!x||x instanceof MouseEvent)){var $=(0,Pe.jt)(x),Y=document.elementFromPoint($.x,$.y),Te=d(Y),Se=Te&&i.get(Te);Se!==_.hover&&(_.hover&&a.out(_),Se&&(a.hover({element:Se,gfx:Te}),_.hover=Se,_.hoverGfx=Te))}}),s&&n.on("contextPad.create",function(_){var x=_.pad.html,$=nn(x);$.on("panstart",function(Y){s.trigger("dragstart",Y,!0)}),$.on("press",function(Y){s.trigger("dragstart",Y,!0)}),$.on("tap",function(Y){s.trigger("click",Y)})}),c&&n.on("palette.create",function(_){var x=_.container,$=nn(x);$.on("panstart",function(Y){c.trigger("dragstart",Y,!0)}),$.on("press",function(Y){c.trigger("dragstart",Y,!0)}),$.on("tap",function(Y){c.trigger("click",Y)})}),n.on("canvas.init",function(_){m(_.svg)})}yn.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];var ae=z(80836);function ct(e,t){var n=this;t.on("canvas.init",function(i){n.addBBoxMarker(i.svg)})}ct.$inject=["canvas","eventBus"],ct.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=(0,ae.Ue)("rect");(0,ae.Lj)(n,{x:-1e4,y:1e4,width:10,height:10}),(0,ae.Lj)(n,t),(0,ae.R3)(e,n);var i=(0,ae.Ue)("rect");(0,ae.Lj)(i,{x:1e4,y:1e4,width:10,height:10}),(0,ae.Lj)(i,t),(0,ae.R3)(e,i)};var Mn={__depends__:[mt.Z],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",yn],touchFix:["type",ct]},vi={__depends__:[Mn]};function nt(e){return e&&e[e.length-1]}function mi(e){return e.y}function Qn(e){return e.x}var Wi={left:Qn,center:Qn,right:function(e){return e.x+e.width},top:mi,middle:mi,bottom:function(e){return e.y+e.height}};function zn(e){this._modeling=e}zn.$inject=["modeling"],zn.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}},zn.prototype._isType=function(e,t){return t.indexOf(e)!==-1},zn.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,a={},o={},s=!1,c,l,f;function d(m,_){return Math.round((m[i]+_[i]+_[r])/2)}if(this._isType(e,["left","top"]))a[e]=t[0][i];else if(this._isType(e,["right","bottom"]))f=nt(t),a[e]=f[i]+f[r];else if(this._isType(e,["center","middle"])){if((0,p.Ed)(t,function(m){var _=m[i]+Math.round(m[r]/2);o[_]?o[_].elements.push(m):o[_]={elements:[m],center:_}}),c=(0,p.MR)(o,function(m){return m.elements.length>1&&(s=!0),m.elements.length}),s)return a[e]=nt(c).center,a;l=t[0],t=(0,p.MR)(t,function(m){return m[i]+m[r]}),f=nt(t),a[e]=d(l,f)}return a},zn.prototype.trigger=function(e,t){var n=this._modeling,i=(0,p.hX)(e,function(s){return!(s.waypoints||s.host||s.labelTarget)});if(!(i.length<2)){var r=Wi[t],a=(0,p.MR)(i,r),o=this._alignmentPosition(t,a);n.alignElements(a,o)}};var Mi={__init__:["alignElements"],alignElements:["type",zn]},ge=z(88237),si=10,oi=50,Gi=250;function j(e,t,n,i){for(var r;r=J(e,n,t);)n=i(t,n,r);return n}function g(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(a){var o=e[a];if(o){var s=a==="x"?"width":"height",c=o.margin,l=o.minDistance;c<0?r[a]=Math.min(i[a]+c-t[s]/2,n[a]-l+c):r[a]=Math.max(i[a]+i[s]+c+t[s]/2,n[a]+l+c)}}),r}}function J(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=Oe(e,n);return(0,p.sE)(r,function(a){if(a===n)return!1;var o=(0,ge.T8)(a,i,si);return o==="intersect"})}function ce(e,t){t||(t={});function n(x){return x.source===e?1:-1}var i=t.defaultDistance||oi,r=t.direction||"e",a=t.filter,o=t.getWeight||n,s=t.maxDistance||Gi,c=t.reference||"start";a||(a=Bt);function l(x,$){return r==="n"?c==="start"?(0,ge.JA)(x).top-(0,ge.JA)($).bottom:c==="center"?(0,ge.JA)(x).top-(0,ge.wS)($).y:(0,ge.JA)(x).top-(0,ge.JA)($).top:r==="w"?c==="start"?(0,ge.JA)(x).left-(0,ge.JA)($).right:c==="center"?(0,ge.JA)(x).left-(0,ge.wS)($).x:(0,ge.JA)(x).left-(0,ge.JA)($).left:r==="s"?c==="start"?(0,ge.JA)($).top-(0,ge.JA)(x).bottom:c==="center"?(0,ge.wS)($).y-(0,ge.JA)(x).bottom:(0,ge.JA)($).bottom-(0,ge.JA)(x).bottom:c==="start"?(0,ge.JA)($).left-(0,ge.JA)(x).right:c==="center"?(0,ge.wS)($).x-(0,ge.JA)(x).right:(0,ge.JA)($).right-(0,ge.JA)(x).right}var f=e.incoming.filter(a).map(function(x){var $=o(x),Y=$<0?l(x.source,e):l(e,x.source);return{id:x.source.id,distance:Y,weight:$}}),d=e.outgoing.filter(a).map(function(x){var $=o(x),Y=$>0?l(e,x.target):l(x.target,e);return{id:x.target.id,distance:Y,weight:$}}),m=f.concat(d).reduce(function(x,$){return x[$.id+"__weight_"+$.weight]=$,x},{}),_=(0,p.u4)(m,function(x,$){var Y=$.distance,Te=$.weight;return Y<0||Y>s||(x[String(Y)]||(x[String(Y)]=0),x[String(Y)]+=1*Te,(!x.distance||x[x.distance]<x[String(Y)])&&(x.distance=Y)),x},{});return _.distance||i}function Oe(e){var t=We(e);return e.host&&(t=t.concat(We(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(We(i))},[]))),t}function We(e){return Mt(e).concat(it(e))}function it(e){return e.incoming.map(function(t){return t.source})}function Mt(e){return e.outgoing.map(function(t){return t.target})}function Bt(){return!0}var vn=100;function xn(e,t,n){e.on("autoPlace",vn,function(i){var r=i.shape,a=i.source;return Rn(a,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,a){e.fire("autoPlace.start",{source:i,shape:r});var o=e.fire("autoPlace",{source:i,shape:r}),s=t.appendShape(i,r,o,i.parent,a);return e.fire("autoPlace.end",{source:i,shape:s}),s}}xn.$inject=["eventBus","modeling","canvas"];function Rn(e,t,n){n||(n={});var i=n.defaultDistance||oi,r=(0,ge.wS)(e),a=(0,ge.JA)(e);return{x:a.right+i+t.width/2,y:r.y}}function xi(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}xi.$inject=["eventBus","selection"];var Si={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",xn],autoPlaceSelectionBehavior:["type",xi]},y=z(27367);function Sn(e,t){if((0,y.is)(t,"bpmn:TextAnnotation"))return Vn(e,t);if((0,y.JZ)(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return Oi(e,t);if((0,y.is)(t,"bpmn:FlowNode"))return Ln(e,t)}function Ln(e,t){var n=(0,ge.JA)(e),i=(0,ge.wS)(e),r=ce(e,{filter:function(f){return(0,y.is)(f,"bpmn:SequenceFlow")}}),a=30,o=80,s="left";(0,y.is)(e,"bpmn:BoundaryEvent")&&(s=(0,ge.T8)(e,e.host,-25),s.indexOf("top")!==-1&&(a*=-1));var c={x:n.right+r+t.width/2,y:i.y+Un(s,o)},l={y:{margin:a,minDistance:o}};return j(e,t,c,g(l))}function Un(e,t){return e.indexOf("top")!=-1?-1*t:e.indexOf("bottom")!=-1?t:0}function Vn(e,t){var n=(0,ge.JA)(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2},r={y:{margin:-30,minDistance:20}};return j(e,t,i,g(r))}function Oi(e,t){var n=(0,ge.JA)(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},r={x:{margin:30,minDistance:30}};return j(e,t,i,g(r))}function Kn(e){e.on("autoPlace",function(t){var n=t.shape,i=t.source;return Sn(i,n)})}Kn.$inject=["eventBus"];var ei={__depends__:[Si],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Kn]},rn=z(76971),_r=1e3;function ke(e){this._eventBus=e}ke.$inject=["eventBus"];function $n(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}ke.prototype.on=function(e,t,n,i,r,a){if(((0,p.mf)(t)||(0,p.hj)(t))&&(a=r,r=i,i=n,n=t,t=null),(0,p.mf)(n)&&(a=r,r=i,i=n,n=_r),(0,p.Kn)(r)&&(a=r,r=!1),!(0,p.mf)(i))throw new Error("handlerFn must be a function");(0,p.kJ)(e)||(e=[e]);var o=this._eventBus;(0,p.Ed)(e,function(s){var c=["commandStack",s,t].filter(function(l){return l}).join(".");o.on(c,n,r?$n(i,a):i,a)})};var Ii=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];(0,p.Ed)(Ii,function(e){ke.prototype[e]=function(t,n,i,r,a){((0,p.mf)(t)||(0,p.hj)(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}});function Yn(e,t,n,i){ke.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(a){var o=a.context,s=o.hints||{},c=o.shape,l=o.parent||o.newParent;s.autoResize!==!1&&r._expand([c],l)}),this.postExecuted(["elements.move"],function(a){var o=a.context,s=(0,p.xH)((0,p.VO)(o.closure.topLevel)),c=o.hints,l=c?c.autoResize:!0;if(l!==!1){var f=(0,p.vM)(s,function(d){return d.parent.id});(0,p.Ed)(f,function(d,m){(0,p.kJ)(l)&&(d=d.filter(function(_){return(0,p.sE)(l,(0,p.KQ)({id:_.id}))})),r._expand(d,m)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var o=a.context,s=o.hints,c=o.shape;s&&s.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(a){var o=a.context,s=o.hints,c=o.shape,l=c.parent;s&&s.autoResize===!1||l&&r._expand([c],l)})}Yn.$inject=["eventBus","elementRegistry","modeling","rules"],N()(Yn,ke),Yn.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=(0,ge.JA)((0,rn.jY)(e)),a=(0,ge.JA)(t),o={};return r.top-a.top<i.top&&(o.top=r.top-n.top),r.left-a.left<i.left&&(o.left=r.left-n.left),a.right-r.right<i.right&&(o.right=r.right+n.right),a.bottom-r.bottom<i.bottom&&(o.bottom=r.bottom+n.bottom),(0,ge.z_)((0,p.f0)({},a,o))},Yn.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(ar(i,t)){var r=or((0,p.ei)(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var a=t.parent;a&&this._expand([t],a)}}},Yn.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},Yn.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},Yn.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function ar(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function or(e,t){var n="";return e=(0,ge.JA)(e),t=(0,ge.JA)(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function wi(e){e.invoke(Yn,this)}wi.$inject=["injector"],N()(wi,Yn),wi.prototype.resize=function(e,t,n){(0,y.is)(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Zn(e){ke.call(this,e),this.init()}Zn.$inject=["eventBus"],N()(Zn,ke),Zn.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(a,o,s){return n(a)},!0)})},Zn.prototype.init=function(){};function Xn(e){Zn.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Xn.$inject=["eventBus"],N()(Xn,Zn),Xn.prototype.canResize=function(e,t){return!1};function Li(e,t){Xn.call(this,e),this._modeling=t}N()(Li,Xn),Li.$inject=["eventBus","modeling"],Li.prototype.canResize=function(e,t){if(!(0,y.is)(t,"bpmn:Participant")&&!(0,y.is)(t,"bpmn:Lane")&&!(0,y.is)(t,"bpmn:SubProcess"))return!1;var n=!0;return(0,p.Ed)(e,function(i){if((0,y.is)(i,"bpmn:Lane")||i.labelTarget){n=!1;return}}),n};var br={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",wi],bpmnAutoResizeProvider:["type",Li]},Vi=1500;function sr(e,t,n){var i=this,r=n.get("dragging",!1);function a(o){if(!o.hover){var s=o.originalEvent,c=i._findTargetGfx(s),l=c&&e.get(c);c&&l&&(o.stopPropagation(),r.hover({element:l,gfx:c}),r.move(s))}}r&&t.on("drag.start",function(o){t.once("drag.move",Vi,function(s){a(s)})}),function(){var o,s;t.on("element.hover",function(c){o=c.gfx,s=c.element}),t.on("element.hover",Vi,function(c){s&&t.fire("element.out",{element:s,gfx:o})}),t.on("element.out",function(){o=null,s=null})}(),this._findTargetGfx=function(o){var s,c;if(o instanceof MouseEvent)return s=(0,Pe.jt)(o),c=document.elementFromPoint(s.x,s.y),Nr(c)}}sr.$inject=["elementRegistry","eventBus","injector"];function Nr(e){return(0,R.oq)(e,"svg, .djs-element",!0)}var cr={__init__:["hoverFix"],hoverFix:["type",sr]},b=z(96408),T=Math.round,I="djs-drag-active";function he(e){e.preventDefault()}function Me(e){return typeof TouchEvent!="undefined"&&e instanceof TouchEvent}function Ve(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Ct(e,t,n,i){var r={threshold:5,trapClick:!0},a;function o(Q){var ne=t.viewbox(),be=t._container.getBoundingClientRect();return{x:ne.x+(Q.x-be.left)/ne.scale,y:ne.y+(Q.y-be.top)/ne.scale}}function s(Q,ne){ne=ne||a;var be=e.createEvent((0,p.f0)({},ne.payload,ne.data,{isTouch:ne.isTouch}));return e.fire("drag."+Q,be)===!1?!1:e.fire(ne.prefix+"."+Q,be)}function c(Q){var ne=Q.filter(function(be){return i.get(be.id)});ne.length&&n.select(ne)}function l(Q,ne){var be=a.payload,Ae=a.displacement,tt=a.globalStart,vt=(0,Pe.jt)(Q),It=pe(vt,tt),sn=a.localStart,Dn=o(vt),On=pe(Dn,sn);if(!a.active&&(ne||Ve(It)>a.threshold)){if((0,p.f0)(be,{x:T(sn.x+Ae.x),y:T(sn.y+Ae.y),dx:0,dy:0},{originalEvent:Q}),s("start")===!1)return Y();a.active=!0,a.keepSelection||(be.previousSelection=n.get(),n.select(null)),a.cursor&&M(a.cursor),t.addMarker(t.getRootElement(),I)}(0,Pe.UW)(Q),a.active&&((0,p.f0)(be,{x:T(Dn.x+Ae.x),y:T(Dn.y+Ae.y),dx:T(On.x),dy:T(On.y)},{originalEvent:Q}),s("move"))}function f(Q){var ne,be=!0;a.active&&(Q&&(a.payload.originalEvent=Q,(0,Pe.UW)(Q)),be=s("end")),be===!1&&s("rejected"),ne=Te(be!==!0),s("ended",ne)}function d(Q){Q.which===27&&(he(Q),Y())}function m(Q){var ne;a.active&&(ne=w(e),setTimeout(ne,400),he(Q)),f(Q)}function _(Q){l(Q)}function x(Q){var ne=a.payload;ne.hoverGfx=Q.gfx,ne.hover=Q.element,s("hover")}function $(Q){s("out");var ne=a.payload;ne.hoverGfx=null,ne.hover=null}function Y(Q){var ne;if(a){var be=a.active;be&&s("cancel"),ne=Te(Q),be&&s("canceled",ne)}}function Te(Q){var ne,be;s("cleanup"),G(),a.trapClick?be=m:be=f,R.B.unbind(document,"mousemove",l),R.B.unbind(document,"dragstart",he),R.B.unbind(document,"selectstart",he),R.B.unbind(document,"mousedown",be,!0),R.B.unbind(document,"mouseup",be,!0),R.B.unbind(document,"keyup",d),R.B.unbind(document,"touchstart",_,!0),R.B.unbind(document,"touchcancel",Y,!0),R.B.unbind(document,"touchmove",l,!0),R.B.unbind(document,"touchend",f,!0),e.off("element.hover",x),e.off("element.out",$),t.removeMarker(t.getRootElement(),I);var Ae=a.payload.previousSelection;return Q!==!1&&Ae&&!n.get().length&&c(Ae),ne=a,a=null,ne}function Se(Q,ne,be,Ae){a&&Y(!1),typeof ne=="string"&&(Ae=be,be=ne,ne=null),Ae=(0,p.f0)({},r,Ae||{});var tt=Ae.data||{},vt,It,sn,Dn,On;Ae.trapClick?Dn=m:Dn=f,Q?(vt=(0,Pe.Ku)(Q)||Q,It=(0,Pe.jt)(Q),(0,Pe.UW)(Q),vt.type==="dragstart"&&he(vt)):(vt=null,It={x:0,y:0}),sn=o(It),ne||(ne=sn),On=Me(vt),a=(0,p.f0)({prefix:be,data:tt,payload:{},globalStart:It,displacement:pe(ne,sn),localStart:sn,isTouch:On},Ae),Ae.manual||(On?(R.B.bind(document,"touchstart",_,!0),R.B.bind(document,"touchcancel",Y,!0),R.B.bind(document,"touchmove",l,!0),R.B.bind(document,"touchend",f,!0)):(R.B.bind(document,"mousemove",l),R.B.bind(document,"dragstart",he),R.B.bind(document,"selectstart",he),R.B.bind(document,"mousedown",Dn,!0),R.B.bind(document,"mouseup",Dn,!0)),R.B.bind(document,"keyup",d),e.on("element.hover",x),e.on("element.out",$)),s("init"),Ae.autoActivate&&l(Q,!0)}e.on("diagram.destroy",Y),this.init=Se,this.move=l,this.hover=x,this.out=$,this.end=f,this.cancel=Y,this.context=function(){return a},this.setOptions=function(Q){(0,p.f0)(r,Q)}}Ct.$inject=["eventBus","canvas","selection","elementRegistry"];var zt={__depends__:[cr,b.Z],dragging:["type",Ct]};function ln(e,t,n){this._canvas=n,this._opts=(0,p.f0)({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var a=i._toBorderPoint(r);i.startScroll(a)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}ln.$inject=["config.autoScroll","eventBus","canvas"],ln.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var o=0,s=0,c=0;c<4;c++)Cn(a[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(c===0?o=n.scrollStep:c==1?s=n.scrollStep:c==2?o=-n.scrollStep:c==3&&(s=-n.scrollStep));(o!==0||s!==0)&&(t.scroll({dx:o,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function Cn(e,t,n){return t<e&&e<n}ln.prototype.stopScroll=function(){clearTimeout(this._scrolling)},ln.prototype.setOptions=function(e){this._opts=(0,p.f0)({},this._opts,e)},ln.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=(0,Pe.jt)(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};var ti={__depends__:[zt],__init__:["autoScroll"],autoScroll:["type",ln]};function Br(e){this._commandStack=e.get("commandStack",!1)}Br.$inject=["injector"],Br.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};var ci={__init__:["rules"],rules:["type",Br]},Tn=z(64129),Wn=z(67887),Wo=z(76757),Go=z.n(Wo),xr=Math.round,Vo=Math.max;function Ko(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function Yo(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var ba=10;function Zo(e,t){var n,i;for(n=0;i=e[n];n++)if((0,Tn.tW)(i,t)<=ba)return{point:e[n],bendpoint:!0,index:n};return null}function Xo(e,t){var n=Go()(Ko(t,ba),Yo(e)),i=n[0],r=n[n.length-1],a;return i?i!==r?i.segment2!==r.segment2?(a=Vo(i.segment2,r.segment2)-1,{point:e[a],bendpoint:!0,index:a}):{point:{x:xr(i.x+r.x)/2,y:xr(i.y+r.y)/2},index:i.segment2}:{point:{x:xr(i.x),y:xr(i.y)},index:i.segment2}:null}function kr(e,t){return Zo(e,t)||Xo(e,t)}var xa="djs-bendpoint",Sa="djs-segment-dragger";function Jo(e,t){var n=(0,Pe.jt)(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var a=e.viewbox();return{x:a.x+(n.x-r.x)/a.scale,y:a.y+(n.y-r.y)/a.scale}}function jr(e,t,n){var i=Jo(e,n),r=kr(t,i);return r}function Hr(e,t){var n=(0,ae.Ue)("g");(0,ae.Sh)(n).add(xa),(0,ae.R3)(e,n);var i=(0,ae.Ue)("circle");(0,ae.Lj)(i,{cx:0,cy:0,r:4}),(0,ae.Sh)(i).add("djs-visual"),(0,ae.R3)(n,i);var r=(0,ae.Ue)("circle");return(0,ae.Lj)(r,{cx:0,cy:0,r:10}),(0,ae.Sh)(r).add("djs-hit"),(0,ae.R3)(n,r),t&&(0,ae.Sh)(n).add(t),n}function qo(e,t,n,i){var r=(0,ae.Ue)("g");(0,ae.R3)(e,r);var a=14,o=3,s=11,c=Qo(t,n,i),l=o+s,f=(0,ae.Ue)("rect");(0,ae.Lj)(f,{x:-a/2,y:-o/2,width:a,height:o}),(0,ae.Sh)(f).add("djs-visual"),(0,ae.R3)(r,f);var d=(0,ae.Ue)("rect");return(0,ae.Lj)(d,{x:-c/2,y:-l/2,width:c,height:l}),(0,ae.Sh)(d).add("djs-hit"),(0,ae.R3)(r,d),(0,Wn.U1)(r,i==="v"?90:0,0,0),r}function wa(e,t,n){var i=(0,ae.Ue)("g"),r=(0,Tn.SO)(t,n),a=(0,Tn.Or)(t,n);return(0,ae.R3)(e,i),qo(i,t,n,a),(0,ae.Sh)(i).add(Sa),(0,ae.Sh)(i).add(a==="h"?"horizontal":"vertical"),(0,Wn.Iu)(i,r.x,r.y),i}function Fr(e){return Math.abs(Math.round(e*2/3))}function Qo(e,t,n){var i=t.x-e.x,r=t.y-e.y;return Fr(n==="h"?i:r)}var es=z(64592),zr=z.n(es),gi=z(18437);function Ta(e,t,n,i,r){function a(Q,ne,be){var Ae=Q.index,tt=Q.point,vt,It,sn,Dn,On,$i;return Ae<=0||Q.bendpoint?!1:(vt=ne[Ae-1],It=ne[Ae],sn=(0,Tn.SO)(vt,It),Dn=(0,Tn.Or)(vt,It),On=Math.abs(tt.x-sn.x),$i=Math.abs(tt.y-sn.y),Dn&&On<=be&&$i<=be)}function o(Q,ne){var be=Q.waypoints,Ae,tt,vt,It;return ne.index<=0||ne.bendpoint||(Ae={start:be[ne.index-1],end:be[ne.index]},tt=(0,Tn.Or)(Ae.start,Ae.end),!tt)?null:(tt==="h"?vt=Ae.end.x-Ae.start.x:vt=Ae.end.y-Ae.start.y,It=Fr(vt)/2,It)}function s(Q,ne){var be=ne.waypoints,Ae=jr(t,be,Q),tt;if(Ae)return tt=o(ne,Ae),a(Ae,be,tt)?r.start(Q,ne,Ae.index):i.start(Q,ne,Ae.index,!Ae.bendpoint),!0}function c(Q,ne,be){R.B.bind(Q,ne,function(Ae){n.triggerMouseEvent(ne,Ae,be),Ae.stopPropagation()})}function l(Q,ne){var be=t.getLayer("overlays"),Ae=(0,R.IO)('.djs-bendpoints[data-element-id="'+zr()(Q.id)+'"]',be);return!Ae&&ne&&(Ae=(0,ae.Ue)("g"),(0,ae.Lj)(Ae,{"data-element-id":Q.id}),(0,ae.Sh)(Ae).add("djs-bendpoints"),(0,ae.R3)(be,Ae),c(Ae,"mousedown",Q),c(Ae,"click",Q),c(Ae,"dblclick",Q)),Ae}function f(Q,ne){return(0,R.IO)('.djs-segment-dragger[data-segment-idx="'+Q+'"]',ne)}function d(Q,ne){ne.waypoints.forEach(function(be,Ae){var tt=Hr(Q);(0,ae.R3)(Q,tt),(0,Wn.Iu)(tt,be.x,be.y)}),Hr(Q,"floating")}function m(Q,ne){for(var be=ne.waypoints,Ae,tt,vt,It=1;It<be.length;It++)Ae=be[It-1],tt=be[It],(0,Tn.Or)(Ae,tt)&&(vt=wa(Q,Ae,tt),(0,ae.Lj)(vt,{"data-segment-idx":It}),c(vt,"mousemove",ne))}function _(Q){(0,p.Ed)((0,R.Kt)("."+xa,Q),function(ne){(0,ae.Od)(ne)})}function x(Q){(0,p.Ed)((0,R.Kt)("."+Sa,Q),function(ne){(0,ae.Od)(ne)})}function $(Q){var ne=l(Q);return ne||(ne=l(Q,!0),d(ne,Q),m(ne,Q)),ne}function Y(Q){var ne=l(Q);ne&&(x(ne),_(ne),m(ne,Q),d(ne,Q))}function Te(Q,ne){var be=(0,R.IO)(".floating",Q),Ae=ne.point;be&&(0,Wn.Iu)(be,Ae.x,Ae.y)}function Se(Q,ne,be){var Ae=f(ne.index,Q),tt=be[ne.index-1],vt=be[ne.index],It=ne.point,sn=(0,Tn.SO)(tt,vt),Dn=(0,Tn.Or)(tt,vt),On,$i;Ae&&(On=ts(Ae),$i={x:It.x-sn.x,y:It.y-sn.y},Dn==="v"&&($i={x:$i.y,y:$i.x}),(0,Wn.Iu)(On,$i.x,$i.y))}e.on("connection.changed",function(Q){Y(Q.element)}),e.on("connection.remove",function(Q){var ne=l(Q.element);ne&&(0,ae.Od)(ne)}),e.on("element.marker.update",function(Q){var ne=Q.element,be;ne.waypoints&&(be=$(ne),Q.add?(0,ae.Sh)(be).add(Q.marker):(0,ae.Sh)(be).remove(Q.marker))}),e.on("element.mousemove",function(Q){var ne=Q.element,be=ne.waypoints,Ae,tt;if(be){if(Ae=l(ne,!0),tt=jr(t,be,Q.originalEvent),!tt)return;Te(Ae,tt),tt.bendpoint||Se(Ae,tt,be)}}),e.on("element.mousedown",function(Q){if((0,gi.Id)(Q)){var ne=Q.originalEvent,be=Q.element;if(be.waypoints)return s(ne,be)}}),e.on("selection.changed",function(Q){var ne=Q.newSelection,be=ne[0];be&&be.waypoints&&$(be)}),e.on("element.hover",function(Q){var ne=Q.element;ne.waypoints&&($(ne),n.registerEvent(Q.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(Q){n.unregisterEvent(Q.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(Q){var ne=Q.element,be=Q.newId;if(ne.waypoints){var Ae=l(ne);Ae&&(0,ae.Lj)(Ae,{"data-element-id":be})}}),this.addHandles=$,this.updateHandles=Y,this.getBendpointsContainer=l,this.getSegmentDragger=f}Ta.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function ts(e){return(0,R.IO)(".djs-visual",e)}var Ra=Math.round,Ni="reconnectStart",Bi="reconnectEnd",ur="updateWaypoints";function Ur(e,t,n,i,r,a){this._injector=e,this.start=function(o,s,c,l){var f=n.getGraphics(s),d=s.source,m=s.target,_=s.waypoints,x;!l&&c===0?x=Ni:!l&&c===_.length-1?x=Bi:x=ur;var $=x===ur?"connection.updateWaypoints":"connection.reconnect",Y=r.allowed($,{connection:s,source:d,target:m});Y===!1&&(Y=r.allowed($,{connection:s,source:m,target:d})),Y!==!1&&i.init(o,"bendpoint.move",{data:{connection:s,connectionGfx:f,context:{allowed:Y,bendpointIndex:c,connection:s,source:d,target:m,insert:l,type:x}}})},t.on("bendpoint.move.hover",function(o){var s=o.context,c=s.connection,l=c.source,f=c.target,d=o.hover,m=s.type;s.hover=d;var _;if(d){var x=m===ur?"connection.updateWaypoints":"connection.reconnect";if(_=s.allowed=r.allowed(x,{connection:c,source:m===Ni?d:l,target:m===Bi?d:f}),_){s.source=m===Ni?d:l,s.target=m===Bi?d:f;return}_===!1&&(_=s.allowed=r.allowed(x,{connection:c,source:m===Bi?d:f,target:m===Ni?d:l})),_&&(s.source=m===Bi?d:f,s.target=m===Ni?d:l)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(o){var s=o.context,c=s.type;s.hover=null,s.source=null,s.target=null,c!==ur&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(o){var s=o.context,c=s.allowed,l=s.bendpointIndex,f=s.connection,d=s.insert,m=f.waypoints.slice(),_=s.source,x=s.target,$=s.type,Y=s.hints||{},Te={x:Ra(o.x),y:Ra(o.y)};if(!c)return!1;$===ur?(d?m.splice(l,0,Te):m[l]=Te,Y.bendpointMove={insert:d,bendpointIndex:l},m=this.cropWaypoints(f,m),a.updateWaypoints(f,(0,ge.Re)(m),Y)):($===Ni?(Y.docking="source",Sr(s)&&(Y.docking="target",Y.newWaypoints=m.reverse())):$===Bi&&(Y.docking="target",Sr(s)&&(Y.docking="source",Y.newWaypoints=m.reverse())),a.reconnect(f,_,x,Te,Y))},this)}Ur.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Ur.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function Sr(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===Ni)return t&&i&&t===i&&n!==i;if(r===Bi)return t&&n&&t===n&&n!==i}var ns="reconnectStart",is="reconnectEnd",Ca="updateWaypoints",lr="connect-ok",wr="connect-not-ok",Pa="connect-hover",Aa="djs-updating",Da="djs-element-hidden",Ma=1100;function ni(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var o=a.context,s=o.bendpointIndex,c=o.connection,l=o.insert,f=c.waypoints,d=f.slice();o.waypoints=f,l&&d.splice(s,0,{x:a.x,y:a.y}),c.waypoints=d;var m=o.draggerGfx=Hr(i.getLayer("overlays"));(0,ae.Sh)(m).add("djs-dragging"),i.addMarker(c,Da),i.addMarker(c,Aa)}),n.on("bendpoint.move.hover",function(a){var o=a.context,s=o.allowed,c=o.hover,l=o.type;if(c){if(i.addMarker(c,Pa),l===Ca)return;s?(i.removeMarker(c,wr),i.addMarker(c,lr)):s===!1&&(i.removeMarker(c,lr),i.addMarker(c,wr))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Ma,function(a){var o=a.context,s=o.hover,c=o.target;s&&(i.removeMarker(s,Pa),i.removeMarker(s,c?lr:wr))}),n.on("bendpoint.move.move",function(a){var o=a.context,s=o.allowed,c=o.bendpointIndex,l=o.draggerGfx,f=o.hover,d=o.type,m=o.connection,_=m.source,x=m.target,$=m.waypoints.slice(),Y={x:a.x,y:a.y},Te=o.hints||{},Se={};r&&(Te.connectionStart&&(Se.connectionStart=Te.connectionStart),Te.connectionEnd&&(Se.connectionEnd=Te.connectionEnd),d===ns?Sr(o)?(Se.connectionEnd=Se.connectionEnd||Y,Se.source=x,Se.target=f||_,$=$.reverse()):(Se.connectionStart=Se.connectionStart||Y,Se.source=f||_,Se.target=x):d===is?Sr(o)?(Se.connectionStart=Se.connectionStart||Y,Se.source=f||x,Se.target=_,$=$.reverse()):(Se.connectionEnd=Se.connectionEnd||Y,Se.source=_,Se.target=f||x):(Se.noCropping=!0,Se.noLayout=!0,$[c]=Y),d===Ca&&($=e.cropWaypoints(m,$)),Se.waypoints=$,r.drawPreview(o,s,Se)),(0,Wn.Iu)(l,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Ma,function(a){var o=a.context,s=o.connection,c=o.draggerGfx,l=o.hover,f=o.target,d=o.waypoints;s.waypoints=d,(0,ae.Od)(c),i.removeMarker(s,Aa),i.removeMarker(s,Da),l&&(i.removeMarker(l,lr),i.removeMarker(l,f?lr:wr)),r&&r.cleanUp(o)})}ni.$inject=["bendpointMove","injector","eventBus","canvas"];var Oa="connect-hover",Nn="djs-updating";function Ia(e,t,n){return $r(e,t,e[t]+n)}function $r(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function rs(e,t,n,i){var r=Math.max(t[i],n[i]),a=Math.min(t[i],n[i]),o=20,s=Math.min(Math.max(a+o,e[i]),r-o);return $r(t,i,s)}function Ki(e){return e==="x"?"y":"x"}function La(e,t,n){var i,r;return e.original?e.original:(i=(0,ge.wS)(t),r=Ki(n),$r(e,r,i[r]))}function Wr(e,t,n,i,r,a){var o=e.get("connectionDocking",!1);this.start=function(d,m,_){var x,$=n.getGraphics(m),Y=_-1,Te=_,Se=m.waypoints,Q=Se[Y],ne=Se[Te],be=jr(n,Se,d),Ae,tt,vt;Ae=(0,Tn.Or)(Q,ne),Ae&&(tt=Ae==="v"?"x":"y",Y===0&&(Q=La(Q,m.source,tt)),Te===Se.length-1&&(ne=La(ne,m.target,tt)),be?vt=be.point:vt={x:(Q.x+ne.x)/2,y:(Q.y+ne.y)/2},x={connection:m,segmentStartIndex:Y,segmentEndIndex:Te,segmentStart:Q,segmentEnd:ne,axis:tt,dragPosition:vt},i.init(d,vt,"connectionSegment.move",{cursor:tt==="x"?"resize-ew":"resize-ns",data:{connection:m,connectionGfx:$,context:x}}))};function s(d,m){if(!o)return m;var _=d.waypoints,x;return d.waypoints=m,x=o.getCroppedWaypoints(d),d.waypoints=_,x}function c(d){r.update("connection",d.connection,d.connectionGfx)}function l(d,m,_){var x=d.newWaypoints,$=d.segmentStartIndex+m,Y=x[$],Te=d.segmentEndIndex+m,Se=x[Te],Q=Ki(d.axis),ne=rs(_,Y,Se,Q);(0,Wn.Iu)(d.draggerGfx,ne.x,ne.y)}function f(d,m){var _=0,x=d.filter(function($,Y){return(0,Tn.ZS)(d[Y-1],d[Y+1],$)?(_=Y<=m?_-1:_,!1):!0});return{waypoints:x,segmentOffset:_}}t.on("connectionSegment.move.start",function(d){var m=d.context,_=d.connection,x=n.getLayer("overlays");m.originalWaypoints=_.waypoints.slice(),m.draggerGfx=wa(x,m.segmentStart,m.segmentEnd),(0,ae.Sh)(m.draggerGfx).add("djs-dragging"),n.addMarker(_,Nn)}),t.on("connectionSegment.move.move",function(d){var m=d.context,_=m.connection,x=m.segmentStartIndex,$=m.segmentEndIndex,Y=m.segmentStart,Te=m.segmentEnd,Se=m.axis,Q=m.originalWaypoints.slice(),ne=Ia(Y,Se,d["d"+Se]),be=Ia(Te,Se,d["d"+Se]),Ae=Q.length,tt=0;Q[x]=ne,Q[$]=be;var vt,It;x<2&&(vt=(0,ge.T8)(_.source,ne),x===1?vt==="intersect"&&(Q.shift(),Q[0]=ne,tt--):vt!=="intersect"&&(Q.unshift(Y),tt++)),$>Ae-3&&(It=(0,ge.T8)(_.target,be),$===Ae-2?It==="intersect"&&(Q.pop(),Q[Q.length-1]=be):It!=="intersect"&&Q.push(Te)),m.newWaypoints=_.waypoints=s(_,Q),l(m,tt,d),m.newSegmentStartIndex=x+tt,c(d)}),t.on("connectionSegment.move.hover",function(d){d.context.hover=d.hover,n.addMarker(d.hover,Oa)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(d){var m=d.context.hover;m&&n.removeMarker(m,Oa)}),t.on("connectionSegment.move.cleanup",function(d){var m=d.context,_=m.connection;m.draggerGfx&&(0,ae.Od)(m.draggerGfx),n.removeMarker(_,Nn)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(d){var m=d.context,_=m.connection;_.waypoints=m.originalWaypoints,c(d)}),t.on("connectionSegment.move.end",function(d){var m=d.context,_=m.connection,x=m.newWaypoints,$=m.newSegmentStartIndex;x=x.map(function(be){return{original:be.original,x:Math.round(be.x),y:Math.round(be.y)}});var Y=f(x,$),Te=Y.waypoints,Se=s(_,Te),Q=Y.segmentOffset,ne={segmentMove:{segmentStartIndex:m.segmentStartIndex,newSegmentStartIndex:$+Q}};a.updateWaypoints(_,Se,ne)})}Wr.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Tr=Math.abs,Gr=Math.round;function as(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],Tr(r-e)<=n)return r}function Na(e){return{x:e.x,y:e.y}}function Bc(e){return{x:e.x+e.width,y:e.y}}function kc(e){return{x:e.x,y:e.y+e.height}}function Yi(e){return{x:e.x+e.width,y:e.y+e.height}}function ii(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:Gr(e.x+e.width/2),y:Gr(e.y+e.height/2)}}function an(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function fn(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],a=e.snapped=e.snapped||{};return n===!1?a[t]=!1:(a[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function Ba(e){return e.children||[]}var os=Math.abs,Vr=Math.round,Kr=10;function ka(e){function t(a,o){if((0,p.kJ)(a)){for(var s=a.length;s--;)if(os(a[s]-o)<=Kr)return a[s]}else{a=+a;var c=o%a;if(c<Kr)return o-c;if(c>a-Kr)return o-c+a}return o}function n(a){if(a.width)return{x:Vr(a.width/2+a.x),y:Vr(a.height/2+a.y)}}function i(a){var o=a.snapPoints,s=a.connection,c=s.waypoints,l=a.segmentStart,f=a.segmentStartIndex,d=a.segmentEnd,m=a.segmentEndIndex,_=a.axis;if(o)return o;var x=[c[f-1],l,d,c[m+1]];return f<2&&x.unshift(n(s.source)),m>c.length-3&&x.unshift(n(s.target)),a.snapPoints=o={horizontal:[],vertical:[]},(0,p.Ed)(x,function($){$&&($=$.original||$,_==="y"&&o.horizontal.push($.y),_==="x"&&o.vertical.push($.x))}),o}e.on("connectionSegment.move.move",1500,function(a){var o=a.context,s=i(o),c=a.x,l=a.y,f,d;if(s){f=t(s.vertical,c),d=t(s.horizontal,l);var m=c-f,_=l-d;(0,p.f0)(a,{dx:a.dx-m,dy:a.dy-_,x:f,y:d}),(m||s.vertical.indexOf(c)!==-1)&&fn(a,"x",f),(_||s.horizontal.indexOf(l)!==-1)&&fn(a,"y",d)}});function r(a){var o=a.snapPoints,s=a.connection.waypoints,c=a.bendpointIndex;if(o)return o;var l=[s[c-1],s[c+1]];return a.snapPoints=o={horizontal:[],vertical:[]},(0,p.Ed)(l,function(f){f&&(f=f.original||f,o.horizontal.push(f.y),o.vertical.push(f.x))}),o}e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var o=a.context,s=r(o),c=o.hover,l=c&&n(c),f=a.x,d=a.y,m,_;if(s){m=t(l?s.vertical.concat([l.x]):s.vertical,f),_=t(l?s.horizontal.concat([l.y]):s.horizontal,d);var x=f-m,$=d-_;(0,p.f0)(a,{dx:a.dx-x,dy:a.dy-$,x:a.x-x,y:a.y-$}),(x||s.vertical.indexOf(f)!==-1)&&fn(a,"x",m),($||s.horizontal.indexOf(d)!==-1)&&fn(a,"y",_)}})}ka.$inject=["eventBus"];var u={__depends__:[zt,ci],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Ta],bendpointMove:["type",Ur],bendpointMovePreview:["type",ni],connectionSegmentMove:["type",Wr],bendpointSnapping:["type",ka]};function h(e,t,n,i){function r(o,s){return i.allowed("connection.create",{source:o,target:s})}function a(o,s){return r(s,o)}e.on("connect.hover",function(o){var s=o.context,c=s.start,l=o.hover,f;if(s.hover=l,f=s.canExecute=r(c,l),!(0,p.kK)(f)){if(f!==!1){s.source=c,s.target=l;return}f=s.canExecute=a(c,l),!(0,p.kK)(f)&&f!==!1&&(s.source=l,s.target=c)}}),e.on(["connect.out","connect.cleanup"],function(o){var s=o.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(o){var s=o.context,c=s.canExecute,l=s.connectionStart,f={x:o.x,y:o.y},d=s.source,m=s.target;if(!c)return!1;var _=null,x={connectionStart:v(s)?f:l,connectionEnd:v(s)?l:f};(0,p.Kn)(c)&&(_=c),n.connect(d,m,_,x)}),this.start=function(o,s,c,l){(0,p.Kn)(c)||(l=c,c=(0,ge.wS)(s)),t.init(o,"connect",{autoActivate:l,data:{shape:s,context:{start:s,connectionStart:c}}})}}h.$inject=["eventBus","dragging","modeling","rules"];function v(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var E=1100,C=900,H="connect-ok",q="connect-not-ok";function me(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var a=r.context,o=a.canExecute,s=a.hover,c=a.source,l=a.start,f=a.startPosition,d=a.target,m=a.connectionStart||f,_=a.connectionEnd||{x:r.x,y:r.y},x=m,$=_;v(a)&&(x=_,$=m),i.drawPreview(a,o,{source:c||l,target:d||s,connectionStart:x,connectionEnd:$})}),t.on("connect.hover",C,function(r){var a=r.context,o=r.hover,s=a.canExecute;s!==null&&n.addMarker(o,s?H:q)}),t.on(["connect.out","connect.cleanup"],E,function(r){var a=r.hover;a&&(n.removeMarker(a,H),n.removeMarker(a,q))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}me.$inject=["injector","eventBus","canvas"];var je={__depends__:[b.Z,ci,zt],__init__:["connectPreview"],connect:["type",h],connectPreview:["type",me]},Ze="djs-connection-preview";function qe(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}qe.$inject=["injector","canvas","graphicsFactory","elementFactory"],qe.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,a=n.source,o=n.target,s=n.waypoints,c=n.connectionStart,l=n.connectionEnd,f=n.noLayout,d=n.noCropping,m=n.noNoop,_,x=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),(0,ae.ZH)(i),r||(r=e.getConnection=at(function($,Y,Te){return x.getConnection($,Y,Te)})),t&&(_=r(t,a,o)),!_){!m&&this.drawNoopPreview(i,n);return}_.waypoints=s||[],this._layouter&&!f&&(_.waypoints=this._layouter.layoutConnection(_,{source:a,target:o,connectionStart:c,connectionEnd:l,waypoints:n.waypoints||_.waypoints})),(!_.waypoints||!_.waypoints.length)&&(_.waypoints=[a?(0,ge.wS)(a):c,o?(0,ge.wS)(o):l]),this._connectionDocking&&(a||o)&&!d&&(_.waypoints=this._connectionDocking.getCroppedWaypoints(_,a,o)),this._graphicsFactory.drawConnection(i,_)},qe.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||(0,ge.wS)(n),a=t.connectionEnd||(0,ge.wS)(i),o=this.cropWaypoints(r,a,n,i),s=this.createNoopConnection(o[0],o[1]);(0,ae.R3)(e,s)},qe.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,a=n&&r.getShapePath(n),o=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return e=n&&(0,ge.Hz)(a,s,!0)||e,t=i&&(0,ge.Hz)(o,s,!1)||t,[e,t]},qe.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&(0,ae.Od)(e.connectionPreviewGfx)},qe.prototype.getConnection=function(e){var t=Vt(e);return this._elementFactory.createConnection(t)},qe.prototype.createConnectionPreviewGfx=function(){var e=(0,ae.Ue)("g");return(0,ae.Lj)(e,{pointerEvents:"none"}),(0,ae.Sh)(e).add(Ze),(0,ae.R3)(this._canvas.getActiveLayer(),e),e},qe.prototype.createNoopConnection=function(e,t){var n=(0,ae.Ue)("polyline");return(0,ae.Lj)(n,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),(0,ae.Lj)(n,{points:[e.x,e.y,t.x,t.y]}),n};function at(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function Vt(e){return(0,p.Kn)(e)?e:{}}var Ut={__init__:["connectionPreview"],connectionPreview:["type",qe]},Ke=Math.min,gt=Math.max;function Yt(e){e.preventDefault()}function Pt(e){e.stopPropagation()}function Ft(e){return e.nodeType===Node.TEXT_NODE}function $t(e){return[].slice.call(e)}function Ne(e){this.container=e.container,this.parent=(0,R.H6)('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=(0,R.IO)("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=(0,p.ak)(this.autoResize,this),this.handlePaste=(0,p.ak)(this.handlePaste,this)}Ne.prototype.create=function(e,t,n,i){var r=this,a=this.parent,o=this.content,s=this.container;i=this.options=i||{},t=this.style=t||{};var c=(0,p.ei)(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);(0,p.f0)(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=(0,p.ei)(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return(0,p.f0)(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&(0,p.f0)(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),o.innerText=n,R.B.bind(o,"keydown",this.keyHandler),R.B.bind(o,"mousedown",Pt),R.B.bind(o,"paste",r.handlePaste),i.autoResize&&R.B.bind(o,"input",this.autoResize),i.resizable&&this.resizable(t),s.appendChild(a),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),a},Ne.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}},Ne.prototype.insertText=function(e){e=Ye(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)},Ne.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,a=t.endOffset,o=t.commonAncestorContainer,s=$t(o.childNodes),c,l;if(Ft(o)){var f=n.textContent;n.textContent=f.substring(0,r)+e+f.substring(a),c=n,l=r+e.length}else if(n===this.content&&i===this.content){var d=document.createTextNode(e);this.content.insertBefore(d,s[r]),c=d,l=d.textContent.length}else{var m=s.indexOf(n),_=s.indexOf(i);s.forEach(function(x,$){$===m?x.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(a):$>m&&$<=_&&(0,R.Od)(x)}),c=n,l=r+e.length}c&&l!==void 0&&setTimeout(function(){self.setSelection(c,l)})},Ne.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},Ne.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,o=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=(0,R.H6)('<div class="djs-direct-editing-resize-handle"></div>');var s,c,l,f,d=function(x){Yt(x),Pt(x),s=x.clientX,c=x.clientY;var $=t.getBoundingClientRect();l=$.width,f=$.height,R.B.bind(document,"mousemove",m),R.B.bind(document,"mouseup",_)},m=function(x){Yt(x),Pt(x);var $=Ke(gt(l+x.clientX-s,i),a),Y=Ke(gt(f+x.clientY-c,r),o);t.style.width=$+"px",t.style.height=Y+"px",e.resizeHandler({width:l,height:f,dx:x.clientX-s,dy:x.clientY-c})},_=function(x){Yt(x),Pt(x),R.B.unbind(document,"mousemove",m,!1),R.B.unbind(document,"mouseup",_,!1)};R.B.bind(n,"mousedown",d)}(0,p.f0)(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},Ne.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),R.B.unbind(t,"keydown",this.keyHandler),R.B.unbind(t,"mousedown",Pt),R.B.unbind(t,"input",this.autoResize),R.B.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),(0,R.Od)(n)),(0,R.Od)(e)},Ne.prototype.getValue=function(){return this.content.innerText.trim()},Ne.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t},Ne.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function Ye(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Xe(e,t){this._eventBus=e,this._providers=[],this._textbox=new Ne({container:t.getContainer(),keyHandler:(0,p.ak)(this._handleKey,this),resizeHandler:(0,p.ak)(this._handleResize,this)})}Xe.$inject=["eventBus","canvas"],Xe.prototype.registerProvider=function(e){this._providers.push(e)},Xe.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))},Xe.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Xe.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},Xe.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Xe.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),a=e.context.text;(r!==a||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Xe.prototype.getValue=function(){return this._textbox.getValue()},Xe.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()},Xe.prototype._handleResize=function(e){this._fire("resize",e)},Xe.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=(0,p.sE)(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};var Nt={__depends__:[mt.Z],__init__:["directEditing"],directEditing:["type",Xe]},kt=z(22494),Jt=".entry",Qt=1e3;function Ot(e,t,n){this._eventBus=t,this._overlays=n;var i=(0,p.$K)(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}Ot.$inject=["config.contextPad","eventBus","overlays"],Ot.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",function(n){var i=n.newSelection;i.length===1?t.open(i[0]):t.close()}),e.on("elements.delete",function(n){var i=n.elements;(0,p.Ed)(i,function(r){t.isOpen(r)&&t.close()})}),e.on("element.changed",function(n){var i=n.element,r=t._current;r&&r.element===i&&t.open(i,!0)})},Ot.prototype.registerProvider=function(e,t){t||(t=e,e=Qt),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})},Ot.prototype.getEntries=function(e){var t=this._getProviders(),n={};return(0,p.Ed)(t,function(i){var r=i.getContextPadEntries(e);(0,p.mf)(r)?n=r(n):(0,p.Ed)(r,function(a,o){n[o]=a})}),n},Ot.prototype.trigger=function(e,t,n){var i=this._current.element,r=this._current.entries,a,o,s,c=t.delegateTarget||t.target;if(!c)return t.preventDefault();if(a=r[(0,R.Lj)(c,"data-action")],o=a.action,s=t.originalEvent||t,(0,p.mf)(o)){if(e==="click")return o(s,i,n)}else if(o[e])return o[e](s,i,n);t.preventDefault()},Ot.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},Ot.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Ot.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;(0,p.Ed)(t,function(r,a){var o=r.group||"default",s=(0,R.H6)(r.html||'<div class="entry" draggable="true"></div>'),c;(0,R.Lj)(s,"data-action",a),c=(0,R.IO)("[data-group="+o+"]",i),c||(c=(0,R.H6)('<div class="group" data-group="'+o+'"></div>'),i.appendChild(c)),c.appendChild(s),r.className&&_t(s,r.className),r.title&&(0,R.Lj)(s,"title",r.title),r.imageUrl&&s.appendChild((0,R.H6)('<img src="'+r.imageUrl+'">'))}),(0,R.Sh)(i).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},Ot.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=(0,R.H6)('<div class="djs-context-pad"></div>'),r=(0,p.f0)({html:i},this._overlaysConfig);R.cl.bind(i,Jt,"click",function(o){t.trigger("click",o)}),R.cl.bind(i,Jt,"dragstart",function(o){t.trigger("dragstart",o)}),R.B.bind(i,"mousedown",function(o){o.stopPropagation()}),this._overlayId=n.add(e,"context-pad",r);var a=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:a}),a},Ot.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},Ot.prototype.isOpen=function(e){return!!this._current&&(e?this._current.element===e:!0)};function _t(e,t){var n=(0,R.Sh)(e),i=(0,p.kJ)(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}var ht={__depends__:[mt.Z,kt.Z],contextPad:["type",Ot]},qt=z(93249),Rr=["marker-start","marker-mid","marker-end"],un=["circle","ellipse","line","path","polygon","polyline","rect"];function At(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",function(){(0,p.Ed)(r._clonedMarkers,function(a){(0,ae.Od)(a)}),r._clonedMarkers={}})}At.$inject=["elementRegistry","eventBus","canvas","styles"],At.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},At.prototype.addDragger=function(e,t,n){n=n||this.getGfx(e);var i=(0,ae.d9)(n),r=n.getBoundingClientRect();return this._cloneMarkers((0,qt.s)(i)),(0,ae.Lj)(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),(0,ae.R3)(t,i),i},At.prototype.addFrame=function(e,t){var n=(0,ae.Ue)("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return(0,ae.R3)(t,n),n},At.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);pr(e)&&Rr.forEach(function(i){if((0,ae.Lj)(e,i)){var r=Ti(e,i,t._canvas.getContainer());t._cloneMarker(e,r,i)}})},At.prototype._cloneMarker=function(e,t,n){var i=t.id,r=this._clonedMarkers[i];if(!r){r=(0,ae.d9)(t);var a=i+"-clone";r.id=a,(0,ae.Sh)(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var o=(0,R.IO)("defs",this._canvas._svg);o||(o=(0,ae.Ue)("defs"),(0,ae.R3)(this._canvas._svg,o)),(0,ae.R3)(o,r)}var s=Pn(this._clonedMarkers[i].id);(0,ae.Lj)(e,n,s)};function Ti(e,t,n){var i=ki((0,ae.Lj)(e,t));return(0,R.IO)("marker#"+i,n||document)}function ki(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function Pn(e){return"url(#"+e+")"}function pr(e){return un.indexOf(e.nodeName)!==-1}var yi={__init__:["previewSupport"],previewSupport:["type",At]},Ce="drop-ok",Le="drop-not-ok",dt="attach-ok",hn="new-parent",Gn="create",ri=2e3;function Ri(e,t,n,i,r){function a(c,l,f,d,m){if(!l)return!1;c=(0,p.hX)(c,function(Se){var Q=Se.labelTarget;return!Se.parent&&!(pn(Se)&&c.indexOf(Q)!==-1)});var _=(0,p.sE)(c,function(Se){return!Jn(Se)}),x=!1,$=!1,Y=!1;ui(c)&&(x=r.allowed("shape.attach",{position:f,shape:_,target:l})),x||(ui(c)?Y=r.allowed("shape.create",{position:f,shape:_,source:d,target:l}):Y=r.allowed("elements.create",{elements:c,position:f,target:l}));var Te=m.connectionTarget;return Y||x?(_&&d&&($=r.allowed("connection.create",{source:Te===d?_:d,target:Te===d?d:_,hints:{targetParent:l,targetAttach:x}})),{attach:x,connect:$}):Y===null||x===null?null:!1}function o(c,l){[dt,Ce,Le,hn].forEach(function(f){f===l?e.addMarker(c,f):e.removeMarker(c,f)})}n.on(["create.move","create.hover"],function(c){var l=c.context,f=l.elements,d=c.hover,m=l.source,_=l.hints||{};if(!d){l.canExecute=!1,l.target=null;return}En(c);var x={x:c.x,y:c.y},$=l.canExecute=d&&a(f,d,x,m,_);d&&$!==null&&(l.target=d,$&&$.attach?o(d,dt):o(d,$?hn:Le))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&o(l,null)}),n.on("create.end",function(c){var l=c.context,f=l.source,d=l.shape,m=l.elements,_=l.target,x=l.canExecute,$=x&&x.attach,Y=x&&x.connect,Te=l.hints||{};if(x===!1||!_)return!1;En(c);var Se={x:c.x,y:c.y};Y?d=i.appendShape(f,d,Se,_,{attach:$,connection:Y===!0?{}:Y,connectionTarget:Te.connectionTarget}):(m=i.createElements(m,Se,_,(0,p.f0)({},Te,{attach:$})),d=(0,p.sE)(m,function(Q){return!Jn(Q)})),(0,p.f0)(l,{elements:m,shape:d}),(0,p.f0)(c,{elements:m,shape:d})});function s(){var c=t.context();c&&c.prefix===Gn&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],ri,function(){n.off("elements.changed",s)})}),this.start=function(c,l,f){(0,p.kJ)(l)||(l=[l]);var d=(0,p.sE)(l,function(_){return!Jn(_)});if(d){f=(0,p.f0)({elements:l,hints:{},shape:d},f||{}),(0,p.Ed)(l,function(_){(0,p.hj)(_.x)||(_.x=0),(0,p.hj)(_.y)||(_.y=0)});var m=(0,rn.jY)(l);(0,p.Ed)(l,function(_){Jn(_)&&(_.waypoints=(0,p.UI)(_.waypoints,function(x){return{x:x.x-m.x-m.width/2,y:x.y-m.y-m.height/2}})),(0,p.f0)(_,{x:_.x-m.x-m.width/2,y:_.y-m.y-m.height/2})}),t.init(c,Gn,{cursor:"grabbing",autoActivate:!0,data:{shape:d,elements:l,context:f}})}}}Ri.$inject=["canvas","dragging","eventBus","modeling","rules"];function En(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function Jn(e){return!!e.waypoints}function ui(e){return e&&e.length===1&&!Jn(e[0])}function pn(e){return!!e.labelTarget}var An=750;function Ci(e,t,n,i,r){function a(o){var s=(0,ae.Ue)("g");(0,ae.Lj)(s,r.cls("djs-drag-group",["no-events"]));var c=(0,ae.Ue)("g");return o.forEach(function(l){var f;l.hidden||(l.waypoints?(f=n._createContainer("connection",c),n.drawConnection((0,qt.s)(f),l)):(f=n._createContainer("shape",c),n.drawShape((0,qt.s)(f),l),(0,Wn.Iu)(f,l.x,l.y)),i.addDragger(l,s,f))}),s}t.on("create.move",An,function(o){var s=o.hover,c=o.context,l=c.elements,f=c.dragGroup;f||(f=c.dragGroup=a(l));var d;s?(f.parentNode||(d=e.getActiveLayer(),(0,ae.R3)(d,f)),(0,Wn.Iu)(f,o.x,o.y)):(0,ae.Od)(f)}),t.on("create.cleanup",function(o){var s=o.context,c=s.dragGroup;c&&(0,ae.Od)(c)})}Ci.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var fr={__depends__:[zt,yi,ci,b.Z],__init__:["create","createPreview"],create:["type",Ri],createPreview:["type",Ci]},Ei="data-id",mn=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],li=1e3;function lt(e,t,n){var i=(0,p.$K)(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}lt.$inject=["config.popupMenu","eventBus","canvas"],lt.prototype.registerProvider=function(e,t,n){n||(n=t,t=li),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})},lt.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");var n=this._getProviders(t);if(!n)return!0;var i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),a=(0,p.dp)(i)>0,o=r&&(0,p.dp)(r)>0;return!a&&!o},lt.prototype.open=function(e,t,n){var i=this._getProviders(t);if(!e)throw new Error("Element is missing");if(!i||!i.length)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={className:t,element:e,position:n},a=this._getEntries(e,i),o=this._getHeaderEntries(e,i);r.entries=(0,p.f0)({},a,o),r.container=this._createContainer(),(0,p.dp)(o)&&r.container.appendChild(this._createEntries(o,"djs-popup-header")),(0,p.dp)(a)&&r.container.appendChild(this._createEntries(a,"djs-popup-body"));var s=this._canvas,c=s.getContainer();this._attachContainer(r.container,c,n.cursor),this._bindAutoClose()},lt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),(0,R.Od)(this._current.container),this._current.container=null)},lt.prototype.isOpen=function(){return!!this._current.container},lt.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=(0,R.Lj)(t,Ei),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},lt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},lt.prototype._getEntries=function(e,t){var n={};return(0,p.Ed)(t,function(i){if(!i.getPopupMenuEntries){(0,p.Ed)(i.getEntries(e),function(a){var o=a.id;if(!o)throw new Error("every entry must have the id property set");n[o]=(0,p.CE)(a,["id"])});return}var r=i.getPopupMenuEntries(e);(0,p.mf)(r)?n=r(n):(0,p.Ed)(r,function(a,o){n[o]=a})}),n},lt.prototype._getHeaderEntries=function(e,t){var n={};return(0,p.Ed)(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;(0,p.Ed)(i.getHeaderEntries(e),function(a){var o=a.id;if(!o)throw new Error("every entry must have the id property set");n[o]=(0,p.CE)(a,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);(0,p.mf)(r)?n=r(n):(0,p.Ed)(r,function(a,o){n[o]=a})}),n},lt.prototype._getEntry=function(e){var t=this._current.entries[e];if(!t)throw new Error("entry not found");return t},lt.prototype._emit=function(e){this._eventBus.fire("popupMenu."+e)},lt.prototype._createContainer=function(){var e=(0,R.H6)('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return(0,p.f0)(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),(0,R.Sh)(e).add(n),e},lt.prototype._attachContainer=function(e,t,n){var i=this;R.cl.bind(e,".entry","click",function(r){i.trigger(r)}),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n)},lt.prototype._updateScale=function(e){var t=this._canvas.zoom(),n=this._config.scale,i,r,a=t;n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),(0,p.$K)(i)&&t<i&&(a=i),(0,p.$K)(r)&&t>r&&(a=r)),Zi(e,"scale("+a+")")},lt.prototype._assureIsInbounds=function(e,t){var n=this._canvas,i=n._container.getBoundingClientRect(),r=e.offsetLeft,a=e.offsetTop,o=e.scrollWidth,s=e.scrollHeight,c={},l,f,d={x:t.x-i.left,y:t.y-i.top};r+o>i.width&&(c.x=!0),a+s>i.height&&(c.y=!0),c.x&&c.y?(l=d.x-o+"px",f=d.y-s+"px"):c.x?(l=d.x-o+"px",f=d.y+"px"):c.y&&d.y<s?(l=d.x+"px",f="10px"):c.y&&(l=d.x+"px",f=d.y-s+"px"),(0,p.f0)(e.style,{left:l,top:f},{visibility:"visible","z-index":1e3})},lt.prototype._createEntries=function(e,t){var n=(0,R.H6)("<div>"),i=this;return(0,R.Sh)(n).add(t),(0,p.Ed)(e,function(r,a){var o=i._createEntry(r,a);n.appendChild(o)}),n},lt.prototype._createEntry=function(e,t){var n=(0,R.H6)("<div>"),i=(0,R.Sh)(n);if(i.add("entry"),e.className&&e.className.split(" ").forEach(function(a){i.add(a)}),(0,R.Lj)(n,Ei,t),e.label){var r=(0,R.H6)("<span>");r.textContent=e.label,n.appendChild(r)}return e.imageUrl&&n.appendChild((0,R.H6)('<img src="'+e.imageUrl+'" />')),e.active===!0&&i.add("active"),e.disabled===!0&&i.add("disabled"),e.title&&(n.title=e.title),n},lt.prototype._bindAutoClose=function(){this._eventBus.once(mn,this.close,this)},lt.prototype._unbindAutoClose=function(){this._eventBus.off(mn,this.close,this)};function Zi(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}var ja={__init__:["popupMenu"],popupMenu:["type",lt]};function Bn(){}Bn.prototype.get=function(){return this._data},Bn.prototype.set=function(e){this._data=e},Bn.prototype.clear=function(){var e=this._data;return delete this._data,e},Bn.prototype.isEmpty=function(){return!this._data};var et={clipboard:["type",Bn]};function jt(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}jt.$inject=["eventBus"],jt.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||$p(0,0)};function $p(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,a=e,o=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,a,o,!1,!1,!1,!1,0,null),n}var Yr={__init__:["mouse"],mouse:["type",jt]};function _i(e,t,n,i,r,a,o,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=a,this._mouse=o,this._rules=s,r.on("copyPaste.copyElement",function(c){var l=c.descriptor,f=c.element,d=c.elements;l.priority=1,l.id=f.id;var m=(0,p.sE)(d,function(_){return _===f.parent});m&&(l.parent=f.parent.id),Wp(f)&&(l.priority=2,l.host=f.host.id),Ha(f)&&(l.priority=3,l.source=f.source.id,l.target=f.target.id,l.waypoints=Gp(f)),Fa(f)&&(l.priority=4,l.labelTarget=f.labelTarget.id),(0,p.Ed)(["x","y","width","height"],function(_){(0,p.hj)(f[_])&&(l[_]=f[_])}),l.hidden=f.hidden,l.collapsed=f.collapsed}),r.on("copyPaste.pasteElements",function(c){var l=c.hints;(0,p.f0)(l,{createElementsBehavior:!1})})}_i.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],_i.prototype.copy=function(e){var t,n;return(0,p.kJ)(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree((0,p.kJ)(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n},_i.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},_i.prototype._paste=function(e,t,n,i){(0,p.Ed)(e,function(a){(0,p.hj)(a.x)||(a.x=0),(0,p.hj)(a.y)||(a.y=0)});var r=(0,rn.jY)(e);return(0,p.Ed)(e,function(a){Ha(a)&&(a.waypoints=(0,p.UI)(a.waypoints,function(o){return{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2}})),(0,p.f0)(a,{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,(0,p.f0)({},i))},_i.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return(0,p.Ed)(e,function(a,o){o=parseInt(o,10),a=(0,p.MR)(a,"priority"),(0,p.Ed)(a,function(s){var c=(0,p.f0)({},(0,p.CE)(s,["priority"]));i[s.parent]?c.parent=i[s.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c});var l;if(Ha(c)){c.source=i[s.source],c.target=i[s.target],l=i[s.id]=t.createConnection(c),r.push(l);return}if(Fa(c)){c.labelTarget=i[c.labelTarget],l=i[s.id]=t.createLabel(c),r.push(l);return}c.host&&(c.host=i[c.host]),l=i[s.id]=t.createShape(c),r.push(l)})}),r},_i.prototype.createConnection=function(e){var t=this._elementFactory.createConnection((0,p.CE)(e,["id"]));return t},_i.prototype.createLabel=function(e){var t=this._elementFactory.createLabel((0,p.CE)(e,["id"]));return t},_i.prototype.createShape=function(e){var t=this._elementFactory.createShape((0,p.CE)(e,["id"]));return t},_i.prototype.hasRelations=function(e,t){var n,i,r;return!(Ha(e)&&(i=(0,p.sE)(t,(0,p.KQ)({id:e.source.id})),r=(0,p.sE)(t,(0,p.KQ)({id:e.target.id})),!i||!r)||Fa(e)&&(n=(0,p.sE)(t,(0,p.KQ)({id:e.labelTarget.id})),!n))},_i.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],a=(0,rn.cd)(e);function o(l,f){return t.allowed("element.copy",{element:l,elements:f})}function s(l,f){var d=(0,p.sE)(r,function(m){return l===m.element});if(!d){r.push({element:l,depth:f});return}d.depth<f&&(r=c(d,r),r.push({element:d.element,depth:f}))}function c(l,f){var d=f.indexOf(l);return d!==-1&&f.splice(d,1),f}return(0,rn.om)(a,function(l,f,d){if(Fa(l))return;(0,p.Ed)(l.labels,function(_){s(_,d)});function m(_){_&&_.length&&(0,p.Ed)(_,function(x){(0,p.Ed)(x.labels,function($){s($,d)}),s(x,d)})}return(0,p.Ed)([l.attachers,l.incoming,l.outgoing],m),s(l,d),l.children}),e=(0,p.UI)(r,function(l){return l.element}),r=(0,p.UI)(r,function(l){return l.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:l.descriptor,element:l.element,elements:e}),l}),r=(0,p.MR)(r,function(l){return l.descriptor.priority}),e=(0,p.UI)(r,function(l){return l.element}),(0,p.Ed)(r,function(l){var f=l.depth;if(!n.hasRelations(l.element,e)){Hc(l.element,e);return}if(!o(l.element,e)){Hc(l.element,e);return}i[f]||(i[f]=[]),i[f].push(l.descriptor)}),i};function Wp(e){return!!e.host}function Ha(e){return!!e.waypoints}function Fa(e){return!!e.labelTarget}function Gp(e){return(0,p.UI)(e.waypoints,function(t){return t=jc(t),t.original&&(t.original=jc(t.original)),t})}function jc(e){return(0,p.f0)({},e)}function Hc(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}var Vp={__depends__:[et,fr,Yr,ci],__init__:["copyPaste"],copyPaste:["type",_i]};function za(e,t,n){(0,p.kJ)(n)||(n=[n]),(0,p.Ed)(n,function(i){(0,p.o8)(e[i])||(t[i]=e[i])})}function Kp(e,t){(0,p.kJ)(t)||(t=[t]),(0,p.Ed)(t,function(n){e[n]&&delete e[n]})}var Yp=750;function Fc(e,t,n){t.on("copyPaste.copyElement",Yp,function(a){var o=a.descriptor,s=a.element,c=o.oldBusinessObject=(0,y.SS)(s);if(o.type=s.type,za(c,o,"name"),o.di={},za(c.di,o.di,["fill","stroke","background-color","border-color","color"]),za(c.di,o,"isExpanded"),zc(o))return o;c.default&&(o.default=c.default.id)}),t.on("moddleCopy.canCopyProperty",function(a){var o=a.parent,s=a.property,c=a.propertyName,l;if(c==="processRef"&&(0,y.is)(o,"bpmn:Participant")&&(0,y.is)(s,"bpmn:Process"))return l=e.create("bpmn:Process"),n.copyElement(s,l)});var i;function r(a,o){var s=(0,y.SS)(a);a.default&&(i[a.default]={element:s,property:"default"}),a.host&&((0,y.SS)(a).attachedToRef=(0,y.SS)(o[a.host])),i=(0,p.CE)(i,(0,p.u4)(i,function(c,l,f){var d=l.element,m=l.property;return f===a.id&&(d[m]=s,c.push(a.id)),c},[]))}t.on("copyPaste.pasteElements",function(){i={}}),t.on("copyPaste.pasteElement",function(a){var o=a.cache,s=a.descriptor,c=s.oldBusinessObject,l;if(zc(s)){s.businessObject=(0,y.SS)(o[s.labelTarget]);return}l=e.create(c.$type),s.businessObject=n.copyElement(c,l),r(s,o),za(s,l,["isExpanded","name"]),Kp(s,"oldBusinessObject")})}Fc.$inject=["bpmnFactory","eventBus","moddleCopy"];function zc(e){return!!e.labelTarget}var Zp=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function Zr(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return(0,p.MR)(r,function(a){return a==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,a=(0,p.Kn)(r)&&r.$descriptor,o=i.propertyName;if(o&&Zp.indexOf(o)!==-1||o&&a&&!(0,p.sE)(a.properties,(0,p.KQ)({name:o})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(Xp(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}Zr.$inject=["eventBus","bpmnFactory","moddle"],Zr.prototype.copyElement=function(e,t,n){var i=this;n&&!(0,p.kJ)(n)&&(n=[n]),n=n||ss(e.$descriptor);var r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t});return r===!1||((0,p.kJ)(r)&&(n=r),(0,p.Ed)(n,function(a){var o;(0,p.e$)(e,a)&&(o=e.get(a));var s=i.copyProperty(o,t,a),c=i._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:s,propertyName:a});c!==!1&&(0,p.$K)(s)&&t.set(a,s)})),t},Zr.prototype.copyProperty=function(e,t,n){var i=this,r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n});if(r!==!1){if(r)return(0,p.Kn)(r)&&r.$type&&!r.$parent&&(r.$parent=t),r;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?this._copyId(e,t):(0,p.kJ)(e)?(0,p.u4)(e,function(o,s){return r=i.copyProperty(s,t,n),r?(r.$parent=t,o.concat(r)):o},[]):(0,p.Kn)(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(r=i._bpmnFactory.create(e.$type),r.$parent=t,r=i.copyElement(e,r),r):e}},Zr.prototype._copyId=function(e,t){if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function ss(e,t){return(0,p.u4)(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function Xp(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}var Uc={__depends__:[Vp],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",Fc],moddleCopy:["type",Zr]},$c=Math.round;function cs(e){this._modeling=e}cs.$inject=["modeling"],cs.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=t.width||e.width,a=t.height||e.height,o=t.x||e.x,s=t.y||e.y,c=$c(o+r/2),l=$c(s+a/2);return i.replaceShape(e,(0,p.f0)({},t,{x:c,y:l,width:r,height:a}),n)};var Jp={__init__:["replace"],replace:["type",cs]},wt=z(92131);function qp(e,t,n){(0,p.kJ)(n)||(n=[n]),(0,p.Ed)(n,function(i){(0,p.o8)(e[i])||(t[i]=e[i])})}var Qp=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function ef(e,t){var n=e&&(0,p.e$)(e,"collapsed")?e.collapsed:!(0,wt.ul)(e),i;return t&&((0,p.e$)(t,"collapsed")||(0,p.e$)(t,"isExpanded"))?i=(0,p.e$)(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i?(e.collapsed=n,!0):!1}function Wc(e,t,n,i,r,a,o){function s(c,l,f){f=f||{};var d=l.type,m=c.businessObject;if(Ua(m)&&d==="bpmn:SubProcess"&&ef(c,l))return i.toggleCollapse(c),c;var _=e.create(d),x={type:d,businessObject:_},$=ss(m.$descriptor),Y=ss(_.$descriptor,!0),Te=tf($,Y);(0,p.f0)(_,(0,p.ei)(l,Qp));var Se=(0,p.hX)(Te,function(Q){return Q==="eventDefinitions"?Gc(c,l.eventDefinitionType):Q==="loopCharacteristics"?!(0,wt.J5)(_):!((0,p.e$)(_,Q)||Q==="processRef"&&l.isExpanded===!1||Q==="triggeredByEvent")});return _=n.copyElement(m,_,Se),l.eventDefinitionType&&(Gc(_,l.eventDefinitionType)||(x.eventDefinitionType=l.eventDefinitionType,x.eventDefinitionAttrs=l.eventDefinitionAttrs)),(0,y.is)(m,"bpmn:Activity")&&(Ua(m)?x.isExpanded=(0,wt.ul)(m):l&&(0,p.e$)(l,"isExpanded")&&(x.isExpanded=l.isExpanded),(0,wt.ul)(m)&&!(0,y.is)(m,"bpmn:Task")&&x.isExpanded&&(x.width=c.width,x.height=c.height)),Ua(m)&&!Ua(_)&&(f.moveChildren=!1),(0,y.is)(m,"bpmn:Participant")&&(l.isExpanded===!0?_.processRef=e.create("bpmn:Process"):f.moveChildren=!1,x.width=c.width,x.height=t._getDefaultSize(_).height),a.allowed("shape.resize",{shape:_})||(x.height=t._getDefaultSize(_).height,x.width=t._getDefaultSize(_).width),_.name=m.name,(0,y.JZ)(m,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(0,y.JZ)(_,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(_.default=m.default),l.host&&!(0,y.is)(m,"bpmn:BoundaryEvent")&&(0,y.is)(_,"bpmn:BoundaryEvent")&&(x.host=l.host),(x.type==="bpmn:DataStoreReference"||x.type==="bpmn:DataObjectReference")&&(x.x=c.x+(c.width-x.width)/2),x.di={},qp(m.di,x.di,["fill","stroke","background-color","border-color","color"]),x=r.replaceElement(c,x,f),f.select!==!1&&o.select(x),x}this.replaceElement=s}Wc.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];function Ua(e){return(0,y.is)(e,"bpmn:SubProcess")}function Gc(e,t){var n=(0,y.SS)(e);return t&&n.get("eventDefinitions").some(function(i){return(0,y.is)(i,t)})}function tf(e,t){return e.filter(function(n){return t.indexOf(n)!==-1})}var Vc={__depends__:[Uc,Jp,b.Z],bpmnReplace:["type",Wc]};function Kc(e){return function(t){var n=t.target,i=(0,y.SS)(e),r=i.eventDefinitions&&i.eventDefinitions[0],a=i.$type===n.type,o=(r&&r.$type)===n.eventDefinitionType,s=i.triggeredByEvent===n.triggeredByEvent,c=n.isExpanded===void 0||n.isExpanded===(0,wt.ul)(i);return!a||!o||!s||!c}}var nf=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],rf=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],af=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],of=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],sf=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],cf=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],uf=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lf=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],Yc=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],pf=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],ff=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],hf=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],df=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],vf=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],mf=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty Pool";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function pi(e,t,n,i,r,a,o){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=a,this._translate=o,this.register()}pi.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],pi.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},pi.prototype.getEntries=function(e){var t=e.businessObject,n=this._rules,i;if(!n.allowed("shape.replace",{element:e}))return[];var r=Kc(e);return(0,y.is)(t,"bpmn:DataObjectReference")?this._createEntries(e,pf):(0,y.is)(t,"bpmn:DataStoreReference")&&!(0,y.is)(e.parent,"bpmn:Collaboration")?this._createEntries(e,ff):(0,y.is)(t,"bpmn:StartEvent")&&!(0,y.is)(t.$parent,"bpmn:SubProcess")?(i=(0,p.hX)(nf,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:Participant")?(i=(0,p.hX)(mf,function(a){return(0,wt.ul)(t)!==a.target.isExpanded}),this._createEntries(e,i)):(0,y.is)(t,"bpmn:StartEvent")&&(0,wt.J5)(t.$parent)?(i=(0,p.hX)(df,function(a){var o=a.target,s=o.isInterrupting!==!1,c=(0,y.SS)(e).isInterrupting===s;return r(a)||!r(a)&&!c}),this._createEntries(e,i)):(0,y.is)(t,"bpmn:StartEvent")&&!(0,wt.J5)(t.$parent)&&(0,y.is)(t.$parent,"bpmn:SubProcess")?(i=(0,p.hX)(rf,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:EndEvent")?(i=(0,p.hX)(of,function(a){var o=a.target;return o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!(0,y.is)(t.$parent,"bpmn:Transaction")?!1:r(a)}),this._createEntries(e,i)):(0,y.is)(t,"bpmn:BoundaryEvent")?(i=(0,p.hX)(hf,function(a){var o=a.target;if(o.eventDefinitionType=="bpmn:CancelEventDefinition"&&!(0,y.is)(t.attachedToRef,"bpmn:Transaction"))return!1;var s=o.cancelActivity!==!1,c=t.cancelActivity==s;return r(a)||!r(a)&&!c}),this._createEntries(e,i)):(0,y.is)(t,"bpmn:IntermediateCatchEvent")||(0,y.is)(t,"bpmn:IntermediateThrowEvent")?(i=(0,p.hX)(af,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:Gateway")?(i=(0,p.hX)(sf,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:Transaction")?(i=(0,p.hX)(uf,r),this._createEntries(e,i)):(0,wt.J5)(t)&&(0,wt.ul)(t)?(i=(0,p.hX)(lf,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:SubProcess")&&(0,wt.ul)(t)?(i=(0,p.hX)(cf,r),this._createEntries(e,i)):(0,y.is)(t,"bpmn:AdHocSubProcess")&&!(0,wt.ul)(t)?(i=(0,p.hX)(Yc,function(a){var o=a.target,s=o.type==="bpmn:SubProcess",c=o.isExpanded===!0;return Kc(e,o)&&(!s||c)}),this._createEntries(e,i)):(0,y.is)(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,vf):(0,y.is)(t,"bpmn:FlowNode")?(i=(0,p.hX)(Yc,r),(0,y.is)(t,"bpmn:SubProcess")&&!(0,wt.ul)(t)&&(i=(0,p.hX)(i,function(a){return a.label!=="Sub Process (collapsed)"})),this._createEntries(e,i)):[]},pi.prototype.getHeaderEntries=function(e){var t=[];return(0,y.is)(e,"bpmn:Activity")&&!(0,wt.J5)(e)&&(t=t.concat(this._getLoopEntries(e))),(0,y.is)(e,"bpmn:DataObjectReference")&&(t=t.concat(this._getDataObjectIsCollection(e))),(0,y.is)(e,"bpmn:Participant")&&(t=t.concat(this._getParticipantMultiplicity(e))),(0,y.is)(e,"bpmn:SubProcess")&&!(0,y.is)(e,"bpmn:Transaction")&&!(0,wt.J5)(e)&&t.push(this._getAdHocEntry(e)),t},pi.prototype._createEntries=function(e,t){var n=[],i=this;return(0,p.Ed)(t,function(r){var a=i._createMenuEntry(r,e);n.push(a)}),n},pi.prototype._createSequenceFlowEntries=function(e,t){var n=(0,y.SS)(e),i=[],r=this._modeling,a=this._moddle,o=this;return(0,p.Ed)(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&((0,y.is)(n.sourceRef,"bpmn:ExclusiveGateway")||(0,y.is)(n.sourceRef,"bpmn:InclusiveGateway")||(0,y.is)(n.sourceRef,"bpmn:ComplexGateway")||(0,y.is)(n.sourceRef,"bpmn:Activity"))&&i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&(0,y.is)(n.sourceRef,"bpmn:Activity")&&i.push(o._createMenuEntry(s,e,function(){var c=a.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})}));break;default:if((0,y.is)(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})}));if(((0,y.is)(n.sourceRef,"bpmn:ExclusiveGateway")||(0,y.is)(n.sourceRef,"bpmn:InclusiveGateway")||(0,y.is)(n.sourceRef,"bpmn:ComplexGateway")||(0,y.is)(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(o._createMenuEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})}))}}),i},pi.prototype._createMenuEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,a=function(){return r(t,e.target)},o=e.label;o&&typeof o=="function"&&(o=o(t)),n=n||a;var s={label:i(o),className:e.className,id:e.actionName,action:n};return s},pi.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function i(f,d){var m;d.active?m=void 0:(m=t._moddle.create(d.options.loopCharacteristics),d.options.isSequential&&(m.isSequential=d.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:m})}var r=(0,y.SS)(e),a=r.loopCharacteristics,o,s,c;a&&(o=a.isSequential,s=a.isSequential===void 0,c=a.isSequential!==void 0&&!a.isSequential);var l=[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:o,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}];return l},pi.prototype._getDataObjectIsCollection=function(e){var t=this,n=this._translate;function i(s,c){t._modeling.updateModdleProperties(e,r,{isCollection:!c.active})}var r=e.businessObject.dataObjectRef,a=r.isCollection,o=[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:i}];return o},pi.prototype._getParticipantMultiplicity=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(s,c){var l=c.active,f;l||(f=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:f})}var a=e.businessObject.participantMultiplicity,o=[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:i("Participant Multiplicity"),active:!!a,action:r}];return o},pi.prototype._getAdHocEntry=function(e){var t=this._translate,n=(0,y.SS)(e),i=(0,y.is)(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement,a={id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,s){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}};return a};var gf={__depends__:[ja,Vc],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",pi]};function $a(e,t){for(typeof t=="string"&&(t=[t]);e=e.parent;)if((0,y.JZ)(e,t))return e;return null}var Wa=Math.max,Ga=Math.min,yf=20;function Zc(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function Ef(e,t,n){var i=n.x,r=n.y,a={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(a.y=e.y+r,a.height=e.height-r):t.indexOf("s")!==-1&&(a.height=e.height+r),t.indexOf("e")!==-1?a.width=e.width+i:t.indexOf("w")!==-1&&(a.x=e.x+i,a.width=e.width-i),a}function _f(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function Mg(e,t,n){var i=e.width/t.width,r=e.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((e.x+e.width/2-n.x)/i),y:Math.round(t.y+t.height/2)-Math.floor((e.y+e.height/2-n.y)/r)}}function Va(e,t,n){var i=t[e],r=n.min&&n.min[e],a=n.max&&n.max[e];return(0,p.hj)(r)&&(i=(/top|left/.test(e)?Ga:Wa)(i,r)),(0,p.hj)(a)&&(i=(/top|left/.test(e)?Wa:Ga)(i,a)),i}function bf(e,t){if(!t)return e;var n=(0,ge.JA)(e);return(0,ge.z_)({top:Va("top",n,t),right:Va("right",n,t),bottom:Va("bottom",n,t),left:Va("left",n,t)})}function xf(e,t,n,i){var r=(0,ge.JA)(t),a={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},o=i?(0,ge.JA)(i):a,s={top:Ga(a.top,o.top),left:Ga(a.left,o.left),bottom:Wa(a.bottom,o.bottom),right:Wa(a.right,o.right)};return(0,ge.z_)(s)}function Xr(e,t){return typeof e!="undefined"?e:yf}function Sf(e,t){var n,i,r,a;return typeof t=="object"?(n=Xr(t.left),i=Xr(t.right),r=Xr(t.top),a=Xr(t.bottom)):n=i=r=a=Xr(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+a}}function wf(e){return!(e.waypoints||e.type==="label")}function Xc(e,t){var n;if(e.length===void 0?n=(0,p.hX)(e.children,wf):n=e,n.length)return Sf((0,rn.jY)(n),t)}var Ka=Math.abs;function Tf(e,t){return Zc((0,ge.JA)(t),(0,ge.JA)(e))}var Rf=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Cr=30;function Ya(e,t){return t=t||[],e.children.filter(function(n){(0,y.is)(n,"bpmn:Lane")&&(Ya(n,t),t.push(n))}),t}function hr(e){return e.children.filter(function(t){return(0,y.is)(t,"bpmn:Lane")})}function bi(e){return $a(e,Rf)||e}function Cf(e,t){var n=bi(e),i=(0,y.is)(n,"bpmn:Process")?[]:[n],r=Ya(n,i),a=(0,ge.JA)(e),o=(0,ge.JA)(t),s=Tf(e,t),c=[];return r.forEach(function(l){if(l!==e){var f=0,d=s.right,m=0,_=s.left,x=(0,ge.JA)(l);s.top&&(Ka(x.bottom-a.top)<10&&(m=o.top-x.bottom),Ka(x.top-a.top)<5&&(f=o.top-x.top)),s.bottom&&(Ka(x.top-a.bottom)<10&&(f=o.bottom-x.top),Ka(x.bottom-a.bottom)<5&&(m=o.bottom-x.bottom)),(f||d||m||_)&&c.push({shape:l,newBounds:_f(l,{top:f,right:d,bottom:m,left:_})})}}),c}function us(e,t,n,i,r,a,o,s,c,l,f,d){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=a,this._connect=o,this._create=s,this._popupMenu=c,this._canvas=l,this._rules=f,this._translate=d,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(m){var _=m.context,x=_.shape;if(!(!(0,gi.RJ)(m)||!i.isOpen(x))){var $=i.getEntries(x);$.replace&&$.replace.action.click(m,x)}})}us.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],us.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,a=this._create,o=this._popupMenu,s=this._canvas,c=this._rules,l=this._autoPlace,f=this._translate,d={};if(e.type==="label")return d;var m=e.businessObject;function _(ne,be){r.start(ne,be)}function x(ne){n.removeElements([e])}function $(ne){var be=5,Ae=s.getContainer(),tt=t.getPad(ne).html,vt=Ae.getBoundingClientRect(),It=tt.getBoundingClientRect(),sn=It.top-vt.top,Dn=It.left-vt.left,On={x:Dn,y:sn+It.height+be};return On}function Y(ne,be,Ae,tt){typeof Ae!="string"&&(tt=Ae,Ae=f("Append {type}",{type:ne.replace(/^bpmn:/,"")}));function vt(sn,Dn){var On=i.createShape((0,p.f0)({type:ne},tt));a.start(sn,On,{source:Dn})}var It=l?function(sn,Dn){var On=i.createShape((0,p.f0)({type:ne},tt));l.append(Dn,On)}:vt;return{group:"model",className:be,title:Ae,action:{dragstart:vt,click:It}}}function Te(ne){return function(be,Ae){n.splitLane(Ae,ne),t.open(Ae,!0)}}if((0,y.JZ)(m,["bpmn:Lane","bpmn:Participant"])&&(0,wt.ul)(m)){var Se=hr(e);(0,p.f0)(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:f("Add Lane above"),action:{click:function(ne,be){n.addLane(be,"top")}}}}),Se.length<2&&(e.height>=120&&(0,p.f0)(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:f("Divide into two Lanes"),action:{click:Te(2)}}}),e.height>=180&&(0,p.f0)(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:f("Divide into three Lanes"),action:{click:Te(3)}}})),(0,p.f0)(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:f("Add Lane below"),action:{click:function(ne,be){n.addLane(be,"bottom")}}}})}(0,y.is)(m,"bpmn:FlowNode")&&((0,y.is)(m,"bpmn:EventBasedGateway")?(0,p.f0)(d,{"append.receive-task":Y("bpmn:ReceiveTask","bpmn-icon-receive-task",f("Append ReceiveTask")),"append.message-intermediate-event":Y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",f("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":Y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",f("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":Y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",f("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":Y("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",f("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Jc(m,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?(0,p.f0)(d,{"append.compensation-activity":Y("bpmn:Task","bpmn-icon-task",f("Append compensation activity"),{isForCompensation:!0})}):!(0,y.is)(m,"bpmn:EndEvent")&&!m.isForCompensation&&!Jc(m,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!(0,wt.J5)(m)&&(0,p.f0)(d,{"append.end-event":Y("bpmn:EndEvent","bpmn-icon-end-event-none",f("Append EndEvent")),"append.gateway":Y("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",f("Append Gateway")),"append.append-task":Y("bpmn:Task","bpmn-icon-task",f("Append Task")),"append.intermediate-event":Y("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",f("Append Intermediate/Boundary Event"))})),o.isEmpty(e,"bpmn-replace")||(0,p.f0)(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:f("Change type"),action:{click:function(ne,be){var Ae=(0,p.f0)($(be),{cursor:{x:ne.x,y:ne.y}});o.open(be,"bpmn-replace",Ae)}}}}),(0,y.JZ)(m,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,p.f0)(d,{"append.text-annotation":Y("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using "+(m.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:_,dragstart:_}}}),(0,y.is)(m,"bpmn:TextAnnotation")&&(0,p.f0)(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using Association"),action:{click:_,dragstart:_}}}),(0,y.JZ)(m,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,p.f0)(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using DataInputAssociation"),action:{click:_,dragstart:_}}}),(0,y.is)(m,"bpmn:Group")&&(0,p.f0)(d,{"append.text-annotation":Y("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var Q=c.allowed("elements.delete",{elements:[e]});return(0,p.kJ)(Q)&&(Q=Q[0]===e),Q&&(0,p.f0)(d,{delete:{group:"edit",className:"bpmn-icon-trash",title:f("Remove"),action:{click:x}}}),d};function Jc(e,t,n){var i=e.$instanceOf(t),r=!1,a=e.eventDefinitions||[];return(0,p.Ed)(a,function(o){o.$type===n&&(r=!0)}),i&&r}var Pf={__depends__:[Nt,ht,b.Z,je,fr,gf],__init__:["contextPadProvider"],contextPadProvider:["type",us]},Af={horizontal:["x","width"],vertical:["y","height"]},qc=5;function ji(e){this._modeling=e,this._filters=[],this.registerFilter(function(t,n,i){var r=0,a=0,o;return(0,p.Ed)(t,function(s){s.waypoints||s.labelTarget||(r+=s[i],a+=1)}),o=Math.round(r/a),(0,p.hX)(t,function(s){return s[i]<o+50})})}ji.$inject=["modeling"],ji.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)},ji.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i},ji.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?((0,p.Ed)(t,function(a){r=a(r,n,i)}),r):e},ji.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var a=(0,p.MR)(e,i);return(0,p.Ed)(a,function(o,s){var c=n._findRange(o,i,r),l,f=t[t.length-1];f&&n._hasIntersection(f.range,c)?t[t.length-1].elements.push(o):(l={range:c,elements:[o]},t.push(l))}),t},ji.prototype._setOrientation=function(e){var t=Af[e];this._axis=t[0],this._dimension=t[1]},ji.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},ji.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+qc,max:t+n-qc}};var Df={__init__:["distributeElements"],distributeElements:["type",ji]};function Qc(e){e.registerFilter(function(t){return(0,p.hX)(t,function(n){var i=(0,y.JZ)(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)})})}Qc.$inject=["distributeElements"];var Mf={__depends__:[Df],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",Qc]},eu="is not a registered action",Of="is already registered";function fi(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}fi.$inject=["eventBus","injector"],fi.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),o=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),a&&i&&this.register("copy",function(){var f=i.get();a.copy(f)}),a&&this.register("paste",function(){a.paste()}),r&&this.register("stepZoom",function(f){r.stepZoom(f.value)}),o&&this.register("zoom",function(f){o.zoom(f.value)}),n&&i&&s&&this.register("removeSelection",function(){var f=i.get();if(f.length){var d=s.allowed("elements.delete",{elements:f}),m;d!==!1&&((0,p.kJ)(d)?m=d:m=f,m.length&&n.removeElements(m.slice()))}}),c&&this.register("moveCanvas",function(f){c.moveCanvas(f)}),l&&this.register("moveSelection",function(f){l.moveSelection(f.direction,f.accelerated)})},fi.prototype.trigger=function(e,t){if(!this._actions[e])throw ls(e,eu);return this._actions[e](t)},fi.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);(0,p.Ed)(e,function(i,r){n._registerAction(r,i)})},fi.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw ls(e,Of);this._actions[e]=t},fi.prototype.unregister=function(e){if(!this.isRegistered(e))throw ls(e,eu);this._actions[e]=void 0},fi.prototype.getActions=function(){return Object.keys(this._actions)},fi.prototype.isRegistered=function(e){return!!this._actions[e]};function ls(e,t){return new Error(e+" "+t)}var If={__init__:["editorActions"],editorActions:["type",fi]};function Za(e){e.invoke(fi,this)}N()(Za,fi),Za.$inject=["injector"],Za.prototype._registerDefaultActions=function(e){fi.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),a=e.get("lassoTool",!1),o=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),f=e.get("directEditing",!1),d=e.get("searchPad",!1),m=e.get("modeling",!1);t&&n&&i&&this._registerAction("selectElements",function(){var _=t.getRootElement(),x=n.filter(function($){return $!==_});return i.select(x),x}),r&&this._registerAction("spaceTool",function(){r.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),o&&this._registerAction("handTool",function(){o.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),i&&c&&this._registerAction("distributeElements",function(_){var x=i.get(),$=_.type;x.length&&c.trigger(x,$)}),i&&l&&this._registerAction("alignElements",function(_){var x=i.get(),$=[],Y=_.type;x.length&&($=(0,p.hX)(x,function(Te){return!(0,y.is)(Te,"bpmn:Lane")}),l.trigger($,Y))}),i&&m&&this._registerAction("setColor",function(_){var x=i.get();x.length&&m.setColor(x,_)}),i&&f&&this._registerAction("directEditing",function(){var _=i.get();_.length&&f.activate(_[0])}),d&&this._registerAction("find",function(){d.toggle()}),t&&m&&this._registerAction("moveToOrigin",function(){var _=t.getRootElement(),x,$;(0,y.is)(_,"bpmn:Collaboration")?$=n.filter(function(Y){return(0,y.is)(Y.parent,"bpmn:Collaboration")}):$=n.filter(function(Y){return Y!==_&&!(0,y.is)(Y.parent,"bpmn:SubProcess")}),x=(0,rn.jY)($),m.moveElements($,{x:-x.x,y:-x.y},_)})};var Lf={__depends__:[If],editorActions:["type",Za]};function tu(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;(0,y.JZ)(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}tu.$inject=["eventBus"];var Xa=10;function ps(e,t,n){return n||(n="round"),Math[n](e/t)*t}var Nf=1200,Bf=800;function Xi(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",Bf,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],Nf,function(a){var o=a.originalEvent;if(!(!r.active||o&&K(o))){var s=a.context,c=s.gridSnappingContext;c||(c=s.gridSnappingContext={}),["x","y"].forEach(function(l){var f={},d=jf(a,l,e);d&&(f.offset=d);var m=kf(a,l);m&&(0,p.f0)(f,m),an(a,l)||r.snapEvent(a,l,f)})}})}Xi.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);fn(e,t,i)},Xi.prototype.getGridSpacing=function(){return Xa},Xi.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=ps(e,Xa);var i,r;return t&&t.min&&(i=t.min,(0,p.hj)(i)&&(i=ps(i+n,Xa,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,(0,p.hj)(r)&&(r=ps(r+n,Xa,"floor"),e=Math.min(e,r))),e-=n,e},Xi.prototype.isActive=function(){return this.active},Xi.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})},Xi.prototype.toggleActive=function(){this.setActive(!this.active)},Xi.$inject=["elementRegistry","eventBus","config.gridSnapping"];function kf(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},a=n.gridSnappingContext,o=a.snapConstraints;if(o&&o[t])return o[t];o||(o=a.snapConstraints={}),o[t]||(o[t]={});var s=n.direction;i&&(Ja(t)?(o.x.min=i.left,o.x.max=i.right):(o.y.min=i.top,o.y.max=i.bottom));var c=r.min,l=r.max;return c&&(Ja(t)?iu(s)?o.x.max=c.left:o.x.min=c.right:nu(s)?o.y.max=c.top:o.y.min=c.bottom),l&&(Ja(t)?iu(s)?o.x.min=l.left:o.x.max=l.right:nu(s)?o.y.min=l.top:o.y.max=l.bottom),o[t]}function jf(e,t,n){var i=e.context,r=e.shape,a=i.gridSnappingContext,o=a.snapLocation,s=a.snapOffset;return s&&(0,p.hj)(s[t])||(s||(s=a.snapOffset={}),(0,p.hj)(s[t])||(s[t]=0),!r)||(n.get(r.id)||(Ja(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!o)||(t==="x"?/left/.test(o)?s[t]-=r.width/2:/right/.test(o)&&(s[t]+=r.width/2):/top/.test(o)?s[t]-=r.height/2:/bottom/.test(o)&&(s[t]+=r.height/2)),s[t]}function Ja(e){return e==="x"}function nu(e){return e.indexOf("n")!==-1}function iu(e){return e.indexOf("w")!==-1}function dr(e,t){ke.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,a=r.hints||{},o=a.autoResize;if(o){var s=r.shape,c=r.newBounds;(0,p.HD)(o)?r.newBounds=n.snapComplex(c,o):r.newBounds=n.snapSimple(s,c)}})}dr.$inject=["eventBus","gridSnapping","modeling"],N()(dr,ke),dr.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t},dr.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e},dr.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),r&&(i?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),(0,p.f0)(e,a),e},dr.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),i&&(r?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),(0,p.f0)(e,a),e};var Hf=2e3;function ru(e,t){e.on(["spaceTool.move","spaceTool.end"],Hf,function(n){var i=n.context;if(i.initialized){var r=i.axis,a;r==="x"?(a=t.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=t.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}ru.$inject=["eventBus","gridSnapping"];var Ff={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",dr],gridSnappingSpaceToolBehavior:["type",ru]},zf={__depends__:[Ff],__init__:["gridSnapping"],gridSnapping:["type",Xi]},Uf=2e3;function au(e,t){e.on("autoPlace",Uf,function(n){var i=n.source,r=(0,ge.wS)(i),a=n.shape,o=Sn(i,a);return["x","y"].forEach(function(s){var c={};o[s]!==r[s]&&(o[s]>r[s]?c.min=o[s]:c.max=o[s],(0,y.is)(a,"bpmn:TextAnnotation")&&($f(s)?c.offset=-a.width/2:c.offset=-a.height/2),o[s]=t.snapValue(o[s],c))}),o})}au.$inject=["eventBus","gridSnapping"];function $f(e){return e==="x"}var Wf=1750;function ou(e,t,n){t.on(["create.start","shape.move.start"],Wf,function(i){var r=i.context,a=r.shape,o=e.getRootElement();if(!(!(0,y.is)(a,"bpmn:Participant")||!(0,y.is)(o,"bpmn:Process")||!o.children.length)){var s=r.createConstraints;s&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}ou.$inject=["canvas","eventBus","gridSnapping"];var Gf=3e3;function qa(e,t,n){ke.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],Gf,function(r){var a=r.context,o=a.connection,s=a.hints||{},c=o.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||Vf(c)&&n.updateWaypoints(o,i.snapMiddleSegments(c))})}qa.$inject=["eventBus","gridSnapping","modeling"],N()(qa,ke),qa.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=Zf(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function Vf(e){return e.length>3}function Kf(e){return e==="h"}function Yf(e){return e==="v"}function Zf(e,t,n){var i=(0,Tn.Or)(t,n),r={};return Kf(i)&&(r.y=e.snapValue(t.y)),Yf(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=(0,p.f0)({},t,r),n=(0,p.f0)({},n,r)),[t,n]}var Xf={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",au],gridSnappingCreateParticipantBehavior:["type",ou],gridSnappingLayoutConnectionBehavior:["type",qa]},Jf={__depends__:[zf,Xf],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",tu]},qf=30,Qf=30;function Jr(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,a=i.gfx;if((0,y.is)(r,"bpmn:Lane"))return n.createParticipantHit(r,a);if((0,y.is)(r,"bpmn:Participant"))return(0,wt.ul)(r)?n.createParticipantHit(r,a):n.createDefaultHit(r,a);if((0,y.is)(r,"bpmn:SubProcess"))return(0,wt.ul)(r)?n.createSubProcessHit(r,a):n.createDefaultHit(r,a)})}Jr.$inject=["eventBus","interactionEvents"],Jr.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},Jr.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:qf,height:e.height}),!0},Jr.prototype.createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:Qf}),!0};var eh={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Jr]};function Qa(e){e.invoke(Ue,this)}N()(Qa,Ue),Qa.$inject=["injector"],Qa.prototype.registerBindings=function(e,t){Ue.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0})};var th={__depends__:[ue],__init__:["keyboardBindings"],keyboardBindings:["type",Qa]},nh={moveSpeed:1,moveSpeedAccelerated:10},ih=1500,su="left",cu="up",uu="right",lu="down",rh={ArrowLeft:su,Left:su,ArrowUp:cu,Up:cu,ArrowRight:uu,Right:uu,ArrowDown:lu,Down:lu},ah={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function pu(e,t,n,i,r){var a=this;this._config=(0,p.f0)({},nh,e||{}),t.addListener(ih,function(o){var s=o.keyEvent,c=rh[s.key];if(c&&!t.isCmd(s)){var l=t.isShift(s);return a.moveSelection(c,l),!0}}),this.moveSelection=function(o,s){var c=r.get();if(c.length){var l=this._config[s?"moveSpeedAccelerated":"moveSpeed"],f=ah[o](l),d=i.allowed("elements.move",{shapes:c});d&&n.moveElements(c,f)}}}pu.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var oh={__depends__:[ue,b.Z],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",pu]};function fu(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire((0,rn.oL)(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}fu.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var hu={__init__:["changeSupport"],changeSupport:["type",fu]},du=10;function qr(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function a(c,l){var f=c.shape,d=c.direction,m=c.resizeConstraints,_;c.delta=l,_=Ef(f,d,l),c.newBounds=bf(_,m),c.canExecute=r.canResize(c)}function o(c){var l=c.resizeConstraints,f=c.minBounds;l===void 0&&(f===void 0&&(f=r.computeMinResizeBox(c)),c.resizeConstraints={min:(0,ge.JA)(f)})}function s(c){var l=c.shape,f=c.canExecute,d=c.newBounds;if(f){if(d=(0,ge.aR)(d),!sh(l,d))return;n.resizeShape(l,d)}}e.on("resize.start",function(c){o(c.context)}),e.on("resize.move",function(c){var l={x:c.dx,y:c.dy};a(c.context,l)}),e.on("resize.end",function(c){s(c.context)})}qr.prototype.canResize=function(e){var t=this._rules,n=(0,p.ei)(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},qr.prototype.activate=function(e,t,n){var i=this._dragging,r,a;if(typeof n=="string"&&(n={direction:n}),r=(0,p.f0)({shape:t},n),a=r.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,vu(t,a),"resize",{autoActivate:!0,cursor:ch(a),data:{shape:t,context:r}})},qr.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:du,height:du},r=Xc(t,e.childrenBoxPadding),xf(n,t,i,r)},qr.$inject=["eventBus","rules","modeling","dragging"];function sh(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function vu(e,t){var n=(0,ge.wS)(e),i=(0,ge.JA)(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function ch(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var mu="djs-resizing",gu="resize-not-ok",uh=500;function yu(e,t,n){function i(a){var o=a.shape,s=a.newBounds,c=a.frame;c||(c=a.frame=n.addFrame(o,t.getActiveLayer()),t.addMarker(o,mu)),s.width>5&&(0,ae.Lj)(c,{x:s.x,width:s.width}),s.height>5&&(0,ae.Lj)(c,{y:s.y,height:s.height}),a.canExecute?(0,ae.Sh)(c).remove(gu):(0,ae.Sh)(c).add(gu)}function r(a){var o=a.shape,s=a.frame;s&&(0,ae.Od)(a.frame),t.removeMarker(o,mu)}e.on("resize.move",uh,function(a){i(a.context)}),e.on("resize.cleanup",function(a){r(a.context)})}yu.$inject=["eventBus","canvas","previewSupport"];var eo=-6,to=4,no=20,Qr="djs-resizer",lh=["n","w","s","e","nw","ne","se","sw"];function Ji(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(a){var o=a.newSelection;r.removeResizers(),o.length===1&&(0,p.Ed)(o,(0,p.ak)(r.addResizer,r))}),e.on("shape.changed",function(a){var o=a.element;n.isSelected(o)&&(r.removeResizers(),r.addResizer(o))})}Ji.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(a){(0,gi.Id)(a)&&i.activate(a,e,n)}R.B.bind(t,"mousedown",r),R.B.bind(t,"touchstart",r)},Ji.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),a=ph(i),o=(0,ae.Ue)("g");(0,ae.Sh)(o).add(Qr),(0,ae.Sh)(o).add(Qr+"-"+e.id),(0,ae.Sh)(o).add(Qr+"-"+i),(0,ae.R3)(r,o);var s=(0,ae.Ue)("rect");(0,ae.Lj)(s,{x:-to/2+a.x,y:-to/2+a.y,width:to,height:to}),(0,ae.Sh)(s).add(Qr+"-visual"),(0,ae.R3)(o,s);var c=(0,ae.Ue)("rect");return(0,ae.Lj)(c,{x:-no/2+a.x,y:-no/2+a.y,width:no,height:no}),(0,ae.Sh)(c).add(Qr+"-hit"),(0,ae.R3)(o,c),(0,Wn.vs)(o,t,n),o},Ji.prototype.createResizer=function(e,t){var n=vu(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)},Ji.prototype.addResizer=function(e){var t=this,n=this._resize;n.canResize({shape:e})&&(0,p.Ed)(lh,function(i){t.createResizer(e,i)})},Ji.prototype.removeResizers=function(){var e=this._getResizersParent();(0,ae.ZH)(e)},Ji.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Ji.$inject=["eventBus","canvas","selection","resize"];function ph(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-eo:e.indexOf("w")!==-1&&(t.x=eo),e.indexOf("s")!==-1?t.y=-eo:e.indexOf("n")!==-1&&(t.y=eo),t}var Eu={__depends__:[ci,zt,yi],__init__:["resize","resizePreview","resizeHandles"],resize:["type",qr],resizePreview:["type",yu],resizeHandles:["type",Ji]},qi=z(77872),St=z(52837);function fs(e,t){var n=t.create("bpmn:CategoryValue"),i=t.create("bpmn:Category",{categoryValue:[n]});return(0,St.IH)(e.get("rootElements"),i),(0,y.SS)(i).$parent=e,(0,y.SS)(n).$parent=i,n}var on=z(96817);function ea(e,t,n,i,r,a,o){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=o,i.registerProvider(this),e.on("element.dblclick",function(c){s(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(c){i.isActive()&&i.complete()}),e.on(["commandStack.changed"],function(c){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(c){a.removeResizers()}),e.on("create.end",500,function(c){var l=c.context,f=l.shape,d=c.context.canExecute,m=c.isTouch;m||d&&(l.hints&&l.hints.createElementsBehavior===!1||s(f))}),e.on("autoPlace.end",500,function(c){s(c.shape)});function s(c,l){(l||(0,y.JZ)(c,["bpmn:Task","bpmn:TextAnnotation"])||hs(c))&&i.activate(c)}}ea.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],ea.prototype.activate=function(e){var t=(0,qi.i)(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);(0,p.f0)(n,i);var r={};return((0,y.JZ)(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||hs(e))&&(0,p.f0)(r,{centerVertically:!0}),(0,on.ly)(e)&&(0,p.f0)(r,{autoResize:!0}),(0,y.is)(e,"bpmn:TextAnnotation")&&(0,p.f0)(r,{resizable:!0,autoResize:!0}),(0,p.f0)(n,{options:r}),n}},ea.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},a={x:i.x,y:i.y},o=t.zoom(),s=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),l=c.fontSize*o,f=c.lineHeight,d=s.fontSize*o,m=s.lineHeight,_={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};((0,y.is)(e,"bpmn:Lane")||dh(e))&&((0,p.f0)(a,{width:i.height,height:30*o,x:i.x-i.height/2+15*o,y:r.y-30*o/2}),(0,p.f0)(_,{fontSize:d+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px",transform:"rotate(-90deg)"})),((0,y.JZ)(e,["bpmn:Task","bpmn:CallActivity"])||hh(e)||hs(e))&&((0,p.f0)(a,{width:i.width,height:i.height}),(0,p.f0)(_,{fontSize:d+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"})),fh(e)&&((0,p.f0)(a,{width:i.width,x:i.x}),(0,p.f0)(_,{fontSize:d+"px",lineHeight:m,paddingTop:7*o+"px",paddingBottom:7*o+"px",paddingLeft:5*o+"px",paddingRight:5*o+"px"}));var x=90*o,$=7*o,Y=4*o;if(n.labelTarget&&((0,p.f0)(a,{width:x,height:i.height+$+Y,x:r.x-x/2,y:i.y-$}),(0,p.f0)(_,{fontSize:l+"px",lineHeight:f,paddingTop:$+"px",paddingBottom:Y+"px"})),(0,on.ly)(n)&&!(0,on.fF)(n)&&!(0,on.j_)(n)){var Te=(0,on.qe)(e),Se=t.getAbsoluteBBox({x:Te.x,y:Te.y,width:0,height:0}),Q=l+$+Y;(0,p.f0)(a,{width:x,height:Q,x:Se.x-x/2,y:Se.y-Q/2}),(0,p.f0)(_,{fontSize:l+"px",lineHeight:f,paddingTop:$+"px",paddingBottom:Y+"px"})}return(0,y.is)(e,"bpmn:TextAnnotation")&&((0,p.f0)(a,{width:i.width,height:i.height,minWidth:30*o,minHeight:10*o}),(0,p.f0)(_,{textAlign:"left",paddingTop:5*o+"px",paddingBottom:7*o+"px",paddingLeft:7*o+"px",paddingRight:5*o+"px",fontSize:d+"px",lineHeight:m})),{bounds:a,style:_}},ea.prototype.update=function(e,t,n,i){var r,a;if((0,y.is)(e,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/a.width*i.width,height:e.height/a.height*i.height}),(0,y.is)(e,"bpmn:Group")){var o=(0,y.SS)(e);if(!o.categoryValueRef){var s=this._canvas.getRootElement(),c=(0,y.SS)(s).$parent,l=fs(c,this._bpmnFactory);(0,y.SS)(e).categoryValueRef=l}}vh(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function hs(e){return(0,y.is)(e,"bpmn:SubProcess")&&!(0,wt.ul)(e)}function fh(e){return(0,y.is)(e,"bpmn:SubProcess")&&(0,wt.ul)(e)}function hh(e){return(0,y.is)(e,"bpmn:Participant")&&!(0,wt.ul)(e)}function dh(e){return(0,y.is)(e,"bpmn:Participant")&&(0,wt.ul)(e)}function vh(e){return!e||!e.trim()}var _u="djs-element-hidden",bu="djs-label-hidden";function xu(e,t,n,i){var r=this,a=t.getDefaultLayer(),o,s,c;e.on("directEditing.activate",function(l){var f=l.active;if(o=f.element.label||f.element,(0,y.is)(o,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(o),c=(0,ae.Ue)("g");var d=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),m=r.path=(0,ae.Ue)("path");(0,ae.Lj)(m,{d,strokeWidth:2,stroke:mh(o)}),(0,ae.R3)(c,m),(0,ae.R3)(a,c),(0,Wn.Iu)(c,o.x,o.y)}(0,y.is)(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,_u):((0,y.is)(o,"bpmn:Task")||(0,y.is)(o,"bpmn:CallActivity")||(0,y.is)(o,"bpmn:SubProcess")||(0,y.is)(o,"bpmn:Participant"))&&t.addMarker(o,bu)}),e.on("directEditing.resize",function(l){if((0,y.is)(o,"bpmn:TextAnnotation")){var f=l.height,d=l.dy,m=Math.max(o.height/s.height*(f+d),0),_=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:m,position:{mx:0,my:0}});(0,ae.Lj)(r.path,{d:_})}}),e.on(["directEditing.complete","directEditing.cancel"],function(l){var f=l.active;f&&(t.removeMarker(f.element.label||f.element,_u),t.removeMarker(o,bu)),o=void 0,s=void 0,c&&((0,ae.Od)(c),c=void 0)})}xu.$inject=["eventBus","canvas","elementRegistry","pathMap"];function mh(e,t){var n=(0,y.SS)(e);return n.di.get("stroke")||t||"black"}var gh={__depends__:[hu,Eu,Nt],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",ea],labelEditingPreview:["type",xu]},ds=["top","bottom","left","right"],io=10;function vs(e,t){ke.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var a=r.context,o=a.connection,s=o.source,c=o.target,l=a.hints||{};l.createElementsBehavior!==!1&&(n(s),n(c))}),this.postExecuted(["label.create"],function(r){var a=r.context,o=a.shape,s=a.hints||{};s.createElementsBehavior!==!1&&n(o.labelTarget)}),this.postExecuted(["elements.create"],function(r){var a=r.context,o=a.elements,s=a.hints||{};s.createElementsBehavior!==!1&&o.forEach(function(c){n(c)})});function n(r){if((0,on.fF)(r)){var a=_h(r);a&&i(r,a)}}function i(r,a){var o=(0,ge.wS)(r),s=r.label,c=(0,ge.wS)(s);if(s.parent){var l=(0,ge.JA)(r),f;switch(a){case"top":f={x:o.x,y:l.top-io-s.height/2};break;case"left":f={x:l.left-io-s.width/2,y:o.y};break;case"bottom":f={x:o.x,y:l.bottom+io+s.height/2};break;case"right":f={x:l.right+io+s.width/2,y:o.y};break}var d=pe(f,c);t.moveShape(s,d)}}}N()(vs,ke),vs.$inject=["eventBus","modeling"];function yh(e){var t=e.host,n=(0,ge.wS)(e),i=(0,ge.T8)(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var a=ds.filter(function(o){return r.indexOf(o)===-1});return a}function Eh(e){var t=(0,ge.wS)(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return Su(t,i)});return n}function _h(e){var t=(0,ge.wS)(e.label),n=(0,ge.wS)(e),i=Su(n,t);if(bh(i)){var r=Eh(e);if(e.host){var a=yh(e);r=r.concat(a)}var o=ds.filter(function(s){return r.indexOf(s)===-1});if(o.indexOf(i)===-1)return o[0]}}function Su(e,t){return(0,ge.T8)(t,e,5)}function bh(e){return ds.indexOf(e)!==-1}function ms(e,t,n){ke.call(this,e),this.preExecute("shape.append",function(i){var r=i.source,a=i.shape;i.position||((0,y.is)(a,"bpmn:TextAnnotation")?i.position={x:r.x+r.width/2+75,y:r.y-50-a.height/2}:i.position={x:r.x+r.width+80+a.width/2,y:r.y+r.height/2})},!0)}N()(ms,ke),ms.$inject=["eventBus","elementFactory","bpmnRules"];function gs(e,t){e.invoke(ke,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,a=(0,p.hX)(r.incoming.concat(r.outgoing),function(o){return(0,y.is)(o,"bpmn:Association")});(0,p.Ed)(a,function(o){t.moveConnection(o,{x:0,y:0},i)})},!0)}N()(gs,ke),gs.$inject=["injector","modeling"];var wu=500;function ro(e,t){t.invoke(ke,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",wu,function(i){var r=i.elements;r=r.filter(function(a){var o=a.host;return Tu(a,o)}),r.length===1&&r.map(function(a){return r.indexOf(a)}).forEach(function(a){var o=r[a];i.elements[a]=n.replaceShape(r[a],o)})},!0),this.preExecute("elements.move",wu,function(i){var r=i.shapes,a=i.newHost;if(r.length===1){var o=r[0];Tu(o,a)&&(i.shapes=[n.replaceShape(o,a)])}},!0)}ro.$inject=["bpmnReplace","injector"],N()(ro,ke),ro.prototype.replaceShape=function(e,t){var n=xh(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function xh(e){var t=(0,y.SS)(e),n=t.eventDefinitions;return n&&n[0]}function Tu(e,t){return!(0,on.j_)(e)&&(0,y.JZ)(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}var Sh=2e3;function ys(e,t,n){ke.call(this,e);function i(r){return(0,p.hX)(r.attachers,function(a){return(0,y.is)(a,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(r){var a=r.context.source,o=r.context.target,s=i(o);(0,y.is)(a,"bpmn:EventBasedGateway")&&(0,y.is)(o,"bpmn:ReceiveTask")&&s.length>0&&n.removeElements(s)}),this.postExecute("connection.reconnect",function(r){var a=r.context.oldSource,o=r.context.newSource;(0,y.is)(a,"bpmn:Gateway")&&(0,y.is)(o,"bpmn:EventBasedGateway")&&(0,p.Ed)(o.outgoing,function(s){var c=s.target,l=i(c);(0,y.is)(c,"bpmn:ReceiveTask")&&l.length>0&&n.removeElements(l)})}),e.on("moddleCopy.canCopyProperty",Sh,function(r){var a=r.parent,o=r.property,s=r.propertyName,c=t.getPropertyDescriptor(a,s);c&&c.isReference&&(0,y.is)(o,"bpmn:RootElement")&&a.set(s,o)})}ys.$inject=["eventBus","moddle","modeling"],N()(ys,ke);var wh=500;function Es(e,t,n,i,r){n.invoke(ke,this);function a(f){return(0,y.JZ)(f,["bpmn:ReceiveTask","bpmn:SendTask"])||Th(f,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function o(f){var d=e.getDefinitions(),m=d.get("rootElements");return!!(0,p.sE)(m,(0,p.KQ)({id:f.id}))}function s(f){if((0,y.is)(f,"bpmn:ErrorEventDefinition"))return"errorRef";if((0,y.is)(f,"bpmn:EscalationEventDefinition"))return"escalationRef";if((0,y.is)(f,"bpmn:MessageEventDefinition"))return"messageRef";if((0,y.is)(f,"bpmn:SignalEventDefinition"))return"signalRef"}function c(f){if((0,y.JZ)(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.get("messageRef");var d=f.get("eventDefinitions"),m=d[0];return m.get(s(m))}function l(f,d){if((0,y.JZ)(f,["bpmn:ReceiveTask","bpmn:SendTask"]))return f.set("messageRef",d);var m=f.get("eventDefinitions"),_=m[0];return _.set(s(_),d)}this.executed("shape.create",function(f){var d=f.shape;if(a(d)){var m=(0,y.SS)(d),_=c(m),x;_&&!o(_)&&(x=e.getDefinitions().get("rootElements"),(0,St.IH)(x,_),f.addedRootElement=_)}},!0),this.reverted("shape.create",function(f){var d=f.addedRootElement;if(d){var m=e.getDefinitions().get("rootElements");(0,St.Od)(m,d)}},!0),t.on("copyPaste.copyElement",function(f){var d=f.descriptor,m=f.element;if(a(m)){var _=(0,y.SS)(m),x=c(_);x&&(d.referencedRootElement=x)}}),t.on("copyPaste.pasteElement",wh,function(f){var d=f.descriptor,m=d.businessObject;if(a(m)){var _=d.referencedRootElement;_&&(o(_)||(_=i.copyElement(_,r.create(_.$type))),l(m,_))}})}Es.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],N()(Es,ke);function Th(e,t){return(0,p.kJ)(t)||(t=[t]),(0,p.G)(t,function(n){return(0,wt.JG)(e,n)})}function _s(e){e.invoke(ke,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;(0,y.is)(i,"bpmn:Lane")&&!(0,y.is)(r,"bpmn:Lane")&&(n.parent=$a(i,"bpmn:Participant"))})}_s.$inject=["injector"],N()(_s,ke);var ao=1500,Rh=2e3;function Ru(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],ao,function(i){var r=i.context,a=r.shape||i.shape,o=i.hover;(0,y.is)(o,"bpmn:Lane")&&!(0,y.JZ)(a,["bpmn:Lane","bpmn:Participant"])&&(i.hover=bi(o),i.hoverGfx=e.getGraphics(i.hover));var s=n.getRootElement();o!==s&&(a.labelTarget||(0,y.is)(a,"bpmn:Group"))&&(i.hover=s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],ao,function(i){var r=i.hover;(0,y.is)(r,"bpmn:Lane")&&(i.hover=bi(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],ao,function(i){var r=i.context,a=i.hover,o=r.type;(0,y.is)(a,"bpmn:Lane")&&/reconnect/.test(o)&&(i.hover=bi(a)||a,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],ao,function(i){var r=i.context,a=r.start;(0,y.is)(a,"bpmn:Lane")&&(r.start=bi(a)||a)}),t.on("shape.move.start",Rh,function(i){var r=i.shape;(0,y.is)(r,"bpmn:Lane")&&(i.shape=bi(r)||r)})}Ru.$inject=["elementRegistry","eventBus","canvas"];function bs(e,t,n){ke.call(this,e),this.preExecute("shape.create",function(i){var r=i.context,a=r.shape;if((0,y.is)(a,"bpmn:DataObjectReference")&&a.type!=="label"){var o=t.create("bpmn:DataObject");a.businessObject.dataObjectRef=o}})}bs.$inject=["eventBus","bpmnFactory","moddle"],N()(bs,ke);var xs=20,Ss=20,Cu=30,oo=2e3;function ws(e,t,n){ke.call(this,t),t.on(["create.start","shape.move.start"],oo,function(r){var a=r.context,o=a.shape,s=e.getRootElement();if(!(!(0,y.is)(o,"bpmn:Participant")||!(0,y.is)(s,"bpmn:Process")||!s.children.length)){var c=s.children.filter(function(d){return!(0,y.is)(d,"bpmn:Group")&&!(0,on.j_)(d)&&!Ah(d)});if(c.length){var l=(0,rn.jY)(c),f=Ch(o,l);(0,p.f0)(o,f),a.createConstraints=Ph(o,l)}}}),t.on("create.start",oo,function(r){var a=r.context,o=a.shape,s=e.getRootElement(),c=e.getGraphics(s);function l(f){f.element=s,f.gfx=c}(0,y.is)(o,"bpmn:Participant")&&(0,y.is)(s,"bpmn:Process")&&(t.on("element.hover",oo,l),t.once("create.cleanup",function(){t.off("element.hover",l)}))});function i(){var r=e.getRootElement();return(0,y.is)(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",oo,function(r){var a=r.elements,o=r.parent,s=Dh(a),c;s&&(0,y.is)(o,"bpmn:Process")&&(r.parent=i(),c=r.hints=r.hints||{},c.participant=s,c.process=o,c.processRef=(0,y.SS)(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var a=r.parent,o=r.shape;(0,y.is)(o,"bpmn:Participant")&&(0,y.is)(a,"bpmn:Process")&&(r.parent=i(),r.process=a,r.processRef=(0,y.SS)(o).get("processRef"))},!0),this.execute("shape.create",function(r){var a=r.hints||{},o=r.process||a.process,s=r.shape,c=a.participant;o&&(!c||s===c)&&(0,y.SS)(s).set("processRef",(0,y.SS)(o))},!0),this.revert("shape.create",function(r){var a=r.hints||{},o=r.process||a.process,s=r.processRef||a.processRef,c=r.shape,l=a.participant;o&&(!l||c===l)&&(0,y.SS)(c).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var a=r.hints||{},o=r.process||r.hints.process,s=r.shape,c=a.participant;if(o){var l=o.children.slice();c?s===c&&n.moveElements(l,{x:0,y:0},c):n.moveElements(l,{x:0,y:0},s)}},!0)}ws.$inject=["canvas","eventBus","modeling"],N()(ws,ke);function Ch(e,t){t={width:t.width+xs*2+Cu,height:t.height+Ss*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function Ph(e,t){return t=(0,ge.JA)(t),{bottom:t.top+e.height/2-Ss,left:t.right-e.width/2+xs,top:t.bottom-e.height/2+Ss,right:t.left+e.width/2-xs-Cu}}function Ah(e){return!!e.waypoints}function Dh(e){return(0,p.sE)(e,function(t){return(0,y.is)(t,"bpmn:Participant")})}var Pu="__targetRef_placeholder";function Ts(e,t){ke.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Au(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Au(a));function n(o,s,c){var l=o.get("dataInputAssociations");return(0,p.sE)(l,function(f){return f!==c&&f.targetRef===s})}function i(o,s){var c=o.get("properties"),l=(0,p.sE)(c,function(f){return f.name===Pu});return!l&&s&&(l=t.create("bpmn:Property",{name:Pu}),(0,St.IH)(c,l)),l}function r(o,s){var c=i(o);c&&(n(o,c,s)||(0,St.Od)(o.get("properties"),c))}function a(o){var s=o.context,c=s.connection,l=c.businessObject,f=c.target,d=f&&f.businessObject,m=s.newTarget,_=m&&m.businessObject,x=s.oldTarget||s.target,$=x&&x.businessObject,Y=c.businessObject,Te;$&&$!==d&&r($,l),_&&_!==d&&r(_,l),d?(Te=i(d,!0),Y.targetRef=Te):Y.targetRef=null}}Ts.$inject=["eventBus","bpmnFactory"],N()(Ts,ke);function Au(e){return function(t){var n=t.context,i=n.connection;if((0,y.is)(i,"bpmn:DataInputAssociation"))return e(t)}}function so(e){this._bpmnUpdater=e}so.$inject=["bpmnUpdater"],so.prototype.execute=function(e){var t=e.dataStoreBo,n=e.newSemanticParent,i=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=t.di.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)},so.prototype.revert=function(e){var t=e.dataStoreBo,n=e.oldSemanticParent,i=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(t.di,i)};function Rs(e,t,n,i){ke.call(this,i),t.registerHandler("dataStore.updateContainment",so);function r(){return n.filter(function(s){return(0,y.is)(s,"bpmn:Participant")&&(0,y.SS)(s).processRef})[0]}function a(s){return s.children.filter(function(c){return(0,y.is)(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function o(s,c){var l=s.businessObject||s;if(c=c||r(),c){var f=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:l,newSemanticParent:f.processRef||f,newDiParent:f.di})}}this.preExecute("shape.create",function(s){var c=s.context,l=c.shape;(0,y.is)(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var c=s.context,l=c.shapes,f=l.filter(function(d){return(0,y.is)(d,"bpmn:DataStoreReference")});f.length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(d){return!(0,y.is)(d,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,f=l.parent;(0,y.is)(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(0,y.is)(f,"bpmn:Collaboration")&&o(l)}),this.postExecute("shape.move",function(s){var c=s.context,l=c.shape,f=c.oldParent,d=l.parent;if(!(0,y.is)(f,"bpmn:Collaboration")&&(0,y.is)(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(0,y.is)(d,"bpmn:Collaboration")){var m=(0,y.is)(f,"bpmn:Participant")?f:Oh(f,"bpmn:Participant");o(l,m)}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.shape,f=e.getRootElement();(0,y.JZ)(l,["bpmn:Participant","bpmn:SubProcess"])&&(0,y.is)(f,"bpmn:Collaboration")&&a(f).filter(function(d){return Mh(d,l)}).forEach(function(d){o(d)})}),this.postExecute("canvas.updateRoot",function(s){var c=s.context,l=c.oldRoot,f=c.newRoot,d=a(l);d.forEach(function(m){(0,y.is)(f,"bpmn:Process")&&o(m,f)})})}Rs.$inject=["canvas","commandStack","elementRegistry","eventBus"],N()(Rs,ke);function Mh(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function Oh(e,t){for(;e.parent;){if((0,y.is)(e.parent,t))return e.parent;e=e.parent}}var Ih=500;function Cs(e,t,n){ke.call(this,e);function i(r,a){var o=hr(a),s=[],c=[];if((0,rn.om)(o,function(m){return m.y>r.y?c.push(m):s.push(m),m.children}),!!o.length){var l;c.length&&s.length?l=r.height/2:l=r.height;var f,d;s.length&&(f=n.calculateAdjustments(s,"y",l,r.y-10),n.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:l},"s")),c.length&&(d=n.calculateAdjustments(c,"y",-l,r.y+r.height+10),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:-l},"n"))}}this.postExecuted("shape.delete",Ih,function(r){var a=r.context,o=a.hints,s=a.shape,c=a.oldParent;(0,y.is)(s,"bpmn:Lane")&&(o&&o.nested||i(s,c))})}Cs.$inject=["eventBus","modeling","spaceTool"],N()(Cs,ke);var Du=500;function co(e,t){t.invoke(ke,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Du,function(i){var r=i.elements;r.filter(function(a){var o=a.host;return Mu(a,o)}).map(function(a){return r.indexOf(a)}).forEach(function(a){i.elements[a]=n.replaceShape(r[a])})},!0),this.preExecute("elements.move",Du,function(i){var r=i.shapes,a=i.newHost;r.forEach(function(o,s){var c=o.host;Mu(o,Nh(r,c)?c:a)&&(r[s]=n.replaceShape(o))})},!0)}co.$inject=["bpmnReplace","injector"],N()(co,ke),co.prototype.replaceShape=function(e){var t=Lh(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function Lh(e){var t=(0,y.SS)(e),n=t.eventDefinitions;return n&&n[0]}function Mu(e,t){return!(0,on.j_)(e)&&(0,y.is)(e,"bpmn:BoundaryEvent")&&!t}function Nh(e,t){return e.indexOf(t)!==-1}function Ps(e,t,n){ke.call(this,e);function i(r,a,o){var s=a.waypoints,c,l,f,d,m,_,x,$=r.outgoing.slice(),Y=r.incoming.slice(),Te;(0,p.hj)(o.width)?Te=(0,ge.wS)(o):Te=o;var Se=kr(s,Te);if(Se){if(c=s.slice(0,Se.index),l=s.slice(Se.index+(Se.bendpoint?1:0)),!c.length||!l.length)return;f=Se.bendpoint?s[Se.index]:Te,(c.length===1||!Ou(r,c[c.length-1]))&&c.push(Iu(f)),(l.length===1||!Ou(r,l[0]))&&l.unshift(Iu(f))}d=a.source,m=a.target,t.canConnect(d,r,a)&&(n.reconnectEnd(a,r,c||Te),_=a),t.canConnect(r,m,a)&&(_?x=n.connect(r,m,{type:a.type,waypoints:l}):(n.reconnectStart(a,r,l||Te),x=a));var Q=[].concat(_&&(0,p.hX)(Y,function(ne){return ne.source===_.source})||[],x&&(0,p.hX)($,function(ne){return ne.target===x.target})||[]);Q.length&&n.removeElements(Q)}this.preExecute("elements.move",function(r){var a=r.newParent,o=r.shapes,s=r.delta,c=o[0];if(!(!c||!a)){a&&a.waypoints&&(r.newParent=a=a.parent);var l=(0,ge.wS)(c),f={x:l.x+s.x,y:l.y+s.y},d=(0,p.sE)(a.children,function(m){var _=t.canInsert(o,m);return _&&kr(m.waypoints,f)});d&&(r.targetFlow=d,r.position=f)}},!0),this.postExecuted("elements.move",function(r){var a=r.shapes,o=r.targetFlow,s=r.position;o&&i(a[0],o,s)},!0),this.preExecute("shape.create",function(r){var a=r.parent,o=r.shape;t.canInsert(o,a)&&(r.targetFlow=a,r.parent=a.parent)},!0),this.postExecuted("shape.create",function(r){var a=r.shape,o=r.targetFlow,s=r.position;o&&i(a,o,s)},!0)}N()(Ps,ke),Ps.$inject=["eventBus","bpmnRules","modeling"];function Ou(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Iu(e){return(0,p.f0)({},e)}function As(e,t){ke.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.source,a=i.target,o=a.incoming.slice();i.hints&&i.hints.createElementsBehavior===!1||(0,y.is)(r,"bpmn:EventBasedGateway")&&a.incoming.length&&o.filter(Ds).forEach(function(s){t.removeConnection(s)})}),this.preExecuted("shape.replace",function(n){var i=n.context.newShape,r,a;(0,y.is)(i,"bpmn:EventBasedGateway")&&(r=i.outgoing.filter(Ds).map(function(o){return o.target}),a=r.reduce(function(o,s){var c=s.incoming.filter(Ds);return o.concat(c)},[]),a.forEach(function(o){o.source!==i&&t.removeConnection(o)}))})}As.$inject=["eventBus","modeling"],N()(As,ke);function Ds(e){return(0,y.is)(e,"bpmn:SequenceFlow")}var Bh=2e3;function Ms(e,t,n,i,r,a){r.invoke(ke,this);function o(){var d=t.getRootElement(),m=(0,y.SS)(d);return m.$parent}function s(d){var m=(0,y.SS)(d),_=m.categoryValueRef;if(_){var x=_.$parent;_&&((0,St.Od)(x.categoryValue,_),x&&!x.categoryValue.length&&c(x))}}function c(d){var m=o();(0,St.Od)(m.get("rootElements"),d)}function l(){return n.filter(function(d){return(0,y.is)(d,"bpmn:Group")})}function f(d,m){return d.some(function(_){var x=(0,y.SS)(_);return x.categoryValueRef&&x.categoryValueRef===m})}this.executed("shape.delete",function(d){var m=d.context,_=m.shape;if((0,y.is)(_,"bpmn:Group")){var x=(0,y.SS)(_),$=x.categoryValueRef,Y=l();f(Y,$)||s(_)}}),this.reverted("shape.delete",function(d){var m=d.context,_=m.shape;if((0,y.is)(_,"bpmn:Group")){var x=(0,y.SS)(_),$=x.categoryValueRef,Y=o(),Te=$?$.$parent:null;(0,St.IH)(Te.get("categoryValue"),$),(0,St.IH)(Y.get("rootElements"),Te)}}),this.execute("shape.create",function(d){var m=d.context,_=m.shape,x=(0,y.SS)(_);if((0,y.is)(x,"bpmn:Group")&&!x.categoryValueRef){var $=o(),Y=fs($,e);x.categoryValueRef=Y}}),this.revert("shape.create",function(d){var m=d.context,_=m.shape;(0,y.is)(_,"bpmn:Group")&&(s(_),delete(0,y.SS)(_).categoryValueRef)}),i.on("moddleCopy.canCopyProperty",Bh,function(d){var m=d.property,_;if((0,y.is)(m,"bpmn:CategoryValue"))return _=fs(o(),e),a.copyElement(m,_)})}Ms.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],N()(Ms,ke);function Os(e,t,n,i){var r,a,o,s,c;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(a=e.y-n.y,o=e.x-n.x,c=(i.x-n.x)*a-(i.y-n.y)*o,s=c/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function Lu(e){function t(i,r,a){var o={x:a.x,y:a.y-50},s={x:a.x-50,y:a.y},c=Os(i,r,a,o),l=Os(i,r,a,s),f;c&&l?Nu(c,a)>Nu(l,a)?f=l:f=c:f=c||l,i.original=f}function n(i){var r=i.waypoints;t(r[0],r[1],(0,ge.wS)(i.source)),t(r[r.length-1],r[r.length-2],(0,ge.wS)(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}Lu.$inject=["eventBus"];function Nu(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Is(e){ke.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=(0,y.SS)(n.context.shape);(0,y.JZ)(i,t)&&!i.di.get("isHorizontal")&&i.di.set("isHorizontal",!0)})}Is.$inject=["eventBus"],N()(Is,ke);function Bu(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function ku(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function kh(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function jh(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],a=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/a}function ju(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},a=jh([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+a*r.x,y:n.y+a*r.y}}function Hh(e,t){var n=ju(e,t),i={x:n.x-e.x,y:n.y-e.y};return Bu(i)}function uo(e,t){return Bu({x:e.x-t.x,y:e.y-t.y})}var Hu=Math.sqrt,Fu=Math.min,Fh=Math.max,zu=Math.abs;function Uu(e){return Math.pow(e,2)}function ta(e,t){return Hu(Uu(e.x-t.x)+Uu(e.y-t.y))}function zh(e,t){var n=0,i,r,a,o,s,c,l,f,d,m,_;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],Wu(i,r)?l=[i]:(a=ta(e,i),o=ta(e,r),c=Fu(a,o),l=Uh(i,r,e,c)),l.length<1)throw new Error("expected between [1, 2] circle -> line intersections");l.length===1&&(f={type:"bendpoint",position:l[0],segmentIndex:n,bendpointIndex:Wu(i,l[0])?n:n+1}),l.length===2&&(s=Wh(l[0],l[1]),f={type:"segment",position:s,segmentIndex:n,relativeLocation:ta(i,s)/ta(i,r)}),d=ta(f.position,e),(!_||m>d)&&(_=f,m=d)}return _}function Uh(e,t,n,i){var r=t.x-e.x,a=t.y-e.y,o=n.x-e.x,s=n.y-e.y,c=r*r+a*a,l=r*o+a*s,f=o*o+s*s-i*i,d=l/c,m=f/c,_=d*d-m;if(_<0&&_>-1e-6&&(_=0),_<0)return[];var x=Hu(_),$=-d+x,Y=-d-x,Te={x:e.x-r*$,y:e.y-a*$};if(_===0)return[Te];var Se={x:e.x-r*Y,y:e.y-a*Y};return[Te,Se].filter(function(Q){return $h(Q,e,t)})}function $h(e,t,n){return $u(e.x,t.x,n.x)&&$u(e.y,t.y,n.y)}function $u(e,t,n){return e>=Fu(t,n)-lo&&e<=Fh(t,n)+lo}function Wh(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var lo=.1;function Wu(e,t){return zu(e.x-t.x)<=lo&&zu(e.y-t.y)<=lo}function Gh(e,t,n,i){var r=n.segmentIndex,a=t.length-e.length;if(i.segmentMove){var o=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===o?s:r>=s?r+a<s?s:r+a:r}if(i.bendpointMove){var c=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex,f;if(a===0)return r;if(r>=l&&(f=c?r+1:r-1),r<l&&(f=r,c&&n.type!=="bendpoint"&&l-1===r)){var d=Gu(t,l);d<n.relativeLocation&&f++}return f}return a===0?r:i.connectionStart?r===0?0:null:i.connectionEnd&&r===e.length-2?t.length-2:null}function Vh(e,t,n,i){var r=0,a=0,o=Kh(e),s=zh(o,n),c=s.segmentIndex,l=Gh(n,t,s,i);if(l===null)return{x:r,y:a};if(l<0||l>t.length-2)return{x:r,y:a};var f=Vu(n,c),d=Vu(t,l),m=s.position,_=Zh(f,m),x=Yh(f,d);if(s.type==="bendpoint"){var $=t.length-n.length,Y=s.bendpointIndex,Te=n[Y];if(t.indexOf(Te)!==-1)return{x:r,y:a};if($===0){var Se=t[Y];return{x:Se.x-s.position.x,y:Se.y-s.position.y}}$<0&&Y!==0&&Y<n.length-1&&(_=Gu(n,Y))}var Q={x:(d[1].x-d[0].x)*_+d[0].x,y:(d[1].y-d[0].y)*_+d[0].y},ne=kh({x:o.x-m.x,y:o.y-m.y},x);return r=Q.x+ne.x-o.x,a=Q.y+ne.y-o.y,(0,ge.ex)({x:r,y:a})}function Gu(e,t){var n=uo(e[t-1],e[t]),i=uo(e[t],e[t+1]),r=n/(n+i);return r}function Kh(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Yh(e,t){var n=ku(e),i=ku(t);return i-n}function Vu(e,t){return[e[t],e[t+1]]}function Zh(e,t){var n=uo(e[0],e[1]),i=uo(e[0],t);return n===0?0:i/n}function na(e,t,n){var i=U(t),r=U(n),a=pe(e,i),o={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)};return(0,ge.ex)({x:r.x+o.x,y:r.y+o.y})}function Ku(e,t,n){var i=U(e),r=U(t),a=U(n),o=pe(e,i),s=pe(i,r),c=Xh(i,t,n);if(c)return c;var l={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},f={x:a.x+l.x,y:a.y+l.y};return(0,ge.ex)({x:f.x+o.x-e.x,y:f.y+o.y-e.y})}function Xh(e,t,n){var i=(0,ge.JA)(t),r=(0,ge.JA)(n);if(Jh(i,r))return null;var a=(0,ge.T8)(t,e),o,s,c;if(a==="top")o={x:0,y:r.bottom-i.bottom};else if(a==="bottom")o={x:0,y:r.top-i.top};else if(a==="right")o={x:r.left-i.left,y:0};else if(a==="left")o={x:r.right-i.right,y:0};else return null;return s={x:e.x+o.x,y:e.y+o.y},c=(0,ge.T8)(n,s),c!==a?null:o}function Jh(e,t){return qh(e,t)||Qh(e,t)}function qh(e,t){return e.right!==t.right&&e.left!==t.left}function Qh(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var ed={width:90,height:20},Yu="name",Zu="text";function Ls(e,t,n,i){ke.call(this,e),this.postExecute("element.updateProperties",function(a){var o=a.context,s=o.element,c=o.properties;if(Yu in c&&t.updateLabel(s,c[Yu]),Zu in c&&(0,y.is)(s,"bpmn:TextAnnotation")){var l=i.getTextAnnotationBounds({x:s.x,y:s.y,width:s.width,height:s.height},c[Zu]||"");t.updateLabel(s,c.text,l)}}),this.postExecute(["shape.create","connection.create"],function(a){var o=a.context,s=o.hints||{};if(s.createElementsBehavior!==!1){var c=o.shape||o.connection,l=c.businessObject;if(!((0,on.j_)(c)||!(0,on.ly)(c))&&(0,qi.i)(c)){var f=(0,on.qe)(c),d=i.getExternalLabelBounds(ed,(0,qi.i)(c));t.createLabel(c,f,{id:l.id+"_label",businessObject:l,width:d.width,height:d.height})}}}),this.postExecute("shape.delete",function(a){var o=a.context,s=o.labelTarget,c=o.hints||{};s&&c.unsetLabel!==!1&&t.updateLabel(s,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(a){var o=a.context,s=o.shape,c,l;s.labelTarget&&(0,y.is)(s.labelTarget||s,"bpmn:BaseElement")&&(c=s.businessObject,l=c.di,l.label||(l.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")})),(0,p.f0)(l.label.bounds,{x:s.x,y:s.y,width:s.width,height:s.height}))});function r(a){var o=a.context,s=o.connection,c=s.label,l=(0,p.f0)({},o.hints),f=o.newWaypoints||s.waypoints,d=o.oldWaypoints;return typeof l.startChanged=="undefined"&&(l.startChanged=!!l.connectionStart),typeof l.endChanged=="undefined"&&(l.endChanged=!!l.connectionEnd),Vh(c,f,d,l)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var o=a.context,s=o.hints||{};if(s.labelBehavior!==!1){var c=o.connection,l=c.label,f;!l||!l.parent||(f=r(a),t.moveShape(l,f))}}),this.postExecute(["shape.replace"],function(a){var o=a.context,s=o.newShape,c=o.oldShape,l=(0,y.SS)(s);l&&(0,on.ly)(l)&&c.label&&s.label&&(s.label.x=c.label.x,s.label.y=c.label.y)}),this.postExecute("shape.resize",function(a){var o=a.context,s=o.shape,c=o.newBounds,l=o.oldBounds;if((0,on.fF)(s)){var f=s.label,d=(0,ge.wS)(f),m=id(l),_=nd(d,m),x=td(_,l,c);t.moveShape(f,x)}})}N()(Ls,ke),Ls.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function td(e,t,n){var i=na(e,t,n);return(0,ge.ex)(pe(i,e))}function nd(e,t){if(t.length){var n=rd(e,t);return ju(e,n)}}function id(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function rd(e,t){var n=t.map(function(r){return{line:r,distance:Hh(e,r)}}),i=(0,p.MR)(n,"distance");return i[0].line}function po(e,t,n){var i=ho(e),r=Ju(i,t),a=i[0];return r.length?r[r.length-1]:na(a.original||a,n,t)}function fo(e,t,n){var i=ho(e),r=Ju(i,t),a=i[i.length-1];return r.length?r[0]:na(a.original||a,n,t)}function Ns(e,t,n){var i=ho(e),r=Xu(t,n),a=i[0];return na(a.original||a,r,t)}function Bs(e,t,n){var i=ho(e),r=Xu(t,n),a=i[i.length-1];return na(a.original||a,r,t)}function Xu(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function ho(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function Ju(e,t){var n=(0,p.UI)(e,od);return(0,p.hX)(n,function(i){return ad(i,t)})}function ad(e,t){return(0,ge.T8)(t,e,1)==="intersect"}function od(e){return e.original||e}function ks(e,t){ke.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(sd(i,r)){var a=cd(i);a.incoming.forEach(function(o){var s=fo(o,r,i);t.reconnectEnd(o,r,s)}),a.outgoing.forEach(function(o){var s=po(o,r,i);t.reconnectStart(o,r,s)})}},!0)}ks.$inject=["eventBus","modeling"],N()(ks,ke);function sd(e,t){return(0,y.is)(e,"bpmn:Participant")&&(0,wt.ul)(e)&&(0,y.is)(t,"bpmn:Participant")&&!(0,wt.ul)(t)}function cd(e){var t=(0,rn.PB)([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(a){(0,y.is)(a,"bpmn:MessageFlow")&&n.push(a)}),r.outgoing.forEach(function(a){(0,y.is)(a,"bpmn:MessageFlow")&&i.push(a)}))},[]),{incoming:n,outgoing:i}}var ud="flow elements must be children of pools/participants";function qu(e,t,n){function i(r,a,o){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:o||2e3,html:"<div>"+a+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var a=r.context,o=a.shape,s=a.target;(0,y.is)(s,"bpmn:Collaboration")&&(0,y.is)(o,"bpmn:FlowNode")&&i(r,n(ud))})}qu.$inject=["eventBus","tooltips","translate"];function js(e,t,n,i){ke.call(this,e);var r=i.get("dragging",!1);function a(c){var l=c.source,f=c.target,d=c.parent;if(d){var m,_;(0,y.is)(c,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(l,f)||(_=!0),n.canConnectMessageFlow(l,f)&&(m="bpmn:MessageFlow")),(0,y.is)(c,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(l,f)||(_=!0),n.canConnectSequenceFlow(l,f)&&(m="bpmn:SequenceFlow")),(0,y.is)(c,"bpmn:Association")&&!n.canConnectAssociation(l,f)&&(_=!0),_&&t.removeConnection(c),m&&t.connect(l,f,{type:m,waypoints:c.waypoints.slice()})}}function o(c){var l=c.context,f=l.connection,d=l.newSource||f.source,m=l.newTarget||f.target,_,x;_=n.canConnect(d,m),!(!_||_.type===f.type)&&(x=t.connect(d,m,{type:_.type,waypoints:f.waypoints.slice()}),t.removeConnection(f),l.connection=x,r&&s(f,x))}function s(c,l){var f=r.context(),d=f&&f.payload.previousSelection,m;!d||!d.length||(m=d.indexOf(c),m!==-1&&d.splice(m,1,l))}this.postExecuted("elements.move",function(c){var l=c.closure,f=l.allConnections;(0,p.Ed)(f,a)},!0),this.preExecute("connection.reconnect",o),this.postExecuted("element.updateProperties",function(c){var l=c.context,f=l.properties,d=l.element,m=d.businessObject,_;f.default&&(_=(0,p.sE)(d.outgoing,(0,p.KQ)({id:d.businessObject.default.id})),_&&t.updateProperties(_,{conditionExpression:void 0})),f.conditionExpression&&m.sourceRef.default===m&&t.updateProperties(d.source,{default:void 0})})}N()(js,ke),js.$inject=["eventBus","modeling","bpmnRules","injector"];function Hs(e,t){ke.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;(0,y.is)(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&t.makeProcess()},!0)}Hs.$inject=["eventBus","modeling"],N()(Hs,ke);function vo(e,t,n,i,r,a){i.invoke(ke,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(o){var s=o.context,c=s.parent,l=s.elements,f=t.canReplace(l,c);f&&this.replaceElements(l,f.replacements)},this),this.postExecuted(["elements.move"],500,function(o){var s=o.context,c=s.newParent,l=s.newHost,f=[];(0,p.Ed)(s.closure.topLevel,function(m){(0,wt.J5)(m)?f=f.concat(m.children):f=f.concat(m)}),f.length===1&&l&&(c=l);var d=t.canReplace(f,c);d&&this.replaceElements(f,d.replacements,l)},this),this.postExecute(["shape.replace"],1500,function(o){var s=o.context,c=s.oldShape,l=s.newShape,f=c.attachers,d;f&&f.length&&(d=t.canReplace(f,l),this.replaceElements(f,d.replacements))},this),this.postExecuted(["shape.replace"],1500,function(o){var s=o.context,c=s.oldShape,l=s.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(l,{id:c.id})})}N()(vo,ke),vo.prototype.replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;(0,p.Ed)(t,function(a){var o={type:a.newElementType},s=n.get(a.oldElementId),c=e.indexOf(s);e[c]=i.replaceElement(s,o,{select:!1})}),t&&r.select(e)},vo.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var ld=1500,vr={width:300,height:60},ia={width:300,height:150},Qu={width:140,height:120},el={width:50,height:30};function tl(e){e.on("resize.start",ld,function(t){var n=t.context,i=n.shape,r=n.direction,a=n.balanced;((0,y.is)(i,"bpmn:Lane")||(0,y.is)(i,"bpmn:Participant"))&&(n.resizeConstraints=gd(i,r,a)),(0,y.is)(i,"bpmn:Participant")&&(n.minDimensions=ia),(0,y.is)(i,"bpmn:SubProcess")&&(0,wt.ul)(i)&&(n.minDimensions=Qu),(0,y.is)(i,"bpmn:TextAnnotation")&&(n.minDimensions=el)})}tl.$inject=["eventBus"];var mo=Math.abs,pd=Math.min,fd=Math.max;function nl(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function go(e,t,n){return nl(e,t,n,pd)}function yo(e,t,n){return nl(e,t,n,fd)}var hd=20,dd=50,vd=20,md=20;function gd(e,t,n){var i=bi(e),r=!0,a=!0,o=Ya(i,[i]),s=(0,ge.JA)(e),c={},l={};/e/.test(t)?l.right=s.left+vr.width:/w/.test(t)&&(l.left=s.right-vr.width),o.forEach(function(d){var m=(0,ge.JA)(d);/n/.test(t)&&(m.top<s.top-10&&(r=!1),n&&mo(s.top-m.bottom)<10&&yo(c,"top",m.top+vr.height),mo(s.top-m.top)<5&&go(l,"top",m.bottom-vr.height)),/s/.test(t)&&(m.bottom>s.bottom+10&&(a=!1),n&&mo(s.bottom-m.top)<10&&go(c,"bottom",m.bottom-vr.height),mo(s.bottom-m.bottom)<5&&yo(l,"bottom",m.top+vr.height))});var f=i.children.filter(function(d){return!d.hidden&&!d.waypoints&&((0,y.is)(d,"bpmn:FlowElement")||(0,y.is)(d,"bpmn:Artifact"))});return f.forEach(function(d){var m=(0,ge.JA)(d);r&&/n/.test(t)&&go(l,"top",m.top-vd),/e/.test(t)&&yo(l,"right",m.right+hd),a&&/s/.test(t)&&yo(l,"bottom",m.bottom+md),/w/.test(t)&&go(l,"left",m.left-dd)}),{min:l,max:c}}var il=1001;function rl(e,t){e.on("resize.start",il+500,function(n){var i=n.context,r=i.shape;((0,y.is)(r,"bpmn:Lane")||(0,y.is)(r,"bpmn:Participant"))&&(i.balanced=!(0,gi.RJ)(n))}),e.on("resize.end",il,function(n){var i=n.context,r=i.shape,a=i.canExecute,o=i.newBounds;if((0,y.is)(r,"bpmn:Lane")||(0,y.is)(r,"bpmn:Participant"))return a&&(o=(0,ge.aR)(o),t.resizeLane(r,o,i.balanced)),!1})}rl.$inject=["eventBus","modeling"];function Fs(e,t,n){ke.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var a=r.incoming[0],o=r.outgoing[0];if(!(!(0,y.is)(a,"bpmn:SequenceFlow")||!(0,y.is)(o,"bpmn:SequenceFlow"))&&t.canConnect(a.source,o.target,a)){var s=yd(a.waypoints,o.waypoints);n.reconnectEnd(a,o.target,s)}}})}N()(Fs,ke),Fs.$inject=["eventBus","bpmnRules","modeling"];function Pr(e){return e.original||e}function yd(e,t){var n=Os(Pr(e[e.length-2]),Pr(e[e.length-1]),Pr(t[1]),Pr(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[Pr(e[0]),Pr(t[t.length-1])]}var Ed=Math.max;function al(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,a={};return(0,p.Ed)(n,function(o){var s=o.id;(0,y.is)(o,"bpmn:Participant")&&(_d(i)?a[s]=ia:a[s]={width:ia.width,height:bd(o,r)}),(0,y.is)(o,"bpmn:SubProcess")&&(0,wt.ul)(o)&&(a[s]=Qu),(0,y.is)(o,"bpmn:TextAnnotation")&&(a[s]=el)}),a})}al.$inject=["eventBus"];function _d(e){return e==="x"}function bd(e,t){var n;return xd(e)?(n=Sd(e,t),Ed(ia.height,n)):ia.height}function xd(e){return!!hr(e).length}function Sd(e,t){var n=hr(e),i;return i=ol(n,t),e.height-i.height+vr.height}function ol(e,t){var n,i,r;for(n=0;n<e.length;n++)if(i=e[n],t>=i.y&&t<=i.y+i.height)return r=hr(i),r.length?ol(r,t):i}function zs(e,t){e.invoke(ke,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!(0,y.is)(r,"bpmn:SubProcess")||!(0,y.is)(i,"bpmn:Task")||!(0,wt.ul)(r))){var a=wd(r);t.createShape({type:"bpmn:StartEvent"},a,r)}})}zs.$inject=["injector","modeling"],N()(zs,ke);function wd(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}var Us=500;function $s(e,t,n,i){ke.call(this,e);function r(s){s.length&&s.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function a(s,c){var l=s.children,f=c,d,m;return d=Td(l).concat([s]),m=Xc(d),m?(f.width=Math.max(m.width,f.width),f.height=Math.max(m.height,f.height),f.x=m.x+(m.width-f.width)/2,f.y=m.y+(m.height-f.height)/2):(f.x=s.x+(s.width-f.width)/2,f.y=s.y+(s.height-f.height)/2),f}function o(s,c){return{x:s.x+(s.width-c.width)/2,y:s.y+(s.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],Us,function(s){var c=s.context,l=c.shape;(0,y.is)(l,"bpmn:SubProcess")&&(l.collapsed?(0,y.SS)(l).di.isExpanded=!1:(r(l.children),(0,y.SS)(l).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Us,function(s){var c=s.context,l=c.shape;l.collapsed?(0,y.SS)(l).di.isExpanded=!1:(0,y.SS)(l).di.isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Us,function(s){var c=s.context.shape,l=t._getDefaultSize(c),f;c.collapsed?f=o(c,l):f=a(c,l),n.resizeShape(c,f,null,{autoResize:c.collapsed?!1:"nwse"})})}N()($s,ke),$s.$inject=["eventBus","elementFactory","modeling"];function Td(e){return e.filter(function(t){return!t.hidden})}function Ws(e,t,n,i){t.invoke(ke,this),this.preExecute("shape.delete",function(r){var a=r.context,o=a.shape,s=o.businessObject;(0,on.j_)(o)||((0,y.is)(o,"bpmn:Participant")&&(0,wt.ul)(o)&&n.ids.unclaim(s.processRef.id),i.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var a=r.context,o=a.connection,s=o.businessObject;i.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),a=r.businessObject;(0,y.is)(r,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}N()(Ws,ke),Ws.$inject=["canvas","injector","moddle","modeling"];var Rd=500,Cd=5e3;function Gs(e,t,n){ke.call(this,e);var i;function r(){return i=i||new Pd,i.enter(),i}function a(){if(!i)throw new Error(n("out of bounds release"));return i}function o(){if(!i)throw new Error(n("out of bounds release"));var c=i.leave();return c&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),c}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,Cd,function(c){r()}),this.postExecuted(s,Rd,function(c){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var l=c.context,f=l.shape,d=a();f.labelTarget||((0,y.is)(f,"bpmn:Lane")&&d.addLane(f),(0,y.is)(f,"bpmn:FlowNode")&&d.addFlowNode(f))})}Gs.$inject=["eventBus","modeling","translate"],N()(Gs,ke);function Pd(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Vs(e,t){ke.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,a=r.source;Ad(r,a)&&t.updateProperties(a,{default:null})})}N()(Vs,ke),Vs.$inject=["eventBus","modeling"];function Ad(e,t){if(!(0,y.is)(e,"bpmn:SequenceFlow"))return!1;var n=(0,y.SS)(t),i=(0,y.SS)(e);return n.get("default")===i}var Dd={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",vs],appendBehavior:["type",ms],associationBehavior:["type",gs],attachEventBehavior:["type",ro],boundaryEventBehavior:["type",ys],rootElementReferenceBehavior:["type",Es],createBehavior:["type",_s],fixHoverBehavior:["type",Ru],createDataObjectBehavior:["type",bs],createParticipantBehavior:["type",ws],dataInputAssociationBehavior:["type",Ts],dataStoreBehavior:["type",Rs],deleteLaneBehavior:["type",Cs],detachEventBehavior:["type",co],dropOnFlowBehavior:["type",Ps],eventBasedGatewayBehavior:["type",As],groupBehavior:["type",Ms],importDockingFix:["type",Lu],isHorizontalFix:["type",Is],labelBehavior:["type",Ls],messageFlowBehavior:["type",ks],modelingFeedback:["type",qu],replaceConnectionBehavior:["type",js],removeParticipantBehavior:["type",Hs],replaceElementBehaviour:["type",vo],resizeBehavior:["type",tl],resizeLaneBehavior:["type",rl],removeElementBehavior:["type",Fs],toggleElementCollapseBehaviour:["type",$s],spaceToolBehavior:["type",al],subProcessStartEventBehavior:["type",zs],unclaimIdBehavior:["type",Ws],updateFlowNodeRefsBehavior:["type",Gs],unsetDefaultFlowBehavior:["type",Vs]};function sl(e,t){var n=(0,ge.T8)(e,t,-15);return n!=="intersect"?n:null}function kn(e){Zn.call(this,e)}N()(kn,Zn),kn.$inject=["eventBus"],kn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return Md(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,a=i.targetAttach;if(a)return!1;r&&(n.parent=r);try{return _o(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return _o(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return gl(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return Eo(i)&&!bo(t,i,n)?!1:(0,p.yW)(t,function(r){return Eo(r)?_o(r.source,r.target,r):r.host?ra(r,r.host,null,n):qs(r,i,null,n)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return ra(n,t,null,i)||vl(n,t,i)||ml(n,t,i)||bo(n,t,i)}),this.addRule("shape.create",function(e){return qs(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return ra(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return bl(n,t)})},kn.prototype.canConnectMessageFlow=El,kn.prototype.canConnectSequenceFlow=_l,kn.prototype.canConnectDataAssociation=Qs,kn.prototype.canConnectAssociation=yl,kn.prototype.canMove=ml,kn.prototype.canAttach=ra,kn.prototype.canReplace=vl,kn.prototype.canDrop=Dr,kn.prototype.canInsert=bo,kn.prototype.canCreate=qs,kn.prototype.canConnect=_o,kn.prototype.canResize=gl,kn.prototype.canCopy=bl;function Md(e){return Ks(e)?null:(0,y.JZ)(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Ks(e){return!e||(0,on.j_)(e)}function Od(e,t){return e===t}function cl(e){do{if((0,y.is)(e,"bpmn:Process"))return(0,y.SS)(e);if((0,y.is)(e,"bpmn:Participant"))return(0,y.SS)(e).processRef||(0,y.SS)(e)}while(e=e.parent)}function Ys(e){return(0,y.is)(e,"bpmn:TextAnnotation")}function Zs(e){return(0,y.is)(e,"bpmn:Group")&&!e.labelTarget}function Xs(e){return(0,y.is)(e,"bpmn:BoundaryEvent")&&Pi(e,"bpmn:CompensateEventDefinition")}function Ar(e){return(0,y.SS)(e).isForCompensation}function Id(e,t){var n=cl(e),i=cl(t);return n===i}function Ld(e){return(0,y.is)(e,"bpmn:InteractionNode")&&!(0,y.is)(e,"bpmn:BoundaryEvent")&&(!(0,y.is)(e,"bpmn:Event")||(0,y.is)(e,"bpmn:ThrowEvent")&&ll(e,"bpmn:MessageEventDefinition"))}function Nd(e){return(0,y.is)(e,"bpmn:InteractionNode")&&!Ar(e)&&(!(0,y.is)(e,"bpmn:Event")||(0,y.is)(e,"bpmn:CatchEvent")&&ll(e,"bpmn:MessageEventDefinition"))&&!((0,y.is)(e,"bpmn:BoundaryEvent")&&!Pi(e,"bpmn:MessageEventDefinition"))}function ul(e){for(var t=e;t=t.parent;){if((0,y.is)(t,"bpmn:FlowElementsContainer"))return(0,y.SS)(t);if((0,y.is)(t,"bpmn:Participant"))return(0,y.SS)(t).processRef}return null}function Bd(e,t){var n=ul(e),i=ul(t);return n===i}function Pi(e,t){var n=(0,y.SS)(e);return!!(0,p.sE)(n.eventDefinitions||[],function(i){return(0,y.is)(i,t)})}function ll(e,t){var n=(0,y.SS)(e);return(n.eventDefinitions||[]).every(function(i){return(0,y.is)(i,t)})}function kd(e){return(0,y.is)(e,"bpmn:FlowNode")&&!(0,y.is)(e,"bpmn:EndEvent")&&!(0,wt.J5)(e)&&!((0,y.is)(e,"bpmn:IntermediateThrowEvent")&&Pi(e,"bpmn:LinkEventDefinition"))&&!Xs(e)&&!Ar(e)}function jd(e){return(0,y.is)(e,"bpmn:FlowNode")&&!(0,y.is)(e,"bpmn:StartEvent")&&!(0,y.is)(e,"bpmn:BoundaryEvent")&&!(0,wt.J5)(e)&&!((0,y.is)(e,"bpmn:IntermediateCatchEvent")&&Pi(e,"bpmn:LinkEventDefinition"))&&!Ar(e)}function pl(e){return(0,y.is)(e,"bpmn:ReceiveTask")||(0,y.is)(e,"bpmn:IntermediateCatchEvent")&&(Pi(e,"bpmn:MessageEventDefinition")||Pi(e,"bpmn:TimerEventDefinition")||Pi(e,"bpmn:ConditionalEventDefinition")||Pi(e,"bpmn:SignalEventDefinition"))}function Eo(e){return e.waypoints}function Hd(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Js(e,t){var n=Hd(t);return n.indexOf(e)!==-1}function _o(e,t,n){if(Ks(e)||Ks(t))return null;if(!(0,y.is)(n,"bpmn:DataAssociation")){if(El(e,t))return{type:"bpmn:MessageFlow"};if(_l(e,t))return{type:"bpmn:SequenceFlow"}}var i=Qs(e,t);return i||(Xs(e)&&Ar(t)?{type:"bpmn:Association",associationDirection:"One"}:yl(e,t)?{type:"bpmn:Association"}:!1)}function Dr(e,t,n){return(0,on.j_)(e)||Zs(e)?!0:(0,y.is)(t,"bpmn:Participant")&&!(0,wt.ul)(t)?!1:(0,y.is)(e,"bpmn:Participant")?(0,y.is)(t,"bpmn:Process")||(0,y.is)(t,"bpmn:Collaboration"):(0,y.JZ)(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:(0,y.is)(e,"bpmn:Lane")?(0,y.is)(t,"bpmn:Participant")||(0,y.is)(t,"bpmn:Lane"):(0,y.is)(e,"bpmn:BoundaryEvent")&&!Fd(e)?!1:(0,y.is)(e,"bpmn:FlowElement")&&!(0,y.is)(e,"bpmn:DataStoreReference")?(0,y.is)(t,"bpmn:FlowElementsContainer")?(0,wt.ul)(t):(0,y.JZ)(t,["bpmn:Participant","bpmn:Lane"]):(0,y.is)(e,"bpmn:DataStoreReference")&&(0,y.is)(t,"bpmn:Collaboration")?(0,p.G)((0,y.SS)(t).get("participants"),function(i){return!!i.get("processRef")}):(0,y.JZ)(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?(0,y.JZ)(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):(0,y.is)(e,"bpmn:MessageFlow")?(0,y.is)(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function Fd(e){return(0,y.SS)(e).cancelActivity&&(fl(e)||hl(e))}function zd(e){return!(0,on.j_)(e)&&(0,y.is)(e,"bpmn:BoundaryEvent")}function Ud(e){return(0,y.is)(e,"bpmn:Lane")}function $d(e){return zd(e)||(0,y.is)(e,"bpmn:IntermediateThrowEvent")&&fl(e)?!0:(0,y.is)(e,"bpmn:IntermediateCatchEvent")&&hl(e)}function fl(e){var t=(0,y.SS)(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function hl(e){return dl(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function dl(e,t){return t.some(function(n){return Pi(e,n)})}function Wd(e){return(0,y.is)(e,"bpmn:ReceiveTask")&&(0,p.sE)(e.incoming,function(t){return(0,y.is)(t.source,"bpmn:EventBasedGateway")})}function ra(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return(0,on.j_)(r)||!$d(r)||(0,wt.J5)(t)||!(0,y.is)(t,"bpmn:Activity")||Ar(t)||i&&!sl(i,t)||Wd(t)?!1:"attach"}function vl(e,t,n){if(!t)return!1;var i={replacements:[]};return(0,p.Ed)(e,function(r){(0,wt.J5)(t)||(0,y.is)(r,"bpmn:StartEvent")&&r.type!=="label"&&Dr(r,t)&&((0,wt.yU)(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),((0,wt.sm)(r)||(0,wt.wQ)(r)||(0,wt._Z)(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),dl(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&(0,y.is)(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),(0,y.is)(t,"bpmn:Transaction")||Pi(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&((0,y.is)(r,"bpmn:EndEvent")&&Dr(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),(0,y.is)(r,"bpmn:BoundaryEvent")&&ra(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function ml(e,t){return(0,p.G)(e,Ud)?!1:t?e.every(function(n){return Dr(n,t)}):!0}function qs(e,t,n,i){return t?(0,on.j_)(e)||Zs(e)?!0:Od(n,t)||n&&Js(n,t)?!1:Dr(e,t,i)||bo(e,t,i):!1}function gl(e,t){return(0,y.is)(e,"bpmn:SubProcess")?(0,wt.ul)(e)&&(!t||t.width>=100&&t.height>=80):(0,y.is)(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:(0,y.is)(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!(Ys(e)||Zs(e))}function Gd(e,t){var n=Ys(e),i=Ys(t);return(n||i)&&n!==i}function yl(e,t){return Eo(e)||Eo(t)?!1:Xs(e)&&Ar(t)?!0:Js(t,e)||Js(e,t)?!1:Gd(e,t)?!0:!!Qs(e,t)}function El(e,t){return xl(e)&&!xl(t)?!1:Ld(e)&&Nd(t)&&!Id(e,t)}function _l(e,t){return pl(t)&&t.incoming.length>0&&Yd(t.incoming)&&!(0,y.is)(e,"bpmn:EventBasedGateway")?!1:kd(e)&&jd(t)&&Bd(e,t)&&!((0,y.is)(e,"bpmn:EventBasedGateway")&&!pl(t))}function Qs(e,t){return(0,y.JZ)(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,y.JZ)(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:(0,y.JZ)(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&(0,y.JZ)(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function bo(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:(0,y.JZ)(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!(0,on.j_)(t)&&(0,y.is)(e,"bpmn:FlowNode")&&!(0,y.is)(e,"bpmn:BoundaryEvent")&&Dr(e,t.parent,n)}function Vd(e,t){return e&&t&&e.indexOf(t)!==-1}function bl(e,t){return(0,on.j_)(t)?!0:!((0,y.is)(t,"bpmn:Lane")&&!Vd(e,t.parent))}function Kd(e){if(e&&e.source)return(0,y.is)(e.source,"bpmn:EventBasedGateway")}function Yd(e){return e=e||[],e.some(Kd)}function xl(e){return $a(e,"bpmn:Process")||$a(e,"bpmn:Collaboration")}var Zd={__depends__:[ci],__init__:["bpmnRules"],bpmnRules:["type",kn]},Xd=z(38390),Jd=2e3;function Sl(e,t){e.on("saveXML.start",Jd,n);function n(){var i=t.getRootElement(),r=(0,y.SS)(i).di,a,o;a=(0,rn.PB)([i],!1),a=(0,p.hX)(a,function(s){return s!==i&&!s.labelTarget}),o=(0,p.UI)(a,Xd.DN),r.set("planeElement",o)}}Sl.$inject=["eventBus","canvas"];var qd={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",Sl]},wl=z(90936);function xo(e){ke.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,a=i.parent,o=t.getOrdering(r,a);o&&(o.parent!==void 0&&(i.parent=o.parent),i.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,a=i.newParent||r.parent,o=t.getOrdering(r,a);o&&(o.parent!==void 0&&(i.newParent=o.parent),i.newParentIndex=o.index)})}xo.prototype.getOrdering=function(e,t){return null},N()(xo,ke);function ec(e,t,n){xo.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(s){if(s.labelTarget)return{level:10};var c=(0,p.sE)(i,function(l){return(0,y.JZ)(s,[l.type])});return c&&c.order||{level:1}}function a(s){var c=s.order;if(c||(s.order=c=r(s)),!c)throw new Error("no order for <"+s.id+">");return c}function o(s,c,l){for(var f=c;f&&!(0,y.JZ)(f,l);)f=f.parent;if(!f)throw new Error("no parent for <"+s.id+"> in <"+(c&&c.id)+">");return f}this.getOrdering=function(s,c){if(s.labelTarget)return{parent:t.getRootElement(),index:-1};var l=a(s);l.containers&&(c=o(s,c,l.containers));var f=c.children.indexOf(s),d=(0,p.cx)(c.children,function(m){return!s.labelTarget&&m.labelTarget?!1:l.level<a(m).level});return d!==-1&&f!==-1&&f<d&&(d-=1),{index:d,parent:c}}}ec.$inject=["eventBus","canvas","translate"],N()(ec,xo);var Qd={__depends__:[wl.Z],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",ec]};function dn(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}dn.$inject=["eventBus","injector"],dn.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},dn.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},dn.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})},dn.prototype.undo=function(){var e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}},dn.prototype.redo=function(){var e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}},dn.prototype.register=function(e,t){this._setHandler(e,t)},dn.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},dn.prototype.canUndo=function(){return!!this._getUndoAction()},dn.prototype.canRedo=function(){return!!this._getRedoAction()},dn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},dn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},dn.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},dn.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i=t?[e+"."+t,t]:[e],r,a,o;for(n=this._eventBus.createEvent(n),r=0;(a=i[r])&&(o=this._eventBus.fire("commandStack."+a,n),!n.cancelBubble);r++);return o},dn.prototype._createId=function(){return this._uid++},dn.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},dn.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,a=this._getHandler(i);if(!a)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),a.preExecute&&a.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),a.execute&&n._markDirty(a.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),a.postExecute&&a.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)},dn.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},dn.prototype._popAction=function(){var e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:(0,p.uw)("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},dn.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=(0,p.kJ)(e)?e:[e],t.dirty=t.dirty.concat(e))},dn.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},dn.prototype._revertedAction=function(e){this._stackIdx--},dn.prototype._getHandler=function(e){return this._handlerMap[e]},dn.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var ev={commandStack:["type",dn]},tv=z(42646),nv=new tv.Z("tt");function iv(e){var t=(0,R.H6)('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function rv(e,t,n){(0,p.f0)(e.style,{left:t+"px",top:n+"px"})}function tc(e,t){e.style.display=t===!1?"none":""}var Tl="djs-tooltip",nc="."+Tl;function qn(e,t){this._eventBus=e,this._canvas=t,this._ids=nv,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=iv(t.getContainer());var n=this;R.cl.bind(this._tooltipRoot,nc,"mousedown",function(i){i.stopPropagation()}),R.cl.bind(this._tooltipRoot,nc,"mouseover",function(i){n.trigger("mouseover",i)}),R.cl.bind(this._tooltipRoot,nc,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}qn.$inject=["eventBus","canvas"],qn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=(0,p.f0)({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},qn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get((0,R.Lj)(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},qn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]},qn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},qn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}},qn.prototype.remove=function(e){var t=this.get(e);t&&((0,R.Od)(t.html),(0,R.Od)(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},qn.prototype.show=function(){tc(this._tooltipRoot)},qn.prototype.hide=function(){tc(this._tooltipRoot,!1)},qn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},qn.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),(0,p.HD)(n)&&(n=(0,R.H6)(n)),i=(0,R.H6)('<div data-tooltip-id="'+t+'" class="'+Tl+'" style="position: absolute">'),i.appendChild(n),e.type&&(0,R.Sh)(i).add("djs-tooltip-"+e.type),e.className&&(0,R.Sh)(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)},qn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;rv(n,t.x,t.y)},qn.prototype._updateTooltipVisibilty=function(e){(0,p.Ed)(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),tc(i,r))})},qn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};var av={__init__:["tooltips"],tooltips:["type",qn]};function Mr(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var ov=250,Rl=1400;function ic(e,t,n){ke.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Rl,function(r){var a=r.context,o=a.shapes,s=a.validatedShapes;a.shapes=Cl(o),a.validatedShapes=Cl(s)}),i&&t.on("shape.move.start",ov,function(r){var a=r.context,o=a.shapes,s=[];(0,p.Ed)(o,function(c){(0,p.Ed)(c.labels,function(l){!l.hidden&&a.shapes.indexOf(l)===-1&&s.push(l),c.labelTarget&&s.push(c)})}),(0,p.Ed)(s,function(c){i.makeDraggable(a,c,!0)})}),this.preExecuted("elements.move",Rl,function(r){var a=r.context,o=a.closure,s=o.enclosedElements,c=[];(0,p.Ed)(s,function(l){(0,p.Ed)(l.labels,function(f){s[f.id]||c.push(f)})}),o.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var a=r.context,o=a.connection||a.shape;Mr(o.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var a=r.context,o=a.shape,s=o.labelTarget;s&&(a.labelTargetIndex=(0,St.cq)(s.labels,o),a.labelTarget=s,o.labelTarget=null)}),this.revert("shape.delete",function(r){var a=r.context,o=a.shape,s=a.labelTarget,c=a.labelTargetIndex;s&&((0,St.IH)(s.labels,o,c),o.labelTarget=s)})}N()(ic,ke),ic.$inject=["injector","eventBus","modeling"];function Cl(e){return(0,p.hX)(e,function(t){return e.indexOf(t.labelTarget)===-1})}var sv={__init__:["labelSupport"],labelSupport:["type",ic]},cv=251,Pl=1401,Al="attach-ok";function rc(e,t,n,i,r){ke.call(this,t);var a=e.get("movePreview",!1);t.on("shape.move.start",Pl,function(o){var s=o.context,c=s.shapes,l=s.validatedShapes;s.shapes=uv(c),s.validatedShapes=lv(l)}),a&&t.on("shape.move.start",cv,function(o){var s=o.context,c=s.shapes,l=ac(c);(0,p.Ed)(l,function(f){a.makeDraggable(s,f,!0),(0,p.Ed)(f.labels,function(d){a.makeDraggable(s,d,!0)})})}),a&&t.on("shape.move.start",function(o){var s=o.context,c=s.shapes;if(c.length===1){var l=c[0],f=l.host;f&&(n.addMarker(f,Al),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(f,Al)}))}}),this.preExecuted("elements.move",Pl,function(o){var s=o.context,c=s.closure,l=s.shapes,f=ac(l);(0,p.Ed)(f,function(d){c.add(d,c.topLevel[d.host.id])})}),this.postExecuted("elements.move",function(o){var s=o.context,c=s.shapes,l=s.newHost,f;l&&c.length!==1||(l?f=c:f=(0,p.hX)(c,function(d){var m=d.host;return pv(d)&&!fv(c,m)}),(0,p.Ed)(f,function(d){r.updateAttachment(d,l)}))}),this.postExecuted("elements.move",function(o){var s=o.context.shapes;(0,p.Ed)(s,function(c){(0,p.Ed)(c.attachers,function(l){(0,p.Ed)(l.outgoing.slice(),function(f){var d=i.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||r.removeConnection(f)}),(0,p.Ed)(l.incoming.slice(),function(f){var d=i.allowed("connection.reconnect",{connection:f,source:f.source,target:f.target});d||r.removeConnection(f)})})})}),this.postExecute("shape.create",function(o){var s=o.context,c=s.shape,l=s.host;l&&r.updateAttachment(c,l)}),this.postExecute("shape.replace",function(o){var s=o.context,c=s.oldShape,l=s.newShape;Mr(c.attachers,function(f){var d=i.allowed("elements.move",{target:l,shapes:[f]});d==="attach"?r.updateAttachment(f,l):r.removeShape(f)}),l.attachers.length&&(0,p.Ed)(l.attachers,function(f){var d=Ku(f,c,l);r.moveShape(f,d,f.parent)})}),this.postExecute("shape.resize",function(o){var s=o.context,c=s.shape,l=s.oldBounds,f=s.newBounds,d=c.attachers,m=s.hints||{};m.attachSupport!==!1&&(0,p.Ed)(d,function(_){var x=Ku(_,l,f);r.moveShape(_,x,_.parent),(0,p.Ed)(_.labels,function($){r.moveShape($,x,$.parent)})})}),this.preExecute("shape.delete",function(o){var s=o.context.shape;Mr(s.attachers,function(c){r.removeShape(c)}),s.host&&r.updateAttachment(s,null)})}N()(rc,ke),rc.$inject=["injector","eventBus","canvas","rules","modeling"];function ac(e){return(0,p.xH)((0,p.UI)(e,function(t){return t.attachers||[]}))}function uv(e){var t=ac(e);return(0,p.qZ)("id",e,t)}function lv(e){var t=(0,p.vM)(e,"id");return(0,p.hX)(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function pv(e){return!!e.host}function fv(e,t){return e.indexOf(t)!==-1}var hv={__depends__:[ci],__init__:["attachSupport"],attachSupport:["type",rc]},dv=250;function mr(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}mr.$inject=["eventBus","dragging"],mr.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)},mr.prototype.isActive=function(e){return e&&this._active===e},mr.prototype.length=function(e){return this._tools.length},mr.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},mr.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(a){var o=a.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null),i.cancel();return}this.setActive(e)},this),(0,p.Ed)(t,function(a){r.push(a+".ended"),r.push(a+".canceled")}),n.on(r,dv,function(a){this._active&&(vv(a)||this.setActive(null))},this)};function vv(e){var t=e.originalEvent&&e.originalEvent.target;return t&&(0,R.oq)(t,'.group[data-group="tools"]')}var So={__depends__:[zt],__init__:["toolManager"],toolManager:["type",mr]};function mv(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function gv(e,t){var n=[];return(0,p.Ed)(e.concat(t),function(i){var r=i.incoming,a=i.outgoing;(0,p.Ed)(r.concat(a),function(o){var s=o.source,c=o.target;(aa(e,s)||aa(e,c)||aa(t,s)||aa(t,c))&&(aa(n,o)||n.push(o))})}),n}function aa(e,t){return e.indexOf(t)!==-1}function yv(e,t,n){var i=e.x,r=e.y,a=e.width,o=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:a,height:o-c};case"s":return{x:i,y:r,width:a,height:o+c};case"w":return{x:i+s,y:r,width:a-s,height:o};case"e":return{x:i,y:r,width:a+s,height:o};default:throw new Error("unknown direction: "+t)}}var oc=Math.abs,Ev=Math.round,Hi={x:"width",y:"height"},Dl="crosshair",wo={n:"top",w:"left",s:"bottom",e:"right"},_v=1500,Ml={n:"s",w:"e",s:"n",e:"w"},To=20;function Fi(e,t,n,i,r,a,o){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=a,this._mouse=o;var s=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(c){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(c.originalEvent)})}),n.on("spaceTool.move",_v,function(c){var l=c.context,f=l.initialized;f||(f=l.initialized=s.init(c,l)),f&&Il(c)}),n.on("spaceTool.end",function(c){var l=c.context,f=l.axis,d=l.direction,m=l.movingShapes,_=l.resizingShapes,x=l.start;if(l.initialized){Il(c);var $={x:0,y:0};$[f]=Ev(c["d"+f]),s.makeSpace(m,_,$,d,x),n.once("spaceTool.ended",function(Y){s.activateSelection(Y.originalEvent,!0,!0)})}})}Fi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Fi.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Dl,data:{context:{reactivate:n}},trapClick:!1})},Fi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Dl,data:{context:{}}})},Fi.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)},Fi.prototype.init=function(e,t){var n=oc(e.dx)>oc(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(oc(i)<5)return!1;i<0&&(i*=-1),(0,gi.RJ)(e)&&(i*=-1);var a=mv(n,i),o=this._canvas.getRootElement(),s=(0,rn.PB)(o,!0),c=this.calculateAdjustments(s,n,i,r),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:c.resizingShapes,start:r}),f=bv(c,n,a,r,l);return(0,p.f0)(t,c,{axis:n,direction:a,spaceToolConstraints:f,start:r}),M("resize-"+(n==="x"?"ew":"ns")),!0},Fi.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,a=[],o=[];return(0,p.Ed)(e,function(s){if(!(!s.parent||cc(s))){var c=s[t],l=c+s[Hi[t]];if(n>0&&c>i||n<0&&l<i)return a.push(s);if(c<i&&l>i&&r.allowed("shape.resize",{shape:s}))return o.push(s)}}),{movingShapes:a,resizingShapes:o}},Fi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Fi.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)};function Ol(e){return{top:e.top-To,right:e.right+To,bottom:e.bottom+To,left:e.left-To}}function Il(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;(0,p.hj)(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),(0,p.hj)(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),(0,p.hj)(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),(0,p.hj)(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function bv(e,t,n,i,r){var a=e.movingShapes,o=e.resizingShapes;if(o.length){var s={},c,l;return(0,p.Ed)(o,function(f){var d=(0,ge.JA)(f),m=(0,p.hX)(f.children,function(Se){return!cc(Se)&&!Ll(Se)&&!sc(a,Se)&&!sc(o,Se)}),_=(0,p.hX)(f.children,function(Se){return!cc(Se)&&!Ll(Se)&&sc(a,Se)}),x,$,Y;m.length&&($=Ol((0,ge.JA)((0,rn.jY)(m))),x=i-d[wo[n]]+$[wo[n]],n==="n"?s.bottom=l=(0,p.hj)(l)?Math.min(l,x):x:n==="w"?s.right=l=(0,p.hj)(l)?Math.min(l,x):x:n==="s"?s.top=c=(0,p.hj)(c)?Math.max(c,x):x:n==="e"&&(s.left=c=(0,p.hj)(c)?Math.max(c,x):x)),_.length&&(Y=Ol((0,ge.JA)((0,rn.jY)(_))),x=i-Y[wo[Ml[n]]]+d[wo[Ml[n]]],n==="n"?s.bottom=l=(0,p.hj)(l)?Math.min(l,x):x:n==="w"?s.right=l=(0,p.hj)(l)?Math.min(l,x):x:n==="s"?s.top=c=(0,p.hj)(c)?Math.max(c,x):x:n==="e"&&(s.left=c=(0,p.hj)(c)?Math.max(c,x):x));var Te=r&&r[f.id];Te&&(n==="n"?(x=i+f[Hi[t]]-Te[Hi[t]],s.bottom=l=(0,p.hj)(l)?Math.min(l,x):x):n==="w"?(x=i+f[Hi[t]]-Te[Hi[t]],s.right=l=(0,p.hj)(l)?Math.min(l,x):x):n==="s"?(x=i-f[Hi[t]]+Te[Hi[t]],s.top=c=(0,p.hj)(c)?Math.max(c,x):x):n==="e"&&(x=i-f[Hi[t]]+Te[Hi[t]],s.left=c=(0,p.hj)(c)?Math.max(c,x):x))}),s}}function sc(e,t){return e.indexOf(t)!==-1}function cc(e){return!!e.waypoints}function Ll(e){return!!e.labelTarget}var uc="djs-dragging",Nl="djs-resizing",xv=250,Ro=Math.max;function Bl(e,t,n,i,r){function a(o,s){(0,p.Ed)(o,function(c){r.addDragger(c,s),n.addMarker(c,uc)})}e.on("spaceTool.selection.start",function(o){var s=n.getLayer("space"),c=o.context,l={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},f=(0,ae.Ue)("g");(0,ae.Lj)(f,i.cls("djs-crosshair-group",["no-events"])),(0,ae.R3)(s,f);var d=(0,ae.Ue)("path");(0,ae.Lj)(d,"d",l.x),(0,ae.Sh)(d).add("djs-crosshair"),(0,ae.R3)(f,d);var m=(0,ae.Ue)("path");(0,ae.Lj)(m,"d",l.y),(0,ae.Sh)(m).add("djs-crosshair"),(0,ae.R3)(f,m),c.crosshairGroup=f}),e.on("spaceTool.selection.move",function(o){var s=o.context.crosshairGroup;(0,Wn.Iu)(s,o.x,o.y)}),e.on("spaceTool.selection.cleanup",function(o){var s=o.context,c=s.crosshairGroup;c&&(0,ae.Od)(c)}),e.on("spaceTool.move",xv,function(o){var s=o.context,c=s.line,l=s.axis,f=s.movingShapes,d=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var m=n.getLayer("space");c=(0,ae.Ue)("path"),(0,ae.Lj)(c,"d","M0,0 L0,0"),(0,ae.Sh)(c).add("djs-crosshair"),(0,ae.R3)(m,c),s.line=c;var _=(0,ae.Ue)("g");(0,ae.Lj)(_,i.cls("djs-drag-group",["no-events"])),(0,ae.R3)(n.getActiveLayer(),_),a(f,_);var x=s.movingConnections=t.filter(function(ne){var be=!1;(0,p.Ed)(f,function(It){(0,p.Ed)(It.outgoing,function(sn){ne===sn&&(be=!0)})});var Ae=!1;(0,p.Ed)(f,function(It){(0,p.Ed)(It.incoming,function(sn){ne===sn&&(Ae=!0)})});var tt=!1;(0,p.Ed)(d,function(It){(0,p.Ed)(It.outgoing,function(sn){ne===sn&&(tt=!0)})});var vt=!1;return(0,p.Ed)(d,function(It){(0,p.Ed)(It.incoming,function(sn){ne===sn&&(vt=!0)})}),Sv(ne)&&(be||tt)&&(Ae||vt)});a(x,_),s.dragGroup=_}if(!s.frameGroup){var $=(0,ae.Ue)("g");(0,ae.Lj)($,i.cls("djs-frame-group",["no-events"])),(0,ae.R3)(n.getActiveLayer(),$);var Y=[];(0,p.Ed)(d,function(ne){var be=r.addFrame(ne,$),Ae=be.getBBox();Y.push({element:be,initialBounds:Ae}),n.addMarker(ne,Nl)}),s.frameGroup=$,s.frames=Y}var Te={x:"M"+o.x+", -10000 L"+o.x+", 10000",y:"M -10000, "+o.y+" L 10000, "+o.y};(0,ae.Lj)(c,{d:Te[l]});var Se={x:"y",y:"x"},Q={x:o.dx,y:o.dy};Q[Se[s.axis]]=0,(0,Wn.Iu)(s.dragGroup,Q.x,Q.y),(0,p.Ed)(s.frames,function(ne){var be=ne.element,Ae=ne.initialBounds,tt,vt;s.direction==="e"?(0,ae.Lj)(be,{width:Ro(Ae.width+Q.x,5)}):(tt=Ro(Ae.width-Q.x,5),(0,ae.Lj)(be,{width:tt,x:Ae.x+Ae.width-tt})),s.direction==="s"?(0,ae.Lj)(be,{height:Ro(Ae.height+Q.y,5)}):(vt=Ro(Ae.height-Q.y,5),(0,ae.Lj)(be,{height:vt,y:Ae.y+Ae.height-vt}))})}}),e.on("spaceTool.cleanup",function(o){var s=o.context,c=s.movingShapes,l=s.movingConnections,f=s.resizingShapes,d=s.line,m=s.dragGroup,_=s.frameGroup;(0,p.Ed)(c,function(x){n.removeMarker(x,uc)}),(0,p.Ed)(l,function(x){n.removeMarker(x,uc)}),m&&((0,ae.Od)(d),(0,ae.Od)(m)),(0,p.Ed)(f,function(x){n.removeMarker(x,Nl)}),_&&(0,ae.Od)(_)})}Bl.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];function Sv(e){return e.waypoints}var kl={__init__:["spaceToolPreview"],__depends__:[zt,ci,So,yi,Yr],spaceTool:["type",Fi],spaceToolPreview:["type",Bl]};function hi(e){this._model=e}hi.$inject=["moddle"],hi.prototype._needsId=function(e){return(0,y.JZ)(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},hi.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;(0,y.is)(e,"bpmn:Activity")?t="Activity":(0,y.is)(e,"bpmn:Event")?t="Event":(0,y.is)(e,"bpmn:Gateway")?t="Gateway":(0,y.JZ)(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},hi.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},hi.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},hi.prototype.createDiShape=function(e,t,n){return this.create("bpmndi:BPMNShape",(0,p.f0)({bpmnElement:e,bounds:this.createDiBounds(t)},n))},hi.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},hi.prototype.createDiWaypoints=function(e){var t=this;return(0,p.UI)(e,function(n){return t.createDiWaypoint(n)})},hi.prototype.createDiWaypoint=function(e){return this.create("dc:Point",(0,p.ei)(e,["x","y"]))},hi.prototype.createDiEdge=function(e,t,n){return this.create("bpmndi:BPMNEdge",(0,p.f0)({bpmnElement:e,waypoint:this.createDiWaypoints(t)},n))},hi.prototype.createDiPlane=function(e){return this.create("bpmndi:BPMNPlane",{bpmnElement:e})};var lc=z(48344);function ai(e,t,n,i){ke.call(this,e),this._bpmnFactory=t,this._translate=i;var r=this;function a(_){var x=_.context,$=x.hints||{},Y;!x.cropped&&$.createElementsBehavior!==!1&&(Y=x.connection,Y.waypoints=n.getCroppedWaypoints(Y),x.cropped=!0)}this.executed(["connection.layout","connection.create"],a),this.reverted(["connection.layout"],function(_){delete _.context.cropped});function o(_){var x=_.context;r.updateParent(x.shape||x.connection,x.oldParent)}function s(_){var x=_.context,$=x.shape||x.connection,Y=x.parent||x.newParent;r.updateParent($,Y)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],di(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],di(s));function c(_){var x=_.context,$=x.oldRoot,Y=$.children;(0,p.Ed)(Y,function(Te){(0,y.is)(Te,"bpmn:BaseElement")&&r.updateParent(Te)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function l(_){var x=_.context.shape;(0,y.is)(x,"bpmn:BaseElement")&&r.updateBounds(x)}this.executed(["shape.move","shape.create","shape.resize"],di(function(_){_.context.shape.type!=="label"&&l(_)})),this.reverted(["shape.move","shape.create","shape.resize"],di(function(_){_.context.shape.type!=="label"&&l(_)})),e.on("shape.changed",function(_){_.element.type==="label"&&l({context:{shape:_.element}})});function f(_){r.updateConnection(_.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],di(f)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],di(f));function d(_){r.updateConnectionWaypoints(_.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],di(d)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],di(d)),this.executed("connection.reconnect",di(function(_){var x=_.context,$=x.connection,Y=x.oldSource,Te=x.newSource,Se=(0,y.SS)($),Q=(0,y.SS)(Y),ne=(0,y.SS)(Te);Se.conditionExpression&&!(0,y.JZ)(ne,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(x.oldConditionExpression=Se.conditionExpression,delete Se.conditionExpression),Y!==Te&&Q.default===Se&&(x.oldDefault=Q.default,delete Q.default)})),this.reverted("connection.reconnect",di(function(_){var x=_.context,$=x.connection,Y=x.oldSource,Te=x.newSource,Se=(0,y.SS)($),Q=(0,y.SS)(Y),ne=(0,y.SS)(Te);x.oldConditionExpression&&(Se.conditionExpression=x.oldConditionExpression),x.oldDefault&&(Q.default=x.oldDefault,delete ne.default)}));function m(_){r.updateAttachment(_.context)}this.executed(["element.updateAttachment"],di(m)),this.reverted(["element.updateAttachment"],di(m))}N()(ai,ke),ai.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],ai.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},ai.prototype.updateParent=function(e,t){if(!(e instanceof lc.__)&&!((0,y.is)(e,"bpmn:DataStoreReference")&&e.parent&&(0,y.is)(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=n&&n.businessObject,a=r&&r.di;(0,y.is)(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,r,t&&t.businessObject),(0,y.is)(e,"bpmn:DataOutputAssociation")&&(e.source?r=e.source.businessObject:r=null),(0,y.is)(e,"bpmn:DataInputAssociation")&&(e.target?r=e.target.businessObject:r=null),this.updateSemanticParent(i,r),(0,y.is)(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,r),this.updateDiParent(i.di,a)}},ai.prototype.updateBounds=function(e){var t=e.businessObject.di,n=e instanceof lc.__?this._getLabel(t):t,i=n.bounds;i||(i=this._bpmnFactory.createDiBounds(),n.set("bounds",i)),(0,p.f0)(i,{x:e.x,y:e.y,width:e.width,height:e.height})},ai.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;(0,y.is)(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),(0,St.Od)(i,e)),(0,y.is)(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),(0,St.IH)(r,e))}},ai.prototype.updateDiConnection=function(e,t,n){e.sourceElement&&e.sourceElement.bpmnElement!==t&&(e.sourceElement=t&&t.di),e.targetElement&&e.targetElement.bpmnElement!==n&&(e.targetElement=n&&n.di)},ai.prototype.updateDiParent=function(e,t){if(t&&!(0,y.is)(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):((0,St.Od)(n,e),e.$parent=null)}};function wv(e){for(;e&&!(0,y.is)(e,"bpmn:Definitions");)e=e.$parent;return e}ai.prototype.getLaneSet=function(e){var t,n;return(0,y.is)(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):((0,y.is)(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)},ai.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t&&!(((0,y.is)(e,"bpmn:DataInput")||(0,y.is)(e,"bpmn:DataOutput"))&&((0,y.is)(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if((0,y.is)(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if((0,y.is)(e,"bpmn:FlowElement")){if(t){if((0,y.is)(t,"bpmn:Participant"))t=t.processRef;else if((0,y.is)(t,"bpmn:Lane"))do t=t.$parent.$parent;while((0,y.is)(t,"bpmn:Lane"))}i="flowElements"}else if((0,y.is)(e,"bpmn:Artifact")){for(;t&&!(0,y.is)(t,"bpmn:Process")&&!(0,y.is)(t,"bpmn:SubProcess")&&!(0,y.is)(t,"bpmn:Collaboration");)if((0,y.is)(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if((0,y.is)(e,"bpmn:MessageFlow"))i="messageFlows";else if((0,y.is)(e,"bpmn:Participant")){i="participants";var a=e.processRef,o;a&&(o=wv(e.$parent||t),e.$parent&&((0,St.Od)(o.get("rootElements"),a),a.$parent=null),t&&((0,St.IH)(o.get("rootElements"),a),a.$parent=o))}else(0,y.is)(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":(0,y.is)(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var s;if(e.$parent&&(s=e.$parent.get(i),(0,St.Od)(s,e)),t?(s=t.get(i),s.push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);(0,St.Od)(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}},ai.prototype.updateConnectionWaypoints=function(e){e.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},ai.prototype.updateConnection=function(e){var t=e.connection,n=(0,y.SS)(t),i=(0,y.SS)(t.source),r=(0,y.SS)(t.target),a;if((0,y.is)(n,"bpmn:DataAssociation"))(0,y.is)(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=i,a=e.parent||e.newParent||r,this.updateSemanticParent(n,r,a)):(0,y.is)(n,"bpmn:DataOutputAssociation")&&(a=e.parent||e.newParent||i,this.updateSemanticParent(n,i,a),n.targetRef=r);else{var o=(0,y.is)(n,"bpmn:SequenceFlow");n.sourceRef!==i&&(o&&((0,St.Od)(n.sourceRef&&n.sourceRef.get("outgoing"),n),i&&i.get("outgoing")&&i.get("outgoing").push(n)),n.sourceRef=i),n.targetRef!==r&&(o&&((0,St.Od)(n.targetRef&&n.targetRef.get("incoming"),n),r&&r.get("incoming")&&r.get("incoming").push(n)),n.targetRef=r)}this.updateConnectionWaypoints(t),this.updateDiConnection(n.di,i,r)},ai.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function di(e){return function(t){var n=t.context,i=n.shape||n.connection;(0,y.is)(i,"bpmn:BaseElement")&&e(t)}}var Tv=z(61955);function Co(e,t){this._modeling=e,this._canvas=t}Co.$inject=["modeling","canvas"],Co.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;(0,p.Ed)(n,function(r){var a={x:0,y:0};i.left?a.x=i.left-r.x:i.right?a.x=i.right-r.width-r.x:i.center?a.x=i.center-Math.round(r.width/2)-r.x:i.top?a.y=i.top-r.y:i.bottom?a.y=i.bottom-r.height-r.y:i.middle&&(a.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],a,r.parent)})},Co.prototype.postExecute=function(e){};function Po(e){this._modeling=e}Po.$inject=["modeling"],Po.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i},Po.prototype.postExecute=function(e){var t=e.hints||{};Rv(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function Rv(e,t){return(0,p.G)(e.outgoing,function(n){return n.target===t})}function Ao(e,t){this._canvas=e,this._layouter=t}Ao.$inject=["canvas","layouter"],Ao.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,a=e.parentIndex,o=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,o)),this._canvas.addConnection(t,r,a),t},Ao.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Do=Math.round;function pc(e){this._modeling=e}pc.$inject=["modeling"],pc.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,a=e.hints,o=this._modeling;(0,p.Ed)(t,function(f){(0,p.hj)(f.x)||(f.x=0),(0,p.hj)(f.y)||(f.y=0)});var s=(0,rn.jY)(t);(0,p.Ed)(t,function(f){jl(f)&&(f.waypoints=(0,p.UI)(f.waypoints,function(d){return{x:Do(d.x-s.x-s.width/2+r.x),y:Do(d.y-s.y-s.height/2+r.y)}})),(0,p.f0)(f,{x:Do(f.x-s.x-s.width/2+r.x),y:Do(f.y-s.y-s.height/2+r.y)})});var c=(0,rn.cd)(t),l={};(0,p.Ed)(t,function(f){if(jl(f)){l[f.id]=(0,p.hj)(i)?o.createConnection(l[f.source.id],l[f.target.id],i,f,f.parent||n,a):o.createConnection(l[f.source.id],l[f.target.id],f,f.parent||n,a);return}var d=(0,p.f0)({},a);c.indexOf(f)===-1&&(d.autoResize=!1),l[f.id]=(0,p.hj)(i)?o.createShape(f,(0,p.ei)(f,["x","y","width","height"]),f.parent||n,i,d):o.createShape(f,(0,p.ei)(f,["x","y","width","height"]),f.parent||n,d)}),e.elements=(0,p.VO)(l)};function jl(e){return!!e.waypoints}var Hl=Math.round;function Qi(e){this._canvas=e}Qi.$inject=["canvas"],Qi.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?(0,p.f0)(t,n):(0,p.f0)(t,{x:n.x-Hl(t.width/2),y:n.y-Hl(t.height/2)}),this._canvas.addShape(t,i,r),t},Qi.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function oa(e){Qi.call(this,e)}N()(oa,Qi),oa.$inject=["canvas"];var Cv=Qi.prototype.execute;oa.prototype.execute=function(e){var t=e.shape;return Av(t),t.labelTarget=e.labelTarget,Cv.call(this,e)};var Pv=Qi.prototype.revert;oa.prototype.revert=function(e){return e.shape.labelTarget=null,Pv.call(this,e)};function Av(e){["width","height"].forEach(function(t){typeof e[t]=="undefined"&&(e[t]=0)})}function Mo(e,t){this._canvas=e,this._modeling=t}Mo.$inject=["canvas","modeling"],Mo.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=(0,St.cq)(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},Mo.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,(0,St.IH)(n.children,t,i),this._canvas.addConnection(t,n),t};function fc(e,t){this._modeling=e,this._elementRegistry=t}fc.$inject=["modeling","elementRegistry"],fc.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;(0,p.Ed)(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function sa(e,t){this._canvas=e,this._modeling=t}sa.$inject=["canvas","modeling"],sa.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Mr(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Mr(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Mr(n.children,function(i){Dv(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})},sa.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=(0,St.cq)(i.children,n),t.removeShape(n),n},sa.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return(0,St.IH)(i.children,n,r),t.addShape(n,i),n};function Dv(e){return e.waypoints}function Oo(e){this._modeling=e}Oo.$inject=["modeling"];var Fl={x:"y",y:"x"};Oo.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function a(Y,Te){Y.range.min=Math.min(Te[i],Y.range.min),Y.range.max=Math.max(Te[i]+Te[r],Y.range.max)}function o(Y){return Y[i]+Y[r]/2}function s(Y){return Y.length-1}function c(Y){return Y.max-Y.min}function l(Y,Te){var Se={y:0};Se[i]=Y-o(Te),Se[i]&&(Se[Fl[i]]=0,t.moveElements([Te],Se,Te.parent))}var f=n[0],d=s(n),m=n[d],_,x,$=0;(0,p.Ed)(n,function(Y,Te){var Se,Q,ne;if(Y.elements.length<2){Te&&Te!==n.length-1&&(a(Y,Y.elements[0]),$+=c(Y.range));return}Se=(0,p.MR)(Y.elements,i),Q=Se[0],Te===d&&(Q=Se[s(Se)]),ne=o(Q),Y.range=null,(0,p.Ed)(Se,function(be){if(l(ne,be),Y.range===null){Y.range={min:be[i],max:be[i]+be[r]};return}a(Y,be)}),Te&&Te!==n.length-1&&($+=c(Y.range))}),x=Math.abs(m.range.min-f.range.max),_=Math.round((x-$)/(n.length-1)),!(_<n.length-1)&&(0,p.Ed)(n,function(Y,Te){var Se={},Q;Y===f||Y===m||(Q=n[Te-1],Y.range.max=0,(0,p.Ed)(Y.elements,function(ne,be){Se[Fl[i]]=0,Se[i]=Q.range.max-ne[i]+_,Y.range.min!==ne[i]&&(Se[i]+=ne[i]-Y.range.min),Se[i]&&t.moveElements([ne],Se,ne.parent),Y.range.max=Math.max(ne[i]+ne[r],be?Y.range.max:0)}))})},Oo.prototype.postExecute=function(e){};function Io(e,t){this._layouter=e,this._canvas=t}Io.$inject=["layouter","canvas"],Io.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return(0,p.f0)(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},Io.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function hc(){}hc.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=(0,St.Od)(a.children,t),(0,St.IH)(i.children,t,r),t.parent=i,(0,p.Ed)(t.waypoints,function(o){o.x+=n.x,o.y+=n.y,o.original&&(o.original.x+=n.x,o.original.y+=n.y)}),t},hc.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,a=e.delta;return(0,St.Od)(n.children,t),(0,St.IH)(i.children,t,r),t.parent=i,(0,p.Ed)(t.waypoints,function(o){o.x-=a.x,o.y-=a.y,o.original&&(o.original.x-=a.x,o.original.y-=a.y)}),t};function dc(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}dc.prototype.add=function(e,t){return this.addAll([e],t)},dc.prototype.addAll=function(e,t){var n=(0,rn.vA)(e,!!t,this);return(0,p.f0)(this,n),this};function ca(e){this._modeling=e}ca.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},ca.prototype.moveClosure=function(e,t,n,i,r){var a=this._modeling,o=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,f=!1;r&&r.parent===n&&(f=!0),(0,p.Ed)(o,function(d){a.moveShape(d,t,l[d.id]&&!f&&n,{recurse:!1,layout:!1})}),(0,p.Ed)(s,function(d){var m=!!o[d.source.id],_=!!o[d.target.id];c[d.id]&&m&&_?a.moveConnection(d,t,l[d.id]&&!f&&n):a.layoutConnection(d,{connectionStart:m&&Ns(d,d.source,t),connectionEnd:_&&Bs(d,d.target,t)})})},ca.prototype.getClosure=function(e){return new dc().addAll(e,!0)};function Lo(e){this._helper=new ca(e)}Lo.$inject=["modeling"],Lo.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},Lo.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function gr(e){this._modeling=e,this._helper=new ca(e)}gr.$inject=["modeling"],gr.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldBounds=(0,p.ei)(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=(0,St.Od)(a.children,t),(0,St.IH)(i.children,t,r),(0,p.f0)(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},gr.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&((0,p.Ed)(t.incoming,function(a){r.layoutConnection(a,{connectionEnd:Bs(a,t,n)})}),(0,p.Ed)(t.outgoing,function(a){r.layoutConnection(a,{connectionStart:Ns(a,t,n)})})),i.recurse!==!1&&this.moveChildren(e)},gr.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return(0,St.IH)(n.children,t,i),(0,p.f0)(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},gr.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},gr.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function ua(e){this._modeling=e}ua.$inject=["modeling"],ua.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return(0,p.kJ)(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i},ua.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,a=e.hints||{},o={};a.connectionStart&&(o.connectionStart=a.connectionStart),a.connectionEnd&&(o.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!i||a.docking==="source")&&(o.connectionStart=o.connectionStart||zl((0,p.kJ)(r)?r[0]:r)),i&&(!n||a.docking==="target")&&(o.connectionEnd=o.connectionEnd||zl((0,p.kJ)(r)?r[r.length-1]:r)),a.newWaypoints&&(o.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,o))},ua.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function zl(e){return e.original||e}function zi(e,t){this._modeling=e,this._rules=t}zi.$inject=["modeling","rules"],zi.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,a=e.newData,o=e.hints||{},s;function c(x,$,Y){return i.allowed("connection.reconnect",{connection:Y,source:x,target:$})}var l={x:a.x,y:a.y},f={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(a,l,r.parent,o),r.host&&n.updateAttachment(s,r.host);var d;o.moveChildren!==!1&&(d=r.children.slice(),n.moveElements(d,{x:0,y:0},s,o));var m=r.incoming.slice(),_=r.outgoing.slice();(0,p.Ed)(m,function(x){var $=x.source,Y=c($,s,x);Y&&t.reconnectEnd(x,s,fo(x,s,f),o)}),(0,p.Ed)(_,function(x){var $=x.target,Y=c(s,$,x);Y&&t.reconnectStart(x,s,po(x,s,f),o)})},zi.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},zi.prototype.execute=function(e){},zi.prototype.revert=function(e){},zi.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},zi.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)},zi.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function la(e){this._modeling=e}la.$inject=["modeling"],la.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},(0,p.f0)(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},la.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&((0,p.Ed)(n.incoming,function(a){t.layoutConnection(a,{connectionEnd:fo(a,n,i)})}),(0,p.Ed)(n.outgoing,function(a){t.layoutConnection(a,{connectionStart:po(a,n,i)})}))},la.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return(0,p.f0)(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function er(e){this._modeling=e}er.$inject=["modeling"],er.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,a=e.start,o={};this.moveShapes(i,t),(0,p.Ed)(r,function(s){o[s.id]=Ov(s)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(gv(i,r),t,n,a,i,r,o)},er.prototype.execute=function(){},er.prototype.revert=function(){},er.prototype.moveShapes=function(e,t){var n=this;(0,p.Ed)(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})},er.prototype.resizeShapes=function(e,t,n){var i=this;(0,p.Ed)(e,function(r){var a=yv(r,n,t);i._modeling.resizeShape(r,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})},er.prototype.updateConnectionWaypoints=function(e,t,n,i,r,a,o){var s=this,c=r.concat(a);(0,p.Ed)(e,function(l){var f=l.source,d=l.target,m=Mv(l),_=$l(n),x={labelBehavior:!1};tr(c,f)&&tr(c,d)?(m=(0,p.UI)(m,function($){return Wl($,i,n)&&($[_]=$[_]+t[_]),$.original&&Wl($.original,i,n)&&($.original[_]=$.original[_]+t[_]),$}),s._modeling.updateWaypoints(l,m,{labelBehavior:!1})):(tr(c,f)||tr(c,d))&&(tr(r,f)?x.connectionStart=Ns(l,f,t):tr(r,d)?x.connectionEnd=Bs(l,d,t):tr(a,f)?x.connectionStart=po(l,f,o[f.id]):tr(a,d)&&(x.connectionEnd=fo(l,d,o[d.id])),s._modeling.layoutConnection(l,x))})};function Ul(e){return(0,p.f0)({},e)}function Mv(e){return(0,p.UI)(e.waypoints,function(t){return t=Ul(t),t.original&&(t.original=Ul(t.original)),t})}function $l(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Wl(e,t,n){var i=$l(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function tr(e,t){return e.indexOf(t)!==-1}function Ov(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function No(e){this._modeling=e}No.$inject=["modeling"],No.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=Gl(n),t.collapsed=!t.collapsed;var i=Vl(n,t.collapsed);return[t].concat(i)},No.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=Kl(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function Gl(e){var t={};return(0,p.Ed)(e,function(n){t[n.id]=n.hidden,n.children&&(t=(0,p.f0)({},t,Gl(n.children)))}),t}function Vl(e,t){var n=[];return(0,p.Ed)(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(Vl(i.children,i.collapsed||t)))}),n}function Kl(e,t){var n=[];return(0,p.Ed)(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(Kl(i.children,t)))}),n}function Bo(e){this._modeling=e}Bo.$inject=["modeling"],Bo.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=Yl(i,t),Zl(n,t),t.host=n,t},Bo.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,Yl(n,t),Zl(i,t,r),t};function Yl(e,t){return(0,St.Od)(e&&e.attachers,t)}function Zl(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),(0,St.IH)(i,t,n)}}function vc(){}vc.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},vc.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Zt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}Zt.$inject=["eventBus","elementFactory","commandStack"],Zt.prototype.getHandlers=function(){return{"shape.append":Po,"shape.create":Qi,"shape.delete":sa,"shape.move":gr,"shape.resize":la,"shape.replace":zi,"shape.toggleCollapse":No,spaceTool:er,"label.create":oa,"connection.create":Ao,"connection.delete":Mo,"connection.move":hc,"connection.layout":Io,"connection.updateWaypoints":vc,"connection.reconnect":ua,"elements.create":pc,"elements.move":Lo,"elements.delete":fc,"elements.distribute":Oo,"elements.align":Co,"element.updateAttachment":Bo}},Zt.prototype.registerHandlers=function(e){(0,p.Ed)(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},Zt.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var a={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",a)},Zt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Zt.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,a=n,o;r===!0?(o=n,a=n.parent):r===!1&&(o=null);var s={shapes:e,delta:t,newParent:a,newHost:o,hints:i};this._commandStack.execute("elements.move",s)},Zt.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var a={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",a)},Zt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Zt.prototype.createConnection=function(e,t,n,i,r,a){typeof n=="object"&&(a=r,r=i,i=n,n=void 0),i=this._create("connection",i);var o={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:a};return this._commandStack.execute("connection.create",o),o.connection},Zt.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var a=r.attach,o,s;e=this._create("shape",e),a?(o=n.parent,s=n):o=n;var c={position:t,shape:e,parent:o,parentIndex:i,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Zt.prototype.createElements=function(e,t,n,i,r){(0,p.kJ)(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var a={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",a),a.elements},Zt.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Zt.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var a={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",a),a.shape},Zt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Zt.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},Zt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Zt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Zt.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},Zt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Zt.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)},Zt.prototype.createSpace=function(e,t,n,i,r){var a={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",a)},Zt.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},Zt.prototype.reconnect=function(e,t,n,i,r){var a={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",a)},Zt.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,(0,p.f0)(i,{docking:"source"}))},Zt.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,(0,p.f0)(i,{docking:"target"}))},Zt.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},Zt.prototype._create=function(e,t){return t instanceof lc.XY?t:this._elementFactory.create(e,t)},Zt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function pa(e){this._elementRegistry=e}pa.$inject=["elementRegistry"],pa.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this.getVisualReferences(n).concat(t),a=e.oldProperties||Iv(n,(0,p.XP)(i));return Xl(n,i),e.oldProperties=a,e.changed=r,r},pa.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return Xl(n,t),i},pa.prototype.getVisualReferences=function(e){var t=this._elementRegistry;return(0,y.is)(e,"bpmn:DataObject")?Lv(e,t):[]};function Iv(e,t){return(0,p.u4)(t,function(n,i){return n[i]=e.get(i),n},{})}function Xl(e,t){(0,p.Ed)(t,function(n,i){e.set(i,n)})}function Lv(e,t){return t.filter(function(n){return(0,y.is)(n,"bpmn:DataObjectReference")&&(0,y.SS)(n).dataObjectRef===e})}var fa="default",Ui="id",Jl="di",Nv={width:0,height:0};function ha(e,t,n,i,r){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=r}ha.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],ha.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r=this._elementRegistry,a=this._moddle.ids,o=t.businessObject,s=Fv(e.properties),c=e.oldProperties||Bv(o,s);return ql(s,o)&&(a.unclaim(o[Ui]),r.updateId(t,s[Ui]),a.claim(s[Ui],o)),fa in s&&(s[fa]&&n.push(r.get(s[fa].id)),o[fa]&&n.push(r.get(o[fa].id))),Ql(o,s),e.oldProperties=c,e.changed=n,n},ha.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&(0,y.SS)(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,Nv)}},ha.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,a=this._elementRegistry,o=this._moddle.ids;return Ql(r,i),ql(n,r)&&(o.unclaim(n[Ui]),a.updateId(t,i[Ui]),o.claim(i[Ui],r)),e.changed};function ql(e,t){return Ui in e&&e[Ui]!==t[Ui]}function Bv(e,t){var n=(0,p.XP)(t);return(0,p.u4)(n,function(i,r){return r!==Jl?i[r]=e.get(r):i[r]=kv(e.di,(0,p.XP)(t.di)),i},{})}function kv(e,t){return(0,p.u4)(t,function(n,i){return n[i]=e.get(i),n},{})}function Ql(e,t){(0,p.Ed)(t,function(n,i){i!==Jl?e.set(i,n):e.di&&jv(e.di,n)})}function jv(e,t){(0,p.Ed)(t,function(n,i){e.set(i,n)})}var Hv=["default"];function Fv(e){var t=(0,p.f0)({},e);return Hv.forEach(function(n){n in e&&(t[n]=(0,y.SS)(t[n]))}),t}function ko(e,t){this._canvas=e,this._modeling=t}ko.$inject=["canvas","modeling"],ko.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),a=r.businessObject,o=a.$parent,s=a.di;t.setRootElement(n,!0),(0,St.IH)(o.rootElements,i),i.$parent=o,(0,St.Od)(o.rootElements,a),a.$parent=null,a.di=null,s.bpmnElement=i,i.di=s,e.oldRoot=r},ko.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,a=r.businessObject,o=i.$parent,s=i.di;t.setRootElement(r,!0),(0,St.Od)(o.rootElements,i),i.$parent=null,(0,St.IH)(o.rootElements,a),a.$parent=o,i.di=null,s.bpmnElement=a,a.di=s};function mc(e,t){this._modeling=e,this._spaceTool=t}mc.$inject=["modeling","spaceTool"],mc.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,a=bi(i),o=a===i,s=o?i:i.parent,c=hr(s);c.length||n.createShape({type:"bpmn:Lane"},{x:i.x+Cr,y:i.y,width:i.width-Cr,height:i.height},s);var l=[];(0,rn.om)(a,function($){return l.push($),$.label&&l.push($.label),$===i?[]:(0,p.hX)($.children,function(Y){return Y!==i})});var f=r==="top"?-120:120,d=r==="top"?i.y:i.y+i.height,m=d+(r==="top"?10:-10),_=r==="top"?"n":"s",x=t.calculateAdjustments(l,"y",f,m);t.makeSpace(x.movingShapes,x.resizingShapes,{x:0,y:f},_,m),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(o?Cr:0),y:d-(r==="top"?120:0),width:i.width-(o?Cr:0),height:120},s)};function gc(e,t){this._modeling=e,this._translate=t}gc.$inject=["modeling","translate"],gc.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,a=hr(i),o=a.length;if(o>r)throw new Error(n("more than {count} child lanes",{count:r}));var s=Math.round(i.height/r),c,l,f,d,m;for(m=0;m<r;m++)c=i.y+m*s,m===r-1?l=i.height-s*m:l=s,f={x:i.x+Cr,y:c,width:i.width-Cr,height:l},m<o?t.resizeShape(a[m],f):(d={type:"bpmn:Lane"},t.createShape(d,f,i))};function da(e,t){this._modeling=e,this._spaceTool=t}da.$inject=["modeling","spaceTool"],da.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)},da.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=Cf(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})},da.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=(0,ge.JA)(e),r=(0,ge.JA)(t),a=Zc(r,i),o=bi(e),s=[],c=[];(0,rn.om)(o,function(x){return s.push(x),((0,y.is)(x,"bpmn:Lane")||(0,y.is)(x,"bpmn:Participant"))&&c.push(x),x.children});var l,f,d,m,_;(a.bottom||a.top)&&(l=a.bottom||a.top,f=e.y+(a.bottom?e.height:0)+(a.bottom?-10:10),d=a.bottom?"s":"n",m=a.top>0||a.bottom<0?-l:l,_=n.calculateAdjustments(s,"y",m,f),n.makeSpace(_.movingShapes,_.resizingShapes,{x:0,y:l},d)),(a.left||a.right)&&(l=a.right||a.left,f=e.x+(a.right?e.width:0)+(a.right?-10:100),d=a.right?"e":"w",m=a.left>0||a.right<0?-l:l,_=n.calculateAdjustments(c,"x",m,f),n.makeSpace(_.movingShapes,_.resizingShapes,{x:l,y:0},d))};var va="flowNodeRef",yc="lanes";function ma(e){this._elementRegistry=e}ma.$inject=["elementRegistry"],ma.prototype.computeUpdates=function(e,t){var n=[],i=[],r={},a=[];function o(f,d){var m=(0,ge.JA)(d),_={x:f.x+f.width/2,y:f.y+f.height/2};return _.x>m.left&&_.x<m.right&&_.y>m.top&&_.y<m.bottom}function s(f){n.indexOf(f)===-1&&(a.push(f),n.push(f))}function c(f){var d=bi(f);return r[d.id]||(r[d.id]=Ya(d)),r[d.id]}function l(f){if(!f.parent)return[];var d=c(f);return d.filter(function(m){return o(f,m)}).map(function(m){return m.businessObject})}return t.forEach(function(f){var d=bi(f);if(!(!d||n.indexOf(d)!==-1)){var m=d.children.filter(function(_){return(0,y.is)(_,"bpmn:FlowNode")});m.forEach(s),n.push(d)}}),e.forEach(s),a.forEach(function(f){var d=f.businessObject,m=d.get(yc),_=m.slice(),x=l(f);i.push({flowNode:d,remove:_,add:x})}),t.forEach(function(f){var d=f.businessObject;f.parent||d.get(va).forEach(function(m){i.push({flowNode:m,remove:[d],add:[]})})}),i},ma.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(yc);n.remove.forEach(function(a){(0,St.Od)(r,a),(0,St.Od)(a.get(va),i)}),n.add.forEach(function(a){(0,St.IH)(r,a),(0,St.IH)(a.get(va),i)})})},ma.prototype.revert=function(e){var t=e.updates;t.forEach(function(n){var i=n.flowNode,r=i.get(yc);n.add.forEach(function(a){(0,St.Od)(r,a),(0,St.Od)(a.get(va),i)}),n.remove.forEach(function(a){(0,St.IH)(r,a),(0,St.IH)(a.get(va),i)})})};function jo(e){this._moddle=e}jo.$inject=["moddle"],jo.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.claim(n,i):t.unclaim(n)},jo.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.unclaim(n):t.claim(n,i)};var zv={fill:void 0,stroke:void 0};function Ec(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if((0,p.HD)(t)){var n=Uv(t);if(n)return n}throw new Error("invalid color value: "+t)}}}Ec.$inject=["commandStack"],Ec.prototype.postExecute=function(e){var t=e.elements,n=e.colors||zv,i=this,r={};"fill"in n&&(0,p.f0)(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&(0,p.f0)(r,{"border-color":this._normalizeColor(n.stroke)}),(0,p.Ed)(t,function(a){var o=$v(a)?(0,p.ei)(r,["border-color"]):r;Wv(o),a.labelTarget?i._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:a.businessObject.di.label,properties:{color:r["background-color"]}}):i._commandStack.execute("element.updateProperties",{element:a,properties:{di:o}})})};function Uv(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function $v(e){return!!e.waypoints}function Wv(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var Gv={width:0,height:0};function ep(e,t){function n(s,c){var l=s.label||s,f=s.labelTarget||s;return(0,qi.l)(l,c,f!==l),[l,f]}function i(s){var c=s.element,l=c.businessObject,f=s.newLabel;if(!(0,on.j_)(c)&&(0,on.ly)(c)&&!(0,on.fF)(c)&&!tp(f)){var d=7,m=(0,on.qe)(c);m={x:m.x,y:m.y+d},e.createLabel(c,m,{id:l.id+"_label",businessObject:l})}}function r(s){return s.oldLabel=(0,qi.i)(s.element),n(s.element,s.newLabel)}function a(s){return n(s.element,s.oldLabel)}function o(s){var c=s.element,l=c.label||c,f=s.newLabel,d=s.newBounds,m=s.hints||{};if(!(!(0,on.j_)(l)&&!(0,y.is)(l,"bpmn:TextAnnotation"))){if((0,on.j_)(l)&&tp(f)){m.removeShape!==!1&&e.removeShape(l,{unsetLabel:!1});return}var _=(0,qi.i)(l);typeof d=="undefined"&&(d=t.getExternalLabelBounds(l,_)),d&&e.resizeShape(l,d,Gv)}}this.preExecute=i,this.execute=r,this.revert=a,this.postExecute=o}ep.$inject=["modeling","textRenderer"];function tp(e){return!e||!e.trim()}function jn(e,t,n,i){Zt.call(this,e,t,n),this._bpmnRules=i}N()(jn,Zt),jn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],jn.prototype.getHandlers=function(){var e=Zt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=pa,e["element.updateProperties"]=ha,e["canvas.updateRoot"]=ko,e["lane.add"]=mc,e["lane.resize"]=da,e["lane.split"]=gc,e["lane.updateRefs"]=ma,e["id.updateClaim"]=jo,e["element.setColor"]=Ec,e["element.updateLabel"]=ep,e},jn.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},jn.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)},jn.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},jn.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},jn.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},jn.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},jn.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},jn.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},jn.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},jn.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};this._commandStack.execute("canvas.updateRoot",t)},jn.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},jn.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},jn.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function np(){}np.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||(0,ge.wS)(t.source||e.source),t.connectionEnd||(0,ge.wS)(t.target||e.target)]};var Ho=20,Vv=5,Fo=Math.round,ip=20,Kv={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function Yv(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function Zv(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function rp(e,t,n){var i=(0,ge.T8)(t,e,Vv),r=n.split(":")[0],a=Fo((t.x-e.x)/2+e.x),o=Fo((t.y-e.y)/2+e.y),s,c,l=Zv(r,i),f=/h|r|l/.test(r),d=!1,m=!1;return l?(s=f?{x:a,y:e.y}:{x:e.x,y:o},c=f?"h:h":"v:v"):(d=Yv(i,r),c=f?"h:v":"v:h",d?f?(m=o===e.y,s={x:e.x+Ho*(/l/.test(r)?-1:1),y:m?o+Ho:o}):(m=a===e.x,s={x:m?a+Ho:a,y:e.y+Ho*(/t/.test(r)?-1:1)}):s={x:a,y:o}),{waypoints:_c(e,s,c).concat(s),directions:c,turnNextDirections:m}}function Xv(e,t,n){return rp(e,t,n)}function Jv(e,t,n){var i=rp(t,e,ap(n));return{waypoints:i.waypoints.slice().reverse(),directions:ap(i.directions),turnNextDirections:i.turnNextDirections}}function qv(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,a=_c(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:a,directions:r}}function ap(e){return e.split(":").reverse().join(":")}function Qv(e,t,n){var i=Fo((t.x-e.x)/2+e.x),r=Fo((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function _c(e,t,n){if(n=n||"h:h",!cm(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(sp(n)){var i=Xv(e,t,n),r=Jv(e,t,n),a=qv(i,r);return[].concat(i.waypoints,a.waypoints,r.waypoints)}return Qv(e,t,n)}function em(e,t,n){var i=_c(e,t,n);return i.unshift(e),i.push(t),up(i)}function tm(e,t,n,i,r){var a=r&&r.preferredLayouts||[],o=(0,p.zu)(a,"straight")[0]||"h:h",s=Kv[o]||0,c=(0,ge.T8)(e,t,s),l=sm(c,o);n=n||(0,ge.wS)(e),i=i||(0,ge.wS)(t);var f=l.split(":"),d=cp(n,e,f[0],um(c)),m=cp(i,t,f[1],c);return em(d,m,l)}function nm(e,t,n,i,r,a){(0,p.kJ)(n)&&(r=n,a=i,n=(0,ge.wS)(e),i=(0,ge.wS)(t)),a=(0,p.f0)({preferredLayouts:[]},a),r=r||[];var o=a.preferredLayouts,s=o.indexOf("straight")!==-1,c;return c=s&&rm(e,t,n,i,a),c||(c=a.connectionEnd&&om(t,e,i,r),c)||(c=a.connectionStart&&am(e,t,n,r),c)?c:!a.connectionStart&&!a.connectionEnd&&r&&r.length?r:tm(e,t,n,i,a)}function im(e,t,n){return e>=t&&e<=n}function op(e,t,n){var i={x:"width",y:"height"};return im(t[e],n[e],n[e]+n[i[e]])}function rm(e,t,n,i,r){var a={},o,s;return s=(0,ge.T8)(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(o="x"),/left|right/.test(s)&&(o="y"),r.preserveDocking==="target"?op(o,i,e)?(a[o]=i[o],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:i.x,y:i.y}]):null:op(o,n,t)?(a[o]=n[o],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y,original:{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y}}]):null):null}function am(e,t,n,i){return bc(e,t,n,i)}function om(e,t,n,i){var r=i.slice().reverse();return r=bc(e,t,n,r),r?r.reverse():null}function bc(e,t,n,i){function r(f){return f.length<3?!0:f.length>4?!1:!!(0,p.sE)(f,function(d,m){var _=f[m-1];return _&&(0,Tn.tW)(d,_)<3})}function a(f,d,m){var _=(0,Tn.Or)(d,f);switch(_){case"v":return{x:m.x,y:f.y};case"h":return{x:f.x,y:m.y}}return{x:f.x,y:f.y}}function o(f,d,m){var _;for(_=f.length-2;_!==0;_--)if((0,Tn.qr)(f[_],d,ip)||(0,Tn.qr)(f[_],m,ip))return f.slice(_);return f}if(r(i))return null;var s=i[0],c=i.slice(),l;return c[0]=n,c[1]=a(c[1],s,n),l=o(c,e,t),l!==c&&(c=bc(e,t,n,l)),c&&(0,Tn.Or)(c)?null:c}function sm(e,t){if(sp(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function cm(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function sp(e){return e&&/t|r|b|l/.test(e)}function um(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function cp(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function up(e){return e.reduce(function(t,n,i){var r=t[t.length-1],a=e[i+1];return(0,Tn.ZS)(r,a,n,0)||t.push(n),t},[])}var lm=-10,pm=40,xc={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},zo={top:"t",right:"r",bottom:"b",left:"l"};function Sc(){}N()(Sc,np),Sc.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,a=t.connectionStart,o=t.connectionEnd,s,c;return a||(a=lp(r&&r[0],n)),o||(o=lp(r&&r[r.length-1],i)),((0,y.is)(e,"bpmn:Association")||(0,y.is)(e,"bpmn:DataAssociation"))&&r&&!pp(n,i)?[].concat([a],r.slice(1,-1),[o]):((0,y.is)(e,"bpmn:MessageFlow")?s=hm(n,i):((0,y.is)(e,"bpmn:SequenceFlow")||pp(n,i))&&(n===i?s={preferredLayouts:bm(n,e)}:(0,y.is)(n,"bpmn:BoundaryEvent")?s={preferredLayouts:xm(n,i,o)}:ga(n)||ga(i)?s=vm(n):(0,y.is)(n,"bpmn:Gateway")?s={preferredLayouts:["v:h"]}:(0,y.is)(i,"bpmn:Gateway")?s={preferredLayouts:["h:v"]}:s={preferredLayouts:["h:h"]}),s&&(s=(0,p.f0)(s,t),c=up(nm(n,i,a,o,r,s))),c||[a,o])};function fm(e){var t=e.host;return(0,ge.T8)((0,ge.wS)(e),t,lm)}function hm(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:dm(e,t)}}function dm(e,t){return(0,y.is)(t,"bpmn:Participant")?"source":(0,y.is)(e,"bpmn:Participant")?"target":ga(t)?"source":ga(e)||(0,y.is)(t,"bpmn:Event")?"target":(0,y.is)(e,"bpmn:Event")?"source":null}function vm(e){return{preferredLayouts:["straight","h:h"],preserveDocking:mm(e)}}function mm(e){return ga(e)?"target":"source"}function lp(e,t){return e?e.original||e:(0,ge.wS)(t)}function pp(e,t){return(0,y.is)(t,"bpmn:Activity")&&(0,y.is)(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function ga(e){return(0,y.is)(e,"bpmn:SubProcess")&&(0,wt.ul)(e)}function ya(e,t){return e===t}function gm(e,t){return t.indexOf(e)!==-1}function Ea(e){var t=/right|left/.exec(e);return t&&t[0]}function yr(e){var t=/top|bottom/.exec(e);return t&&t[0]}function ym(e,t){return xc[e]===t}function Em(e,t){var n=Ea(e),i=xc[n];return t.indexOf(i)!==-1}function _m(e,t){var n=yr(e),i=xc[n];return t.indexOf(i)!==-1}function wc(e){return e==="right"||e==="left"}function bm(e,t){var n=t.waypoints,i=n&&n.length&&(0,ge.T8)(n[0],e);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function xm(e,t,n){var i=(0,ge.wS)(e),r=(0,ge.wS)(t),a=fm(e),o,s,c=ya(e.host,t),l=gm(a,["top","right","bottom","left"]),f=(0,ge.T8)(r,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return c?Sm(a,l,e,t,n):(o=wm(a,f,l),s=Tm(a,f,l),[o+":"+s])}function Sm(e,t,n,i,r){var a=t?e:yr(e),o=zo[a],s;return t?wc(e)?s=fp("y",n,i,r)?"h":"b":s=fp("x",n,i,r)?"v":"l":s="v",[o+":"+s]}function fp(e,t,n,i){var r=pm;return!(Tc(e,i,n,r)||Tc(e,i,{x:n.x+n.width,y:n.y+n.height},r)||Tc(e,i,(0,ge.wS)(t),r))}function Tc(e,t,n,i){return Math.abs(t[e]-n[e])<i}function wm(e,t,n){return n?zo[e]:ya(yr(e),yr(t))||ym(Ea(e),Ea(t))?zo[yr(e)]:zo[Ea(e)]}function Tm(e,t,n){return n?wc(e)?Em(e,t)||ya(e,t)?"h":"v":_m(e,t)||ya(e,t)?"v":"h":wc(t)||ya(yr(e),yr(t))&&Ea(t)?"h":"v"}function hp(e){return(0,p.f0)({original:e.point.original||e.point},e.actual)}function nr(e,t){this._elementRegistry=e,this._graphicsFactory=t}nr.$inject=["elementRegistry","graphicsFactory"],nr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),a=e.waypoints.slice(i.idx+1,r.idx);return a.unshift(hp(i)),a.push(hp(r)),a},nr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,a,o;return r=n?0:i.length-1,a=i[r],o=this._getIntersection(t,e,n),{point:a,actual:o||a,idx:r}},nr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return(0,ge.Hz)(i,r,n)},nr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},nr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},nr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var Rm={__init__:["modeling","bpmnUpdater"],__depends__:[Dd,Zd,qd,Qd,Vc,ev,av,sv,hv,b.Z,hu,kl],bpmnFactory:["type",hi],bpmnUpdater:["type",ai],elementFactory:["type",Tv.Z],modeling:["type",jn],layouter:["type",Sc],connectionDocking:["type",nr]},Cm=z(73280),Pm=500,Am=1250,Dm=1500,Uo=Math.round;function Mm(e){return{x:e.x+Uo(e.width/2),y:e.y+Uo(e.height/2)}}function dp(e,t,n,i,r){function a(s,c,l,f){return r.allowed("elements.move",{shapes:s,delta:c,position:l,target:f})}e.on("shape.move.start",Dm,function(s){var c=s.context,l=s.shape,f=i.get().slice();f.indexOf(l)===-1&&(f=[l]),f=Om(f),(0,p.f0)(c,{shapes:f,validatedShapes:f,shape:l})}),e.on("shape.move.start",Am,function(s){var c=s.context,l=c.validatedShapes,f;if(f=c.canExecute=a(l),!f)return!1}),e.on("shape.move.move",Pm,function(s){var c=s.context,l=c.validatedShapes,f=s.hover,d={x:s.dx,y:s.dy},m={x:s.x,y:s.y},_;if(_=a(l,d,m,f),c.delta=d,c.canExecute=_,_===null){c.target=null;return}c.target=f}),e.on("shape.move.end",function(s){var c=s.context,l=c.delta,f=c.canExecute,d=f==="attach",m=c.shapes;if(f===!1)return!1;l.x=Uo(l.x),l.y=Uo(l.y),!(l.x===0&&l.y===0)&&n.moveElements(m,l,c.target,{primaryShape:c.shape,attach:d})}),e.on("element.mousedown",function(s){if((0,gi.Id)(s)){var c=(0,Pe.Ku)(s);if(!c)throw new Error("must supply DOM mousedown event");return o(c,s.element)}});function o(s,c,l,f){if((0,p.Kn)(l)&&(f=l,l=!1),!(c.waypoints||!c.parent)){var d=Mm(c);return t.init(s,d,"shape.move",{cursor:"grabbing",autoActivate:l,data:{shape:c,context:f||{}}}),!0}}this.start=o}dp.$inject=["eventBus","dragging","modeling","selection","rules"];function Om(e){var t=(0,p.vM)(e,"id");return(0,p.hX)(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var vp=499,Rc="djs-dragging",mp="drop-ok",gp="drop-not-ok",yp="new-parent",Ep="attach-ok";function _p(e,t,n,i){function r(c){var l=a(c),f=Im(l);return f}function a(c){var l=(0,rn.PB)(c,!0),f=(0,p.UI)(l,function(d){return(d.incoming||[]).concat(d.outgoing||[])});return(0,p.xH)(l.concat(f))}function o(c,l){[Ep,mp,gp,yp].forEach(function(f){f===l?t.addMarker(c,f):t.removeMarker(c,f)})}function s(c,l,f){i.addDragger(l,c.dragGroup),f&&t.addMarker(l,Rc),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}e.on("shape.move.start",vp,function(c){var l=c.context,f=l.shapes,d=l.allDraggedElements,m=r(f);if(!l.dragGroup){var _=(0,ae.Ue)("g");(0,ae.Lj)(_,n.cls("djs-drag-group",["no-events"]));var x=t.getActiveLayer();(0,ae.R3)(x,_),l.dragGroup=_}m.forEach(function($){i.addDragger($,l.dragGroup)}),d?d=(0,p.xH)([d,a(f)]):d=a(f),(0,p.Ed)(d,function($){t.addMarker($,Rc)}),l.allDraggedElements=d,l.differentParents=Lm(f)}),e.on("shape.move.move",vp,function(c){var l=c.context,f=l.dragGroup,d=l.target,m=l.shape.parent,_=l.canExecute;d&&(_==="attach"?o(d,Ep):l.canExecute&&d&&d.id!==m.id?o(d,yp):o(d,l.canExecute?mp:gp)),(0,Wn.Iu)(f,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context,f=l.target;f&&o(f,null)}),e.on("shape.move.cleanup",function(c){var l=c.context,f=l.allDraggedElements,d=l.dragGroup;(0,p.Ed)(f,function(m){t.removeMarker(m,Rc)}),d&&(0,ae.Od)(d)}),this.makeDraggable=s}_p.$inject=["eventBus","canvas","styles","previewSupport"];function Im(e){var t=(0,p.hX)(e,function(n){return Nm(n)?(0,p.sE)(e,(0,p.KQ)({id:n.source.id}))&&(0,p.sE)(e,(0,p.KQ)({id:n.target.id})):!0});return t}function Lm(e){return(0,p.dp)((0,p.vM)(e,function(t){return t.parent&&t.parent.id}))!==1}function Nm(e){return e.waypoints}var Bm={__depends__:[mt.Z,b.Z,Cm.Z,ci,zt,yi],__init__:["move","movePreview"],move:["type",dp],movePreview:["type",_p]},bp=".djs-palette-toggle",xp=".entry",km=bp+", "+xp,Cc="djs-palette-",jm="shown",Pc="open",Sp="two-column",Hm=1e3;function wn(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}wn.$inject=["eventBus","canvas"],wn.prototype.registerProvider=function(e,t){t||(t=e,e=Hm),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()},wn.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(zm,{})},wn.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}},wn.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=(0,R.H6)(wn.HTML_MARKUP);n.appendChild(i),(0,R.Sh)(n).add(Cc+jm),R.cl.bind(i,km,"click",function(r){var a=r.delegateTarget;if((0,R.wB)(a,bp))return e.toggle();e.trigger("click",r)}),R.B.bind(i,"mousedown",function(r){r.stopPropagation()}),R.cl.bind(i,xp,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})},wn.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},wn.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,a=(0,R.Sh)(n),o=(0,R.Sh)(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),a.toggle(Sp,r),o.toggle(Cc+Sp,r),"open"in e&&(a.toggle(Pc,e.open),o.toggle(Cc+Pc,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})},wn.prototype._update=function(){var e=(0,R.IO)(".djs-palette-entries",this._container),t=this._entries=this.getEntries();(0,R.ZH)(e),(0,p.Ed)(t,function(n,i){var r=n.group||"default",a=(0,R.IO)("[data-group="+r+"]",e);a||(a=(0,R.H6)('<div class="group" data-group="'+r+'"></div>'),e.appendChild(a));var o=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=(0,R.H6)(o);a.appendChild(s),n.separator||((0,R.Lj)(s,"data-action",i),n.title&&(0,R.Lj)(s,"title",n.title),n.className&&Fm(s,n.className),n.imageUrl&&s.appendChild((0,R.H6)('<img src="'+n.imageUrl+'">')))}),this.open()},wn.prototype.trigger=function(e,t,n){var i=this._entries,r,a,o,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();r=i[(0,R.Lj)(s,"data-action")],r&&(a=r.action,o=t.originalEvent||t,(0,p.mf)(a)?e==="click"&&a(o,n):a[e]&&a[e](o,n),t.preventDefault())},wn.prototype._layoutChanged=function(){this._toggleState({})},wn.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n},wn.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},wn.prototype.open=function(){this._toggleState({open:!0})},wn.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},wn.prototype.isActiveTool=function(e){return e&&this._activeTool===e},wn.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=(0,R.IO)(".djs-palette-entries",this._container),this._toolsContainer=(0,R.IO)("[data-group=tools]",t)),n=this._toolsContainer,(0,p.Ed)(n.children,function(i){var r=i.getAttribute("data-action");if(r){var a=(0,R.Sh)(i);r=r.replace("-tool",""),a.contains("entry")&&r===e?a.add("highlighted-entry"):a.remove("highlighted-entry")}})},wn.prototype.isOpen=function(){return(0,R.Sh)(this._container).has(Pc)},wn.prototype._getParentContainer=function(){return this._canvas.getContainer()},wn.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function Fm(e,t){var n=(0,R.Sh)(e),i=(0,p.kJ)(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function zm(e,t){var n=t.getPaletteEntries();return(0,p.mf)(n)?n(e):((0,p.Ed)(n,function(i,r){e[r]=i}),e)}var Um={__init__:["palette"],palette:["type",wn]},wp="crosshair";function Er(e,t,n,i,r,a,o){this._selection=r,this._dragging=n,this._mouse=o;var s=this,c={create:function(l){var f=t.getActiveLayer(),d;d=l.frame=(0,ae.Ue)("rect"),(0,ae.Lj)(d,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),(0,ae.R3)(f,d)},update:function(l){var f=l.frame,d=l.bbox;(0,ae.Lj)(f,{x:d.x,y:d.y,width:d.width,height:d.height})},remove:function(l){l.frame&&(0,ae.Od)(l.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(l){var f=l.originalEvent.target;!l.hover&&!(f instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(l.originalEvent,!0)})}),e.on("lasso.end",function(l){var f=Ac(l),d=i.filter(function(m){return m});s.select(d,f)}),e.on("lasso.start",function(l){var f=l.context;f.bbox=Ac(l),c.create(f)}),e.on("lasso.move",function(l){var f=l.context;f.bbox=Ac(l),c.update(f)}),e.on("lasso.cleanup",function(l){var f=l.context;c.remove(f)}),e.on("element.mousedown",1500,function(l){if((0,gi.Dw)(l))return s.activateLasso(l.originalEvent),!0})}Er.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],Er.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:wp,data:{context:{}}})},Er.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:wp,data:{context:{}}})},Er.prototype.select=function(e,t){var n=(0,rn.RH)(e,t);this._selection.select((0,p.VO)(n))},Er.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Er.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Ac(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}var $m={__depends__:[So,Yr],__init__:["lassoTool"],lassoTool:["type",Er]},Dc=1500,Tp="grab";function Or(e,t,n,i,r,a){this._dragging=n,this._mouse=a;var o=this,s=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Dc,function(c){if((0,gi.RJ)(c))return o.activateMove(c.originalEvent,!0),!1}),s&&s.addListener(Dc,function(c){if(!(!Rp(c.keyEvent)||o.isActive())){var l=o._mouse.getLastMoveEvent();o.activateMove(l,!!l)}},"keyboard.keydown"),s&&s.addListener(Dc,function(c){!Rp(c.keyEvent)||!o.isActive()||o.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var l=c.originalEvent.target;if(!c.hover&&!(l instanceof SVGElement))return!1;e.once("hand.ended",function(){o.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var l=t.viewbox().scale;t.scroll({dx:c.dx*l,dy:c.dy*l})}),e.on("hand.move.end",function(c){var l=c.context,f=l.reactivate;return!(0,gi.RJ)(c)&&f&&e.once("hand.move.ended",function(d){o.activateHand(d.originalEvent,!0,!0)}),!1})}Or.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],Or.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:Tp,data:{context:n||{}}})},Or.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:Tp,data:{context:{reactivate:n}}})},Or.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)},Or.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function Rp(e){return se(" ",e)}var Wm={__depends__:[So,Yr],__init__:["handTool"],handTool:["type",Or]},Cp="connect-ok",Pp="connect-not-ok";function Ir(e,t,n,i,r,a,o){var s=this;this._dragging=t,this._rules=a,this._mouse=o,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var l=c.context,f=c.hover,d=l.canStartConnect=s.canStartConnect(f);d!==null&&(l.startTarget=f,i.addMarker(f,d?Cp:Pp))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var l=c.context.startTarget,f=c.context.canStartConnect;l&&i.removeMarker(l,f?Cp:Pp)}),e.on(["global-connect.ended"],function(c){var l=c.context,f=l.startTarget,d={x:c.x,y:c.y},m=s.canStartConnect(f);if(m)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,f,d)}),!1})}Ir.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Ir.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})},Ir.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)},Ir.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},Ir.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};var Gm={__depends__:[je,ci,zt,So,Yr],globalConnect:["type",Ir]};function Mc(e,t,n,i,r,a,o,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=a,this._globalConnect=o,this._translate=s,e.registerProvider(this)}Mc.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Mc.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,r=this._spaceTool,a=this._lassoTool,o=this._handTool,s=this._globalConnect,c=this._translate;function l(m,_,x,$,Y){function Te(Q){var ne=i.createShape((0,p.f0)({type:m},Y));Y&&(ne.businessObject.di.isExpanded=Y.isExpanded),n.start(Q,ne)}var Se=m.replace(/^bpmn:/,"");return{group:_,className:x,title:$||c("Create {type}",{type:Se}),action:{dragstart:Te,click:Te}}}function f(m){var _=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),x=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:_});n.start(m,[_,x],{hints:{autoSelect:[_]}})}function d(m){n.start(m,i.createParticipantShape())}return(0,p.f0)(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate the hand tool"),action:{click:function(m){o.activateHand(m)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate the lasso tool"),action:{click:function(m){a.activateSelection(m)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate the create/remove space tool"),action:{click:function(m){r.activateSelection(m)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate the global connect tool"),action:{click:function(m){s.start(m)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":l("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create StartEvent")),"create.intermediate-event":l("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create Intermediate/Boundary Event")),"create.end-event":l("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create EndEvent")),"create.exclusive-gateway":l("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create Gateway")),"create.task":l("bpmn:Task","activity","bpmn-icon-task",c("Create Task")),"create.data-object":l("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create DataObjectReference")),"create.data-store":l("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded SubProcess"),action:{dragstart:f,click:f}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create Pool/Participant"),action:{dragstart:d,click:d}},"create.group":l("bpmn:Group","artifact","bpmn-icon-group",c("Create Group"))}),t};var Vm={__depends__:[Um,fr,kl,$m,Wm,Gm,wl.Z],__init__:["paletteProvider"],paletteProvider:["type",Mc]},Km=250;function Oc(e,t,n,i,r){ke.call(this,e);function a(s){var c=s.canExecute.replacements;(0,p.Ed)(c,function(l){var f=l.oldElementId,d={type:l.newElementType};if(!s.visualReplacements[f]){var m=t.get(f);(0,p.f0)(d,{x:m.x,y:m.y});var _=n.createShape(d);i.addShape(_,m.parent);var x=(0,R.IO)('[data-element-id="'+zr()(m.id)+'"]',s.dragGroup);x&&(0,ae.Lj)(x,{display:"none"});var $=r.addDragger(_,s.dragGroup);s.visualReplacements[f]=$,i.removeShape(_)}})}function o(s){var c=s.visualReplacements;(0,p.Ed)(c,function(l,f){var d=(0,R.IO)('[data-element-id="'+zr()(f)+'"]',s.dragGroup);d&&(0,ae.Lj)(d,{display:"inline"}),l.remove(),c[f]&&delete c[f]})}e.on("shape.move.move",Km,function(s){var c=s.context,l=c.canExecute;c.visualReplacements||(c.visualReplacements={}),l&&l.replacements?a(c):o(c)})}Oc.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],N()(Oc,ke);var Ym={__depends__:[yi],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Oc]},Zm=1250,Ic=40,Xm=20,Jm=10,Ap=20,Dp=["x","y"],qm=Math.abs;function Mp(e){e.on(["connect.hover","connect.move","connect.end"],Zm,function(t){var n=t.context,i=n.canExecute,r=n.start,a=n.hover,o=n.source,s=n.target;t.originalEvent&&K(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&a&&Qm(t,a,ig(a)),a&&ng(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=ii(r),(0,y.JZ)(a,["bpmn:Event","bpmn:Gateway"])&&Op(t,ii(a)),(0,y.JZ)(a,["bpmn:Task","bpmn:SubProcess"])&&eg(t,a),(0,y.is)(o,"bpmn:BoundaryEvent")&&s===o.host&&tg(t)):Ip(i,"bpmn:MessageFlow")?((0,y.is)(r,"bpmn:Event")&&(n.connectionStart=ii(r)),(0,y.is)(a,"bpmn:Event")&&Op(t,ii(a))):n.connectionStart=n.initialConnectionStart)})}Mp.$inject=["eventBus"];function Qm(e,t,n){Dp.forEach(function(i){var r=Lp(i,t);e[i]<t[i]+n?fn(e,i,t[i]+n):e[i]>t[i]+r-n&&fn(e,i,t[i]+r-n)})}function eg(e,t){var n=ii(t);Dp.forEach(function(i){rg(e,t,i)&&fn(e,i,n[i])})}function tg(e){var t=e.context,n=t.source,i=t.target;if(!ag(t)){var r=ii(n),a=(0,ge.T8)(r,i,-10),o=[];/top|bottom/.test(a)&&o.push("x"),/left|right/.test(a)&&o.push("y"),o.forEach(function(s){var c=e[s],l;qm(c-r[s])<Ic&&(c>r[s]?l=r[s]+Ic:l=r[s]-Ic,fn(e,s,l))})}}function Op(e,t){fn(e,"x",t.x),fn(e,"y",t.y)}function Ip(e,t){return e&&e.type===t}function ng(e,t){return(0,p.G)(t,function(n){return Ip(e,n)})}function Lp(e,t){return e==="x"?t.width:t.height}function ig(e){return(0,y.is)(e,"bpmn:Task")?Jm:Xm}function rg(e,t,n){return e[n]>t[n]+Ap&&e[n]<t[n]+Lp(n,t)-Ap}function ag(e){var t=e.hover,n=e.source;return t&&n&&t===n}function ir(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}ir.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},ir.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)},ir.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},ir.prototype.getSnapLocations=function(){return this._snapLocations},ir.prototype.setSnapLocations=function(e){this._snapLocations=e},ir.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new $o,n.initDefaults(this._defaultSnaps)),n};function $o(e){this._snapValues={}}$o.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)},$o.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&as(e[n],r[n],i)},$o.prototype.initDefaults=function(e){var t=this;(0,p.Ed)(e||{},function(n,i){(0,p.Ed)(n,function(r){t.add(i,r)})})};var og=1250;function Ai(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],og,function(r){var a=r.context,o=a.shape,s=a.snapContext,c=a.target;if(!(r.originalEvent&&K(r.originalEvent))&&!(an(r)||!c)){var l=s.pointsForTarget(c);l.initialized||(l=i.addSnapTargetPoints(l,o,c),l.initialized=!0),n.snap(r,l)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Ai.$inject=["elementRegistry","eventBus","snapping"],Ai.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new ir);var a;t.get(i.id)?a=ii(i,e):a={x:e.x+ii(i).x,y:e.y+ii(i).y};var o={x:a.x-i.width/2,y:a.y-i.height/2},s={x:a.x+i.width/2,y:a.y+i.height/2};return r.setSnapOrigin("mid",{x:a.x-e.x,y:a.y-e.y}),Lc(i)||(r.setSnapOrigin("top-left",{x:o.x-e.x,y:o.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r},Ai.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return(0,p.Ed)(i,function(r){if(Lc(r)){Lc(t)&&e.add("mid",ii(r));return}if(sg(r)){if(r.waypoints.length<3)return;var a=r.waypoints.slice(1,-1);(0,p.Ed)(a,function(o){e.add("mid",o)});return}e.add("mid",ii(r))}),!(0,p.hj)(t.x)||!(0,p.hj)(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",ii(t)),e},Ai.prototype.getSnapTargets=function(e,t){return Ba(t).filter(function(n){return!cg(n)})};function sg(e){return!!e.waypoints}function cg(e){return!!e.hidden}function Lc(e){return!!e.labelTarget}var Np=1500;function Lr(e,t){t.invoke(Ai,this),e.on(["create.move","create.end"],Np,fg),e.on(["create.move","create.end","shape.move.move","shape.move.end"],Np,function(n){var i=n.context,r=i.canExecute,a=i.target,o=r&&(r==="attach"||r.attach);o&&!an(n)&&ug(n,a)})}N()(Lr,Ai),Lr.$inject=["eventBus","injector"],Lr.prototype.initSnap=function(e){var t=Ai.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return(0,p.Ed)(n.outgoing,function(r){var a=r.waypoints[0];a=a.original||a,t.setSnapOrigin(r.id+"-docking",kp(a,i,e))}),(0,p.Ed)(n.incoming,function(r){var a=r.waypoints[r.waypoints.length-1];a=a.original||a,t.setSnapOrigin(r.id+"-docking",kp(a,i,e))}),(0,y.is)(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},Lr.prototype.addSnapTargetPoints=function(e,t,n){Ai.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);(0,p.Ed)(i,function(a){(pg(a)||lg([t,a],"bpmn:TextAnnotation"))&&(e.add("top-left",Na(a)),e.add("bottom-right",Yi(a)))});var r=this._elementRegistry;return(0,p.Ed)(t.incoming,function(a){if(r.get(t.id)){Bp(i,a.source)||e.add("mid",(0,ge.wS)(a.source));var o=a.waypoints[0];e.add(a.id+"-docking",o.original||o)}}),(0,p.Ed)(t.outgoing,function(a){if(r.get(t.id)){Bp(i,a.target)||e.add("mid",(0,ge.wS)(a.target));var o=a.waypoints[a.waypoints.length-1];e.add(a.id+"-docking",o.original||o)}}),(0,y.is)(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},Lr.prototype.getSnapTargets=function(e,t){return Ai.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!(0,y.is)(n,"bpmn:Lane")})};function ug(e,t){var n=(0,ge.JA)(t),i=sl(e,t),r=e.context,a=r.shape,o;a.parent?o={x:0,y:0}:o=(0,ge.wS)(a),/top/.test(i)?fn(e,"y",n.top-o.y):/bottom/.test(i)&&fn(e,"y",n.bottom-o.y),/left/.test(i)?fn(e,"x",n.left-o.x):/right/.test(i)&&fn(e,"x",n.right-o.x)}function lg(e,t){return e.every(function(n){return(0,y.is)(n,t)})}function pg(e){return(0,y.is)(e,"bpmn:SubProcess")&&(0,wt.ul)(e)?!0:(0,y.is)(e,"bpmn:Participant")}function fg(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,a=n.bottom,o=n.left;(o&&o>=e.x||r&&r<=e.x)&&fn(e,"x",e.x),(i&&i>=e.y||a&&a<=e.y)&&fn(e,"y",e.y)}}function Bp(e,t){return e.indexOf(t)!==-1}function kp(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var hg=1250;function _a(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],hg,function(i){var r=i.context,a=r.shape,o=a.parent,s=r.direction,c=r.snapContext;if(!(i.originalEvent&&K(i.originalEvent))&&!an(i)){var l=c.pointsForTarget(o);l.initialized||(l=n.addSnapTargetPoints(l,a,o,s),l.initialized=!0),yg(s)&&fn(i,"x",i.x),Eg(s)&&fn(i,"y",i.y),t.snap(i,l)}}),e.on(["resize.cleanup"],function(){t.hide()})}_a.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new ir);var a=jp(n,i);return r.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),r},_a.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return(0,p.Ed)(r,function(a){e.add("corner",Yi(a)),e.add("corner",Na(a))}),e.add("corner",jp(t,i)),e},_a.$inject=["eventBus","snapping"],_a.prototype.getSnapTargets=function(e,t){return Ba(t).filter(function(n){return!dg(n,e)&&!vg(n)&&!mg(n)&&!gg(n)})};function jp(e,t){var n=(0,ge.wS)(e),i=(0,ge.JA)(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function dg(e,t){return e.host===t}function vg(e){return!!e.waypoints}function mg(e){return!!e.hidden}function gg(e){return!!e.labelTarget}function yg(e){return e==="n"||e==="s"}function Eg(e){return e==="e"||e==="w"}var _g=7,bg=1e3;function rr(e){this._canvas=e,this._asyncHide=(0,p.Ds)((0,p.ak)(this.hide,this),bg)}rr.$inject=["canvas"],rr.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),a={x:an(e,"x"),y:an(e,"y")};(0,p.Ed)(r,function(o){var s=i.getSnapOrigin(o),c={x:e.x+s.x,y:e.y+s.y};if((0,p.Ed)(["x","y"],function(l){var f;a[l]||(f=t.snap(c,o,l,_g),f!==void 0&&(a[l]={value:f,originValue:f-s[l]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),(0,p.Ed)(["x","y"],function(o){var s=a[o];(0,p.Kn)(s)&&fn(e,o,s.originValue)})},rr.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=(0,ae.Ue)("path");return(0,ae.Lj)(n,{d:"M0,0 L0,0"}),(0,ae.Sh)(n).add("djs-snap-line"),(0,ae.R3)(t,n),{update:function(i){(0,p.hj)(i)?e==="horizontal"?(0,ae.Lj)(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):(0,ae.Lj)(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):(0,ae.Lj)(n,{display:"none"})}}},rr.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},rr.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},rr.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},rr.prototype.hide=function(){(0,p.Ed)(this._snapLines,function(e){e.update()})};var xg={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Ai],resizeSnapping:["type",_a],snapping:["type",rr]},Sg={__depends__:[xg],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Mp],createMoveSnapping:["type",Lr]},wg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hp(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return wg[t]})}function pt(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=(0,R.H6)(pt.BOX_HTML),this._searchInput=(0,R.IO)(pt.INPUT_SELECTOR,this._container),this._resultsContainer=(0,R.IO)(pt.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}pt.$inject=["canvas","eventBus","overlays","selection"],pt.prototype._bindEvents=function(){var e=this;function t(n,i,r,a){e._eventMaps.push({el:n,type:r,listener:R.cl.bind(n,i,r,a)})}t(document,"html","click",function(n){e.close()}),t(this._container,pt.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,pt.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,pt.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,pt.INPUT_SELECTOR,"keydown",function(n){n.keyCode===38&&n.preventDefault(),n.keyCode===40&&n.preventDefault()}),t(this._container,pt.INPUT_SELECTOR,"keyup",function(n){if(n.keyCode===27)return e.close();if(n.keyCode===13){var i=e._getCurrentResult();return i?e._select(i):e.close()}if(n.keyCode===38)return e._scrollToDirection(!0);if(n.keyCode===40)return e._scrollToDirection();n.keyCode===37||n.keyCode===39||e._search(n.delegateTarget.value)})},pt.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){R.cl.unbind(e.el,e.type,e.listener)})},pt.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(r){var a=r.element.id,o=t._createResultNode(r,a);t._results[a]={element:r.element,node:o}});var i=(0,R.IO)(pt.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}},pt.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},pt.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},pt.prototype._clearResults=function(){(0,R.ZH)(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},pt.prototype._getCurrentResult=function(){return(0,R.IO)(pt.RESULT_SELECTED_SELECTOR,this._resultsContainer)},pt.prototype._createResultNode=function(e,t){var n=(0,R.H6)(pt.RESULT_HTML);return e.primaryTokens.length>0&&Fp(n,e.primaryTokens,pt.RESULT_PRIMARY_HTML),Fp(n,e.secondaryTokens,pt.RESULT_SECONDARY_HTML),(0,R.Lj)(n,pt.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},pt.prototype.registerProvider=function(e){this._searchProvider=e},pt.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,(0,R.Sh)(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},pt.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,(0,R.Sh)(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},pt.prototype.toggle=function(){this.isOpen()?this.close():this.open()},pt.prototype.isOpen=function(){return this._open},pt.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&(0,R.Sh)(t).remove(pt.RESULT_SELECTED_CLASS);var n=(0,R.Lj)(e,pt.RESULT_ID_ATTRIBUTE),i=this._results[n].element;(0,R.Sh)(e).add(pt.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}},pt.prototype._select=function(e){var t=(0,R.Lj)(e,pt.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},pt.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=(0,rn.jY)(e),n=Tg(t);this._overlayId=this._overlays.add(e,n)}};function Tg(e){var t=6,n=e.width+t*2,i=e.height+t*2,r=["width: "+n+"px","height: "+i+"px"].join("; ");return{position:{bottom:i-t,right:n-t},show:!0,html:'<div style="'+r+'" class="'+pt.OVERLAY_CLASS+'"></div>'}}function Fp(e,t,n){var i=Rg(t),r=(0,R.H6)(n);r.innerHTML=i,e.appendChild(r)}function Rg(e){var t="";return e.forEach(function(n){n.matched?t+='<strong class="'+pt.RESULT_HIGHLIGHT_CLASS+'">'+Hp(n.matched)+"</strong>":t+=Hp(n.normal)}),t!==""?t:null}pt.CONTAINER_SELECTOR=".djs-search-container",pt.INPUT_SELECTOR=".djs-search-input input",pt.RESULTS_CONTAINER_SELECTOR=".djs-search-results",pt.RESULT_SELECTOR=".djs-search-result",pt.RESULT_SELECTED_CLASS="djs-search-result-selected",pt.RESULT_SELECTED_SELECTOR="."+pt.RESULT_SELECTED_CLASS,pt.RESULT_ID_ATTRIBUTE="data-result-id",pt.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",pt.OVERLAY_CLASS="djs-search-overlay",pt.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',pt.RESULT_HTML='<div class="djs-search-result"></div>',pt.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',pt.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var Cg={__depends__:[kt.Z,b.Z],searchPad:["type",pt]};function Nc(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Nc.$inject=["elementRegistry","searchPad","canvas"],Nc.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=(0,p.hX)(n,function(i){return i!==t}),n=(0,p.UI)(n,function(i){return{primaryTokens:Up((0,qi.i)(i),e),secondaryTokens:Up(i.id,e),element:i}}),n=(0,p.hX)(n,function(i){return zp(i.primaryTokens)||zp(i.secondaryTokens)}),n=(0,p.MR)(n,function(i){return(0,qi.i)(i.element)+i.element.id}),n};function zp(e){var t=(0,p.hX)(e,function(n){return!!n.matched});return t.length>0}function Up(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}var Pg={__depends__:[Cg],__init__:["bpmnSearch"],bpmnSearch:["type",Nc]},Ag=z(86622),Dg='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Di(e){oe.call(this,e)}N()(Di,oe),Di.Viewer=F.Z,Di.NavigatedViewer=Re,Di.prototype.createDiagram=(0,Ag.$)(function(){return this.importXML(Dg)}),Di.prototype._interactionModules=[B,ut,vi,Qe],Di.prototype._modelingModules=[Mi,ei,ti,br,u,je,Ut,Pf,Uc,fr,Mf,Lf,Jf,eh,th,oh,gh,Rm,Bm,Vm,Ym,Eu,Sg,Pg],Di.prototype._modules=[].concat(F.Z.prototype._modules,Di.prototype._interactionModules,Di.prototype._modelingModules)},1047:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return Rt}});var S=z(2937),N=z.n(S),V=z(67217),re=z(84822),oe=z(92131),F=z(77872),p=z(27367),R=z(49343),P=z(38390),fe=z(24220),Z=z(80836),ee=z(67887),X=z(57191),L=new X.Z,O=10,A=3,W=.95,K=.35,se=10;function we(le,De,Ie,de,He,$e,bt){re.Z.call(this,De,bt);var Qe=le&&le.defaultFillColor,Re=le&&le.defaultStrokeColor,mt=le&&le.defaultLabelColor,gn=L.next(),en={},Hn=Ie.computeStyle;function cn(j,g){var J=(0,V.f0)({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},g.attrs),ce=g.ref||{x:0,y:0},Oe=g.scale||1;J.strokeDasharray==="none"&&(J.strokeDasharray=[1e4,1]);var We=(0,Z.Ue)("marker");(0,Z.Lj)(g.element,J),(0,Z.R3)(We,g.element),(0,Z.Lj)(We,{id:j,viewBox:"0 0 20 20",refX:ce.x,refY:ce.y,markerWidth:20*Oe,markerHeight:20*Oe,orient:"auto"});var it=(0,fe.IO)("defs",He._svg);it||(it=(0,Z.Ue)("defs"),(0,Z.R3)(He._svg,it)),(0,Z.R3)(it,We),en[j]=We}function Fn(j){return j.replace(/[^0-9a-zA-z]+/g,"_")}function Kt(j,g,J){var ce=j+"-"+Fn(g)+"-"+Fn(J)+"-"+gn;return en[ce]||In(ce,j,g,J),"url(#"+ce+")"}function In(j,g,J,ce){if(g==="sequenceflow-end"){var Oe=(0,Z.Ue)("path");(0,Z.Lj)(Oe,{d:"M 1 5 L 11 10 L 1 15 Z"}),cn(j,{element:Oe,ref:{x:11,y:10},scale:.5,attrs:{fill:ce,stroke:ce}})}if(g==="messageflow-start"){var We=(0,Z.Ue)("circle");(0,Z.Lj)(We,{cx:6,cy:6,r:3.5}),cn(j,{element:We,attrs:{fill:J,stroke:ce},ref:{x:6,y:6}})}if(g==="messageflow-end"){var it=(0,Z.Ue)("path");(0,Z.Lj)(it,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),cn(j,{element:it,attrs:{fill:J,stroke:ce,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if(g==="association-start"){var Mt=(0,Z.Ue)("path");(0,Z.Lj)(Mt,{d:"M 11 5 L 1 10 L 11 15"}),cn(j,{element:Mt,attrs:{fill:"none",stroke:ce,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if(g==="association-end"){var Bt=(0,Z.Ue)("path");(0,Z.Lj)(Bt,{d:"M 1 5 L 11 10 L 1 15"}),cn(j,{element:Bt,attrs:{fill:"none",stroke:ce,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if(g==="conditional-flow-marker"){var vn=(0,Z.Ue)("path");(0,Z.Lj)(vn,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),cn(j,{element:vn,attrs:{fill:J,stroke:ce},ref:{x:-1,y:10},scale:.5})}if(g==="conditional-default-flow-marker"){var xn=(0,Z.Ue)("path");(0,Z.Lj)(xn,{d:"M 6 4 L 10 16"}),cn(j,{element:xn,attrs:{stroke:ce},ref:{x:0,y:10},scale:.5})}}function tn(j,g,J,ce,Oe){(0,V.Kn)(ce)&&(Oe=ce,ce=0),ce=ce||0,Oe=Hn(Oe,{stroke:"black",strokeWidth:2,fill:"white"}),Oe.fill==="none"&&delete Oe.fillOpacity;var We=g/2,it=J/2,Mt=(0,Z.Ue)("circle");return(0,Z.Lj)(Mt,{cx:We,cy:it,r:Math.round((g+J)/4-ce)}),(0,Z.Lj)(Mt,Oe),(0,Z.R3)(j,Mt),Mt}function nn(j,g,J,ce,Oe,We){(0,V.Kn)(Oe)&&(We=Oe,Oe=0),Oe=Oe||0,We=Hn(We,{stroke:"black",strokeWidth:2,fill:"white"});var it=(0,Z.Ue)("rect");return(0,Z.Lj)(it,{x:Oe,y:Oe,width:g-Oe*2,height:J-Oe*2,rx:ce,ry:ce}),(0,Z.Lj)(it,We),(0,Z.R3)(j,it),it}function yn(j,g,J,ce){var Oe=g/2,We=J/2,it=[{x:Oe,y:0},{x:g,y:We},{x:Oe,y:J},{x:0,y:We}],Mt=it.map(function(vn){return vn.x+","+vn.y}).join(" ");ce=Hn(ce,{stroke:"black",strokeWidth:2,fill:"white"});var Bt=(0,Z.Ue)("polygon");return(0,Z.Lj)(Bt,{points:Mt}),(0,Z.Lj)(Bt,ce),(0,Z.R3)(j,Bt),Bt}function ae(j,g,J){J=Hn(J,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var ce=(0,R.W5)(g,J);return(0,Z.R3)(j,ce),ce}function ct(j,g,J){J=Hn(J,["no-fill"],{strokeWidth:2,stroke:"black"});var ce=(0,Z.Ue)("path");return(0,Z.Lj)(ce,{d:g}),(0,Z.Lj)(ce,J),(0,Z.R3)(j,ce),ce}function Mn(j,g,J,ce){return ct(g,J,(0,V.f0)({"data-marker":j},ce))}function vi(j){return function(g,J){return si[j](g,J)}}function nt(j){return si[j]}function mi(j,g){var J=(0,P.nr)(j),ce=(0,P.gT)(J);return J.eventDefinitions&&J.eventDefinitions.length>1?J.parallelMultiple?nt("bpmn:ParallelMultipleEventDefinition")(g,j,ce):nt("bpmn:MultipleEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:MessageEventDefinition")?nt("bpmn:MessageEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:TimerEventDefinition")?nt("bpmn:TimerEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:ConditionalEventDefinition")?nt("bpmn:ConditionalEventDefinition")(g,j):(0,P.iY)(J,"bpmn:SignalEventDefinition")?nt("bpmn:SignalEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:EscalationEventDefinition")?nt("bpmn:EscalationEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:LinkEventDefinition")?nt("bpmn:LinkEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:ErrorEventDefinition")?nt("bpmn:ErrorEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:CancelEventDefinition")?nt("bpmn:CancelEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:CompensateEventDefinition")?nt("bpmn:CompensateEventDefinition")(g,j,ce):(0,P.iY)(J,"bpmn:TerminateEventDefinition")?nt("bpmn:TerminateEventDefinition")(g,j,ce):null}function Qn(j,g,J){J=(0,V.f0)({size:{width:100}},J);var ce=$e.createText(g||"",J);return(0,Z.Sh)(ce).add("djs-label"),(0,Z.R3)(j,ce),ce}function Wi(j,g,J){var ce=(0,P.nr)(g);return Qn(j,ce.name,{box:g,align:J,padding:5,style:{fill:(0,P.Ou)(g,mt,Re)}})}function zn(j,g){var J={width:90,height:30,x:g.width/2+g.x,y:g.height/2+g.y};return Qn(j,(0,F.i)(g),{box:J,fitBox:!0,style:(0,V.f0)({},$e.getExternalStyle(),{fill:(0,P.Ou)(g,mt,Re)})})}function Mi(j,g,J){var ce=Qn(j,g,{box:{height:30,width:J.height},align:"center-middle",style:{fill:(0,P.Ou)(J,mt,Re)}}),Oe=-1*J.height;(0,ee.vs)(ce,0,-Oe,270)}function ge(j){for(var g=j.waypoints,J="m  "+g[0].x+","+g[0].y,ce=1;ce<g.length;ce++)J+="L"+g[ce].x+","+g[ce].y+" ";return J}var si=this.handlers={"bpmn:Event":function(j,g,J){return"fillOpacity"in J||(J.fillOpacity=W),tn(j,g.width,g.height,J)},"bpmn:StartEvent":function(j,g){var J={fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)},ce=(0,P.nr)(g);ce.isInterrupting||(J={strokeDasharray:"6",strokeLinecap:"round",fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});var Oe=nt("bpmn:Event")(j,g,J);return mi(g,j),Oe},"bpmn:MessageEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.235,my:.315}}),Oe=J?(0,P.$Z)(g,Re):(0,P.W7)(g,Qe),We=J?(0,P.W7)(g,Qe):(0,P.$Z)(g,Re),it=ct(j,ce,{strokeWidth:1,fill:Oe,stroke:We});return it},"bpmn:TimerEventDefinition":function(j,g){var J=tn(j,g.width,g.height,.2*g.height,{strokeWidth:2,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)}),ce=de.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}});ct(j,ce,{strokeWidth:2,strokeLinecap:"square",stroke:(0,P.$Z)(g,Re)});for(var Oe=0;Oe<12;Oe++){var We=de.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}}),it=g.width/2,Mt=g.height/2;ct(j,We,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+Oe*30+","+Mt+","+it+")",stroke:(0,P.$Z)(g,Re)})}return J},"bpmn:EscalationEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)})},"bpmn:ConditionalEventDefinition":function(j,g){var J=de.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.222}});return ct(j,J,{strokeWidth:1,stroke:(0,P.$Z)(g,Re)})},"bpmn:LinkEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.57,my:.263}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)})},"bpmn:ErrorEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.2,my:.722}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)})},"bpmn:CancelEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.638,my:-.055}}),Oe=J?(0,P.$Z)(g,Re):"none",We=ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)});return(0,ee.U1)(We,45),We},"bpmn:CompensateEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.22,my:.5}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)})},"bpmn:SignalEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe,stroke:(0,P.$Z)(g,Re)})},"bpmn:MultipleEventDefinition":function(j,g,J){var ce=de.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.222,my:.36}}),Oe=J?(0,P.$Z)(g,Re):"none";return ct(j,ce,{strokeWidth:1,fill:Oe})},"bpmn:ParallelMultipleEventDefinition":function(j,g){var J=de.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:g.width,containerHeight:g.height,position:{mx:.458,my:.194}});return ct(j,J,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)})},"bpmn:EndEvent":function(j,g){var J=nt("bpmn:Event")(j,g,{strokeWidth:4,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});return mi(g,j,!0),J},"bpmn:TerminateEventDefinition":function(j,g){var J=tn(j,g.width,g.height,8,{strokeWidth:4,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)});return J},"bpmn:IntermediateEvent":function(j,g){var J=nt("bpmn:Event")(j,g,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});return tn(j,g.width,g.height,A,{strokeWidth:1,fill:(0,P.W7)(g,"none"),stroke:(0,P.$Z)(g,Re)}),mi(g,j),J},"bpmn:IntermediateCatchEvent":vi("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":vi("bpmn:IntermediateEvent"),"bpmn:Activity":function(j,g,J){return J=J||{},"fillOpacity"in J||(J.fillOpacity=W),nn(j,g.width,g.height,O,J)},"bpmn:Task":function(j,g){var J={fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)},ce=nt("bpmn:Activity")(j,g,J);return Wi(j,g,"center-middle"),oi(j,g),ce},"bpmn:ServiceTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=de.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});ct(j,ce,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});var Oe=de.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});ct(j,Oe,{strokeWidth:0,fill:(0,P.W7)(g,Qe)});var We=de.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return ct(j,We,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:UserTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=15,Oe=12,We=de.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:ce,y:Oe}});ct(j,We,{strokeWidth:.5,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});var it=de.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:ce,y:Oe}});ct(j,it,{strokeWidth:.5,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});var Mt=de.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:ce,y:Oe}});return ct(j,Mt,{strokeWidth:.5,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:ManualTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=de.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return ct(j,ce,{strokeWidth:.5,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:SendTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=de.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return ct(j,ce,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.W7)(g,Qe)}),J},"bpmn:ReceiveTask":function(j,g){var J=(0,P.nr)(g),ce=nt("bpmn:Task")(j,g),Oe;return J.instantiate?(tn(j,28,28,20*.22,{strokeWidth:1}),Oe=de.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):Oe=de.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),ct(j,Oe,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)}),ce},"bpmn:ScriptTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=de.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return ct(j,ce,{strokeWidth:1,stroke:(0,P.$Z)(g,Re)}),J},"bpmn:BusinessRuleTask":function(j,g){var J=nt("bpmn:Task")(j,g),ce=de.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),Oe=ct(j,ce);(0,Z.Lj)(Oe,{strokeWidth:1,fill:(0,P.W7)(g,"#aaaaaa"),stroke:(0,P.$Z)(g,Re)});var We=de.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),it=ct(j,We);return(0,Z.Lj)(it,{strokeWidth:1,stroke:(0,P.$Z)(g,Re)}),J},"bpmn:SubProcess":function(j,g,J){J=(0,V.f0)({fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)},J);var ce=nt("bpmn:Activity")(j,g,J),Oe=(0,oe.ul)(g);return(0,oe.J5)(g)&&(0,Z.Lj)(ce,{strokeDasharray:"1,2"}),Wi(j,g,Oe?"center-top":"center-middle"),Oe?oi(j,g):oi(j,g,["SubProcessMarker"]),ce},"bpmn:AdHocSubProcess":function(j,g){return nt("bpmn:SubProcess")(j,g)},"bpmn:Transaction":function(j,g){var J=nt("bpmn:SubProcess")(j,g),ce=Ie.style(["no-fill","no-events"],{stroke:(0,P.$Z)(g,Re)});return nn(j,g.width,g.height,O-2,A,ce),J},"bpmn:CallActivity":function(j,g){return nt("bpmn:SubProcess")(j,g,{strokeWidth:5})},"bpmn:Participant":function(j,g){var J={fillOpacity:W,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)},ce=nt("bpmn:Lane")(j,g,J),Oe=(0,oe.ul)(g);if(Oe){ae(j,[{x:30,y:0},{x:30,y:g.height}],{stroke:(0,P.$Z)(g,Re)});var We=(0,P.nr)(g).name;Mi(j,We,g)}else{var it=(0,P.nr)(g).name;Qn(j,it,{box:g,align:"center-middle",style:{fill:(0,P.Ou)(g,mt,Re)}})}var Mt=!!(0,P.nr)(g).participantMultiplicity;return Mt&&nt("ParticipantMultiplicityMarker")(j,g),ce},"bpmn:Lane":function(j,g,J){var ce=nn(j,g.width,g.height,0,(0,V.f0)({fill:(0,P.W7)(g,Qe),fillOpacity:K,stroke:(0,P.$Z)(g,Re)},J)),Oe=(0,P.nr)(g);if(Oe.$type==="bpmn:Lane"){var We=Oe.name;Mi(j,We,g)}return ce},"bpmn:InclusiveGateway":function(j,g){var J=nt("bpmn:Gateway")(j,g);return tn(j,g.width,g.height,g.height*.24,{strokeWidth:2.5,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:ExclusiveGateway":function(j,g){var J=nt("bpmn:Gateway")(j,g),ce=de.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.32,my:.3}});return(0,P.DN)(g).isMarkerVisible&&ct(j,ce,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:ComplexGateway":function(j,g){var J=nt("bpmn:Gateway")(j,g),ce=de.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.26}});return ct(j,ce,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:ParallelGateway":function(j,g){var J=nt("bpmn:Gateway")(j,g),ce=de.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.2}});return ct(j,ce,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)}),J},"bpmn:EventBasedGateway":function(j,g){var J=(0,P.nr)(g),ce=nt("bpmn:Gateway")(j,g);tn(j,g.width,g.height,g.height*.2,{strokeWidth:1,fill:"none",stroke:(0,P.$Z)(g,Re)});var Oe=J.eventGatewayType,We=!!J.instantiate;function it(){var xn=de.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:g.width,containerHeight:g.height,position:{mx:.36,my:.44}}),Rn={strokeWidth:2,fill:(0,P.W7)(g,"none"),stroke:(0,P.$Z)(g,Re)};ct(j,xn,Rn)}if(Oe==="Parallel"){var Mt=de.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}}),Bt=ct(j,Mt);(0,Z.Lj)(Bt,{strokeWidth:1,fill:"none"})}else if(Oe==="Exclusive"){if(!We){var vn=tn(j,g.width,g.height,g.height*.26);(0,Z.Lj)(vn,{strokeWidth:1,fill:"none",stroke:(0,P.$Z)(g,Re)})}it()}return ce},"bpmn:Gateway":function(j,g){var J={fill:(0,P.W7)(g,Qe),fillOpacity:W,stroke:(0,P.$Z)(g,Re)};return yn(j,g.width,g.height,J)},"bpmn:SequenceFlow":function(j,g){var J=ge(g),ce=(0,P.W7)(g,Qe),Oe=(0,P.$Z)(g,Re),We={strokeLinejoin:"round",markerEnd:Kt("sequenceflow-end",ce,Oe),stroke:(0,P.$Z)(g,Re)},it=ct(j,J,We),Mt=(0,P.nr)(g),Bt;return g.source&&(Bt=g.source.businessObject,Mt.conditionExpression&&Bt.$instanceOf("bpmn:Activity")&&(0,Z.Lj)(it,{markerStart:Kt("conditional-flow-marker",ce,Oe)}),Bt.default&&(Bt.$instanceOf("bpmn:Gateway")||Bt.$instanceOf("bpmn:Activity"))&&Bt.default===Mt&&(0,Z.Lj)(it,{markerStart:Kt("conditional-default-flow-marker",ce,Oe)})),it},"bpmn:Association":function(j,g,J){var ce=(0,P.nr)(g),Oe=(0,P.W7)(g,Qe),We=(0,P.$Z)(g,Re);return J=(0,V.f0)({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:(0,P.$Z)(g,Re)},J||{}),(ce.associationDirection==="One"||ce.associationDirection==="Both")&&(J.markerEnd=Kt("association-end",Oe,We)),ce.associationDirection==="Both"&&(J.markerStart=Kt("association-start",Oe,We)),ae(j,g.waypoints,J)},"bpmn:DataInputAssociation":function(j,g){var J=(0,P.W7)(g,Qe),ce=(0,P.$Z)(g,Re);return nt("bpmn:Association")(j,g,{markerEnd:Kt("association-end",J,ce)})},"bpmn:DataOutputAssociation":function(j,g){var J=(0,P.W7)(g,Qe),ce=(0,P.$Z)(g,Re);return nt("bpmn:Association")(j,g,{markerEnd:Kt("association-end",J,ce)})},"bpmn:MessageFlow":function(j,g){var J=(0,P.nr)(g),ce=(0,P.DN)(g),Oe=(0,P.W7)(g,Qe),We=(0,P.$Z)(g,Re),it=ge(g),Mt={markerEnd:Kt("messageflow-end",Oe,We),markerStart:Kt("messageflow-start",Oe,We),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:(0,P.$Z)(g,Re)},Bt=ct(j,it,Mt);if(J.messageRef){var vn=Bt.getPointAtLength(Bt.getTotalLength()/2),xn=de.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:vn.x,y:vn.y}}),Rn={strokeWidth:1};ce.messageVisibleKind==="initiating"?(Rn.fill="white",Rn.stroke="black"):(Rn.fill="#888",Rn.stroke="white");var xi=ct(j,xn,Rn),Si=J.messageRef.name,y=Qn(j,Si,{align:"center-top",fitBox:!0,style:{fill:(0,P.$Z)(g,mt,Re)}}),Sn=xi.getBBox(),Ln=y.getBBox(),Un=vn.x-Ln.width/2,Vn=vn.y+Sn.height/2+se;(0,ee.vs)(y,Un,Vn,0)}return Bt},"bpmn:DataObject":function(j,g){var J=de.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}}),ce=ct(j,J,{fill:(0,P.W7)(g,Qe),fillOpacity:W,stroke:(0,P.$Z)(g,Re)}),Oe=(0,P.nr)(g);return(0,P.uZ)(Oe)&&Gi(j,g),ce},"bpmn:DataObjectReference":vi("bpmn:DataObject"),"bpmn:DataInput":function(j,g){var J=de.getRawPath("DATA_ARROW"),ce=nt("bpmn:DataObject")(j,g);return ct(j,J,{strokeWidth:1}),ce},"bpmn:DataOutput":function(j,g){var J=de.getRawPath("DATA_ARROW"),ce=nt("bpmn:DataObject")(j,g);return ct(j,J,{strokeWidth:1,fill:"black"}),ce},"bpmn:DataStoreReference":function(j,g){var J=de.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:0,my:.133}}),ce=ct(j,J,{strokeWidth:2,fill:(0,P.W7)(g,Qe),fillOpacity:W,stroke:(0,P.$Z)(g,Re)});return ce},"bpmn:BoundaryEvent":function(j,g){var J=(0,P.nr)(g),ce=J.cancelActivity,Oe={strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)};ce||(Oe.strokeDasharray="6",Oe.strokeLinecap="round");var We=(0,V.f0)({},Oe,{fillOpacity:1}),it=(0,V.f0)({},Oe,{fill:"none"}),Mt=nt("bpmn:Event")(j,g,We);return tn(j,g.width,g.height,A,it),mi(g,j),Mt},"bpmn:Group":function(j,g){var J=nn(j,g.width,g.height,O,{stroke:(0,P.$Z)(g,Re),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"});return J},label:function(j,g){return zn(j,g)},"bpmn:TextAnnotation":function(j,g){var J={fill:"none",stroke:"none"},ce=nn(j,g.width,g.height,0,0,J),Oe=de.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:0,my:0}});ct(j,Oe,{stroke:(0,P.$Z)(g,Re)});var We=(0,P.nr)(g).text||"";return Qn(j,We,{box:g,align:"left-top",padding:5,style:{fill:(0,P.Ou)(g,mt,Re)}}),ce},ParticipantMultiplicityMarker:function(j,g){var J=de.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:g.width/2/g.width,my:(g.height-15)/g.height}});Mn("participant-multiplicity",j,J,{strokeWidth:2,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)})},SubProcessMarker:function(j,g){var J=nn(j,14,14,0,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)});(0,ee.Iu)(J,g.width/2-7.5,g.height-20);var ce=de.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2-7.5)/g.width,my:(g.height-20)/g.height}});Mn("sub-process",j,ce,{fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)})},ParallelMarker:function(j,g,J){var ce=de.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+J.parallel)/g.width,my:(g.height-20)/g.height}});Mn("parallel",j,ce,{fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)})},SequentialMarker:function(j,g,J){var ce=de.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+J.seq)/g.width,my:(g.height-19)/g.height}});Mn("sequential",j,ce,{fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)})},CompensationMarker:function(j,g,J){var ce=de.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+J.compensation)/g.width,my:(g.height-13)/g.height}});Mn("compensation",j,ce,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re)})},LoopMarker:function(j,g,J){var ce=de.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+J.loop)/g.width,my:(g.height-7)/g.height}});Mn("loop",j,ce,{strokeWidth:1,fill:(0,P.W7)(g,Qe),stroke:(0,P.$Z)(g,Re),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(j,g,J){var ce=de.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+J.adhoc)/g.width,my:(g.height-15)/g.height}});Mn("adhoc",j,ce,{strokeWidth:1,fill:(0,P.$Z)(g,Re),stroke:(0,P.$Z)(g,Re)})}};function oi(j,g,J){var ce=(0,P.nr)(g),Oe=J&&J.indexOf("SubProcessMarker")!==-1,We;Oe?We={seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:We={seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},(0,V.Ed)(J,function(Bt){nt(Bt)(j,g,We)}),ce.isForCompensation&&nt("CompensationMarker")(j,g,We),ce.$type==="bpmn:AdHocSubProcess"&&nt("AdhocMarker")(j,g,We);var it=ce.loopCharacteristics,Mt=it&&it.isSequential;it&&(Mt===void 0&&nt("LoopMarker")(j,g,We),Mt===!1&&nt("ParallelMarker")(j,g,We),Mt===!0&&nt("SequentialMarker")(j,g,We))}function Gi(j,g){var J=(g.height-18)/g.height,ce=de.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.33,my:J}});ct(j,ce,{strokeWidth:2})}this._drawPath=ct}N()(we,re.Z),we.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],we.prototype.canRender=function(le){return(0,p.is)(le,"bpmn:BaseElement")},we.prototype.drawShape=function(le,De){var Ie=De.type,de=this.handlers[Ie];return de(le,De)},we.prototype.drawConnection=function(le,De){var Ie=De.type,de=this.handlers[Ie];return de(le,De)},we.prototype.getShapePath=function(le){return(0,p.is)(le,"bpmn:Event")?(0,P.iu)(le):(0,p.is)(le,"bpmn:Activity")?(0,P.H)(le,O):(0,p.is)(le,"bpmn:Gateway")?(0,P.j3)(le):(0,P.lr)(le)};var Ge=0,ft={width:150,height:50};function rt(le){var De=le.split("-");return{horizontal:De[0]||"center",vertical:De[1]||"top"}}function yt(le){return(0,V.Kn)(le)?(0,V.f0)({top:0,left:0,right:0,bottom:0},le):{top:le,left:le,right:le,bottom:le}}function st(le,De){De.textContent=le;var Ie;try{var de,He=le==="";return De.textContent=He?"dummy":le,Ie=De.getBBox(),de={width:Ie.width+Ie.x*2,height:Ie.height},He&&(de.width=0),de}catch($e){return{width:0,height:0}}}function Dt(le,De,Ie){for(var de=le.shift(),He=de,$e;;){if($e=st(He,Ie),$e.width=He?$e.width:0,He===" "||He===""||$e.width<Math.round(De)||He.length<2)return Wt(le,He,de,$e);He=bn(He,$e.width,De)}}function Wt(le,De,Ie,de){if(De.length<Ie.length){var He=Ie.slice(De.length).trim();le.unshift(He)}return{width:de.width,height:de.height,text:De}}var Xt="\xAD";function Lt(le,De){var Ie=le.split(/(\s|-|\u00AD)/g),de,He=[],$e=0;if(Ie.length>1)for(;de=Ie.shift();)if(de.length+$e<De)He.push(de),$e+=de.length;else{(de==="-"||de===Xt)&&He.pop();break}var bt=He[He.length-1];return bt&&bt===Xt&&(He[He.length-1]="-"),He.join("")}function bn(le,De,Ie){var de=Math.max(le.length*(Ie/De),1),He=Lt(le,de);return He||(He=le.slice(0,Math.max(Math.round(de-1),1))),He}function Ht(){var le=document.getElementById("helper-svg");return le||(le=(0,Z.Ue)("svg"),(0,Z.Lj)(le,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(le)),le}function Gt(le){this._config=(0,V.f0)({},{size:ft,padding:Ge,style:{},align:"center-top"},le||{})}Gt.prototype.createText=function(le,De){return this.layoutText(le,De).element},Gt.prototype.getDimensions=function(le,De){return this.layoutText(le,De).dimensions},Gt.prototype.layoutText=function(le,De){var Ie=(0,V.f0)({},this._config.size,De.box),de=(0,V.f0)({},this._config.style,De.style),He=rt(De.align||this._config.align),$e=yt(De.padding!==void 0?De.padding:this._config.padding),bt=De.fitBox||!1,Qe=_n(de),Re=le.split(/\u00AD?\r?\n/),mt=[],gn=Ie.width-$e.left-$e.right,en=(0,Z.Ue)("text");(0,Z.Lj)(en,{x:0,y:0}),(0,Z.Lj)(en,de);var Hn=Ht();for((0,Z.R3)(Hn,en);Re.length;)mt.push(Dt(Re,gn,en));He.vertical==="middle"&&($e.top=$e.bottom=0);var cn=(0,V.u4)(mt,function(nn,yn,ae){return nn+(Qe||yn.height)},0)+$e.top+$e.bottom,Fn=(0,V.u4)(mt,function(nn,yn,ae){return yn.width>nn?yn.width:nn},0),Kt=$e.top;He.vertical==="middle"&&(Kt+=(Ie.height-cn)/2),Kt-=(Qe||mt[0].height)/4;var In=(0,Z.Ue)("text");(0,Z.Lj)(In,de),(0,V.Ed)(mt,function(nn){var yn;switch(Kt+=Qe||nn.height,He.horizontal){case"left":yn=$e.left;break;case"right":yn=(bt?Fn:gn)-$e.right-nn.width;break;default:yn=Math.max(((bt?Fn:gn)-nn.width)/2+$e.left,0)}var ae=(0,Z.Ue)("tspan");(0,Z.Lj)(ae,{x:yn,y:Kt}),ae.textContent=nn.text,(0,Z.R3)(In,ae)}),(0,Z.Od)(en);var tn={width:Fn,height:cn};return{dimensions:tn,element:In}};function _n(le){if("fontSize"in le&&"lineHeight"in le)return le.lineHeight*parseInt(le.fontSize,10)}var Fe=12,Je=1.2,D=30;function ve(le){var De=(0,V.f0)({fontFamily:"Arial, sans-serif",fontSize:Fe,fontWeight:"normal",lineHeight:Je},le&&le.defaultStyle||{}),Ie=parseInt(De.fontSize,10)-1,de=(0,V.f0)({},De,{fontSize:Ie},le&&le.externalStyle||{}),He=new Gt({style:De});this.getExternalLabelBounds=function($e,bt){var Qe=He.getDimensions(bt,{box:{width:90,height:30,x:$e.width/2+$e.x,y:$e.height/2+$e.y},style:de});return{x:Math.round($e.x+$e.width/2-Qe.width/2),y:Math.round($e.y),width:Math.ceil(Qe.width),height:Math.ceil(Qe.height)}},this.getTextAnnotationBounds=function($e,bt){var Qe=He.getDimensions(bt,{box:$e,style:De,align:"left-top",padding:5});return{x:$e.x,y:$e.y,width:$e.width,height:Math.max(D,Math.round(Qe.height))}},this.createText=function($e,bt){return He.createText($e,bt||{})},this.getDefaultStyle=function(){return De},this.getExternalStyle=function(){return de}}ve.$inject=["config.textRenderer"];function Ee(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(De){return this.pathMap[De].d},this.getScaledPath=function(De,Ie){var de=this.pathMap[De],He,$e;Ie.abspos?(He=Ie.abspos.x,$e=Ie.abspos.y):(He=Ie.containerWidth*Ie.position.mx,$e=Ie.containerHeight*Ie.position.my);var bt={};if(Ie.position){for(var Qe=Ie.containerHeight/de.height*Ie.yScaleFactor,Re=Ie.containerWidth/de.width*Ie.xScaleFactor,mt=0;mt<de.heightElements.length;mt++)bt["y"+mt]=de.heightElements[mt]*Qe;for(var gn=0;gn<de.widthElements.length;gn++)bt["x"+gn]=de.widthElements[gn]*Re}var en=ye(de.d,{mx:He,my:$e,e:bt});return en}}var _e=/\{([^{}]+)\}/g,Ue=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function ue(le,De,Ie){var de=Ie;return De.replace(Ue,function(He,$e,bt,Qe,Re){$e=$e||Qe,de&&($e in de&&(de=de[$e]),typeof de=="function"&&Re&&(de=de()))}),de=(de==null||de==Ie?le:de)+"",de}function ye(le,De){return String(le).replace(_e,function(Ie,de){return ue(Ie,de,De)})}var xe={__init__:["bpmnRenderer"],bpmnRenderer:["type",we],textRenderer:["type",ve],pathMap:["type",Ee]},B=z(90936),ie=z(96817),M=z(88237),G=z(8527);function te(le,De){return(0,V.f0)({id:le.id,type:le.$type,businessObject:le},De)}function k(le,De,Ie){var de=le.di.waypoint;return!de||de.length<2?[(0,M.wS)(De),(0,M.wS)(Ie)]:de.map(function(He){return{x:He.x,y:He.y}})}function w(le,De,Ie,de){return new Error(le("element {element} referenced by {referenced}#{property} not yet drawn",{element:(0,G.x)(Ie),referenced:(0,G.x)(De),property:de}))}function U(le,De,Ie,de,He,$e){this._eventBus=le,this._canvas=De,this._elementFactory=Ie,this._elementRegistry=de,this._translate=He,this._textRenderer=$e}U.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],U.prototype.add=function(le,De){var Ie=le.di,de,He=this._translate,$e,bt;if((0,p.is)(Ie,"bpmndi:BPMNPlane"))de=this._elementFactory.createRoot(te(le)),this._canvas.setRootElement(de);else if((0,p.is)(Ie,"bpmndi:BPMNShape")){var Qe=!(0,oe.ul)(le),Re=Pe(le);$e=De&&(De.hidden||De.collapsed);var mt=le.di.bounds;de=this._elementFactory.createShape(te(le,{collapsed:Qe,hidden:$e,x:Math.round(mt.x),y:Math.round(mt.y),width:Math.round(mt.width),height:Math.round(mt.height),isFrame:Re})),(0,p.is)(le,"bpmn:BoundaryEvent")&&this._attachBoundary(le,de),(0,p.is)(le,"bpmn:Lane")&&(bt=0),(0,p.is)(le,"bpmn:DataStoreReference")&&(pe(De,(0,M.wS)(mt))||(De=this._canvas.getRootElement())),this._canvas.addShape(de,De,bt)}else if((0,p.is)(Ie,"bpmndi:BPMNEdge")){var gn=this._getSource(le),en=this._getTarget(le);$e=De&&(De.hidden||De.collapsed),de=this._elementFactory.createConnection(te(le,{hidden:$e,source:gn,target:en,waypoints:k(le,gn,en)})),(0,p.is)(le,"bpmn:DataAssociation")&&(De=null),(0,p.is)(le,"bpmn:SequenceFlow")&&(bt=0),this._canvas.addConnection(de,De,bt)}else throw new Error(He("unknown di {di} for element {semantic}",{di:(0,G.x)(Ie),semantic:(0,G.x)(le)}));return(0,ie.ly)(le)&&(0,F.i)(de)&&this.addLabel(le,de),this._eventBus.fire("bpmnElement.added",{element:de}),de},U.prototype._attachBoundary=function(le,De){var Ie=this._translate,de=le.attachedToRef;if(!de)throw new Error(Ie("missing {semantic}#attachedToRef",{semantic:(0,G.x)(le)}));var He=this._elementRegistry.get(de.id),$e=He&&He.attachers;if(!He)throw w(Ie,le,de,"attachedToRef");De.host=He,$e||(He.attachers=$e=[]),$e.indexOf(De)===-1&&$e.push(De)},U.prototype.addLabel=function(le,De){var Ie,de,He;return Ie=(0,ie.lq)(le,De),de=(0,F.i)(De),de&&(Ie=this._textRenderer.getExternalLabelBounds(Ie,de)),He=this._elementFactory.createLabel(te(le,{id:le.id+"_label",labelTarget:De,type:"label",hidden:De.hidden||!(0,F.i)(De),x:Math.round(Ie.x),y:Math.round(Ie.y),width:Math.round(Ie.width),height:Math.round(Ie.height)})),this._canvas.addShape(He,De.parent)},U.prototype._getEnd=function(le,De){var Ie,de,He=le.$type,$e=this._translate;if(de=le[De+"Ref"],De==="source"&&He==="bpmn:DataInputAssociation"&&(de=de&&de[0]),(De==="source"&&He==="bpmn:DataOutputAssociation"||De==="target"&&He==="bpmn:DataInputAssociation")&&(de=le.$parent),Ie=de&&this._getElement(de),Ie)return Ie;throw de?w($e,le,de,De+"Ref"):new Error($e("{semantic}#{side} Ref not specified",{semantic:(0,G.x)(le),side:De}))},U.prototype._getSource=function(le){return this._getEnd(le,"source")},U.prototype._getTarget=function(le){return this._getEnd(le,"target")},U.prototype._getElement=function(le){return this._elementRegistry.get(le.id)};function pe(le,De){var Ie=De.x,de=De.y;return Ie>=le.x&&Ie<=le.x+le.width&&de>=le.y&&de<=le.y+le.height}function Pe(le){return(0,p.is)(le,"bpmn:Group")}var ze={__depends__:[B.Z],bpmnImporter:["type",U]},Et={__depends__:[xe,ze]},xt=z(96408),ut=z(22494),Tt=z(59707);function Rt(le){Tt.Z.call(this,le)}N()(Rt,Tt.Z),Rt.prototype._modules=[Et,B.Z,xt.Z,ut.Z],Rt.prototype._moddleExtensions={}},38390:function(ot,Be,z){"use strict";z.d(Be,{$Z:function(){return P},DN:function(){return F},H:function(){return ee},Ou:function(){return fe},W7:function(){return R},gT:function(){return re},iY:function(){return V},iu:function(){return Z},j3:function(){return X},lr:function(){return L},nr:function(){return p},uZ:function(){return oe}});var S=z(67217),N=z(49343);function V(O,A,W){function K(se,we){return(0,S.yW)(we,function(Ge,ft){return se[ft]==Ge})}return(0,S.G)(O.eventDefinitions,function(se){return se.$type===A&&K(O,W)})}function re(O){return O.$type==="bpmn:IntermediateThrowEvent"||O.$type==="bpmn:EndEvent"}function oe(O){var A=O.dataObjectRef;return O.isCollection||A&&A.isCollection}function F(O){return O.businessObject.di}function p(O){return O.businessObject}function R(O,A){var W=F(O);return W.get("color:background-color")||W.get("bioc:fill")||A||"white"}function P(O,A){var W=F(O);return W.get("color:border-color")||W.get("bioc:stroke")||A||"black"}function fe(O,A,W){var K=F(O),se=K.get("label");return se&&se.get("color:color")||A||P(O,W)}function Z(O){var A=O.x+O.width/2,W=O.y+O.height/2,K=O.width/2,se=[["M",A,W],["m",0,-K],["a",K,K,0,1,1,0,2*K],["a",K,K,0,1,1,0,-2*K],["z"]];return(0,N.KO)(se)}function ee(O,A){var W=O.x,K=O.y,se=O.width,we=O.height,Ge=[["M",W+A,K],["l",se-A*2,0],["a",A,A,0,0,1,A,A],["l",0,we-A*2],["a",A,A,0,0,1,-A,A],["l",A*2-se,0],["a",A,A,0,0,1,-A,-A],["l",0,A*2-we],["a",A,A,0,0,1,A,-A],["z"]];return(0,N.KO)(Ge)}function X(O){var A=O.width,W=O.height,K=O.x,se=O.y,we=A/2,Ge=W/2,ft=[["M",K+we,se],["l",we,Ge],["l",-we,Ge],["l",-we,-Ge],["z"]];return(0,N.KO)(ft)}function L(O){var A=O.x,W=O.y,K=O.width,se=O.height,we=[["M",A,W],["l",K,0],["l",0,se],["l",-K,0],["z"]];return(0,N.KO)(we)}},77872:function(ot,Be,z){"use strict";z.d(Be,{i:function(){return re},l:function(){return oe}});var S=z(27367);function N(F){if((0,S.is)(F,"bpmn:FlowElement")||(0,S.is)(F,"bpmn:Participant")||(0,S.is)(F,"bpmn:Lane")||(0,S.is)(F,"bpmn:SequenceFlow")||(0,S.is)(F,"bpmn:MessageFlow")||(0,S.is)(F,"bpmn:DataInput")||(0,S.is)(F,"bpmn:DataOutput"))return"name";if((0,S.is)(F,"bpmn:TextAnnotation"))return"text";if((0,S.is)(F,"bpmn:Group"))return"categoryValueRef"}function V(F){var p=F.categoryValueRef;return p&&p.value||""}function re(F){var p=F.businessObject,R=N(p);if(R)return R==="categoryValueRef"?V(p):p[R]||""}function oe(F,p,R){var P=F.businessObject,fe=N(P);return fe&&(fe==="categoryValueRef"?P.categoryValueRef.value=p:P[fe]=p),F}},61955:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return R}});var S=z(67217),N=z(2937),V=z.n(N),re=z(27367),oe=z(92131),F=z(48403),p=z(96817);function R(Z,ee,X){F.Z.call(this),this._bpmnFactory=Z,this._moddle=ee,this._translate=X}V()(R,F.Z),R.$inject=["bpmnFactory","moddle","translate"],R.prototype.baseCreate=F.Z.prototype.create,R.prototype.create=function(Z,ee){return Z==="label"?this.baseCreate(Z,(0,S.f0)({type:"label"},p.DN,ee)):this.createBpmnElement(Z,ee)},R.prototype.createBpmnElement=function(Z,ee){var X,L=this._translate;ee=ee||{};var O=ee.businessObject;if(!O){if(!ee.type)throw new Error(L("no shape type specified"));O=this._bpmnFactory.create(ee.type)}O.di||(Z==="root"?O.di=this._bpmnFactory.createDiPlane(O,[],{id:O.id+"_di"}):Z==="connection"?O.di=this._bpmnFactory.createDiEdge(O,[],{id:O.id+"_di"}):O.di=this._bpmnFactory.createDiShape(O,{},{id:O.id+"_di"})),(0,re.is)(O,"bpmn:Group")&&(ee=(0,S.f0)({isFrame:!0},ee)),ee.di&&((0,S.f0)(O.di,ee.di),delete ee.di),P(O,ee,["processRef","isInterrupting","associationDirection","isForCompensation"]),ee.isExpanded&&fe(O.di,ee,"isExpanded"),(0,re.is)(O,"bpmn:ExclusiveGateway")&&(O.di.isMarkerVisible=!0);var A,W;return ee.eventDefinitionType&&(A=O.get("eventDefinitions")||[],W=this._bpmnFactory.create(ee.eventDefinitionType,ee.eventDefinitionAttrs),ee.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(W.condition=this._bpmnFactory.create("bpmn:FormalExpression")),A.push(W),W.$parent=O,O.eventDefinitions=A,delete ee.eventDefinitionType),X=this._getDefaultSize(O),ee=(0,S.f0)({businessObject:O,id:O.id},X,ee),this.baseCreate(Z,ee)},R.prototype._getDefaultSize=function(Z){return(0,re.is)(Z,"bpmn:SubProcess")?(0,oe.ul)(Z)?{width:350,height:200}:{width:100,height:80}:(0,re.is)(Z,"bpmn:Task")?{width:100,height:80}:(0,re.is)(Z,"bpmn:Gateway")?{width:50,height:50}:(0,re.is)(Z,"bpmn:Event")?{width:36,height:36}:(0,re.is)(Z,"bpmn:Participant")?(0,oe.ul)(Z)?{width:600,height:250}:{width:400,height:60}:(0,re.is)(Z,"bpmn:Lane")?{width:400,height:100}:(0,re.is)(Z,"bpmn:DataObjectReference")?{width:36,height:50}:(0,re.is)(Z,"bpmn:DataStoreReference")?{width:50,height:50}:(0,re.is)(Z,"bpmn:TextAnnotation")?{width:100,height:30}:(0,re.is)(Z,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},R.prototype.createParticipantShape=function(Z){return(0,S.Kn)(Z)||(Z={isExpanded:Z}),Z=(0,S.f0)({type:"bpmn:Participant"},Z||{}),Z.isExpanded!==!1&&(Z.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(Z)};function P(Z,ee,X){(0,S.Ed)(X,function(L){ee[L]!==void 0&&fe(Z,ee,L)})}function fe(Z,ee,X){Z[X]=ee[X],delete ee[X]}},8527:function(ot,Be,z){"use strict";z.d(Be,{x:function(){return S}});function S(N){return N?"<"+N.$type+(N.id?' id="'+N.id:"")+'" />':"<null>"}},86622:function(ot,Be,z){"use strict";z.d(Be,{$:function(){return N}});var S=z(67217);function N(V){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var re=arguments.length;if(re>=1&&(0,S.mf)(arguments[re-1])){var oe=arguments[re-1];console.warn(new Error("Passing callbacks to "+V.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var F=Array.prototype.slice.call(arguments,0,-1);V.apply(this,F).then(function(p){var R=Object.keys(p)[0];return oe(null,p[R])},function(p){return oe(p,p.warnings)})}else return V.apply(this,arguments)}}},92131:function(ot,Be,z){"use strict";z.d(Be,{J5:function(){return oe},JG:function(){return F},_Z:function(){return P},sm:function(){return p},ul:function(){return V},wQ:function(){return R},yU:function(){return re}});var S=z(27367),N=z(67217);function V(fe){return(0,S.is)(fe,"bpmn:CallActivity")?!1:(0,S.is)(fe,"bpmn:SubProcess")?(0,S.SS)(fe).di&&!!(0,S.SS)(fe).di.isExpanded:(0,S.is)(fe,"bpmn:Participant")?!!(0,S.SS)(fe).processRef:!0}function re(fe){return fe&&(0,S.SS)(fe).isInterrupting!==!1}function oe(fe){return fe&&!!(0,S.SS)(fe).triggeredByEvent}function F(fe,Z){var ee=(0,S.SS)(fe),X=!1;return ee.eventDefinitions&&(0,N.Ed)(ee.eventDefinitions,function(L){(0,S.is)(L,Z)&&(X=!0)}),X}function p(fe){return F(fe,"bpmn:ErrorEventDefinition")}function R(fe){return F(fe,"bpmn:EscalationEventDefinition")}function P(fe){return F(fe,"bpmn:CompensateEventDefinition")}},96817:function(ot,Be,z){"use strict";z.d(Be,{DN:function(){return V},fF:function(){return F},j_:function(){return Z},lq:function(){return fe},ly:function(){return oe},qe:function(){return P}});var S=z(67217),N=z(27367),V={width:90,height:20},re=15;function oe(ee){return(0,N.is)(ee,"bpmn:Event")||(0,N.is)(ee,"bpmn:Gateway")||(0,N.is)(ee,"bpmn:DataStoreReference")||(0,N.is)(ee,"bpmn:DataObjectReference")||(0,N.is)(ee,"bpmn:DataInput")||(0,N.is)(ee,"bpmn:DataOutput")||(0,N.is)(ee,"bpmn:SequenceFlow")||(0,N.is)(ee,"bpmn:MessageFlow")||(0,N.is)(ee,"bpmn:Group")}function F(ee){return Z(ee.label)}function p(ee){var X=ee.length/2-1,L=ee[Math.floor(X)],O=ee[Math.ceil(X+.01)],A=R(ee),W=Math.atan((O.y-L.y)/(O.x-L.x)),K=A.x,se=A.y;return Math.abs(W)<Math.PI/2?se-=re:K+=re,{x:K,y:se}}function R(ee){var X=ee.length/2-1,L=ee[Math.floor(X)],O=ee[Math.ceil(X+.01)];return{x:L.x+(O.x-L.x)/2,y:L.y+(O.y-L.y)/2}}function P(ee){return ee.waypoints?p(ee.waypoints):(0,N.is)(ee,"bpmn:Group")?{x:ee.x+ee.width/2,y:ee.y+V.height/2}:{x:ee.x+ee.width/2,y:ee.y+ee.height+V.height/2}}function fe(ee,X){var L,O,A,W=ee.di,K=W.label;return K&&K.bounds?(A=K.bounds,O={width:Math.max(V.width,A.width),height:A.height},L={x:A.x+A.width/2,y:A.y+A.height/2}):(L=P(X),O=V),(0,S.f0)({x:L.x-O.width/2,y:L.y-O.height/2},O)}function Z(ee){return ee&&!!ee.labelTarget}},27367:function(ot,Be,z){"use strict";z.d(Be,{JZ:function(){return V},SS:function(){return re},is:function(){return N}});var S=z(67217);function N(F,p){var R=re(F);return R&&typeof R.$instanceOf=="function"&&R.$instanceOf(p)}function V(F,p){return(0,S.G)(p,function(R){return N(F,R)})}function re(F){return F&&F.businessObject||F}function oe(F){var p=re(F);return p&&p.di}},64592:function(ot,Be,z){(function(S,N){ot.exports=N(S)})(typeof z.g!="undefined"?z.g:this,function(S){if(S.CSS&&S.CSS.escape)return S.CSS.escape;var N=function(V){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var re=String(V),oe=re.length,F=-1,p,R="",P=re.charCodeAt(0);++F<oe;){if(p=re.charCodeAt(F),p==0){R+="\uFFFD";continue}if(p>=1&&p<=31||p==127||F==0&&p>=48&&p<=57||F==1&&p>=48&&p<=57&&P==45){R+="\\"+p.toString(16)+" ";continue}if(F==0&&oe==1&&p==45){R+="\\"+re.charAt(F);continue}if(p>=128||p==45||p==95||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122){R+=re.charAt(F);continue}R+="\\"+re.charAt(F)}return R};return S.CSS||(S.CSS={}),S.CSS.escape=N,N})},26131:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return N}});var S=1e3;function N(V,re){var oe=this;re=re||S,V.on(["render.shape","render.connection"],re,function(F,p){var R=F.type,P=p.element,fe=p.gfx;if(oe.canRender(P))return R==="render.shape"?oe.drawShape(fe,P):oe.drawConnection(fe,P)}),V.on(["render.getShapePath","render.getConnectionPath"],re,function(F,p){if(oe.canRender(p))return F.type==="render.getShapePath"?oe.getShapePath(p):oe.getConnectionPath(p)})}N.prototype.canRender=function(){},N.prototype.drawShape=function(){},N.prototype.drawConnection=function(){},N.prototype.getShapePath=function(){},N.prototype.getConnectionPath=function(){}},96123:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return W}});var S=z(24220),N=/^djs-cursor-.*$/;function V(K){var se=(0,S.Sh)(document.body);se.removeMatching(N),K&&se.add("djs-cursor-"+K)}function re(){V(null)}function oe(K){var se=domClasses(document.body);return se.has("djs-cursor-"+K)}var F=5e3;function p(K,se){se=se||"element.click";function we(){return!1}return K.once(se,F,we),function(){K.off(se,we)}}function R(K){return{x:K.x+K.width/2,y:K.y+K.height/2}}function P(K,se){return{x:K.x-se.x,y:K.y-se.y}}function fe(K){!K||typeof K.stopPropagation!="function"||K.stopPropagation()}function Z(K){return K.originalEvent||K.srcEvent}function ee(K,se){fe(K,se),fe(Z(K),se)}function X(K){return K.pointers&&K.pointers.length&&(K=K.pointers[0]),K.touches&&K.touches.length&&(K=K.touches[0]),K?{x:K.clientX,y:K.clientY}:null}var L=15;function O(K,se){var we;K.on("element.mousedown",500,function(yt){return rt(yt.originalEvent)});function Ge(yt){var st=we.start,Dt=X(yt),Wt=P(Dt,st);if(!we.dragging&&A(Wt)>L&&(we.dragging=!0,p(K),V("grab")),we.dragging){var Xt=we.last||we.start;Wt=P(Dt,Xt),se.scroll({dx:Wt.x,dy:Wt.y}),we.last=Dt}yt.preventDefault()}function ft(yt){S.B.unbind(document,"mousemove",Ge),S.B.unbind(document,"mouseup",ft),we=null,re()}function rt(yt){if(!(0,S.oq)(yt.target,".djs-draggable")&&!(yt.button||yt.ctrlKey||yt.shiftKey||yt.altKey))return we={start:X(yt)},S.B.bind(document,"mousemove",Ge),S.B.bind(document,"mouseup",ft),!0}}O.$inject=["eventBus","canvas"];function A(K){return Math.sqrt(Math.pow(K.x,2)+Math.pow(K.y,2))}var W={__init__:["moveCanvas"],moveCanvas:["type",O]}},5406:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return ee}});var S=z(24220);function N(X){return Math.log(X)/Math.log(10)}function V(X,L){var O=N(X.min),A=N(X.max),W=Math.abs(O)+Math.abs(A);return W/L}function re(X,L){return Math.max(X.min,Math.min(X.max,L))}var oe=z(67217),F=Math.sign||function(X){return X>=0?1:-1},p={min:.2,max:4},R=10,P=.1,fe=.75;function Z(X,L,O){X=X||{},this._enabled=!1,this._canvas=O,this._container=O._container,this._handleWheel=(0,oe.ak)(this._handleWheel,this),this._totalDelta=0,this._scale=X.scale||fe;var A=this;L.on("canvas.init",function(W){A._init(X.enabled!==!1)})}Z.$inject=["config.zoomScroll","eventBus","canvas"],Z.prototype.scroll=function(L){this._canvas.scroll(L)},Z.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Z.prototype.zoom=function(L,O){var A=V(p,R*2);this._totalDelta+=L,Math.abs(this._totalDelta)>P&&(this._zoom(L,O,A),this._totalDelta=0)},Z.prototype._handleWheel=function(L){if(!(0,S.oq)(L.target,".djs-scrollable",!0)){var O=this._container;L.preventDefault();var A=L.ctrlKey,W=L.shiftKey,K=-1*this._scale,se;if(A?K*=L.deltaMode===0?.02:.32:K*=L.deltaMode===0?1:16,A){var we=O.getBoundingClientRect(),Ge={x:L.clientX-we.left,y:L.clientY-we.top};se=Math.sqrt(Math.pow(L.deltaY,2)+Math.pow(L.deltaX,2))*F(L.deltaY)*K,this.zoom(se,Ge)}else W?se={dx:K*L.deltaY,dy:0}:se={dx:K*L.deltaX,dy:K*L.deltaY},this.scroll(se)}},Z.prototype.stepZoom=function(L,O){var A=V(p,R);this._zoom(L,O,A)},Z.prototype._zoom=function(X,L,O){var A=this._canvas,W=X>0?1:-1,K=N(A.zoom()),se=Math.round(K/O)*O;se+=O*W;var we=Math.pow(10,se);A.zoom(re(p,we),L)},Z.prototype.toggle=function(L){var O=this._container,A=this._handleWheel,W=this._enabled;return typeof L=="undefined"&&(L=!W),W!==L&&S.B[L?"bind":"unbind"](O,"wheel",A,!1),this._enabled=L,L},Z.prototype._init=function(X){this.toggle(X)};var ee={__init__:["zoomScroll"],zoomScroll:["type",Z]}},48403:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return V}});var S=z(48344),N=z(67217);function V(){this._uid=12}V.prototype.createRoot=function(re){return this.create("root",re)},V.prototype.createLabel=function(re){return this.create("label",re)},V.prototype.createShape=function(re){return this.create("shape",re)},V.prototype.createConnection=function(re){return this.create("connection",re)},V.prototype.create=function(re,oe){return oe=(0,N.f0)({},oe||{}),oe.id||(oe.id=re+"_"+this._uid++),(0,S.Ue)(re,oe)}},84822:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return N}});var S=1e3;function N(V,re){var oe=this;re=re||S,V.on(["render.shape","render.connection"],re,function(F,p){var R=F.type,P=p.element,fe=p.gfx,Z=p.attrs;if(oe.canRender(P))return R==="render.shape"?oe.drawShape(fe,P,Z):oe.drawConnection(fe,P,Z)}),V.on(["render.getShapePath","render.getConnectionPath"],re,function(F,p){if(oe.canRender(p))return F.type==="render.getShapePath"?oe.getShapePath(p):oe.getConnectionPath(p)})}N.prototype.canRender=function(){},N.prototype.drawShape=function(){},N.prototype.drawConnection=function(){},N.prototype.getShapePath=function(){},N.prototype.getConnectionPath=function(){}},44275:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return fe}});var S=z(67217),N=z(24220),V=z(18437),re=z(80836),oe=z(49343);function F(Z){return!0}function p(Z){return(0,V.Id)(Z)||(0,V.L7)(Z)}var R=500;function P(Z,ee,X){var L=this;function O(Fe,Je,D){if(!K(Fe,Je)){var ve,Ee,_e;D?Ee=ee.getGraphics(D):(ve=Je.delegateTarget||Je.target,ve&&(Ee=ve,D=ee.get(Ee))),!(!Ee||!D)&&(_e=Z.fire(Fe,{element:D,gfx:Ee,originalEvent:Je}),_e===!1&&(Je.stopPropagation(),Je.preventDefault()))}}var A={};function W(Fe){return A[Fe]}function K(Fe,Je){var D=we[Fe]||V.Id;return!D(Je)}var se={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},we={"element.contextmenu":F,"element.mousedown":p,"element.mouseup":p,"element.click":p,"element.dblclick":p};function Ge(Fe,Je,D){var ve=se[Fe];if(!ve)throw new Error("unmapped DOM event name <"+Fe+">");return O(ve,Je,D)}var ft="svg, .djs-element";function rt(Fe,Je,D,ve){var Ee=A[D]=function(_e){O(D,_e)};ve&&(we[D]=ve),Ee.$delegate=N.cl.bind(Fe,ft,Je,Ee)}function yt(Fe,Je,D){var ve=W(D);ve&&N.cl.unbind(Fe,Je,ve.$delegate)}function st(Fe){(0,S.Ed)(se,function(Je,D){rt(Fe,D,Je)})}function Dt(Fe){(0,S.Ed)(se,function(Je,D){yt(Fe,D,Je)})}Z.on("canvas.destroy",function(Fe){Dt(Fe.svg)}),Z.on("canvas.init",function(Fe){st(Fe.svg)}),Z.on(["shape.added","connection.added"],function(Fe){var Je=Fe.element,D=Fe.gfx;Z.fire("interactionEvents.createHit",{element:Je,gfx:D})}),Z.on(["shape.changed","connection.changed"],R,function(Fe){var Je=Fe.element,D=Fe.gfx;Z.fire("interactionEvents.updateHit",{element:Je,gfx:D})}),Z.on("interactionEvents.createHit",R,function(Fe){var Je=Fe.element,D=Fe.gfx;L.createDefaultHit(Je,D)}),Z.on("interactionEvents.updateHit",function(Fe){var Je=Fe.element,D=Fe.gfx;L.updateDefaultHit(Je,D)});var Wt=Ht("djs-hit djs-hit-stroke"),Xt=Ht("djs-hit djs-hit-click-stroke"),Lt=Ht("djs-hit djs-hit-all"),bn={all:Lt,"click-stroke":Xt,stroke:Wt};function Ht(Fe,Je){return Je=(0,S.f0)({stroke:"white",strokeWidth:15},Je||{}),X.cls(Fe,["no-fill","no-border"],Je)}function Gt(Fe,Je){var D=bn[Je];if(!D)throw new Error("invalid hit type <"+Je+">");return(0,re.Lj)(Fe,D),Fe}function _n(Fe,Je){(0,re.R3)(Fe,Je)}this.removeHits=function(Fe){var Je=(0,N.Kt)(".djs-hit",Fe);(0,S.Ed)(Je,re.Od)},this.createDefaultHit=function(Fe,Je){var D=Fe.waypoints,ve=Fe.isFrame,Ee;return D?this.createWaypointsHit(Je,D):(Ee=ve?"stroke":"all",this.createBoxHit(Je,Ee,{width:Fe.width,height:Fe.height}))},this.createWaypointsHit=function(Fe,Je){var D=(0,oe.W5)(Je);return Gt(D,"stroke"),_n(Fe,D),D},this.createBoxHit=function(Fe,Je,D){D=(0,S.f0)({x:0,y:0},D);var ve=(0,re.Ue)("rect");return Gt(ve,Je),(0,re.Lj)(ve,D),_n(Fe,ve),ve},this.updateDefaultHit=function(Fe,Je){var D=(0,N.IO)(".djs-hit",Je);if(D)return Fe.waypoints?(0,oe.cq)(D,Fe.waypoints):(0,re.Lj)(D,{width:Fe.width,height:Fe.height}),D},this.fire=O,this.triggerMouseEvent=Ge,this.mouseHandler=W,this.registerEvent=rt,this.unregisterEvent=yt}P.$inject=["eventBus","elementRegistry","styles"];var fe={__init__:["interactionEvents"],interactionEvents:["type",P]}},73280:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return p}});var S=z(76971),N=z(80836),V=z(24220),re=z(67217),oe=500;function F(R,P,fe){this.offset=6;var Z=P.cls("djs-outline",["no-fill"]),ee=this;function X(L,O){var A=(0,N.Ue)("rect");return(0,N.Lj)(A,(0,re.f0)({x:10,y:10,width:100,height:100},Z)),(0,N.R3)(L,A),A}R.on(["shape.added","shape.changed"],oe,function(L){var O=L.element,A=L.gfx,W=(0,V.IO)(".djs-outline",A);W||(W=X(A,O)),ee.updateShapeOutline(W,O)}),R.on(["connection.added","connection.changed"],function(L){var O=L.element,A=L.gfx,W=(0,V.IO)(".djs-outline",A);W||(W=X(A,O)),ee.updateConnectionOutline(W,O)})}F.prototype.updateShapeOutline=function(R,P){(0,N.Lj)(R,{x:-this.offset,y:-this.offset,width:P.width+this.offset*2,height:P.height+this.offset*2})},F.prototype.updateConnectionOutline=function(R,P){var fe=(0,S.jY)(P);(0,N.Lj)(R,{x:fe.x-this.offset,y:fe.y-this.offset,width:fe.width+this.offset*2,height:fe.height+this.offset*2})},F.$inject=["eventBus","styles","elementRegistry"];var p={__init__:["outline"],outline:["type",F]}},22494:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return ee}});var S=z(67217),N=z(24220),V=z(76971),re=z(42646),oe=new re.Z("ov"),F=500;function p(X,L,O,A){this._eventBus=L,this._canvas=O,this._elementRegistry=A,this._ids=oe,this._overlayDefaults=(0,S.f0)({show:null,scale:!0},X&&X.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=R(O.getContainer()),this._init()}p.$inject=["config.overlays","eventBus","canvas","elementRegistry"],p.prototype.get=function(X){if((0,S.HD)(X)&&(X={id:X}),(0,S.HD)(X.element)&&(X.element=this._elementRegistry.get(X.element)),X.element){var L=this._getOverlayContainer(X.element,!0);return L?X.type?(0,S.hX)(L.overlays,(0,S.KQ)({type:X.type})):L.overlays.slice():[]}else return X.type?(0,S.hX)(this._overlays,(0,S.KQ)({type:X.type})):X.id?this._overlays[X.id]:null},p.prototype.add=function(X,L,O){if((0,S.Kn)(L)&&(O=L,L=null),X.id||(X=this._elementRegistry.get(X)),!O.position)throw new Error("must specifiy overlay position");if(!O.html)throw new Error("must specifiy overlay html");if(!X)throw new Error("invalid element specified");var A=this._ids.next();return O=(0,S.f0)({},this._overlayDefaults,O,{id:A,type:L,element:X,html:O.html}),this._addOverlay(O),A},p.prototype.remove=function(X){var L=this.get(X)||[];(0,S.kJ)(L)||(L=[L]);var O=this;(0,S.Ed)(L,function(A){var W=O._getOverlayContainer(A.element,!0);if(A&&((0,N.Od)(A.html),(0,N.Od)(A.htmlContainer),delete A.htmlContainer,delete A.element,delete O._overlays[A.id]),W){var K=W.overlays.indexOf(A);K!==-1&&W.overlays.splice(K,1)}})},p.prototype.show=function(){fe(this._overlayRoot)},p.prototype.hide=function(){fe(this._overlayRoot,!1)},p.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,N.ZH)(this._overlayRoot)},p.prototype._updateOverlayContainer=function(X){var L=X.element,O=X.html,A=L.x,W=L.y;if(L.waypoints){var K=(0,V.jY)(L);A=K.x,W=K.y}P(O,A,W),(0,N.Lj)(X.html,"data-container-id",L.id)},p.prototype._updateOverlay=function(X){var L=X.position,O=X.htmlContainer,A=X.element,W=L.left,K=L.top;if(L.right!==void 0){var se;A.waypoints?se=(0,V.jY)(A).width:se=A.width,W=L.right*-1+se}if(L.bottom!==void 0){var we;A.waypoints?we=(0,V.jY)(A).height:we=A.height,K=L.bottom*-1+we}P(O,W||0,K||0)},p.prototype._createOverlayContainer=function(X){var L=(0,N.H6)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(L);var O={html:L,element:X,overlays:[]};return this._updateOverlayContainer(O),this._overlayContainers.push(O),O},p.prototype._updateRoot=function(X){var L=X.scale||1,O="matrix("+[L,0,0,L,-1*X.x*L,-1*X.y*L].join(",")+")";Z(this._overlayRoot,O)},p.prototype._getOverlayContainer=function(X,L){var O=(0,S.sE)(this._overlayContainers,function(A){return A.element===X});return!O&&!L?this._createOverlayContainer(X):O},p.prototype._addOverlay=function(X){var L=X.id,O=X.element,A=X.html,W,K;A.get&&A.constructor.prototype.jquery&&(A=A.get(0)),(0,S.HD)(A)&&(A=(0,N.H6)(A)),K=this._getOverlayContainer(O),W=(0,N.H6)('<div class="djs-overlay" data-overlay-id="'+L+'" style="position: absolute">'),W.appendChild(A),X.type&&(0,N.Sh)(W).add("djs-overlay-"+X.type);var se=this._canvas.findPlane(O),we=this._canvas.getActivePlane();X.plane=se,se!==we&&fe(W,!1),X.htmlContainer=W,K.overlays.push(X),K.html.appendChild(W),this._overlays[L]=X,this._updateOverlay(X),this._updateOverlayVisibilty(X,this._canvas.viewbox())},p.prototype._updateOverlayVisibilty=function(X,L){var O=X.show,A=X.plane,W=O&&O.minZoom,K=O&&O.maxZoom,se=X.htmlContainer,we=this._canvas.getActivePlane(),Ge=!0;(A!==we||O&&((0,S.$K)(W)&&W>L.scale||(0,S.$K)(K)&&K<L.scale))&&(Ge=!1),fe(se,Ge),this._updateOverlayScale(X,L)},p.prototype._updateOverlayScale=function(X,L){var O=X.scale,A,W,K=X.htmlContainer,se,we="";O!==!0&&(O===!1?(A=1,W=1):(A=O.min,W=O.max),(0,S.$K)(A)&&L.scale<A&&(se=(1/L.scale||1)*A),(0,S.$K)(W)&&L.scale>W&&(se=(1/L.scale||1)*W)),(0,S.$K)(se)&&(we="scale("+se+","+se+")"),Z(K,we)},p.prototype._updateOverlaysVisibilty=function(X){var L=this;(0,S.Ed)(this._overlays,function(O){L._updateOverlayVisibilty(O,X)})},p.prototype._init=function(){var X=this._eventBus,L=this;function O(A){L._updateRoot(A),L._updateOverlaysVisibilty(A),L.show()}X.on("canvas.viewbox.changing",function(A){L.hide()}),X.on("canvas.viewbox.changed",function(A){O(A.viewbox)}),X.on(["shape.remove","connection.remove"],function(A){var W=A.element,K=L.get({element:W});(0,S.Ed)(K,function(Ge){L.remove(Ge.id)});var se=L._getOverlayContainer(W);if(se){(0,N.Od)(se.html);var we=L._overlayContainers.indexOf(se);we!==-1&&L._overlayContainers.splice(we,1)}}),X.on("element.changed",F,function(A){var W=A.element,K=L._getOverlayContainer(W,!0);K&&((0,S.Ed)(K.overlays,function(se){L._updateOverlay(se)}),L._updateOverlayContainer(K))}),X.on("element.marker.update",function(A){var W=L._getOverlayContainer(A.element,!0);W&&(0,N.Sh)(W.html)[A.add?"add":"remove"](A.marker)}),X.on("plane.set",function(A){(0,S.Ed)(L._overlays,function(W){fe(W.htmlContainer,W.plane===A.plane)})}),X.on("diagram.clear",this.clear,this)};function R(X){var L=(0,N.H6)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return X.insertBefore(L,X.firstChild),L}function P(X,L,O){(0,S.f0)(X.style,{left:L+"px",top:O+"px"})}function fe(X,L){X.style.display=L===!1?"none":""}function Z(X,L){X.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(O){X.style[O+"transform"]=L})}var ee={__init__:["overlays"],overlays:["type",p]}},96408:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return Z}});var S=z(44275),N=z(73280),V=z(67217);function re(ee,X){this._eventBus=ee,this._canvas=X,this._selectedElements=[];var L=this;ee.on(["shape.remove","connection.remove"],function(O){var A=O.element;L.deselect(A)}),ee.on(["diagram.clear","plane.set"],function(O){L.select(null)})}re.$inject=["eventBus","canvas"],re.prototype.deselect=function(ee){var X=this._selectedElements,L=X.indexOf(ee);if(L!==-1){var O=X.slice();X.splice(L,1),this._eventBus.fire("selection.changed",{oldSelection:O,newSelection:X})}},re.prototype.get=function(){return this._selectedElements},re.prototype.isSelected=function(ee){return this._selectedElements.indexOf(ee)!==-1},re.prototype.select=function(ee,X){var L=this._selectedElements,O=L.slice();(0,V.kJ)(ee)||(ee=ee?[ee]:[]);var A=this._canvas;ee=ee.filter(function(W){var K=A.findPlane(W);return K===A.getActivePlane()}),X?(0,V.Ed)(ee,function(W){L.indexOf(W)===-1&&L.push(W)}):this._selectedElements=L=ee.slice(),this._eventBus.fire("selection.changed",{oldSelection:O,newSelection:L})};var oe="hover",F="selected";function p(ee,X,L,O){this._multiSelectionBox=null;function A(K,se){X.addMarker(K,se)}function W(K,se){X.removeMarker(K,se)}ee.on("element.hover",function(K){A(K.element,oe)}),ee.on("element.out",function(K){W(K.element,oe)}),ee.on("selection.changed",function(K){function se(rt){W(rt,F)}function we(rt){A(rt,F)}var Ge=K.oldSelection,ft=K.newSelection;(0,V.Ed)(Ge,function(rt){ft.indexOf(rt)===-1&&se(rt)}),(0,V.Ed)(ft,function(rt){Ge.indexOf(rt)===-1&&we(rt)})})}p.$inject=["eventBus","canvas","selection","styles"];var R=z(18437);function P(ee,X,L,O){ee.on("create.end",500,function(A){var W=A.context,K=W.canExecute,se=W.elements,we=W.hints||{},Ge=we.autoSelect;if(K){if(Ge===!1)return;(0,V.kJ)(Ge)?X.select(Ge):X.select(se.filter(fe))}}),ee.on("connect.end",500,function(A){var W=A.context,K=W.canExecute,se=W.hover;K&&se&&X.select(se)}),ee.on("shape.move.end",500,function(A){var W=A.previousSelection||[],K=O.get(A.context.shape.id),se=(0,V.sE)(W,function(we){return K.id===we.id});se||X.select(K)}),ee.on("element.click",function(A){if((0,R.Id)(A)){var W=A.element;W===L.getRootElement()&&(W=null);var K=X.isSelected(W),se=X.get().length>1,we=(0,R.RJ)(A)||(0,R.Dw)(A);if(K&&se)return we?X.deselect(W):X.select(W);K?X.deselect(W):X.select(W,we)}})}P.$inject=["eventBus","selection","canvas","elementRegistry"];function fe(ee){return!ee.hidden}var Z={__init__:["selectionVisuals","selectionBehavior"],__depends__:[S.Z,N.Z],selection:["type",re],selectionVisuals:["type",p],selectionBehavior:["type",P]}},90936:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return N}});function S(V,re){return re=re||{},V.replace(/{([^}]+)}/g,function(oe,F){return re[F]||"{"+F+"}"})}var N={translate:["value",S]}},88237:function(ot,Be,z){"use strict";z.d(Be,{Hz:function(){return Z},JA:function(){return p},Re:function(){return X},T8:function(){return fe},aR:function(){return oe},ex:function(){return F},wS:function(){return P},z_:function(){return R}});var S=z(67217),N=z(64129),V=z(76757),re=z.n(V);function oe(L){return{x:Math.round(L.x),y:Math.round(L.y),width:Math.round(L.width),height:Math.round(L.height)}}function F(L){return{x:Math.round(L.x),y:Math.round(L.y)}}function p(L){return{top:L.y,right:L.x+(L.width||0),bottom:L.y+(L.height||0),left:L.x}}function R(L){return{x:L.left,y:L.top,width:L.right-L.left,height:L.bottom-L.top}}function P(L){return F({x:L.x+(L.width||0)/2,y:L.y+(L.height||0)/2})}function fe(L,O,A){A=A||0,(0,S.Kn)(A)||(A={x:A,y:A});var W=p(L),K=p(O),se=W.bottom+A.y<=K.top,we=W.left-A.x>=K.right,Ge=W.top-A.y>=K.bottom,ft=W.right+A.x<=K.left,rt=se?"top":Ge?"bottom":null,yt=ft?"left":we?"right":null;return yt&&rt?rt+"-"+yt:yt||rt||"intersect"}function Z(L,O,A){var W=ee(L,O);return W.length===1||W.length===2&&(0,N.tW)(W[0],W[1])<1?F(W[0]):W.length>1?(W=(0,S.MR)(W,function(K){var se=Math.floor(K.t2*100)||1;return se=100-se,se=(se<10?"0":"")+se,K.segment2+"#"+se}),F(W[A?0:W.length-1])):null}function ee(L,O){return re()(L,O)}function X(L){L=L.slice();for(var O=0,A,W,K;L[O];)A=L[O],W=L[O-1],K=L[O+1],(0,N.tW)(A,K)===0||(0,N.ZS)(W,K,A)?L.splice(O,1):O++;return L}},48344:function(ot,Be,z){"use strict";z.d(Be,{Ue:function(){return W},XY:function(){return Z},__:function(){return L}});var S=z(67217),N=z(2937),V=z.n(N),re=z(44657),oe=z.n(re),F=new(oe())({name:"children",enumerable:!0,collection:!0},{name:"parent"}),p=new(oe())({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),R=new(oe())({name:"attachers",collection:!0},{name:"host"}),P=new(oe())({name:"outgoing",collection:!0},{name:"source"}),fe=new(oe())({name:"incoming",collection:!0},{name:"target"});function Z(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(K){var se=this.label,we=this.labels;!K&&se?we.remove(se):we.add(K,0)}}),F.bind(this,"parent"),p.bind(this,"labels"),P.bind(this,"outgoing"),fe.bind(this,"incoming")}function ee(){Z.call(this),F.bind(this,"children"),R.bind(this,"host"),R.bind(this,"attachers")}V()(ee,Z);function X(){ee.call(this)}V()(X,ee);function L(){ee.call(this),p.bind(this,"labelTarget")}V()(L,ee);function O(){Z.call(this),P.bind(this,"source"),fe.bind(this,"target")}V()(O,Z);var A={connection:O,shape:ee,label:L,root:X};function W(K,se){var we=A[K];if(!we)throw new Error("unknown type: <"+K+">");return(0,S.f0)(new we,se)}},52837:function(ot,Be,z){"use strict";z.d(Be,{IH:function(){return N},Od:function(){return S},cq:function(){return V}});function S(re,oe){if(!re||!oe)return-1;var F=re.indexOf(oe);return F!==-1&&re.splice(F,1),F}function N(re,oe,F){if(!(!re||!oe)){typeof F!="number"&&(F=-1);var p=re.indexOf(oe);if(p!==-1){if(p===F)return;if(F!==-1)re.splice(p,1);else return}F!==-1?re.splice(F,0,oe):re.push(oe)}}function V(re,oe){return!re||!oe?-1:re.indexOf(oe)}},76971:function(ot,Be,z){"use strict";z.d(Be,{He:function(){return X},PB:function(){return R},RH:function(){return Z},cd:function(){return N},jY:function(){return fe},oL:function(){return ee},om:function(){return oe},vA:function(){return P}});var S=z(67217);function N(O){return(0,S.hX)(O,function(A){return!(0,S.sE)(O,function(W){return W!==A&&V(A,W)})})}function V(O,A){if(A){if(O===A)return A;if(O.parent)return V(O.parent,A)}}function re(O,A,W){var K=!W||O.indexOf(A)===-1;return K&&O.push(A),K}function oe(O,A,W){W=W||0,(0,S.kJ)(O)||(O=[O]),(0,S.Ed)(O,function(K,se){var we=A(K,se,W);(0,S.kJ)(we)&&we.length&&oe(we,A,W+1)})}function F(O,A,W){var K=[],se=[];return oe(O,function(we,Ge,ft){re(K,we,A);var rt=we.children;if((W===-1||ft<W)&&rt&&re(se,rt,A))return rt}),K}function p(O,A){return F(O,!A,1)}function R(O,A){return F(O,!A,-1)}function P(O,A,W){(0,S.o8)(A)&&(A=!0),(0,S.Kn)(A)&&(W=A,A=!0),W=W||{};var K=L(W.allShapes),se=L(W.allConnections),we=L(W.enclosedElements),Ge=L(W.enclosedConnections),ft=L(W.topLevel,A&&(0,S.vM)(O,function(st){return st.id}));function rt(st){ft[st.source.id]&&ft[st.target.id]&&(ft[st.id]=[st]),K[st.source.id]&&K[st.target.id]&&(Ge[st.id]=we[st.id]=st),se[st.id]=st}function yt(st){if(we[st.id]=st,st.waypoints)Ge[st.id]=se[st.id]=st;else return K[st.id]=st,(0,S.Ed)(st.incoming,rt),(0,S.Ed)(st.outgoing,rt),st.children}return oe(O,yt),{allShapes:K,allConnections:se,topLevel:ft,enclosedConnections:Ge,enclosedElements:we}}function fe(O,A){A=!!A,(0,S.kJ)(O)||(O=[O]);var W,K,se,we;return(0,S.Ed)(O,function(Ge){var ft=Ge;Ge.waypoints&&!A&&(ft=fe(Ge.waypoints,!0));var rt=ft.x,yt=ft.y,st=ft.height||0,Dt=ft.width||0;(rt<W||W===void 0)&&(W=rt),(yt<K||K===void 0)&&(K=yt),(rt+Dt>se||se===void 0)&&(se=rt+Dt),(yt+st>we||we===void 0)&&(we=yt+st)}),{x:W,y:K,height:we-K,width:se-W}}function Z(O,A){var W={};return(0,S.Ed)(O,function(K){var se=K;se.waypoints&&(se=fe(se)),!(0,S.hj)(A.y)&&se.x>A.x&&(W[K.id]=K),!(0,S.hj)(A.x)&&se.y>A.y&&(W[K.id]=K),se.x>A.x&&se.y>A.y&&((0,S.hj)(A.width)&&(0,S.hj)(A.height)&&se.width+se.x<A.width+A.x&&se.height+se.y<A.height+A.y||!(0,S.hj)(A.width)||!(0,S.hj)(A.height))&&(W[K.id]=K)}),W}function ee(O){return"waypoints"in O?"connection":"x"in O?"shape":"root"}function X(O){return!!(O&&O.isFrame)}function L(O,A){return(0,S.f0)({},O||{},A||{})}},10409:function(ot,Be,z){"use strict";z.d(Be,{Ku:function(){return N},UW:function(){return V},jt:function(){return re}});function S(oe){!oe||typeof oe.stopPropagation!="function"||oe.stopPropagation()}function N(oe){return oe.originalEvent||oe.srcEvent}function V(oe,F){S(oe,F),S(N(oe),F)}function re(oe){return oe.pointers&&oe.pointers.length&&(oe=oe.pointers[0]),oe.touches&&oe.touches.length&&(oe=oe.touches[0]),oe?{x:oe.clientX,y:oe.clientY}:null}},64129:function(ot,Be,z){"use strict";z.d(Be,{Or:function(){return oe},SO:function(){return P},ZS:function(){return V},qr:function(){return R},tW:function(){return N}});var S=z(67217);function N(fe,Z){return!fe||!Z?-1:Math.sqrt(Math.pow(fe.x-Z.x,2)+Math.pow(fe.y-Z.y,2))}function V(fe,Z,ee,X){if(typeof X=="undefined"&&(X=5),!fe||!Z||!ee)return!1;var L=(Z.x-fe.x)*(ee.y-fe.y)-(Z.y-fe.y)*(ee.x-fe.x),O=N(fe,Z);return Math.abs(L/O)<=X}var re=2;function oe(fe,Z){var ee;return(0,S.kJ)(fe)?ee=fe:ee=[fe,Z],F(ee)?"h":p(ee)?"v":!1}function F(fe,Z){var ee;(0,S.kJ)(fe)?ee=fe:ee=[fe,Z];var X=ee.slice().shift();return(0,S.yW)(ee,function(L){return Math.abs(X.y-L.y)<=re})}function p(fe,Z){var ee;(0,S.kJ)(fe)?ee=fe:ee=[fe,Z];var X=ee.slice().shift();return(0,S.yW)(ee,function(L){return Math.abs(X.x-L.x)<=re})}function R(fe,Z,ee){return ee=ee||0,fe.x>Z.x-ee&&fe.y>Z.y-ee&&fe.x<Z.x+Z.width+ee&&fe.y<Z.y+Z.height+ee}function P(fe,Z){return{x:Math.round(fe.x+(Z.x-fe.x)/2),y:Math.round(fe.y+(Z.y-fe.y)/2)}}},93249:function(ot,Be,z){"use strict";z.d(Be,{G:function(){return N},s:function(){return S}});function S(V){return V.childNodes[0]}function N(V){return V.parentNode.childNodes[1]}},42646:function(ot,Be,z){"use strict";z.d(Be,{Z:function(){return S}});function S(N){this._counter=0,this._prefix=(N?N+"-":"")+Math.floor(Math.random()*1e9)+"-"}S.prototype.next=function(){return this._prefix+ ++this._counter}},18437:function(ot,Be,z){"use strict";z.d(Be,{RJ:function(){return p},Dw:function(){return R},L7:function(){return oe},Id:function(){return re}});var S=z(10409);function N(){return/mac/i.test(navigator.platform)}function V(P,fe){return((0,S.Ku)(P)||P).button===fe}function re(P){return V(P,0)}function oe(P){return V(P,1)}function F(P){return V(P,2)}function p(P){var fe=(0,S.Ku)(P)||P;return re(P)?N()?fe.metaKey:fe.ctrlKey:!1}function R(P){var fe=(0,S.Ku)(P)||P;return re(P)&&fe.shiftKey}},49343:function(ot,Be,z){"use strict";z.d(Be,{KO:function(){return N},W5:function(){return re},cq:function(){return oe}});var S=z(80836);function N(F){return F.join(",").replace(/,?([A-z]),?/g,"$1")}function V(F){for(var p="",R=0,P;P=F[R];R++)p+=P.x+","+P.y+" ";return p}function re(F,p){var R=(0,S.Ue)("polyline");return(0,S.Lj)(R,{points:V(F)}),p&&(0,S.Lj)(R,p),R}function oe(F,p){return(0,S.Lj)(F,{points:V(p)}),F}},67887:function(ot,Be,z){"use strict";z.d(Be,{Iu:function(){return V},U1:function(){return re},vs:function(){return N}});var S=z(80836);function N(F,p,R,P,fe){var Z=(0,S.pH)();Z.setTranslate(p,R);var ee=(0,S.pH)();ee.setRotate(P||0,0,0);var X=(0,S.pH)();X.setScale(fe||1,fe||1),(0,S.vs)(F,[Z,ee,X])}function V(F,p,R){var P=(0,S.pH)();P.setTranslate(p,R),(0,S.vs)(F,P)}function re(F,p){var R=(0,S.pH)();R.setRotate(p,0,0),(0,S.vs)(F,R)}function oe(F,p){var R=createTransform();R.setScale(p,p),svgTransform(F,R)}},11553:function(ot,Be,z){var S;(function(N,V,re,oe){"use strict";var F=["","webkit","Moz","MS","ms","o"],p=V.createElement("div"),R="function",P=Math.round,fe=Math.abs,Z=Date.now;function ee(b,T,I){return setTimeout(we(b,I),T)}function X(b,T,I){return Array.isArray(b)?(L(b,I[T],I),!0):!1}function L(b,T,I){var he;if(b)if(b.forEach)b.forEach(T,I);else if(b.length!==oe)for(he=0;he<b.length;)T.call(I,b[he],he,b),he++;else for(he in b)b.hasOwnProperty(he)&&T.call(I,b[he],he,b)}function O(b,T,I){var he="DEPRECATED METHOD: "+T+`
`+I+` AT 
`;return function(){var Me=new Error("get-stack-trace"),Ve=Me&&Me.stack?Me.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ct=N.console&&(N.console.warn||N.console.log);return Ct&&Ct.call(N.console,he,Ve),b.apply(this,arguments)}}var A;typeof Object.assign!="function"?A=function(T){if(T===oe||T===null)throw new TypeError("Cannot convert undefined or null to object");for(var I=Object(T),he=1;he<arguments.length;he++){var Me=arguments[he];if(Me!==oe&&Me!==null)for(var Ve in Me)Me.hasOwnProperty(Ve)&&(I[Ve]=Me[Ve])}return I}:A=Object.assign;var W=O(function(T,I,he){for(var Me=Object.keys(I),Ve=0;Ve<Me.length;)(!he||he&&T[Me[Ve]]===oe)&&(T[Me[Ve]]=I[Me[Ve]]),Ve++;return T},"extend","Use `assign`."),K=O(function(T,I){return W(T,I,!0)},"merge","Use `assign`.");function se(b,T,I){var he=T.prototype,Me;Me=b.prototype=Object.create(he),Me.constructor=b,Me._super=he,I&&A(Me,I)}function we(b,T){return function(){return b.apply(T,arguments)}}function Ge(b,T){return typeof b==R?b.apply(T&&T[0]||oe,T):b}function ft(b,T){return b===oe?T:b}function rt(b,T,I){L(Wt(T),function(he){b.addEventListener(he,I,!1)})}function yt(b,T,I){L(Wt(T),function(he){b.removeEventListener(he,I,!1)})}function st(b,T){for(;b;){if(b==T)return!0;b=b.parentNode}return!1}function Dt(b,T){return b.indexOf(T)>-1}function Wt(b){return b.trim().split(/\s+/g)}function Xt(b,T,I){if(b.indexOf&&!I)return b.indexOf(T);for(var he=0;he<b.length;){if(I&&b[he][I]==T||!I&&b[he]===T)return he;he++}return-1}function Lt(b){return Array.prototype.slice.call(b,0)}function bn(b,T,I){for(var he=[],Me=[],Ve=0;Ve<b.length;){var Ct=T?b[Ve][T]:b[Ve];Xt(Me,Ct)<0&&he.push(b[Ve]),Me[Ve]=Ct,Ve++}return I&&(T?he=he.sort(function(ln,Cn){return ln[T]>Cn[T]}):he=he.sort()),he}function Ht(b,T){for(var I,he,Me=T[0].toUpperCase()+T.slice(1),Ve=0;Ve<F.length;){if(I=F[Ve],he=I?I+Me:T,he in b)return he;Ve++}return oe}var Gt=1;function _n(){return Gt++}function Fe(b){var T=b.ownerDocument||b;return T.defaultView||T.parentWindow||N}var Je=/mobile|tablet|ip(ad|hone|od)|android/i,D="ontouchstart"in N,ve=Ht(N,"PointerEvent")!==oe,Ee=D&&Je.test(navigator.userAgent),_e="touch",Ue="pen",ue="mouse",ye="kinect",xe=25,B=1,ie=2,M=4,G=8,te=1,k=2,w=4,U=8,pe=16,Pe=k|w,ze=U|pe,Et=Pe|ze,xt=["x","y"],ut=["clientX","clientY"];function Tt(b,T){var I=this;this.manager=b,this.callback=T,this.element=b.element,this.target=b.options.inputTarget,this.domHandler=function(he){Ge(b.options.enable,[b])&&I.handler(he)},this.init()}Tt.prototype={handler:function(){},init:function(){this.evEl&&rt(this.element,this.evEl,this.domHandler),this.evTarget&&rt(this.target,this.evTarget,this.domHandler),this.evWin&&rt(Fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&yt(this.element,this.evEl,this.domHandler),this.evTarget&&yt(this.target,this.evTarget,this.domHandler),this.evWin&&yt(Fe(this.element),this.evWin,this.domHandler)}};function Rt(b){var T,I=b.options.inputClass;return I?T=I:ve?T=ae:Ee?T=zn:D?T=oi:T=Kt,new T(b,le)}function le(b,T,I){var he=I.pointers.length,Me=I.changedPointers.length,Ve=T&B&&he-Me===0,Ct=T&(M|G)&&he-Me===0;I.isFirst=!!Ve,I.isFinal=!!Ct,Ve&&(b.session={}),I.eventType=T,De(b,I),b.emit("hammer.input",I),b.recognize(I),b.session.prevInput=I}function De(b,T){var I=b.session,he=T.pointers,Me=he.length;I.firstInput||(I.firstInput=He(T)),Me>1&&!I.firstMultiple?I.firstMultiple=He(T):Me===1&&(I.firstMultiple=!1);var Ve=I.firstInput,Ct=I.firstMultiple,zt=Ct?Ct.center:Ve.center,ln=T.center=$e(he);T.timeStamp=Z(),T.deltaTime=T.timeStamp-Ve.timeStamp,T.angle=mt(zt,ln),T.distance=Re(zt,ln),Ie(I,T),T.offsetDirection=Qe(T.deltaX,T.deltaY);var Cn=bt(T.deltaTime,T.deltaX,T.deltaY);T.overallVelocityX=Cn.x,T.overallVelocityY=Cn.y,T.overallVelocity=fe(Cn.x)>fe(Cn.y)?Cn.x:Cn.y,T.scale=Ct?en(Ct.pointers,he):1,T.rotation=Ct?gn(Ct.pointers,he):0,T.maxPointers=I.prevInput?T.pointers.length>I.prevInput.maxPointers?T.pointers.length:I.prevInput.maxPointers:T.pointers.length,de(I,T);var ti=b.element;st(T.srcEvent.target,ti)&&(ti=T.srcEvent.target),T.target=ti}function Ie(b,T){var I=T.center,he=b.offsetDelta||{},Me=b.prevDelta||{},Ve=b.prevInput||{};(T.eventType===B||Ve.eventType===M)&&(Me=b.prevDelta={x:Ve.deltaX||0,y:Ve.deltaY||0},he=b.offsetDelta={x:I.x,y:I.y}),T.deltaX=Me.x+(I.x-he.x),T.deltaY=Me.y+(I.y-he.y)}function de(b,T){var I=b.lastInterval||T,he=T.timeStamp-I.timeStamp,Me,Ve,Ct,zt;if(T.eventType!=G&&(he>xe||I.velocity===oe)){var ln=T.deltaX-I.deltaX,Cn=T.deltaY-I.deltaY,ti=bt(he,ln,Cn);Ve=ti.x,Ct=ti.y,Me=fe(ti.x)>fe(ti.y)?ti.x:ti.y,zt=Qe(ln,Cn),b.lastInterval=T}else Me=I.velocity,Ve=I.velocityX,Ct=I.velocityY,zt=I.direction;T.velocity=Me,T.velocityX=Ve,T.velocityY=Ct,T.direction=zt}function He(b){for(var T=[],I=0;I<b.pointers.length;)T[I]={clientX:P(b.pointers[I].clientX),clientY:P(b.pointers[I].clientY)},I++;return{timeStamp:Z(),pointers:T,center:$e(T),deltaX:b.deltaX,deltaY:b.deltaY}}function $e(b){var T=b.length;if(T===1)return{x:P(b[0].clientX),y:P(b[0].clientY)};for(var I=0,he=0,Me=0;Me<T;)I+=b[Me].clientX,he+=b[Me].clientY,Me++;return{x:P(I/T),y:P(he/T)}}function bt(b,T,I){return{x:T/b||0,y:I/b||0}}function Qe(b,T){return b===T?te:fe(b)>=fe(T)?b<0?k:w:T<0?U:pe}function Re(b,T,I){I||(I=xt);var he=T[I[0]]-b[I[0]],Me=T[I[1]]-b[I[1]];return Math.sqrt(he*he+Me*Me)}function mt(b,T,I){I||(I=xt);var he=T[I[0]]-b[I[0]],Me=T[I[1]]-b[I[1]];return Math.atan2(Me,he)*180/Math.PI}function gn(b,T){return mt(T[1],T[0],ut)+mt(b[1],b[0],ut)}function en(b,T){return Re(T[0],T[1],ut)/Re(b[0],b[1],ut)}var Hn={mousedown:B,mousemove:ie,mouseup:M},cn="mousedown",Fn="mousemove mouseup";function Kt(){this.evEl=cn,this.evWin=Fn,this.pressed=!1,Tt.apply(this,arguments)}se(Kt,Tt,{handler:function(T){var I=Hn[T.type];I&B&&T.button===0&&(this.pressed=!0),I&ie&&T.which!==1&&(I=M),this.pressed&&(I&M&&(this.pressed=!1),this.callback(this.manager,I,{pointers:[T],changedPointers:[T],pointerType:ue,srcEvent:T}))}});var In={pointerdown:B,pointermove:ie,pointerup:M,pointercancel:G,pointerout:G},tn={2:_e,3:Ue,4:ue,5:ye},nn="pointerdown",yn="pointermove pointerup pointercancel";N.MSPointerEvent&&!N.PointerEvent&&(nn="MSPointerDown",yn="MSPointerMove MSPointerUp MSPointerCancel");function ae(){this.evEl=nn,this.evWin=yn,Tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}se(ae,Tt,{handler:function(T){var I=this.store,he=!1,Me=T.type.toLowerCase().replace("ms",""),Ve=In[Me],Ct=tn[T.pointerType]||T.pointerType,zt=Ct==_e,ln=Xt(I,T.pointerId,"pointerId");Ve&B&&(T.button===0||zt)?ln<0&&(I.push(T),ln=I.length-1):Ve&(M|G)&&(he=!0),!(ln<0)&&(I[ln]=T,this.callback(this.manager,Ve,{pointers:I,changedPointers:[T],pointerType:Ct,srcEvent:T}),he&&I.splice(ln,1))}});var ct={touchstart:B,touchmove:ie,touchend:M,touchcancel:G},Mn="touchstart",vi="touchstart touchmove touchend touchcancel";function nt(){this.evTarget=Mn,this.evWin=vi,this.started=!1,Tt.apply(this,arguments)}se(nt,Tt,{handler:function(T){var I=ct[T.type];if(I===B&&(this.started=!0),!!this.started){var he=mi.call(this,T,I);I&(M|G)&&he[0].length-he[1].length===0&&(this.started=!1),this.callback(this.manager,I,{pointers:he[0],changedPointers:he[1],pointerType:_e,srcEvent:T})}}});function mi(b,T){var I=Lt(b.touches),he=Lt(b.changedTouches);return T&(M|G)&&(I=bn(I.concat(he),"identifier",!0)),[I,he]}var Qn={touchstart:B,touchmove:ie,touchend:M,touchcancel:G},Wi="touchstart touchmove touchend touchcancel";function zn(){this.evTarget=Wi,this.targetIds={},Tt.apply(this,arguments)}se(zn,Tt,{handler:function(T){var I=Qn[T.type],he=Mi.call(this,T,I);he&&this.callback(this.manager,I,{pointers:he[0],changedPointers:he[1],pointerType:_e,srcEvent:T})}});function Mi(b,T){var I=Lt(b.touches),he=this.targetIds;if(T&(B|ie)&&I.length===1)return he[I[0].identifier]=!0,[I,I];var Me,Ve,Ct=Lt(b.changedTouches),zt=[],ln=this.target;if(Ve=I.filter(function(Cn){return st(Cn.target,ln)}),T===B)for(Me=0;Me<Ve.length;)he[Ve[Me].identifier]=!0,Me++;for(Me=0;Me<Ct.length;)he[Ct[Me].identifier]&&zt.push(Ct[Me]),T&(M|G)&&delete he[Ct[Me].identifier],Me++;if(zt.length)return[bn(Ve.concat(zt),"identifier",!0),zt]}var ge=2500,si=25;function oi(){Tt.apply(this,arguments);var b=we(this.handler,this);this.touch=new zn(this.manager,b),this.mouse=new Kt(this.manager,b),this.primaryTouch=null,this.lastTouches=[]}se(oi,Tt,{handler:function(T,I,he){var Me=he.pointerType==_e,Ve=he.pointerType==ue;if(!(Ve&&he.sourceCapabilities&&he.sourceCapabilities.firesTouchEvents)){if(Me)Gi.call(this,I,he);else if(Ve&&g.call(this,he))return;this.callback(T,I,he)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Gi(b,T){b&B?(this.primaryTouch=T.changedPointers[0].identifier,j.call(this,T)):b&(M|G)&&j.call(this,T)}function j(b){var T=b.changedPointers[0];if(T.identifier===this.primaryTouch){var I={x:T.clientX,y:T.clientY};this.lastTouches.push(I);var he=this.lastTouches,Me=function(){var Ve=he.indexOf(I);Ve>-1&&he.splice(Ve,1)};setTimeout(Me,ge)}}function g(b){for(var T=b.srcEvent.clientX,I=b.srcEvent.clientY,he=0;he<this.lastTouches.length;he++){var Me=this.lastTouches[he],Ve=Math.abs(T-Me.x),Ct=Math.abs(I-Me.y);if(Ve<=si&&Ct<=si)return!0}return!1}var J=Ht(p.style,"touchAction"),ce=J!==oe,Oe="compute",We="auto",it="manipulation",Mt="none",Bt="pan-x",vn="pan-y",xn=Si();function Rn(b,T){this.manager=b,this.set(T)}Rn.prototype={set:function(b){b==Oe&&(b=this.compute()),ce&&this.manager.element.style&&xn[b]&&(this.manager.element.style[J]=b),this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return L(this.manager.recognizers,function(T){Ge(T.options.enable,[T])&&(b=b.concat(T.getTouchAction()))}),xi(b.join(" "))},preventDefaults:function(b){var T=b.srcEvent,I=b.offsetDirection;if(this.manager.session.prevented){T.preventDefault();return}var he=this.actions,Me=Dt(he,Mt)&&!xn[Mt],Ve=Dt(he,vn)&&!xn[vn],Ct=Dt(he,Bt)&&!xn[Bt];if(Me){var zt=b.pointers.length===1,ln=b.distance<2,Cn=b.deltaTime<250;if(zt&&ln&&Cn)return}if(!(Ct&&Ve)&&(Me||Ve&&I&Pe||Ct&&I&ze))return this.preventSrc(T)},preventSrc:function(b){this.manager.session.prevented=!0,b.preventDefault()}};function xi(b){if(Dt(b,Mt))return Mt;var T=Dt(b,Bt),I=Dt(b,vn);return T&&I?Mt:T||I?T?Bt:vn:Dt(b,it)?it:We}function Si(){if(!ce)return!1;var b={},T=N.CSS&&N.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(I){b[I]=T?N.CSS.supports("touch-action",I):!0}),b}var y=1,Sn=2,Ln=4,Un=8,Vn=Un,Oi=16,Kn=32;function ei(b){this.options=A({},this.defaults,b||{}),this.id=_n(),this.manager=null,this.options.enable=ft(this.options.enable,!0),this.state=y,this.simultaneous={},this.requireFail=[]}ei.prototype={defaults:{},set:function(b){return A(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(b){if(X(b,"recognizeWith",this))return this;var T=this.simultaneous;return b=ke(b,this),T[b.id]||(T[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function(b){return X(b,"dropRecognizeWith",this)?this:(b=ke(b,this),delete this.simultaneous[b.id],this)},requireFailure:function(b){if(X(b,"requireFailure",this))return this;var T=this.requireFail;return b=ke(b,this),Xt(T,b)===-1&&(T.push(b),b.requireFailure(this)),this},dropRequireFailure:function(b){if(X(b,"dropRequireFailure",this))return this;b=ke(b,this);var T=Xt(this.requireFail,b);return T>-1&&this.requireFail.splice(T,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(b){return!!this.simultaneous[b.id]},emit:function(b){var T=this,I=this.state;function he(Me){T.manager.emit(Me,b)}I<Un&&he(T.options.event+rn(I)),he(T.options.event),b.additionalEvent&&he(b.additionalEvent),I>=Un&&he(T.options.event+rn(I))},tryEmit:function(b){if(this.canEmit())return this.emit(b);this.state=Kn},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(Kn|y)))return!1;b++}return!0},recognize:function(b){var T=A({},b);if(!Ge(this.options.enable,[this,T])){this.reset(),this.state=Kn;return}this.state&(Vn|Oi|Kn)&&(this.state=y),this.state=this.process(T),this.state&(Sn|Ln|Un|Oi)&&this.tryEmit(T)},process:function(b){},getTouchAction:function(){},reset:function(){}};function rn(b){return b&Oi?"cancel":b&Un?"end":b&Ln?"move":b&Sn?"start":""}function _r(b){return b==pe?"down":b==U?"up":b==k?"left":b==w?"right":""}function ke(b,T){var I=T.manager;return I?I.get(b):b}function $n(){ei.apply(this,arguments)}se($n,ei,{defaults:{pointers:1},attrTest:function(b){var T=this.options.pointers;return T===0||b.pointers.length===T},process:function(b){var T=this.state,I=b.eventType,he=T&(Sn|Ln),Me=this.attrTest(b);return he&&(I&G||!Me)?T|Oi:he||Me?I&M?T|Un:T&Sn?T|Ln:Sn:Kn}});function Ii(){$n.apply(this,arguments),this.pX=null,this.pY=null}se(Ii,$n,{defaults:{event:"pan",threshold:10,pointers:1,direction:Et},getTouchAction:function(){var b=this.options.direction,T=[];return b&Pe&&T.push(vn),b&ze&&T.push(Bt),T},directionTest:function(b){var T=this.options,I=!0,he=b.distance,Me=b.direction,Ve=b.deltaX,Ct=b.deltaY;return Me&T.direction||(T.direction&Pe?(Me=Ve===0?te:Ve<0?k:w,I=Ve!=this.pX,he=Math.abs(b.deltaX)):(Me=Ct===0?te:Ct<0?U:pe,I=Ct!=this.pY,he=Math.abs(b.deltaY))),b.direction=Me,I&&he>T.threshold&&Me&T.direction},attrTest:function(b){return $n.prototype.attrTest.call(this,b)&&(this.state&Sn||!(this.state&Sn)&&this.directionTest(b))},emit:function(b){this.pX=b.deltaX,this.pY=b.deltaY;var T=_r(b.direction);T&&(b.additionalEvent=this.options.event+T),this._super.emit.call(this,b)}});function Yn(){$n.apply(this,arguments)}se(Yn,$n,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mt]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&Sn)},emit:function(b){if(b.scale!==1){var T=b.scale<1?"in":"out";b.additionalEvent=this.options.event+T}this._super.emit.call(this,b)}});function ar(){ei.apply(this,arguments),this._timer=null,this._input=null}se(ar,ei,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[We]},process:function(b){var T=this.options,I=b.pointers.length===T.pointers,he=b.distance<T.threshold,Me=b.deltaTime>T.time;if(this._input=b,!he||!I||b.eventType&(M|G)&&!Me)this.reset();else if(b.eventType&B)this.reset(),this._timer=ee(function(){this.state=Vn,this.tryEmit()},T.time,this);else if(b.eventType&M)return Vn;return Kn},reset:function(){clearTimeout(this._timer)},emit:function(b){this.state===Vn&&(b&&b.eventType&M?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=Z(),this.manager.emit(this.options.event,this._input)))}});function or(){$n.apply(this,arguments)}se(or,$n,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mt]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||this.state&Sn)}});function wi(){$n.apply(this,arguments)}se(wi,$n,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Pe|ze,pointers:1},getTouchAction:function(){return Ii.prototype.getTouchAction.call(this)},attrTest:function(b){var T=this.options.direction,I;return T&(Pe|ze)?I=b.overallVelocity:T&Pe?I=b.overallVelocityX:T&ze&&(I=b.overallVelocityY),this._super.attrTest.call(this,b)&&T&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&fe(I)>this.options.velocity&&b.eventType&M},emit:function(b){var T=_r(b.offsetDirection);T&&this.manager.emit(this.options.event+T,b),this.manager.emit(this.options.event,b)}});function Zn(){ei.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}se(Zn,ei,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[it]},process:function(b){var T=this.options,I=b.pointers.length===T.pointers,he=b.distance<T.threshold,Me=b.deltaTime<T.time;if(this.reset(),b.eventType&B&&this.count===0)return this.failTimeout();if(he&&Me&&I){if(b.eventType!=M)return this.failTimeout();var Ve=this.pTime?b.timeStamp-this.pTime<T.interval:!0,Ct=!this.pCenter||Re(this.pCenter,b.center)<T.posThreshold;this.pTime=b.timeStamp,this.pCenter=b.center,!Ct||!Ve?this.count=1:this.count+=1,this._input=b;var zt=this.count%T.taps;if(zt===0)return this.hasRequireFailures()?(this._timer=ee(function(){this.state=Vn,this.tryEmit()},T.interval,this),Sn):Vn}return Kn},failTimeout:function(){return this._timer=ee(function(){this.state=Kn},this.options.interval,this),Kn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Xn(b,T){return T=T||{},T.recognizers=ft(T.recognizers,Xn.defaults.preset),new Vi(b,T)}Xn.VERSION="2.0.7",Xn.defaults={domEvents:!1,touchAction:Oe,enable:!0,inputTarget:null,inputClass:null,preset:[[or,{enable:!1}],[Yn,{enable:!1},["rotate"]],[wi,{direction:Pe}],[Ii,{direction:Pe},["swipe"]],[Zn],[Zn,{event:"doubletap",taps:2},["tap"]],[ar]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Li=1,br=2;function Vi(b,T){this.options=A({},Xn.defaults,T||{}),this.options.inputTarget=this.options.inputTarget||b,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=b,this.input=Rt(this),this.touchAction=new Rn(this,this.options.touchAction),sr(this,!0),L(this.options.recognizers,function(I){var he=this.add(new I[0](I[1]));I[2]&&he.recognizeWith(I[2]),I[3]&&he.requireFailure(I[3])},this)}Vi.prototype={set:function(b){return A(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?br:Li},recognize:function(b){var T=this.session;if(!T.stopped){this.touchAction.preventDefaults(b);var I,he=this.recognizers,Me=T.curRecognizer;(!Me||Me&&Me.state&Vn)&&(Me=T.curRecognizer=null);for(var Ve=0;Ve<he.length;)I=he[Ve],T.stopped!==br&&(!Me||I==Me||I.canRecognizeWith(Me))?I.recognize(b):I.reset(),!Me&&I.state&(Sn|Ln|Un)&&(Me=T.curRecognizer=I),Ve++}},get:function(b){if(b instanceof ei)return b;for(var T=this.recognizers,I=0;I<T.length;I++)if(T[I].options.event==b)return T[I];return null},add:function(b){if(X(b,"add",this))return this;var T=this.get(b.options.event);return T&&this.remove(T),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function(b){if(X(b,"remove",this))return this;if(b=this.get(b),b){var T=this.recognizers,I=Xt(T,b);I!==-1&&(T.splice(I,1),this.touchAction.update())}return this},on:function(b,T){if(b!==oe&&T!==oe){var I=this.handlers;return L(Wt(b),function(he){I[he]=I[he]||[],I[he].push(T)}),this}},off:function(b,T){if(b!==oe){var I=this.handlers;return L(Wt(b),function(he){T?I[he]&&I[he].splice(Xt(I[he],T),1):delete I[he]}),this}},emit:function(b,T){this.options.domEvents&&Nr(b,T);var I=this.handlers[b]&&this.handlers[b].slice();if(!(!I||!I.length)){T.type=b,T.preventDefault=function(){T.srcEvent.preventDefault()};for(var he=0;he<I.length;)I[he](T),he++}},destroy:function(){this.element&&sr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function sr(b,T){var I=b.element;if(I.style){var he;L(b.options.cssProps,function(Me,Ve){he=Ht(I.style,Ve),T?(b.oldCssProps[he]=I.style[he],I.style[he]=Me):I.style[he]=b.oldCssProps[he]||""}),T||(b.oldCssProps={})}}function Nr(b,T){var I=V.createEvent("Event");I.initEvent(b,!0,!0),I.gesture=T,T.target.dispatchEvent(I)}A(Xn,{INPUT_START:B,INPUT_MOVE:ie,INPUT_END:M,INPUT_CANCEL:G,STATE_POSSIBLE:y,STATE_BEGAN:Sn,STATE_CHANGED:Ln,STATE_ENDED:Un,STATE_RECOGNIZED:Vn,STATE_CANCELLED:Oi,STATE_FAILED:Kn,DIRECTION_NONE:te,DIRECTION_LEFT:k,DIRECTION_RIGHT:w,DIRECTION_UP:U,DIRECTION_DOWN:pe,DIRECTION_HORIZONTAL:Pe,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Et,Manager:Vi,Input:Tt,TouchAction:Rn,TouchInput:zn,MouseInput:Kt,PointerEventInput:ae,TouchMouseInput:oi,SingleTouchInput:nt,Recognizer:ei,AttrRecognizer:$n,Tap:Zn,Pan:Ii,Swipe:wi,Pinch:Yn,Rotate:or,Press:ar,on:rt,off:yt,each:L,merge:K,extend:W,assign:A,inherit:se,bindFn:we,prefixed:Ht});var cr=typeof N!="undefined"?N:typeof self!="undefined"?self:{};cr.Hammer=Xn,S=function(){return Xn}.call(Be,z,Be,ot),S!==oe&&(ot.exports=S)})(window,document,"Hammer")},57191:function(ot,Be){"use strict";function z(V,re){return re={exports:{}},V(re,re.exports),re.exports}var S=z(function(V){var re=V.exports=function(oe,F){if(F||(F=16),oe===void 0&&(oe=128),oe<=0)return"0";for(var p=Math.log(Math.pow(2,oe))/Math.log(F),R=2;p===1/0;R*=2)p=Math.log(Math.pow(2,oe/R))/Math.log(F)*R;for(var P=p-Math.floor(p),fe="",R=0;R<Math.floor(p);R++){var Z=Math.floor(Math.random()*F).toString(F);fe=Z+fe}if(P){var ee=Math.pow(F,P),Z=Math.floor(Math.random()*ee).toString(F);fe=Z+fe}var X=parseInt(fe,F);return X!==1/0&&X>=Math.pow(2,oe)?re(oe,F):fe};re.rack=function(oe,F,p){var R=function(fe){var Z=0;do{if(Z++>10)if(p)oe+=p;else throw new Error("too many ID collisions, use more bits");var ee=re(oe,F)}while(Object.hasOwnProperty.call(P,ee));return P[ee]=fe,ee},P=R.hats={};return R.get=function(fe){return R.hats[fe]},R.set=function(fe,Z){return R.hats[fe]=Z,R},R.bits=oe||128,R.base=F||16,R}});function N(V){if(!(this instanceof N))return new N(V);V=V||[128,36,1],this._seed=V.length?S.rack(V[0],V[1],V[2]):V}N.prototype.next=function(V){return this._seed(V||!0)},N.prototype.nextPrefixed=function(V,re){var oe;do oe=V+this.next(!0);while(this.assigned(oe));return this.claim(oe,re),oe},N.prototype.claim=function(V,re){this._seed.set(V,re||!0)},N.prototype.assigned=function(V){return this._seed.get(V)||!1},N.prototype.unclaim=function(V){delete this._seed.hats[V]},N.prototype.clear=function(){var V=this._seed.hats,re;for(re in V)this.unclaim(re)},Be.Z=N},2937:function(ot){typeof Object.create=="function"?ot.exports=function(z,S){S&&(z.super_=S,z.prototype=Object.create(S.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:ot.exports=function(z,S){if(S){z.super_=S;var N=function(){};N.prototype=S.prototype,z.prototype=new N,z.prototype.constructor=z}}},67217:function(ot,Be,z){"use strict";z.d(Be,{$K:function(){return oe},CE:function(){return B},Ds:function(){return Je},Ed:function(){return W},G:function(){return Ge},HD:function(){return Z},KQ:function(){return bn},Kn:function(){return R},MR:function(){return Lt},UI:function(){return ft},VO:function(){return st},XP:function(){return rt},ak:function(){return ve},cx:function(){return O},dp:function(){return yt},e$:function(){return X},ei:function(){return xe},f0:function(){return Ue},hX:function(){return A},hj:function(){return P},kJ:function(){return p},kK:function(){return F},mf:function(){return fe},o8:function(){return re},qZ:function(){return Xt},sE:function(){return L},u4:function(){return se},uw:function(){return Wt},vM:function(){return Dt},xH:function(){return S},yW:function(){return we},zu:function(){return K}});function S(M){return Array.prototype.concat.apply([],M)}var N=Object.prototype.toString,V=Object.prototype.hasOwnProperty;function re(M){return M===void 0}function oe(M){return M!==void 0}function F(M){return M==null}function p(M){return N.call(M)==="[object Array]"}function R(M){return N.call(M)==="[object Object]"}function P(M){return N.call(M)==="[object Number]"}function fe(M){var G=N.call(M);return G==="[object Function]"||G==="[object AsyncFunction]"||G==="[object GeneratorFunction]"||G==="[object AsyncGeneratorFunction]"||G==="[object Proxy]"}function Z(M){return N.call(M)==="[object String]"}function ee(M){if(!p(M))throw new Error("must supply array")}function X(M,G){return V.call(M,G)}function L(M,G){G=Gt(G);var te;return W(M,function(k,w){if(G(k,w))return te=k,!1}),te}function O(M,G){G=Gt(G);var te=p(M)?-1:void 0;return W(M,function(k,w){if(G(k,w))return te=w,!1}),te}function A(M,G){var te=[];return W(M,function(k,w){G(k,w)&&te.push(k)}),te}function W(M,G){var te,k;if(!re(M)){var w=p(M)?Fe:_n;for(var U in M)if(X(M,U)&&(te=M[U],k=G(te,w(U)),k===!1))return te}}function K(M,G){return re(M)?[]:(ee(M),G=Gt(G),M.filter(function(te,k){return!G(te,k)}))}function se(M,G,te){return W(M,function(k,w){te=G(te,k,w)}),te}function we(M,G){return!!se(M,function(te,k,w){return te&&G(k,w)},!0)}function Ge(M,G){return!!L(M,G)}function ft(M,G){var te=[];return W(M,function(k,w){te.push(G(k,w))}),te}function rt(M){return M&&Object.keys(M)||[]}function yt(M){return rt(M).length}function st(M){return ft(M,function(G){return G})}function Dt(M,G){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G=Ht(G),W(M,function(k){var w=G(k)||"_",U=te[w];U||(U=te[w]=[]),U.push(k)}),te}function Wt(M){M=Ht(M);for(var G={},te=arguments.length,k=new Array(te>1?te-1:0),w=1;w<te;w++)k[w-1]=arguments[w];W(k,function(pe){return Dt(pe,M,G)});var U=ft(G,function(pe,Pe){return pe[0]});return U}var Xt=Wt;function Lt(M,G){G=Ht(G);var te=[];return W(M,function(k,w){for(var U=G(k,w),pe={d:U,v:k},Pe=0;Pe<te.length;Pe++){var ze=te[Pe].d;if(U<ze){te.splice(Pe,0,pe);return}}te.push(pe)}),ft(te,function(k){return k.v})}function bn(M){return function(G){return we(M,function(te,k){return G[k]===te})}}function Ht(M){return fe(M)?M:function(G){return G[M]}}function Gt(M){return fe(M)?M:function(G){return G===M}}function _n(M){return M}function Fe(M){return Number(M)}function Je(M,G){var te,k,w,U;function pe(ut){var Tt=Date.now(),Rt=ut?0:U+G-Tt;if(Rt>0)return Pe(Rt);M.apply(w,k),ze()}function Pe(ut){te=setTimeout(pe,ut)}function ze(){te&&clearTimeout(te),te=U=k=w=void 0}function Et(){te&&pe(!0),ze()}function xt(){U=Date.now();for(var ut=arguments.length,Tt=new Array(ut),Rt=0;Rt<ut;Rt++)Tt[Rt]=arguments[Rt];k=Tt,w=this,te||Pe(G)}return xt.flush=Et,xt.cancel=ze,xt}function D(M,G){var te=!1;return function(){te||(M.apply(void 0,arguments),te=!0,setTimeout(function(){te=!1},G))}}function ve(M,G){return M.bind(G)}function Ee(M){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ee=function(G){return typeof G}:Ee=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},Ee(M)}function _e(){return _e=Object.assign||function(M){for(var G=1;G<arguments.length;G++){var te=arguments[G];for(var k in te)Object.prototype.hasOwnProperty.call(te,k)&&(M[k]=te[k])}return M},_e.apply(this,arguments)}function Ue(M){for(var G=arguments.length,te=new Array(G>1?G-1:0),k=1;k<G;k++)te[k-1]=arguments[k];return _e.apply(void 0,[M].concat(te))}function ue(M,G,te){var k=M;return W(G,function(w,U){if(typeof w!="number"&&typeof w!="string")throw new Error("illegal key type: "+Ee(w)+". Key should be of type number or string.");if(w==="constructor")throw new Error("illegal key: constructor");if(w==="__proto__")throw new Error("illegal key: __proto__");var pe=G[U+1],Pe=k[w];oe(pe)&&F(Pe)&&(Pe=k[w]=isNaN(+pe)?{}:[]),re(pe)?re(te)?delete k[w]:k[w]=te:k=Pe}),M}function ye(M,G,te){var k=M;return W(G,function(w){if(F(k))return k=void 0,!1;k=k[w]}),re(k)?te:k}function xe(M,G){var te={},k=Object(M);return W(G,function(w){w in k&&(te[w]=M[w])}),te}function B(M,G){var te={},k=Object(M);return W(k,function(w,U){G.indexOf(U)===-1&&(te[U]=w)}),te}function ie(M){for(var G=arguments.length,te=new Array(G>1?G-1:0),k=1;k<G;k++)te[k-1]=arguments[k];return te.length&&W(te,function(w){!w||!R(w)||W(w,function(U,pe){if(pe!=="__proto__"){var Pe=M[pe];R(U)?(R(Pe)||(Pe={}),M[pe]=ie(Pe,U)):M[pe]=U}})}),M}},24220:function(ot,Be,z){"use strict";z.d(Be,{B:function(){return Xt},H6:function(){return _n},IO:function(){return Ee},Kt:function(){return _e},Lj:function(){return fe},Od:function(){return Ue},Sh:function(){return O},ZH:function(){return W},cl:function(){return Gt},oq:function(){return ft},wB:function(){return we}});var S=Object.prototype.toString,N=Object.prototype.hasOwnProperty;function V(ue){return ue===void 0}function re(ue){return S.call(ue)==="[object Array]"}function oe(ue,ye){return N.call(ue,ye)}function F(ue,ye){var xe,B;if(!V(ue)){var ie=re(ue)?R:p;for(var M in ue)if(oe(ue,M)&&(xe=ue[M],B=ye(xe,ie(M)),B===!1))return xe}}function p(ue){return ue}function R(ue){return Number(ue)}function P(ue){for(var ye=ue.style,xe=arguments.length,B=Array(xe>1?xe-1:0),ie=1;ie<xe;ie++)B[ie-1]=arguments[ie];return F(B,function(M){M&&F(M,function(G,te){ye[te]=G})}),ue}function fe(ue,ye,xe){return arguments.length==2?ue.getAttribute(ye):xe===null?ue.removeAttribute(ye):(ue.setAttribute(ye,xe),ue)}var Z=[].indexOf,ee=function(ue,ye){if(Z)return ue.indexOf(ye);for(var xe=0;xe<ue.length;++xe)if(ue[xe]===ye)return xe;return-1},X=/\s+/,L=Object.prototype.toString;function O(ue){return new A(ue)}function A(ue){if(!ue||!ue.nodeType)throw new Error("A DOM element reference is required");this.el=ue,this.list=ue.classList}A.prototype.add=function(ue){if(this.list)return this.list.add(ue),this;var ye=this.array(),xe=ee(ye,ue);return~xe||ye.push(ue),this.el.className=ye.join(" "),this},A.prototype.remove=function(ue){if(L.call(ue)=="[object RegExp]")return this.removeMatching(ue);if(this.list)return this.list.remove(ue),this;var ye=this.array(),xe=ee(ye,ue);return~xe&&ye.splice(xe,1),this.el.className=ye.join(" "),this},A.prototype.removeMatching=function(ue){for(var ye=this.array(),xe=0;xe<ye.length;xe++)ue.test(ye[xe])&&this.remove(ye[xe]);return this},A.prototype.toggle=function(ue,ye){return this.list?(typeof ye!="undefined"?ye!==this.list.toggle(ue,ye)&&this.list.toggle(ue):this.list.toggle(ue),this):(typeof ye!="undefined"?ye?this.add(ue):this.remove(ue):this.has(ue)?this.remove(ue):this.add(ue),this)},A.prototype.array=function(){var ue=this.el.getAttribute("class")||"",ye=ue.replace(/^\s+|\s+$/g,""),xe=ye.split(X);return xe[0]===""&&xe.shift(),xe},A.prototype.has=A.prototype.contains=function(ue){return this.list?this.list.contains(ue):!!~ee(this.array(),ue)};function W(ue){for(var ye;ue.childNodes.length;)ye=ue.childNodes[0],ue.removeChild(ye);return ue}var K=typeof Element!="undefined"?Element.prototype:{},se=K.matches||K.matchesSelector||K.webkitMatchesSelector||K.mozMatchesSelector||K.msMatchesSelector||K.oMatchesSelector,we=Ge;function Ge(ue,ye){if(!ue||ue.nodeType!==1)return!1;if(se)return se.call(ue,ye);for(var xe=ue.parentNode.querySelectorAll(ye),B=0;B<xe.length;B++)if(xe[B]==ue)return!0;return!1}function ft(ue,ye,xe){for(var B=xe?ue:ue.parentNode;B&&B.nodeType!==document.DOCUMENT_NODE&&B.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(we(B,ye))return B;B=B.parentNode}return we(B,ye)?B:null}var rt=window.addEventListener?"addEventListener":"attachEvent",yt=window.removeEventListener?"removeEventListener":"detachEvent",st=rt!=="addEventListener"?"on":"",Dt=function(ue,ye,xe,B){return ue[rt](st+ye,xe,B||!1),xe},Wt=function(ue,ye,xe,B){return ue[yt](st+ye,xe,B||!1),xe},Xt={bind:Dt,unbind:Wt},Lt=["focus","blur"];function bn(ue,ye,xe,B,ie){return Lt.indexOf(xe)!==-1&&(ie=!0),Xt.bind(ue,xe,function(M){var G=M.target||M.srcElement;M.delegateTarget=ft(G,ye,!0,ue),M.delegateTarget&&B.call(ue,M)},ie)}function Ht(ue,ye,xe,B){return Lt.indexOf(ye)!==-1&&(B=!0),Xt.unbind(ue,ye,xe,B)}var Gt={bind:bn,unbind:Ht},_n=ve,Fe=!1,Je;typeof document!="undefined"&&(Je=document.createElement("div"),Je.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Fe=!Je.getElementsByTagName("link").length,Je=void 0);var D={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Fe?[1,"X<div>","</div>"]:[0,"",""]};D.td=D.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],D.option=D.optgroup=[1,'<select multiple="multiple">',"</select>"],D.thead=D.tbody=D.colgroup=D.caption=D.tfoot=[1,"<table>","</table>"],D.polyline=D.ellipse=D.polygon=D.circle=D.text=D.line=D.path=D.rect=D.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function ve(ue,ye){if(typeof ue!="string")throw new TypeError("String expected");ye||(ye=document);var xe=/<([\w:]+)/.exec(ue);if(!xe)return ye.createTextNode(ue);ue=ue.replace(/^\s+|\s+$/g,"");var B=xe[1];if(B=="body"){var k=ye.createElement("html");return k.innerHTML=ue,k.removeChild(k.lastChild)}var ie=D[B]||D._default,M=ie[0],G=ie[1],te=ie[2],k=ye.createElement("div");for(k.innerHTML=G+ue+te;M--;)k=k.lastChild;if(k.firstChild==k.lastChild)return k.removeChild(k.firstChild);for(var w=ye.createDocumentFragment();k.firstChild;)w.appendChild(k.removeChild(k.firstChild));return w}function Ee(ue,ye){return ye=ye||document,ye.querySelector(ue)}function _e(ue,ye){return ye=ye||document,ye.querySelectorAll(ue)}function Ue(ue){ue.parentNode&&ue.parentNode.removeChild(ue)}},44657:function(ot,Be,z){ot.exports=z(91672),ot.exports.Collection=z(78433)},78433:function(ot){"use strict";function Be(S,N,V,re){var oe=V.inverse;return Object.defineProperty(S,"remove",{value:function(F){var p=this.indexOf(F);return p!==-1&&(this.splice(p,1),N.unset(F,oe,re)),F}}),Object.defineProperty(S,"contains",{value:function(F){return this.indexOf(F)!==-1}}),Object.defineProperty(S,"add",{value:function(F,p){var R=this.indexOf(F);if(typeof p=="undefined"){if(R!==-1)return;p=this.length}R!==-1&&this.splice(R,1),this.splice(p,0,F),R===-1&&N.set(F,oe,re)}}),Object.defineProperty(S,"__refs_collection",{value:!0}),S}function z(S){return S.__refs_collection===!0}ot.exports.extend=Be,ot.exports.isExtended=z},91672:function(ot,Be,z){"use strict";var S=z(78433);function N(F,p){return Object.prototype.hasOwnProperty.call(F,p.name||p)}function V(F,p,R){var P=S.extend(R[p.name]||[],F,p,R);Object.defineProperty(R,p.name,{enumerable:p.enumerable,value:P}),P.length&&P.forEach(function(fe){F.set(fe,p.inverse,R)})}function re(F,p,R){var P=p.inverse,fe=R[p.name];Object.defineProperty(R,p.name,{configurable:p.configurable,enumerable:p.enumerable,get:function(){return fe},set:function(Z){if(Z!==fe){var ee=fe;fe=null,ee&&F.unset(ee,P,R),fe=Z,F.set(fe,P,R)}}})}function oe(F,p){if(!(this instanceof oe))return new oe(F,p);F.inverse=p,p.inverse=F,this.props={},this.props[F.name]=F,this.props[p.name]=p}oe.prototype.bind=function(F,p){if(typeof p=="string"){if(!this.props[p])throw new Error("no property <"+p+"> in ref");p=this.props[p]}p.collection?V(this,p,F):re(this,p,F)},oe.prototype.ensureRefsCollection=function(F,p){var R=F[p.name];return S.isExtended(R)||V(this,p,F),R},oe.prototype.ensureBound=function(F,p){N(F,p)||this.bind(F,p)},oe.prototype.unset=function(F,p,R){F&&(this.ensureBound(F,p),p.collection?this.ensureRefsCollection(F,p).remove(R):F[p.name]=void 0)},oe.prototype.set=function(F,p,R){F&&(this.ensureBound(F,p),p.collection?this.ensureRefsCollection(F,p).add(R):F[p.name]=R)},ot.exports=oe},76757:function(ot){"use strict";var Be=/,?([a-z]),?/gi,z=parseFloat,S=Math,N=S.PI,V=S.min,re=S.max,oe=S.pow,F=S.abs,p=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,R=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,P=Array.isArray||function(D){return D instanceof Array};function fe(D,ve){return Object.prototype.hasOwnProperty.call(D,ve)}function Z(D){if(typeof D=="function"||Object(D)!==D)return D;var ve=new D.constructor;for(var Ee in D)fe(D,Ee)&&(ve[Ee]=Z(D[Ee]));return ve}function ee(D,ve){for(var Ee=0,_e=D.length;Ee<_e;Ee++)if(D[Ee]===ve)return D.push(D.splice(Ee,1)[0])}function X(D){function ve(){var Ee=Array.prototype.slice.call(arguments,0),_e=Ee.join("\u2400"),Ue=ve.cache=ve.cache||{},ue=ve.count=ve.count||[];return fe(Ue,_e)?(ee(ue,_e),Ue[_e]):(ue.length>=1e3&&delete Ue[ue.shift()],ue.push(_e),Ue[_e]=D.apply(0,Ee),Ue[_e])}return ve}function L(D){if(!D)return null;var ve=O(D);if(ve.arr)return Z(ve.arr);var Ee={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},_e=[];return P(D)&&P(D[0])&&(_e=Z(D)),_e.length||String(D).replace(p,function(Ue,ue,ye){var xe=[],B=ue.toLowerCase();for(ye.replace(R,function(ie,M){M&&xe.push(+M)}),B=="m"&&xe.length>2&&(_e.push([ue].concat(xe.splice(0,2))),B="l",ue=ue=="m"?"l":"L");xe.length>=Ee[B]&&(_e.push([ue].concat(xe.splice(0,Ee[B]))),!!Ee[B]););}),_e.toString=O.toString,ve.arr=Z(_e),_e}function O(D){var ve=O.ps=O.ps||{};return ve[D]?ve[D].sleep=100:ve[D]={sleep:100},setTimeout(function(){for(var Ee in ve)fe(ve,Ee)&&Ee!=D&&(ve[Ee].sleep--,!ve[Ee].sleep&&delete ve[Ee])}),ve[D]}function A(D,ve,Ee,_e){return arguments.length===1&&(ve=D.y,Ee=D.width,_e=D.height,D=D.x),{x:D,y:ve,width:Ee,height:_e,x2:D+Ee,y2:ve+_e}}function W(){return this.join(",").replace(Be,"$1")}function K(D){var ve=Z(D);return ve.toString=W,ve}function se(D,ve,Ee,_e,Ue,ue,ye,xe,B){var ie=1-B,M=oe(ie,3),G=oe(ie,2),te=B*B,k=te*B,w=M*D+G*3*B*Ee+ie*3*B*B*Ue+k*ye,U=M*ve+G*3*B*_e+ie*3*B*B*ue+k*xe;return{x:Dt(w),y:Dt(U)}}function we(D){var ve=Fe.apply(null,D);return A(ve.x0,ve.y0,ve.x1-ve.x0,ve.y1-ve.y0)}function Ge(D,ve,Ee){return ve>=D.x&&ve<=D.x+D.width&&Ee>=D.y&&Ee<=D.y+D.height}function ft(D,ve){return D=A(D),ve=A(ve),Ge(ve,D.x,D.y)||Ge(ve,D.x2,D.y)||Ge(ve,D.x,D.y2)||Ge(ve,D.x2,D.y2)||Ge(D,ve.x,ve.y)||Ge(D,ve.x2,ve.y)||Ge(D,ve.x,ve.y2)||Ge(D,ve.x2,ve.y2)||(D.x<ve.x2&&D.x>ve.x||ve.x<D.x2&&ve.x>D.x)&&(D.y<ve.y2&&D.y>ve.y||ve.y<D.y2&&ve.y>D.y)}function rt(D,ve,Ee,_e,Ue){var ue=-3*ve+9*Ee-9*_e+3*Ue,ye=D*ue+6*ve-12*Ee+6*_e;return D*ye-3*ve+3*Ee}function yt(D,ve,Ee,_e,Ue,ue,ye,xe,B){B==null&&(B=1),B=B>1?1:B<0?0:B;for(var ie=B/2,M=12,G=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],te=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],k=0,w=0;w<M;w++){var U=ie*G[w]+ie,pe=rt(U,D,Ee,Ue,ye),Pe=rt(U,ve,_e,ue,xe),ze=pe*pe+Pe*Pe;k+=te[w]*S.sqrt(ze)}return ie*k}function st(D,ve,Ee,_e,Ue,ue,ye,xe){if(!(re(D,Ee)<V(Ue,ye)||V(D,Ee)>re(Ue,ye)||re(ve,_e)<V(ue,xe)||V(ve,_e)>re(ue,xe))){var B=(D*_e-ve*Ee)*(Ue-ye)-(D-Ee)*(Ue*xe-ue*ye),ie=(D*_e-ve*Ee)*(ue-xe)-(ve-_e)*(Ue*xe-ue*ye),M=(D-Ee)*(ue-xe)-(ve-_e)*(Ue-ye);if(M){var G=Dt(B/M),te=Dt(ie/M),k=+G.toFixed(2),w=+te.toFixed(2);if(!(k<+V(D,Ee).toFixed(2)||k>+re(D,Ee).toFixed(2)||k<+V(Ue,ye).toFixed(2)||k>+re(Ue,ye).toFixed(2)||w<+V(ve,_e).toFixed(2)||w>+re(ve,_e).toFixed(2)||w<+V(ue,xe).toFixed(2)||w>+re(ue,xe).toFixed(2)))return{x:G,y:te}}}}function Dt(D){return Math.round(D*1e11)/1e11}function Wt(D,ve,Ee){var _e=we(D),Ue=we(ve);if(!ft(_e,Ue))return Ee?0:[];for(var ue=yt.apply(0,D),ye=yt.apply(0,ve),xe=bn(D)?1:~~(ue/5)||1,B=bn(ve)?1:~~(ye/5)||1,ie=[],M=[],G={},te=Ee?0:[],k=0;k<xe+1;k++){var w=se.apply(0,D.concat(k/xe));ie.push({x:w.x,y:w.y,t:k/xe})}for(k=0;k<B+1;k++)w=se.apply(0,ve.concat(k/B)),M.push({x:w.x,y:w.y,t:k/B});for(k=0;k<xe;k++)for(var U=0;U<B;U++){var pe=ie[k],Pe=ie[k+1],ze=M[U],Et=M[U+1],xt=F(Pe.x-pe.x)<.01?"y":"x",ut=F(Et.x-ze.x)<.01?"y":"x",Tt=st(pe.x,pe.y,Pe.x,Pe.y,ze.x,ze.y,Et.x,Et.y),Rt;if(Tt){if(Rt=Tt.x.toFixed(9)+"#"+Tt.y.toFixed(9),G[Rt])continue;G[Rt]=!0;var le=pe.t+F((Tt[xt]-pe[xt])/(Pe[xt]-pe[xt]))*(Pe.t-pe.t),De=ze.t+F((Tt[ut]-ze[ut])/(Et[ut]-ze[ut]))*(Et.t-ze.t);le>=0&&le<=1&&De>=0&&De<=1&&(Ee?te++:te.push({x:Tt.x,y:Tt.y,t1:le,t2:De}))}}return te}function Xt(D,ve,Ee){D=Je(D),ve=Je(ve);for(var _e,Ue,ue,ye,xe,B,ie,M,G,te,k=Ee?0:[],w=0,U=D.length;w<U;w++){var pe=D[w];if(pe[0]=="M")_e=xe=pe[1],Ue=B=pe[2];else{pe[0]=="C"?(G=[_e,Ue].concat(pe.slice(1)),_e=G[6],Ue=G[7]):(G=[_e,Ue,_e,Ue,xe,B,xe,B],_e=xe,Ue=B);for(var Pe=0,ze=ve.length;Pe<ze;Pe++){var Et=ve[Pe];if(Et[0]=="M")ue=ie=Et[1],ye=M=Et[2];else{Et[0]=="C"?(te=[ue,ye].concat(Et.slice(1)),ue=te[6],ye=te[7]):(te=[ue,ye,ue,ye,ie,M,ie,M],ue=ie,ye=M);var xt=Wt(G,te,Ee);if(Ee)k+=xt;else{for(var ut=0,Tt=xt.length;ut<Tt;ut++)xt[ut].segment1=w,xt[ut].segment2=Pe,xt[ut].bez1=G,xt[ut].bez2=te;k=k.concat(xt)}}}}}return k}function Lt(D){var ve=O(D);if(ve.abs)return K(ve.abs);if((!P(D)||!P(D&&D[0]))&&(D=L(D)),!D||!D.length)return[["M",0,0]];var Ee=[],_e=0,Ue=0,ue=0,ye=0,xe=0,B;D[0][0]=="M"&&(_e=+D[0][1],Ue=+D[0][2],ue=_e,ye=Ue,xe++,Ee[0]=["M",_e,Ue]);for(var ie,M,G=xe,te=D.length;G<te;G++){if(Ee.push(ie=[]),M=D[G],B=M[0],B!=B.toUpperCase())switch(ie[0]=B.toUpperCase(),ie[0]){case"A":ie[1]=M[1],ie[2]=M[2],ie[3]=M[3],ie[4]=M[4],ie[5]=M[5],ie[6]=+M[6]+_e,ie[7]=+M[7]+Ue;break;case"V":ie[1]=+M[1]+Ue;break;case"H":ie[1]=+M[1]+_e;break;case"M":ue=+M[1]+_e,ye=+M[2]+Ue;default:for(var k=1,w=M.length;k<w;k++)ie[k]=+M[k]+(k%2?_e:Ue)}else for(var U=0,pe=M.length;U<pe;U++)ie[U]=M[U];switch(B=B.toUpperCase(),ie[0]){case"Z":_e=+ue,Ue=+ye;break;case"H":_e=ie[1];break;case"V":Ue=ie[1];break;case"M":ue=ie[ie.length-2],ye=ie[ie.length-1];default:_e=ie[ie.length-2],Ue=ie[ie.length-1]}}return Ee.toString=W,ve.abs=K(Ee),Ee}function bn(D){return D[0]===D[2]&&D[1]===D[3]&&D[4]===D[6]&&D[5]===D[7]}function Ht(D,ve,Ee,_e){return[D,ve,Ee,_e,Ee,_e]}function Gt(D,ve,Ee,_e,Ue,ue){var ye=.3333333333333333,xe=2/3;return[ye*D+xe*Ee,ye*ve+xe*_e,ye*Ue+xe*Ee,ye*ue+xe*_e,Ue,ue]}function _n(D,ve,Ee,_e,Ue,ue,ye,xe,B,ie){var M=N*120/180,G=N/180*(+Ue||0),te=[],k,w=X(function(yn,ae,ct){var Mn=yn*S.cos(ct)-ae*S.sin(ct),vi=yn*S.sin(ct)+ae*S.cos(ct);return{x:Mn,y:vi}});if(ie)Rt=ie[0],le=ie[1],ut=ie[2],Tt=ie[3];else{k=w(D,ve,-G),D=k.x,ve=k.y,k=w(xe,B,-G),xe=k.x,B=k.y;var U=(D-xe)/2,pe=(ve-B)/2,Pe=U*U/(Ee*Ee)+pe*pe/(_e*_e);Pe>1&&(Pe=S.sqrt(Pe),Ee=Pe*Ee,_e=Pe*_e);var ze=Ee*Ee,Et=_e*_e,xt=(ue==ye?-1:1)*S.sqrt(F((ze*Et-ze*pe*pe-Et*U*U)/(ze*pe*pe+Et*U*U))),ut=xt*Ee*pe/_e+(D+xe)/2,Tt=xt*-_e*U/Ee+(ve+B)/2,Rt=S.asin(((ve-Tt)/_e).toFixed(9)),le=S.asin(((B-Tt)/_e).toFixed(9));Rt=D<ut?N-Rt:Rt,le=xe<ut?N-le:le,Rt<0&&(Rt=N*2+Rt),le<0&&(le=N*2+le),ye&&Rt>le&&(Rt=Rt-N*2),!ye&&le>Rt&&(le=le-N*2)}var De=le-Rt;if(F(De)>M){var Ie=le,de=xe,He=B;le=Rt+M*(ye&&le>Rt?1:-1),xe=ut+Ee*S.cos(le),B=Tt+_e*S.sin(le),te=_n(xe,B,Ee,_e,Ue,0,ye,de,He,[le,Ie,ut,Tt])}De=le-Rt;var $e=S.cos(Rt),bt=S.sin(Rt),Qe=S.cos(le),Re=S.sin(le),mt=S.tan(De/4),gn=4/3*Ee*mt,en=4/3*_e*mt,Hn=[D,ve],cn=[D+gn*bt,ve-en*$e],Fn=[xe+gn*Re,B-en*Qe],Kt=[xe,B];if(cn[0]=2*Hn[0]-cn[0],cn[1]=2*Hn[1]-cn[1],ie)return[cn,Fn,Kt].concat(te);te=[cn,Fn,Kt].concat(te).join().split(",");for(var In=[],tn=0,nn=te.length;tn<nn;tn++)In[tn]=tn%2?w(te[tn-1],te[tn],G).y:w(te[tn],te[tn+1],G).x;return In}function Fe(D,ve,Ee,_e,Ue,ue,ye,xe){for(var B=[],ie=[[],[]],M,G,te,k,w,U,pe,Pe,ze=0;ze<2;++ze){if(ze==0?(G=6*D-12*Ee+6*Ue,M=-3*D+9*Ee-9*Ue+3*ye,te=3*Ee-3*D):(G=6*ve-12*_e+6*ue,M=-3*ve+9*_e-9*ue+3*xe,te=3*_e-3*ve),F(M)<1e-12){if(F(G)<1e-12)continue;k=-te/G,0<k&&k<1&&B.push(k);continue}pe=G*G-4*te*M,Pe=S.sqrt(pe),!(pe<0)&&(w=(-G+Pe)/(2*M),0<w&&w<1&&B.push(w),U=(-G-Pe)/(2*M),0<U&&U<1&&B.push(U))}for(var Et=B.length,xt=Et,ut;Et--;)k=B[Et],ut=1-k,ie[0][Et]=ut*ut*ut*D+3*ut*ut*k*Ee+3*ut*k*k*Ue+k*k*k*ye,ie[1][Et]=ut*ut*ut*ve+3*ut*ut*k*_e+3*ut*k*k*ue+k*k*k*xe;return ie[0][xt]=D,ie[1][xt]=ve,ie[0][xt+1]=ye,ie[1][xt+1]=xe,ie[0].length=ie[1].length=xt+2,{x0:V.apply(0,ie[0]),y0:V.apply(0,ie[1]),x1:re.apply(0,ie[0]),y1:re.apply(0,ie[1])}}function Je(D){var ve=O(D);if(ve.curve)return K(ve.curve);for(var Ee=Lt(D),_e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Ue=function(k,w,U){var pe,Pe;if(!k)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(!(k[0]in{T:1,Q:1})&&(w.qx=w.qy=null),k[0]){case"M":w.X=k[1],w.Y=k[2];break;case"A":k=["C"].concat(_n.apply(0,[w.x,w.y].concat(k.slice(1))));break;case"S":U=="C"||U=="S"?(pe=w.x*2-w.bx,Pe=w.y*2-w.by):(pe=w.x,Pe=w.y),k=["C",pe,Pe].concat(k.slice(1));break;case"T":U=="Q"||U=="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),k=["C"].concat(Gt(w.x,w.y,w.qx,w.qy,k[1],k[2]));break;case"Q":w.qx=k[1],w.qy=k[2],k=["C"].concat(Gt(w.x,w.y,k[1],k[2],k[3],k[4]));break;case"L":k=["C"].concat(Ht(w.x,w.y,k[1],k[2]));break;case"H":k=["C"].concat(Ht(w.x,w.y,k[1],w.y));break;case"V":k=["C"].concat(Ht(w.x,w.y,w.x,k[1]));break;case"Z":k=["C"].concat(Ht(w.x,w.y,w.X,w.Y));break}return k},ue=function(k,w){if(k[w].length>7){k[w].shift();for(var U=k[w];U.length;)ye[w]="A",k.splice(w++,0,["C"].concat(U.splice(0,6)));k.splice(w,1),M=Ee.length}},ye=[],xe="",B="",ie=0,M=Ee.length;ie<M;ie++){Ee[ie]&&(xe=Ee[ie][0]),xe!="C"&&(ye[ie]=xe,ie&&(B=ye[ie-1])),Ee[ie]=Ue(Ee[ie],_e,B),ye[ie]!="A"&&xe=="C"&&(ye[ie]="C"),ue(Ee,ie);var G=Ee[ie],te=G.length;_e.x=G[te-2],_e.y=G[te-1],_e.bx=z(G[te-4])||_e.x,_e.by=z(G[te-3])||_e.y}return ve.curve=K(Ee),Ee}ot.exports=Xt},80836:function(ot,Be,z){"use strict";z.d(Be,{Lj:function(){return P},Od:function(){return A},R3:function(){return V},Sh:function(){return L},Ue:function(){return rt},ZH:function(){return W},d9:function(){return K},db:function(){return Ue},pH:function(){return Ht},vs:function(){return k},wz:function(){return bn}});function S(w,U){if(w.ownerDocument!==U.ownerDocument)try{return U.ownerDocument.importNode(w,!0)}catch(pe){}return w}function N(w,U){return U.appendChild(S(w,U))}function V(w,U){return N(U,w),w}var re=2,oe={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":re,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":re,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function F(w,U){return oe[U]?w.style[U]:w.getAttributeNS(null,U)}function p(w,U,pe){var Pe=U.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ze=oe[Pe];ze?(ze===re&&typeof pe=="number"&&(pe=String(pe)+"px"),w.style[Pe]=pe):w.setAttributeNS(null,U,pe)}function R(w,U){var pe=Object.keys(U),Pe,ze;for(Pe=0,ze;ze=pe[Pe];Pe++)p(w,ze,U[ze])}function P(w,U,pe){if(typeof U=="string")if(pe!==void 0)p(w,U,pe);else return F(w,U);else R(w,U);return w}function fe(w,U){if(w.indexOf)return w.indexOf(U);for(var pe=0;pe<w.length;++pe)if(w[pe]===U)return pe;return-1}var Z=/\s+/,ee=Object.prototype.toString;function X(w){return typeof w!="undefined"}function L(w){return new O(w)}function O(w){if(!w||!w.nodeType)throw new Error("A DOM element reference is required");this.el=w,this.list=w.classList}O.prototype.add=function(w){if(this.list)return this.list.add(w),this;var U=this.array(),pe=fe(U,w);return~pe||U.push(w),X(this.el.className.baseVal)?this.el.className.baseVal=U.join(" "):this.el.className=U.join(" "),this},O.prototype.remove=function(w){if(ee.call(w)==="[object RegExp]")return this.removeMatching(w);if(this.list)return this.list.remove(w),this;var U=this.array(),pe=fe(U,w);return~pe&&U.splice(pe,1),this.el.className.baseVal=U.join(" "),this},O.prototype.removeMatching=function(w){for(var U=this.array(),pe=0;pe<U.length;pe++)w.test(U[pe])&&this.remove(U[pe]);return this},O.prototype.toggle=function(w,U){return this.list?(X(U)?U!==this.list.toggle(w,U)&&this.list.toggle(w):this.list.toggle(w),this):(X(U)?U?this.add(w):this.remove(w):this.has(w)?this.remove(w):this.add(w),this)},O.prototype.array=function(){var w=this.el.getAttribute("class")||"",U=w.replace(/^\s+|\s+$/g,""),pe=U.split(Z);return pe[0]===""&&pe.shift(),pe},O.prototype.has=O.prototype.contains=function(w){return this.list?this.list.contains(w):!!~fe(this.array(),w)};function A(w){var U=w.parentNode;return U&&U.removeChild(w),w}function W(w){for(var U;U=w.firstChild;)A(U);return w}function K(w){return w.cloneNode(!0)}var se={svg:"http://www.w3.org/2000/svg"},we='<svg xmlns="'+se.svg+'"';function Ge(w){var U=!1;w.substring(0,4)==="<svg"?w.indexOf(se.svg)===-1&&(w=we+w.substring(4)):(w=we+">"+w+"</svg>",U=!0);var pe=ft(w);if(!U)return pe;for(var Pe=document.createDocumentFragment(),ze=pe.firstChild;ze.firstChild;)Pe.appendChild(ze.firstChild);return Pe}function ft(w){var U;return U=new DOMParser,U.async=!1,U.parseFromString(w,"text/xml")}function rt(w,U){var pe;return w.charAt(0)==="<"?(pe=Ge(w).firstChild,pe=document.importNode(pe,!0)):pe=document.createElementNS(se.svg,w),U&&P(pe,U),pe}function yt(w,U,pe,Pe){w.addEventListener(U,pe,Pe)}function st(w,U,pe,Pe){w.removeEventListener(U,pe,Pe)}var Dt=null;function Wt(){return Dt===null&&(Dt=rt("svg")),Dt}function Xt(w,U){var pe,Pe,ze=Object.keys(U);for(pe=0;Pe=ze[pe];pe++)w[Pe]=U[Pe];return w}function Lt(w,U){var pe=Wt().createSVGPoint();switch(arguments.length){case 0:return pe;case 2:w={x:w,y:U};break}return Xt(pe,w)}function bn(w,U,pe,Pe,ze,Et){var xt=Wt().createSVGMatrix();switch(arguments.length){case 0:return xt;case 1:return Xt(xt,w);case 6:return Xt(xt,{a:w,b:U,c:pe,d:Pe,e:ze,f:Et})}}function Ht(w){return w?Wt().createSVGTransformFromMatrix(w):Wt().createSVGTransform()}var Gt=/([&<>]{1})/g,_n=/([\n\r"]{1})/g,Fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Je(w,U){function pe(Pe,ze){return Fe[ze]||ze}return w.replace(U,pe)}function D(w,U){var pe,Pe,ze,Et,xt;switch(w.nodeType){case 3:U.push(Je(w.textContent,Gt));break;case 1:if(U.push("<",w.tagName),w.hasAttributes())for(ze=w.attributes,pe=0,Pe=ze.length;pe<Pe;++pe)Et=ze.item(pe),U.push(" ",Et.name,'="',Je(Et.value,_n),'"');if(w.hasChildNodes()){for(U.push(">"),xt=w.childNodes,pe=0,Pe=xt.length;pe<Pe;++pe)D(xt.item(pe),U);U.push("</",w.tagName,">")}else U.push("/>");break;case 8:U.push("<!--",Je(w.nodeValue,Gt),"-->");break;case 4:U.push("<![CDATA[",w.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+w.nodeType)}return U}function ve(w,U){var pe=Ge(U);if(W(w),!!U){_e(pe)||(pe=pe.documentElement);for(var Pe=ue(pe.childNodes),ze=0;ze<Pe.length;ze++)N(Pe[ze],w)}}function Ee(w){for(var U=w.firstChild,pe=[];U;)D(U,pe),U=U.nextSibling;return pe.join("")}function _e(w){return w.nodeName==="#document-fragment"}function Ue(w,U){if(U!==void 0){try{ve(w,U)}catch(pe){throw new Error("error parsing SVG: "+pe.message)}return w}else return Ee(w)}function ue(w){return Array.prototype.slice.call(w)}function ye(w,U){return w.querySelector(U)}function xe(w,U){var pe=w.querySelectorAll(U);return[].map.call(pe,function(Pe){return Pe})}function B(w,U){return U.insertBefore(S(w,U),U.firstChild||null)}function ie(w,U){return B(U,w),w}function M(w,U){return w.parentNode.replaceChild(S(U,w),w),U}function G(w,U){return U instanceof SVGMatrix?w.createSVGTransformFromMatrix(U):U}function te(w,U){var pe,Pe;for(w.clear(),pe=0;Pe=U[pe];pe++)w.appendItem(G(w,Pe))}function k(w,U){var pe=w.transform.baseVal;return U&&(Array.isArray(U)||(U=[U]),te(pe,U)),pe.consolidate()}},18961:function(ot,Be,z){"use strict";z.d(Be,{f0:function(){return Ee}});function S(B){return Array.prototype.concat.apply([],B)}const N=Object.prototype.toString,V=Object.prototype.hasOwnProperty;function re(B){return B===void 0}function oe(B){return B!==void 0}function F(B){return B==null}function p(B){return N.call(B)==="[object Array]"}function R(B){return N.call(B)==="[object Object]"}function P(B){return N.call(B)==="[object Number]"}function fe(B){const ie=N.call(B);return ie==="[object Function]"||ie==="[object AsyncFunction]"||ie==="[object GeneratorFunction]"||ie==="[object AsyncGeneratorFunction]"||ie==="[object Proxy]"}function Z(B){return N.call(B)==="[object String]"}function ee(B){if(!p(B))throw new Error("must supply array")}function X(B,ie){return!F(B)&&V.call(B,ie)}function L(B,ie){const M=Gt(ie);let G;return W(B,function(te,k){if(M(te,k))return G=te,!1}),G}function O(B,ie){const M=Gt(ie);let G=p(B)?-1:void 0;return W(B,function(te,k){if(M(te,k))return G=k,!1}),G}function A(B,ie){const M=Gt(ie);let G=[];return W(B,function(te,k){M(te,k)&&G.push(te)}),G}function W(B,ie){let M,G;if(re(B))return;const te=p(B)?Fe:_n;for(let k in B)if(X(B,k)&&(M=B[k],G=ie(M,te(k)),G===!1))return M}function K(B,ie){if(re(B))return[];ee(B);const M=Gt(ie);return B.filter(function(G,te){return!M(G,te)})}function se(B,ie,M){return W(B,function(G,te){M=ie(M,G,te)}),M}function we(B,ie){return!!se(B,function(M,G,te){return M&&ie(G,te)},!0)}function Ge(B,ie){return!!L(B,ie)}function ft(B,ie){let M=[];return W(B,function(G,te){M.push(ie(G,te))}),M}function rt(B){return B&&Object.keys(B)||[]}function yt(B){return rt(B).length}function st(B){return ft(B,ie=>ie)}function Dt(B,ie,M={}){return ie=Ht(ie),W(B,function(G){let te=ie(G)||"_",k=M[te];k||(k=M[te]=[]),k.push(G)}),M}function Wt(B,...ie){B=Ht(B);let M={};return W(ie,te=>Dt(te,B,M)),ft(M,function(te,k){return te[0]})}const Xt=null;function Lt(B,ie){ie=Ht(ie);let M=[];return W(B,function(G,te){let k=ie(G,te),w={d:k,v:G};for(var U=0;U<M.length;U++){let{d:pe}=M[U];if(k<pe){M.splice(U,0,w);return}}M.push(w)}),ft(M,G=>G.v)}function bn(B){return function(ie){return we(B,function(M,G){return ie[G]===M})}}function Ht(B){return fe(B)?B:ie=>ie[B]}function Gt(B){return fe(B)?B:ie=>ie===B}function _n(B){return B}function Fe(B){return Number(B)}function Je(B,ie){let M,G,te,k;function w(Et){let xt=Date.now(),ut=Et?0:k+ie-xt;if(ut>0)return U(ut);B.apply(te,G),pe()}function U(Et){M=setTimeout(w,Et)}function pe(){M&&clearTimeout(M),M=k=G=te=void 0}function Pe(){M&&w(!0),pe()}function ze(...Et){k=Date.now(),G=Et,te=this,M||U(ie)}return ze.flush=Pe,ze.cancel=pe,ze}function D(B,ie){let M=!1;return function(...G){M||(B(...G),M=!0,setTimeout(()=>{M=!1},ie))}}function ve(B,ie){return B.bind(ie)}function Ee(B,...ie){return Object.assign(B,...ie)}function _e(B,ie,M){let G=B;return W(ie,function(te,k){if(typeof te!="number"&&typeof te!="string")throw new Error("illegal key type: "+typeof te+". Key should be of type number or string.");if(te==="constructor")throw new Error("illegal key: constructor");if(te==="__proto__")throw new Error("illegal key: __proto__");let w=ie[k+1],U=G[te];oe(w)&&F(U)&&(U=G[te]=isNaN(+w)?{}:[]),re(w)?re(M)?delete G[te]:G[te]=M:G=U}),B}function Ue(B,ie,M){let G=B;return W(ie,function(te){if(F(G))return G=void 0,!1;G=G[te]}),re(G)?M:G}function ue(B,ie){let M={},G=Object(B);return W(ie,function(te){te in G&&(M[te]=B[te])}),M}function ye(B,ie){let M={},G=Object(B);return W(G,function(te,k){ie.indexOf(k)===-1&&(M[k]=te)}),M}function xe(B,...ie){return ie.length&&W(ie,function(M){!M||!R(M)||W(M,function(G,te){if(te==="__proto__")return;let k=B[te];R(G)?(R(k)||(k={}),B[te]=xe(k,G)):B[te]=G})}),B}}}]);
