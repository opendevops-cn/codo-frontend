"use strict";(self.webpackChunkf2=self.webpackChunkf2||[]).push([[8590],{95812:function(ae,R,r){var L=r(26068),p=r.n(L),T=r(67825),B=r.n(T),W=r(1544),Z=r(20877),v=r(52676),t=["alertMessage","children","readOnly","required"],K=function(h){var x=h.alertMessage,j=h.children,P=h.readOnly,F=P===void 0?!1:P,O=h.required,b=B()(h,t);return(0,v.jsxs)(W.Z,p()(p()({},b),{},{required:F?!1:O,style:{marginBottom:0},children:[!F&&(0,v.jsx)("div",{style:{marginBottom:8},children:x&&(0,v.jsx)(Z.Z,{type:"info",showIcon:!0,message:x})}),j]}))};R.Z=K},68590:function(ae,R,r){var L=r(15558),p=r.n(L),T=r(90228),B=r.n(T),W=r(87999),Z=r.n(W),v=r(26068),t=r.n(v),K=r(48305),g=r.n(K),h=r(99503),x=r(95812),j=r(2115),P=r(65496),F=r(41891),O=r(97488),b=r(59050),N=r(82715),M=r(87300),G=r(84249),U=r(40506),z=r(25080),A=r(95104),H=r(67870),J=r(41901),f=r(75271),e=r(52676),oe=function(D){var I=D.formData,Q=D.drawerData,_e=D.onSubmit,C=D.submitterRef,X=D.maxNameLength,ie=X===void 0?16:X,Y=D.disabled,w=Y===void 0?!1:Y,k=D.showCondition,se=k===void 0?!0:k,le=F.A.useForm(),de=g()(le,1),y=de[0],me=(0,f.useState)(function(){return JSON.parse(JSON.stringify(I))}),q=g()(me,2),s=q[0],E=q[1],Fe=(0,f.useState)(0),ee=g()(Fe,2),ue=ee[0],S=ee[1],ce=(0,f.useState)(0),te=g()(ce,2),Ee=te[0],V=te[1],ne=(0,f.useRef)(),re=(0,f.useRef)();(0,f.useEffect)(function(){C&&(C.current={submit:function(){return y.submit()}})},[y,C]);var he=function(n,i){var _=Array.isArray(s.sourceFile)?s.sourceFile:[];if(_.length===0){E(t()(t()({},s),{},{sourceFile:[{pathValue:"",cmdbInfo:{staticHosts:{},dynamiGroup:{},static_hosts:n.static_hosts,dynamic_group:n.dynamic_group,rt_type:n.rt_type}}]}));return}E(t()(t()({},s),{},{sourceFile:_.map(function(u,o){return o===i?t()(t()({},u),{},{cmdbInfo:t()(t()({},u==null?void 0:u.cmdbInfo),{},{static_hosts:n.static_hosts,dynamic_group:n.dynamic_group,rt_type:n.rt_type})}):u})}))},pe=function(n,i){var _=Array.isArray(s.targetPath)?s.targetPath:[];if(_.length===0){E(t()(t()({},s),{},{targetPath:[{pathValue:"",cmdbInfo:{staticHosts:{},dynamiGroup:{},static_hosts:n.static_hosts,dynamic_group:n.dynamic_group,rt_type:n.rt_type}}]}));return}E(t()(t()({},s),{},{targetPath:_.map(function(u,o){return o===i?t()(t()({},u),{},{cmdbInfo:t()(t()({},u==null?void 0:u.cmdbInfo),{},{static_hosts:n.static_hosts,dynamic_group:n.dynamic_group,rt_type:n.rt_type})}):u})}))};(0,f.useEffect)(function(){var c,n,i,_,u=JSON.parse(JSON.stringify(I));u.sourceFile&&(u.sourceFile=u.sourceFile.map(function(o){var a=t()({},o);if(a.cmdbInfo){var d,l;((d=a.cmdbInfo.dynamic_group)===null||d===void 0?void 0:d.length)>0?a.cmdbInfo.rt_type="dynamicGroup":((l=a.cmdbInfo.static_hosts)===null||l===void 0?void 0:l.length)>0&&(a.cmdbInfo.rt_type="ipSearch")}return a})),u.targetPath&&(u.targetPath=u.targetPath.map(function(o){var a=t()({},o);if(a.cmdbInfo){var d,l;((d=a.cmdbInfo.dynamic_group)===null||d===void 0?void 0:d.length)>0?a.cmdbInfo.rt_type="dynamicGroup":((l=a.cmdbInfo.static_hosts)===null||l===void 0?void 0:l.length)>0&&(a.cmdbInfo.rt_type="ipSearch")}return a})),E(u),S(((c=u.sourceFile)===null||c===void 0?void 0:c.length)||0),V(((n=u.targetPath)===null||n===void 0?void 0:n.length)||0),y.setFieldsValue(t()(t()({},u),{},{sourceFile:(i=u.sourceFile)===null||i===void 0?void 0:i.map(function(o){return{pathValue:o.pathValue,cmdbInfo:o.cmdbInfo}}),targetPath:(_=u.targetPath)===null||_===void 0?void 0:_.map(function(o){return{pathValue:o.pathValue,cmdbInfo:o.cmdbInfo}}),time_out:u.time_out||1800,rate_limit:u.rate_limit||100,same_origin:u.same_origin||"2",sync_mode:u.sync_mode||"1",task_condition:u.task_condition||""}))},[y,I]);var fe=function(){var c=Z()(B()().mark(function n(i){var _,u;return B()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!Array.isArray(s.sourceFile)||s.sourceFile.length===0)){a.next=3;break}return M.ZP.warning("\u6E90\u6587\u4EF6\u4E0D\u80FD\u4E3A\u7A7A"),a.abrupt("return",!1);case 3:if(!(!Array.isArray(s.targetPath)||s.targetPath.length===0)){a.next=6;break}return M.ZP.warning("\u76EE\u6807\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A"),a.abrupt("return",!1);case 6:if(_=s.sourceFile.findIndex(function(d){var l,m;return!((l=d.cmdbInfo)!==null&&l!==void 0&&(l=l.static_hosts)!==null&&l!==void 0&&l.length)&&!((m=d.cmdbInfo)!==null&&m!==void 0&&(m=m.dynamic_group)!==null&&m!==void 0&&m.length)}),_===-1){a.next=10;break}return M.ZP.warning("\u6587\u4EF6\u8DEF\u5F84 ".concat(_+1," \u7684\u6E90\u4E3B\u673A\u5217\u8868\u4E0D\u80FD\u4E3A\u7A7A")),a.abrupt("return",!1);case 10:if(u=s.targetPath.findIndex(function(d){var l,m;return!((l=d.cmdbInfo)!==null&&l!==void 0&&(l=l.static_hosts)!==null&&l!==void 0&&l.length)&&!((m=d.cmdbInfo)!==null&&m!==void 0&&(m=m.dynamic_group)!==null&&m!==void 0&&m.length)}),u===-1){a.next=14;break}return M.ZP.warning("\u76EE\u6807\u8DEF\u5F84\u7684\u76EE\u6807\u4E3B\u673A\u5217\u8868\u4E0D\u80FD\u4E3A\u7A7A"),a.abrupt("return",!1);case 14:return _e(t()(t()({},s),{},{name:i.name,time_out:i.time_out,rate_limit:i.rate_limit,same_origin:i.same_origin,sync_mode:i.sync_mode,task_condition:i.task_condition,bpm_id:I.bpm_id,need_skip:"yes",need_retry:"yes",force_retry:"yes",need_break:"yes"})),a.abrupt("return",!0);case 16:case"end":return a.stop()}},n)}));return function(i){return c.apply(this,arguments)}}(),De=function(){var n=(0,e.jsx)(O.u,{name:"sourceFile",actionRef:ne,creatorButtonProps:!1,min:0,copyIconProps:!1,onAfterRemove:function(_){S(function(o){return o-1});var u=p()(s.sourceFile||[]);typeof _=="number"&&(u.splice(_,1),E(t()(t()({},s),{},{sourceFile:u})))},itemRender:function(_,u){var o,a=_.action,d=u.index;return(0,e.jsxs)(b.Z,{bordered:!0,extra:a,title:(0,e.jsx)("span",{children:"\u6E90\u6587\u4EF6"}),style:{marginBlockEnd:8},children:[(0,e.jsx)(F.A.Item,{labelCol:{span:2},name:"pathValue",label:"\u6587\u4EF6\u8DEF\u5F84",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8DEF\u5F84"}],tooltip:{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"\u4F20\u8F93\u81F3linux\u670D\u52A1\u5668\u9700\u4EE5/\u5F00\u5934\u7684\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u5982\uFF1A/data/xx"}),(0,e.jsx)("p",{children:"\u4F20\u8F93\u81F3windows\u670D\u52A1\u5668\u9700\u5305\u542B\u76D8\u7B26\u5F00\u5934, \u5982: D:\\tmp\\"}),(0,e.jsx)("p",{children:"\u53EF\u901A\u8FC7\u56DE\u8F66\u5206\u9694\u591A\u4E2A\u8DEF\u5F84"})]}),overlayStyle:{maxWidth:500}},children:(0,e.jsx)(G.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u8DEF\u5F84",maxLength:250,allowClear:!0,onChange:function(m){var Ae=m.target.value,$=p()(s.sourceFile||[]);$[d]=t()(t()({},$[d]),{},{pathValue:Ae}),E(t()(t()({},s),{},{sourceFile:$}))}})}),(0,e.jsx)(h.oH,{drawerData:Q,formData:((o=s.sourceFile)===null||o===void 0||(o=o[d])===null||o===void 0?void 0:o.cmdbInfo)||{},onChange:function(m){return he(m,d)},label:"\u6E90\u4E3B\u673A"})]})}});return ue>0?(0,e.jsx)(b.Z,{title:"\u5DF2\u9009\u62E9 ".concat(ue," \u4E2A\u6587\u4EF6"),collapsible:!0,bordered:!0,style:{marginBottom:16},children:n}):n};return(0,e.jsxs)(F.A,{form:y,onFinish:fe,layout:"horizontal",labelCol:{flex:"120px"},submitter:C?!1:{searchConfig:{submitText:"\u786E\u8BA4",resetText:"\u53D6\u6D88"}},formRef:C,disabled:w,children:[(0,e.jsx)(U.Z,{orientation:"left",children:"\u57FA\u672C\u4FE1\u606F"}),(0,e.jsx)(N.Z,{name:"name",label:"\u4EFB\u52A1\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",fieldProps:{maxLength:ie},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0"}]}),(0,e.jsx)(F.A.Item,{label:"\u8D85\u65F6\u65F6\u957F",name:"time_out",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D85\u65F6\u65F6\u957F"}],children:(0,e.jsx)(z.Z,{addonAfter:"s",style:{width:"100%"}})}),(0,e.jsx)(F.A.Item,{label:"\u4E0B\u8F7D\u9650\u901F",name:"rate_limit",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0B\u8F7D\u9650\u901F"}],children:(0,e.jsx)(z.Z,{addonAfter:"MB/s",style:{width:"100%"}})}),se&&(0,e.jsx)(x.Z,{label:"\u6267\u884C\u6761\u4EF6",alertMessage:"\u8868\u8FBE\u5F0F\u89C4\u5219\u652F\u6301 != == >= > <= < or and\u7B49\uFF0C\u793A\u4F8B\uFF1A miao=='195cm' and chezi=='911' or fangzi=='tangchenyipin' and fangzi!=None and fangzi!='' \u6216\u8005'apple' in mobile_phone\uFF0C\u503C\u6B63\u5219\u4E3A\uFF1AA-Za-z0-9_'\uFF0C\u6CE8\u610F\u5224\u65AD\u7B26\u53F7\u4E0D\u80FD\u6709\u7A7A\u683C\uFF0C\u5982\u679C\u88AB\u5224\u65AD\u7684\u53D8\u91CF\u4E0D\u5B58\u5728\u5219\u9ED8\u8BA4\u4E3A\u7A7A\u5B57\u7B26\u4E32'' \u6BCF\u4E2A\u8FDE\u7EBF\u6700\u591A\u652F\u6301\u4E09\u4E2A\u672A\u5B9A\u4E49\u53D8\u91CF",children:(0,e.jsx)(N.Z,{name:"task_condition",fieldProps:{placeholder:"\u4E0D\u6EE1\u8DB3\u6267\u884C\u6761\u4EF6\u7684\u4EFB\u52A1\u5C06\u4F1A\u88AB\u5FFD\u7565\uFF0C\u9ED8\u8BA4\u4E3A\u7A7A\uFF0C\u4E0D\u5224\u65AD"}})}),(0,e.jsx)(U.Z,{orientation:"left",children:"\u6587\u4EF6\u4FE1\u606F"}),(0,e.jsx)(F.A.Item,{label:"\u6E90\u6587\u4EF6\u76F8\u540C",name:"same_origin",tooltip:{title:"\u82E5\u8BE5\u9009\u9879\u9009\u62E9\u300C\u76F8\u540C\u300D\uFF0C\u5219\u4EE3\u8868\u4F20\u8F93\u6587\u4EF6\u4E3A\u76F8\u540C\u6587\u4EF6\u3002\u82E5\u9009\u62E9\u4E0D\u540C\u6587\u4EF6\uFF0C\u4F20\u8F93\u4EFB\u52A1\u5931\u8D25\u3002",icon:(0,e.jsx)(j.Z,{})},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6E90\u6587\u4EF6\u662F\u5426\u76F8\u540C"}],children:(0,e.jsxs)(A.ZP.Group,{children:[(0,e.jsx)(A.ZP,{value:"1",children:"\u76F8\u540C"}),(0,e.jsx)(A.ZP,{value:"2",children:"\u4E0D\u540C"})]})}),(0,e.jsxs)(F.A.Item,{label:"\u6E90\u6587\u4EF6",required:!0,children:[(0,e.jsx)(H.Z,{style:{marginBottom:16},children:(0,e.jsx)(J.ZP,{type:"primary",icon:(0,e.jsx)(P.Z,{}),onClick:function(){var n;(n=ne.current)===null||n===void 0||n.add({pathValue:""}),S(function(i){return i+1})},children:"\u6DFB\u52A0\u670D\u52A1\u5668\u6587\u4EF6"})}),De()]}),(0,e.jsx)(U.Z,{orientation:"left",children:"\u76EE\u6807\u4FE1\u606F"}),(0,e.jsx)(F.A.Item,{label:"\u4F20\u8F93\u6A21\u5F0F",name:"sync_mode",tooltip:{title:(0,e.jsxs)("div",{children:["\u5F3A\u5236\u6A21\u5F0F\uFF1A\u5F3A\u5236\u6309\u7167\u7528\u6237\u6307\u5B9A\u7684\u76EE\u6807\u8DEF\u5F84\u8FDB\u884C\u4F20\u8F93\uFF0C\u82E5\u5B58\u5728\u91CD\u590D\u6587\u4EF6\u5219\u4F1A\u81EA\u52A8\u8986\u76D6\uFF1B\u76EE\u6807\u8DEF\u5F84\u4E0D\u5B58\u5728\u65F6\uFF0C\u5219\u4F1A\u65B0\u5EFA\u76EE\u5F55",(0,e.jsx)("br",{}),"\u4E25\u8C28\u6A21\u5F0F: \u91CD\u547D\u540D\u6587\u4EF6, \u91CD\u547D\u540D\u89C4\u5219: \u5185\u7F51ip-\u6587\u4EF6\u539F\u540D"]}),icon:(0,e.jsx)(j.Z,{})},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4F20\u8F93\u6A21\u5F0F"}],children:(0,e.jsxs)(A.ZP.Group,{children:[(0,e.jsx)(A.ZP,{value:"1",children:"\u5F3A\u5236\u6A21\u5F0F"}),(0,e.jsx)(A.ZP,{value:"2",children:"\u4E25\u8C28\u6A21\u5F0F"})]})}),(0,e.jsxs)(F.A.Item,{label:"\u76EE\u6807\u8DEF\u5F84",required:!0,children:[(0,e.jsx)(H.Z,{style:{marginBottom:16},children:(0,e.jsx)(J.ZP,{type:"primary",icon:(0,e.jsx)(P.Z,{}),onClick:function(){var n;(n=re.current)===null||n===void 0||n.add({pathValue:""}),V(function(i){return i+1})},disabled:Ee>=1||w,children:"\u6DFB\u52A0\u670D\u52A1\u5668"})}),(0,e.jsx)(O.u,{name:"targetPath",actionRef:re,creatorButtonProps:!1,min:0,copyIconProps:!1,onAfterRemove:function(n){V(function(_){return _-1});var i=p()(s.targetPath||[]);typeof n=="number"&&(i.splice(n,1),E(t()(t()({},s),{},{targetPath:i})))},itemRender:function(n,i){var _,u=n.action,o=i.index;return(0,e.jsxs)(b.Z,{bordered:!0,extra:u,title:(0,e.jsx)("span",{children:"\u76EE\u6807\u8DEF\u5F84"}),style:{marginBlockEnd:8},children:[(0,e.jsx)(F.A.Item,{labelCol:{span:2},name:"pathValue",label:"\u76EE\u6807\u8DEF\u5F84",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u76EE\u6807\u8DEF\u5F84"}],tooltip:{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"\u4F20\u8F93\u81F3linux\u670D\u52A1\u5668\u9700\u4EE5/\u5F00\u5934\u7684\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u5982\uFF1A/data/xx"}),(0,e.jsx)("p",{children:"\u4F20\u8F93\u81F3windows\u670D\u52A1\u5668\u9700\u5305\u542B\u76D8\u7B26\u5F00\u5934, \u5982: D:\\tmp\\"}),(0,e.jsx)("p",{children:"\u53EF\u901A\u8FC7\u56DE\u8F66\u5206\u9694\u591A\u4E2A\u8DEF\u5F84"})]}),overlayStyle:{maxWidth:500}},children:(0,e.jsx)(G.Z,{placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807\u8DEF\u5F84",maxLength:250,allowClear:!0,onChange:function(d){var l=d.target.value,m=p()(s.targetPath||[]);m[o]=t()(t()({},m[o]),{},{pathValue:l}),E(t()(t()({},s),{},{targetPath:m}))}})}),(0,e.jsx)(h.oH,{drawerData:Q,formData:((_=s.targetPath)===null||_===void 0||(_=_[o])===null||_===void 0?void 0:_.cmdbInfo)||{},onChange:function(d){return pe(d,o)},label:"\u76EE\u6807\u4E3B\u673A"})]})}})]})]})};R.Z=oe}}]);
