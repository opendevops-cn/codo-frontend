"use strict";(self.webpackChunkservermgmt=self.webpackChunkservermgmt||[]).push([[122],{41379:function(te,C,e){var T=e(26068),n=e.n(T),D=e(48305),l=e.n(D),O=e(90801),i=e(27610),_=e(82113),F=e(50959),z=e(11527),x=function(v){var s,p,g,M,L,N=v.label,m=v.syncUrlParams,de=m===void 0?!0:m,_e=v.disabled,V=_e===void 0?!1:_e,R=v.display,f=R===void 0?!0:R,ee=(0,O.useModel)("@@initialState"),S=ee.initialState,ue=ee.setInitialState,ie=(0,_.Z)("tenantid",{defaultValue:"502",serializer:function(r){return r},deserializer:function(r){return r}}),le=l()(ie,2),k=le[0],B=le[1],E=(0,_.Z)("tenant",{defaultValue:"",serializer:function(r){return r},deserializer:function(r){return r}}),A=l()(E,2),H=A[0],Y=A[1],Z=(S==null||(s=S.bizListData)===null||s===void 0?void 0:s.data)||[],y=(p=(g=S==null?void 0:S.currentBizId)!==null&&g!==void 0?g:k)!==null&&p!==void 0?p:"502",re=(M=(L=S==null?void 0:S.currentBizName)!==null&&L!==void 0?L:H)!==null&&M!==void 0?M:"",ve=(0,O.useSearchParams)(),me=l()(ve,2),pe=me[0],fe=me[1];return(0,F.useEffect)(function(){var K=new URLSearchParams(pe.toString());K.set("tenantid",y),K.set("tenant",re),fe(K),B(y),Y(re)},[y,re]),(0,z.jsx)(i.Z,{name:"tenantid",label:N,showSearch:!0,allowClear:!1,fieldProps:{defaultValue:y,disabled:V},valueEnum:Z.reduce(function(K,r){return K[r.biz_id]=r.biz_cn_name,K},{}),style:n()({width:200},f?{}:{display:"none"}),placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE"}],onChange:function(r,Ee){if(de){var se=Ee.title,ce=new URLSearchParams(pe.toString());ce.set("tenantid",r),ce.set("tenant",se),fe(ce),B(r),Y(se),ue(n()(n()({},S),{},{currentBizId:r,currentBizName:se}))}}})};C.Z=x},60602:function(te,C,e){e.d(C,{j:function(){return n}});var T=e(90801);function n(D,l,O,i,_){var F=(0,T.useRequest)(D(l,O),{manual:!0,onSuccess:function(v){var s,p;v.code!==-1&&(_==null||_.success(v.msg)),i==null||(s=i.current)===null||s===void 0||(p=s.reloadAndRest)===null||p===void 0||p.call(s)},onError:function(){_==null||_.error("\u64CD\u4F5C\u5931\u8D25")}}),z=F.run,x=F.loading;return{runOpt:z,loading:x}}},16934:function(te,C,e){e.d(C,{t:function(){return T}});var T=function(n){return n[n.Development=0]="Development",n[n.Test=1]="Test",n[n.Production=2]="Production",n}({})},66777:function(te,C,e){var T=e(90228),n=e.n(T),D=e(87999),l=e.n(D),O=e(26068),i=e.n(O),_=e(48305),F=e.n(_),z=e(94071),x=e(49547),I=e(78420),v=e(27610),s=e(19014),p=e(35748),g=e(34927),M=e(20902),L=e(47698),N=e(50959),m=e(11527),de=function(V){var R=V.mode,f=V.initialValues,ee=V.onFinish,S=V.trigger,ue=V.environmentOptions,ie=x.A.useForm(),le=F()(ie,1),k=le[0];return(0,m.jsxs)(I.a,{title:R==="create"?"\u65B0\u5EFA\u5927\u533A":"\u7F16\u8F91\u5927\u533A",form:k,drawerProps:{maskClosable:!1},onOpenChange:function(E){E?R==="create"?k.setFieldsValue({visible:!0,is_test:!0,enable:!0,env_id:f==null?void 0:f.env_id}):R==="edit"&&f&&k.setFieldsValue(i()(i()({},f),{},{env_id:Number(f==null?void 0:f.env_id)})):k.resetFields()},onFinish:function(){var B=l()(n()().mark(function E(A){var H;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,ee(A);case 2:if(H=Z.sent,!H){Z.next=5;break}return Z.abrupt("return",!0);case 5:return Z.abrupt("return",!1);case 6:case"end":return Z.stop()}},E)}));return function(E){return B.apply(this,arguments)}}(),layout:"horizontal",labelCol:{span:4},trigger:S,children:[(0,m.jsx)(v.Z,{name:"env_id",label:"\u73AF\u5883",options:(ue!=null?ue:[]).map(function(B){return i()(i()({},B),{},{label:(0,z.Dv)(B.env_type,B.label)})}),disabled:R==="edit",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u73AF\u5883"}]}),(0,m.jsx)(s.Z,{name:"name",label:"\u5927\u533A\u540D",placeholder:"\u8BF7\u8F93\u5165\u5927\u533A\u540D\u79F0",fieldProps:{maxLength:100},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5927\u533A\u540D\u79F0"}]}),(0,m.jsx)(s.Z,{name:"big_area",label:"\u5927\u533A\u7F16\u53F7",placeholder:"\u8BF7\u8F93\u5165\u5927\u533A\u7F16\u53F7",fieldProps:{maxLength:50,disabled:R==="edit"},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5927\u533A\u7F16\u53F7"},{validator:function(){var B=l()(n()().mark(function A(H,Y){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:case 1:case"end":return y.stop()}},A)}));function E(A,H){return B.apply(this,arguments)}return E}()}]}),(0,m.jsx)(v.Z,{name:"tags",label:"\u5927\u533A\u6807\u7B7E",mode:"tags",placeholder:"\u8BF7\u8F93\u5165/\u9009\u62E9\u5927\u533A\u6807\u7B7E\uFF0C\u652F\u6301\u591A\u4E2A\u6807\u7B7E",fieldProps:{maxTagCount:5,tokenSeparators:[","],onChange:function(E){Array.isArray(E)&&E.length>20&&(L.ZP.warning("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E"),k.setFieldsValue({tags:E.slice(0,20)}))}},rules:[{validator:function(){var B=l()(n()().mark(function A(H,Y){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(Array.isArray(Y)&&Y.length>20)){y.next=2;break}throw new Error("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E");case 2:case"end":return y.stop()}},A)}));function E(A,H){return B.apply(this,arguments)}return E}()}]}),(0,m.jsx)(s.Z,{name:"idip",label:"IDIP\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165IDIP\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u8F93\u5165IDIP\u5730\u5740"}]}),(0,m.jsx)(s.Z,{name:"app_secret",label:"AppSecret",placeholder:"\u8BF7\u8F93\u5165AppSecret",rules:[{required:!0,message:"\u8BF7\u8F93\u5165AppSecret"}]}),(0,m.jsx)(s.Z,{name:"address",label:"ping\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u5927\u533A\u5730\u5740\uFF0C\u53EF\u7528\u4E8Eping\u5927\u533A\u5EF6\u8FDF",fieldProps:{maxLength:50}}),(0,m.jsx)(p.Z,{name:"utc_offset",label:"UTC\u65F6\u95F4\u504F\u79FB",min:-12,max:14,fieldProps:{precision:0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165UTC\u65F6\u95F4\u504F\u79FB"}]}),(0,m.jsx)(g.Z.Group,{name:"visible",label:"\u73A9\u5BB6\u53EF\u89C1",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}],required:!0}),(0,m.jsx)(s.Z,{name:"protocol_converter_host",label:"GM\u56DE\u8C03\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165GM\u56DE\u8C03\u5730\u5740",fieldProps:{maxLength:1e3}}),(0,m.jsx)(M.Z,{name:"ext",label:"\u6269\u5C55\u4FE1\u606F",placeholder:"\u8BF7\u8F93\u5165\u6269\u5C55\u4FE1\u606F",fieldProps:{maxLength:500}})]})};C.Z=de},16497:function(te,C,e){e.r(C),e.d(C,{default:function(){return Ae}});var T=e(26068),n=e.n(T),D=e(90228),l=e.n(D),O=e(87999),i=e.n(O),_=e(48305),F=e.n(_),z=e(41379),x=e(60602),I=e(12876),v=e(58207),s=e(41841),p=e(94071),g=e(90801),M=e(40460),L=e(75343),N=e(16030),m=e(59349),de=e(31381),_e=e(44599),V=e(47698),R=e(38546),f=e(12400),ee=e(54748),S=e(63463),ue=e(36735),ie=e(23885),le=e(50159),k=e(41268),B=e(5726),E=e.n(B),A=e(50959),H=e(66777),Y=e(49547),Z=e(78420),y=e(19014),re=e(27610),ve=e(34927),me=e(35748),pe=e(20902),fe=e(58499),K=e(16934),r=e(11527),Ee=function(ne){var $=ne.mode,c=ne.initialValues,J=ne.onFinish,q=ne.trigger,be=Y.A.useForm(),he=F()(be,1),Q=he[0],ae=(c==null?void 0:c.env_type)===K.t.Production,ge=(c==null?void 0:c.open_timestamp)&&E()().isAfter(E()(c.open_timestamp));return(0,r.jsxs)(Z.a,{title:$==="create"?"\u65B0\u5EFA\u533A\u670D":"\u7F16\u8F91\u533A\u670D",form:Q,drawerProps:{maskClosable:!1},onOpenChange:function(o){o?$==="create"?Q.setFieldsValue(n()(n()({},c),{},{is_top:!0,visible:!0})):$==="edit"&&c&&Q.setFieldsValue(n()({},c)):Q.resetFields()},onFinish:function(){var w=i()(l()().mark(function o(h){var X;return l()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,J(n()(n()({},h),{},{open_timestamp:E()(h.open_timestamp).valueOf()}));case 2:if(X=U.sent,!X){U.next=5;break}return U.abrupt("return",!0);case 5:return U.abrupt("return",!1);case 6:case"end":return U.stop()}},o)}));return function(o){return w.apply(this,arguments)}}(),layout:"horizontal",labelCol:{span:4},trigger:q,children:[(0,r.jsx)(y.Z,{name:"name",label:"\u533A\u670D\u540D",placeholder:"\u8BF7\u8F93\u5165\u533A\u670D\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u533A\u670D\u540D\u79F0"}]}),(0,r.jsx)(y.Z,{name:"area",label:"\u533A\u670D\u7F16\u53F7",placeholder:"\u8BF7\u8F93\u5165\u533A\u670D\u7F16\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u533A\u670D\u7F16\u53F7"}],disabled:$==="edit"}),(0,r.jsx)(re.Z,{name:"tags",label:"\u533A\u670D\u6807\u7B7E",mode:"tags",placeholder:"\u8BF7\u8F93\u5165/\u9009\u62E9\u533A\u670D\u6807\u7B7E\uFF0C\u652F\u6301\u591A\u4E2A\u6807\u7B7E",fieldProps:{maxTagCount:5,tokenSeparators:[","],onChange:function(o){Array.isArray(o)&&o.length>10&&(V.ZP.warning("\u6700\u591A\u53EA\u80FD\u9009\u62E910\u4E2A\u6807\u7B7E"),Q.setFieldsValue({tags:o.slice(0,10)}))}},rules:[{validator:function(){var w=i()(l()().mark(function h(X,G){return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(Array.isArray(G)&&G.length>10)){b.next=2;break}throw new Error("\u6700\u591A\u53EA\u80FD\u9009\u62E910\u4E2A\u6807\u7B7E");case 2:case"end":return b.stop()}},h)}));function o(h,X){return w.apply(this,arguments)}return o}()}]}),(0,r.jsx)(re.Z,{name:"gate_address",label:"\u5FAE\u670D\u52A1\u7F51\u5173\u5730\u5740",mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u5FAE\u670D\u52A1\u7F51\u5173\u5730\u5740\uFF0C\u652F\u6301\u591A\u4E2A\u6807\u7B7E",tooltip:$==="edit"&&ae?"\u751F\u4EA7\u73AF\u5883\u4E0D\u5141\u8BB8\u7F16\u8F91\u5FAE\u670D\u52A1\u7F51\u5173\u5730\u5740\uFF0C\u8BF7\u8054\u7CFB\u8FD0\u7EF4\u4FEE\u6539":void 0,fieldProps:{maxTagCount:5,tokenSeparators:[","],onChange:function(o){Array.isArray(o)&&o.length>20&&(V.ZP.warning("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E"),Q.setFieldsValue({gate_address:o.slice(0,20)}))}},disabled:$==="edit"&&ae,rules:[{required:!0},{validator:function(){var w=i()(l()().mark(function h(X,G){return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(Array.isArray(G)&&G.length>20)){b.next=2;break}throw new Error("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E");case 2:case"end":return b.stop()}},h)}));function o(h,X){return w.apply(this,arguments)}return o}()}]}),(0,r.jsx)(re.Z,{name:"game_gate_address",label:"\u6E38\u620F\u670D\u7F51\u5173\u5730\u5740",mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u6E38\u620F\u670D\u7F51\u5173\u5730\u5740\uFF0C\u652F\u6301\u591A\u4E2A\u6807\u7B7E",tooltip:$==="edit"&&ae?"\u751F\u4EA7\u73AF\u5883\u4E0D\u5141\u8BB8\u7F16\u8F91\u6E38\u620F\u670D\u7F51\u5173\u5730\u5740\uFF0C\u8BF7\u8054\u7CFB\u8FD0\u7EF4\u4FEE\u6539":void 0,fieldProps:{maxTagCount:5,tokenSeparators:[","],onChange:function(o){Array.isArray(o)&&o.length>20&&(V.ZP.warning("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E"),Q.setFieldsValue({game_gate_address:o.slice(0,20)}))}},disabled:$==="edit"&&ae,rules:[{validator:function(){var w=i()(l()().mark(function h(X,G){return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(Array.isArray(G)&&G.length>20)){b.next=2;break}throw new Error("\u6700\u591A\u53EA\u80FD\u9009\u62E920\u4E2A\u6807\u7B7E");case 2:case"end":return b.stop()}},h)}));function o(h,X){return w.apply(this,arguments)}return o}()}]}),(0,r.jsx)(re.Z,{name:"state",label:"\u533A\u670D\u72B6\u6001",options:[{label:"\u7EF4\u62A4\u4E2D",value:0},{label:"\u6D41\u7545",value:1},{label:"\u62E5\u6324",value:2},{label:"\u706B\u7206",value:3}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u533A\u670D\u72B6\u6001"}]}),(0,r.jsx)(ve.Z.Group,{name:"is_top",label:"\u662F\u5426\u7F6E\u9876",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]}),(0,r.jsx)(ve.Z.Group,{name:"visible",label:"\u73A9\u5BB6\u53EF\u89C1",options:[{label:"\u662F",value:!0},{label:"\u5426",value:!1}]}),(0,r.jsx)(me.Z,{name:"max_reg_count",label:"\u6700\u5927\u6CE8\u518C\u4EBA\u6570",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u5927\u6CE8\u518C\u4EBA\u6570"}]}),(0,r.jsx)(me.Z,{name:"max_alive_count",label:"\u6700\u5927\u5728\u7EBF\u4EBA\u6570",min:0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u5927\u5728\u7EBF\u4EBA\u6570"}]}),(0,r.jsx)(pe.Z,{name:"ext",label:"\u6269\u5C55\u4FE1\u606F",placeholder:"\u8BF7\u8F93\u5165\u6269\u5C55\u4FE1\u606F"}),(0,r.jsx)(fe.Z,{name:"open_timestamp",label:"\u5F00\u670D\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u670D\u65F6\u95F4"}],disabled:$==="edit"&&ae&&ge,tooltip:$==="edit"&&ae&&ge?"\u751F\u4EA7\u73AF\u5883\u4E0B\u5F53\u524D\u65F6\u95F4\u8D85\u8FC7\u5F00\u670D\u65F6\u95F4\u540E\uFF0C\u5F00\u670D\u65F6\u95F4\u4E0D\u5141\u8BB8\u7F16\u8F91":void 0})]})},se=Ee,ce=function(){var ne,$=(0,g.useLocation)(),c=new URLSearchParams($.search).get("env_id"),J=(ne=$.pathname.split("/").pop())!==null&&ne!==void 0?ne:"",q=(0,A.useRef)(),be=(0,A.useState)(""),he=F()(be,2),Q=he[0],ae=he[1],ge=(0,_e.Z)(Q,{wait:300}),w=V.ZP.useMessage(),o=F()(w,2),h=o[0],X=o[1],G=(0,A.useState)(null),U=F()(G,2),b=U[0],Ce=U[1],Me=(0,A.useState)(!0),De=F()(Me,2),Be=De[0],ye=De[1],Te=(0,A.useState)([]),Fe=F()(Te,2),Ie=Fe[0],Le=Fe[1],Re=(0,s.f)(),Se=Re.styles,Oe=function(){var P=i()(l()().mark(function a(){var t;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!c){u.next=15;break}return u.prev=1,u.next=4,(0,I.xA)({big_area:J,env_id:Number(c)});case 4:t=u.sent,t&&t.length>0?Ce(t[0]):h.error("Failed to fetch region data"),u.next=12;break;case 8:u.prev=8,u.t0=u.catch(1),console.error("Error fetching region data:",u.t0),h.error("An error occurred while fetching region data");case 12:return u.prev=12,ye(!1),u.finish(12);case 15:case"end":return u.stop()}},a,null,[[1,8,12,15]])}));return function(){return P.apply(this,arguments)}}(),Ze=function(){var P=i()(l()().mark(function a(){var t;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,I.Rm)();case 3:t=u.sent,Le(t.map(function(j){return{label:j.env_name,value:j.id,env_type:j.env_type}})),u.next=11;break;case 7:u.prev=7,u.t0=u.catch(0),console.error("Failed to fetch environment list:",u.t0),h.error("\u83B7\u53D6\u73AF\u5883\u5217\u8868\u5931\u8D25");case 11:case"end":return u.stop()}},a,null,[[0,7]])}));return function(){return P.apply(this,arguments)}}();(0,A.useEffect)(function(){Oe(),Ze()},[c,h]);var Ue=(0,x.j)(I._q,"/".concat(v.Hg,"/cmdb/cbb_area/big_area/"),"PUT",q,h),We=Ue.runOpt,xe=(0,x.j)(I._q,"/".concat(v.Hg,"/cmdb/cbb_area/area/"),"DELETE",q,h),Ke=xe.runOpt,$e=xe.loading,we=(0,x.j)(I._q,"/".concat(v.Hg,"/cmdb/cbb_area/area/"),"PUT",q,h),Ve=we.runOpt,ze=(0,x.j)(I._q,"/".concat(v.Hg,"/cmdb/cbb_area/area/"),"POST",q,h),Ge=ze.runOpt,Ne=[{title:"\u533A\u670D\u540D",dataIndex:"name",width:150,ellipsis:!0},{title:"\u533A\u670D\u7F16\u53F7",dataIndex:"area",ellipsis:!0,width:200},{title:"\u533A\u670D\u6807\u7B7E",dataIndex:"tags",width:200,render:function(a,t){return(0,r.jsx)(R.Z,{title:(t.tags||[]).join(", "),children:(0,r.jsx)("div",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,overflow:"hidden",textOverflow:"ellipsis"},children:(t.tags||[]).map(function(d){return(0,r.jsx)(f.Z,{style:{marginTop:"4px",marginBottom:"4px"},children:d},d)})})})}},{title:"\u533A\u670D\u72B6\u6001",dataIndex:"state",width:100,render:function(a){var t="default",d="\u672A\u77E5";switch(a){case 0:t="red",d="\u7EF4\u62A4\u4E2D";break;case 1:t="green",d="\u6D41\u7545";break;case 2:t="orange",d="\u62E5\u6324";break;case 3:t="volcano",d="\u706B\u7206";break}return(0,r.jsx)(f.Z,{color:t,children:d})}},{title:"\u7F6E\u9876",dataIndex:"is_top",width:90,render:function(a){return a?(0,r.jsx)(f.Z,{color:"green",children:"\u662F"}):(0,r.jsx)(f.Z,{color:"red",children:"\u5426"})}},{title:"\u73A9\u5BB6\u53EF\u89C1",dataIndex:"visible",width:90,render:function(a){return a?(0,r.jsx)(f.Z,{color:"green",children:"\u662F"}):(0,r.jsx)(f.Z,{color:"red",children:"\u5426"})}},{title:"\u6700\u5927\u6CE8\u518C\u4EBA\u6570",dataIndex:"max_reg_count",width:100},{title:"\u6700\u5927\u5728\u7EBF\u4EBA\u6570",dataIndex:"max_alive_count",width:200},{title:"\u6269\u5C55\u4FE1\u606F",dataIndex:"ext",width:200},{title:"\u5FAE\u670D\u52A1\u7F51\u5173\u5730\u5740",dataIndex:"gate_address",width:200,render:function(a){var t=Array.isArray(a)?a:[a],d=t.slice(0,3),u=t.length>3;return(0,r.jsx)(R.Z,{title:t.join(`
`),children:(0,r.jsxs)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:[d.map(function(j,W){return(0,r.jsx)("div",{children:j},W)}),u&&(0,r.jsx)("div",{children:"..."})]})})}},{title:"\u6E38\u620F\u670D\u7F51\u5173\u5730\u5740",dataIndex:"game_gate_address",width:200,render:function(a){var t=Array.isArray(a)?a:[a],d=t.slice(0,3),u=t.length>3;return(0,r.jsx)(R.Z,{title:t.join(`
`),children:(0,r.jsxs)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:[d.map(function(j,W){return(0,r.jsx)("div",{children:j},W)}),u&&(0,r.jsx)("div",{children:"..."})]})})}},{title:"\u5F00\u670D\u65F6\u95F4",dataIndex:"open_timestamp",width:200,render:function(a){return E()(a).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:120,fixed:"right",render:function(a,t){return[(0,r.jsx)(se,{mode:"edit",initialValues:t,onFinish:function(){var d=i()(l()().mark(function u(j){var W,Pe;return l()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,Ve(n()(n()({},j),{},{env_id:Number(c),big_area:J}));case 2:return W=oe.sent,W&&((Pe=q.current)===null||Pe===void 0||Pe.reload()),oe.abrupt("return",W);case 5:case"end":return oe.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),trigger:(0,r.jsx)(ee.Z.Link,{children:"\u7F16\u8F91"})},"edit"),(0,r.jsx)(S.Z,{title:"\u5220\u9664\u533A\u670D",description:(0,r.jsxs)(r.Fragment,{children:["\u5220\u9664\u533A\u670D ",t.name," \u4E4B\u540E\u65E0\u6CD5\u627E\u56DE\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"]}),onConfirm:function(){Ke({area:t.area,env_id:Number(c),big_area:J})},okButtonProps:{loading:$e},children:(0,r.jsx)(ee.Z.Link,{type:"danger",children:"\u5220\u9664"})},"delete")]}}];return(0,r.jsxs)(N._z,{title:!1,ghost:!1,loading:Be,extra:(0,r.jsx)(z.Z,{disabled:!0}),className:Se.pageContainer,children:[X,(0,r.jsxs)(ue.Z,{direction:"vertical",style:{width:"100%"},children:[b&&(0,r.jsx)(ie.Z,{children:(0,r.jsx)(m.vY,{title:"\u5927\u533A\u8BE6\u60C5",dataSource:b,extra:[b&&(0,r.jsx)(H.Z,{mode:"edit",initialValues:b,environmentOptions:Ie,onFinish:function(){var P=i()(l()().mark(function a(t){var d;return l()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,We(t);case 2:return d=j.sent,d&&Oe(),j.abrupt("return",d);case 5:case"end":return j.stop()}},a)}));return function(a){return P.apply(this,arguments)}}(),trigger:(0,r.jsx)(le.ZP,{type:"primary",children:"\u7F16\u8F91"})},"edit")],columns:[{title:"\u5927\u533A\u540D",dataIndex:"name"},{title:"\u5927\u533A\u7F16\u53F7",dataIndex:"big_area",ellipsis:!0},{title:"\u5927\u533A\u6807\u7B7E",dataIndex:"tags",render:function(a){return(0,r.jsx)(R.Z,{title:a!=null?a:[].join(", "),children:(0,r.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a!=null?a:[].map(function(t){return(0,r.jsx)(f.Z,{style:{marginBottom:"4px"},children:t},t)})})})}},{title:"\u73A9\u5BB6\u53EF\u89C1",dataIndex:"visible",render:function(a){return a?(0,r.jsx)(f.Z,{color:"green",children:"\u662F"}):(0,r.jsx)(f.Z,{color:"red",children:"\u5426"})}},{title:"UTC\u65F6\u95F4\u504F\u79FB",dataIndex:"utc_offset"},{title:"IDIP\u5730\u5740",dataIndex:"idip"},{title:"ping\u5730\u5740",dataIndex:"address"},{title:"\u73AF\u5883",dataIndex:"env_name",render:function(a,t){return(0,p.Dv)(t.env_type,t.env_name)}},{title:"GM\u56DE\u8C03\u5730\u5740",dataIndex:"protocol_converter_host",ellipsis:!0},{title:"\u6269\u5C55\u4FE1\u606F",dataIndex:"ext",ellipsis:!0,span:3}]})}),(0,r.jsx)(ie.Z,{bodyStyle:{paddingTop:8},children:(0,r.jsx)(de.Z,{actionRef:q,params:{searchValue:ge,env_id:Number(c),big_area:J},rowKey:"area",search:!1,request:c&&J?(0,I.RT)(Number(c),J):void 0,columns:Ne,scroll:{x:1200},pagination:{defaultPageSize:10,showSizeChanger:!0},toolbar:{title:(0,r.jsx)(ee.Z.Title,{level:5,children:"\u533A\u670D\u5217\u8868"}),search:(0,r.jsx)(k.Z,{prefix:(0,r.jsx)(M.Z,{}),style:{width:400},placeholder:" \u6A21\u7CCA\u641C\u7D22\u533A\u670D\u540D\u3001\u533A\u670D\u7F16\u53F7\u3001\u533A\u670D\u6807\u7B7E\u3001\u6269\u5C55\u4FE1\u606F",allowClear:!0,value:Q,onChange:function(a){return ae(a.target.value)}}),actions:[(0,r.jsx)(se,{mode:"create",initialValues:{env_id:Number(c),big_area:J,max_reg_count:1e4,max_alive_count:1e4},onFinish:function(){var P=i()(l()().mark(function a(t){var d,u;return l()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Ge(n()(n()({},t),{},{env_id:Number(c),big_area:J}));case 2:return d=W.sent,d&&((u=q.current)===null||u===void 0||u.reload()),W.abrupt("return",d);case 5:case"end":return W.stop()}},a)}));return function(a){return P.apply(this,arguments)}}(),trigger:(0,r.jsx)(le.ZP,{type:"primary",icon:(0,r.jsx)(L.Z,{}),children:"\u65B0\u5EFA\u533A\u670D"},"addServer")},"create")]},cardProps:{bodyStyle:{padding:0}}})})]})]})},Ae=ce},12876:function(te,C,e){e.d(C,{B9:function(){return _},RT:function(){return F},Rm:function(){return s},_q:function(){return v},xA:function(){return z}});var T=e(90228),n=e.n(T),D=e(87999),l=e.n(D),O=e(58207),i=e(60996);function _(g,M){return g?(0,i.Jl)("/".concat(O.Hg,"/cmdb/cbb_area/big_area/"),{env_id:g,env_type:M}):l()(n()().mark(function L(){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",{data:[],success:!0,total:0});case 1:case"end":return m.stop()}},L)}))}function F(g,M){return(0,i.Jl)("/".concat(O.Hg,"/cmdb/cbb_area/area/"),{env_id:g,big_area:M})}function z(g){return x.apply(this,arguments)}function x(){return x=l()(n()().mark(function g(M){return n()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,i.dT)("/".concat(O.Hg,"/cmdb/cbb_area/big_area/detail/"),M));case 1:case"end":return N.stop()}},g)})),x.apply(this,arguments)}function I(){return commonGetListForTable2("/api/job/v1/flow/design/draft/")}function v(g,M){return(0,i.S_)(g,M)}function s(){return p.apply(this,arguments)}function p(){return p=l()(n()().mark(function g(){return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,i.dT)("/".concat(O.Hg,"/cmdb/cbb_area/env/list/")));case 1:case"end":return L.stop()}},g)})),p.apply(this,arguments)}},41841:function(te,C,e){e.d(C,{f:function(){return O}});var T=e(53649),n=e.n(T),D=e(13179),l,O=(0,D.kc)(function(i){var _=i.css;return{pageContainer:{"& .ant-page-header-heading-extra":_(l||(l=n()([`
      position: absolute;
      top: 17px;
      right: 20px;
    `])))}}})},94071:function(te,C,e){e.d(C,{Dv:function(){return I},MD:function(){return F},nt:function(){return x}});var T=e(82092),n=e.n(T),D=e(16934),l=e(12400),O=e(38546),i=e(50959),_=e(11527),F=n()(n()(n()({},D.t.Production,"\u6B63\u5F0F"),D.t.Test,"\u6D4B\u8BD5"),D.t.Development,"\u5F00\u53D1"),z=function(s){var p=n()(n()(n()({},D.t.Production,"red"),D.t.Test,"blue"),D.t.Development,"green");return p[s]},x=function(s){return(0,_.jsx)(l.Z,{color:z(s),children:F[s]})},I=function(s,p){return(0,_.jsx)(O.Z,{title:p,children:(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:2,overflow:"hidden"},children:[x(s),(0,_.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p})]})})}}}]);
